"use strict";var pPe=Object.defineProperty,mPe=Object.defineProperties,gPe=Object.getOwnPropertyDescriptors,d7=Object.getOwnPropertySymbols,_Pe=Object.prototype.hasOwnProperty,yPe=Object.prototype.propertyIsEnumerable,h7=(zi,oi,Si)=>oi in zi?pPe(zi,oi,{enumerable:!0,configurable:!0,writable:!0,value:Si}):zi[oi]=Si,f7=(zi,oi)=>{for(var Si in oi||(oi={}))_Pe.call(oi,Si)&&h7(zi,Si,oi[Si]);if(d7)for(var Si of d7(oi))yPe.call(oi,Si)&&h7(zi,Si,oi[Si]);return zi},p7=(zi,oi)=>mPe(zi,gPe(oi));(self.webpackChunkwynyard=self.webpackChunkwynyard||[]).push([[179],{692:(zi,oi,Si)=>{var Kd={};function Ze(n){return"function"==typeof n}function pw(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Si.r(Kd),Si.d(Kd,{FirebaseError:()=>Ri,SDK_VERSION:()=>_s,_DEFAULT_ENTRY_NAME:()=>hl,_addComponent:()=>C_,_addOrOverwriteComponent:()=>a2,_apps:()=>Yo,_clearComponents:()=>Fse,_components:()=>Xh,_getProvider:()=>Qr,_registerComponent:()=>on,_removeServiceInstance:()=>Nse,deleteApp:()=>l2,getApp:()=>Zo,getApps:()=>P0,initializeApp:()=>Er,onLog:()=>c2,registerVersion:()=>$e,setLogLevel:()=>u2});const mw=pw(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Lm(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class et{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ze(i))try{i()}catch(s){e=s instanceof mw?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{f1(s)}catch(o){e=null!=e?e:[],o instanceof mw?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mw(e)}}add(e){var t;if(e&&e!==this)if(this.closed)f1(e);else{if(e instanceof et){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lm(t,e)}remove(e){const{_finalizers:t}=this;t&&Lm(t,e),e instanceof et&&e._removeParent(this)}}et.EMPTY=(()=>{const n=new et;return n.closed=!0,n})();const d1=et.EMPTY;function h1(n){return n instanceof et||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function f1(n){Ze(n)?n():n.unsubscribe()}const Ga={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vm={setTimeout(n,e,...t){const{delegate:i}=Vm;return(null==i?void 0:i.setTimeout)?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Vm;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function p1(n){Vm.setTimeout(()=>{const{onUnhandledError:e}=Ga;if(!e)throw n;e(n)})}function Bm(){}const m7=gw("C",void 0,void 0);function gw(n,e,t){return{kind:n,value:e,error:t}}let Wa=null;function Um(n){if(Ga.useDeprecatedSynchronousErrorHandling){const e=!Wa;if(e&&(Wa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Wa;if(Wa=null,t)throw i}}else n()}class _w extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,h1(e)&&e.add(this)):this.destination=C7}static create(e,t,i){return new Qd(e,t,i)}next(e){this.isStopped?vw(function _7(n){return gw("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?vw(function g7(n){return gw("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vw(m7,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const v7=Function.prototype.bind;function yw(n,e){return v7.call(n,e)}class b7{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Hm(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Hm(i)}else Hm(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hm(t)}}}class Qd extends _w{constructor(e,t,i){let r;if(super(),Ze(e)||!e)r={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=i?i:void 0};else{let s;this&&Ga.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&yw(e.next,s),error:e.error&&yw(e.error,s),complete:e.complete&&yw(e.complete,s)}):r=e}this.destination=new b7(r)}}function Hm(n){Ga.useDeprecatedSynchronousErrorHandling?function y7(n){Ga.useDeprecatedSynchronousErrorHandling&&Wa&&(Wa.errorThrown=!0,Wa.error=n)}(n):p1(n)}function vw(n,e){const{onStoppedNotification:t}=Ga;t&&Vm.setTimeout(()=>t(n,e))}const C7={closed:!0,next:Bm,error:function w7(n){throw n},complete:Bm},bw="function"==typeof Symbol&&Symbol.observable||"@@observable";function Po(n){return n}let nt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function T7(n){return n&&n instanceof _w||function E7(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}(n)&&h1(n)}(t)?t:new Qd(t,i,r);return Um(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=g1(i))((r,s)=>{const o=new Qd({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[bw](){return this}pipe(...t){return function m1(n){return 0===n.length?Po:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=g1(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function g1(n){var e;return null!==(e=null!=n?n:Ga.Promise)&&void 0!==e?e:Promise}const I7=pw(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ne=(()=>{class n extends nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new _1(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new I7}next(t){Um(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Um(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Um(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?d1:(this.currentObservers=null,s.push(t),new et(()=>{this.currentObservers=null,Lm(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new nt;return t.source=this,t}}return n.create=(e,t)=>new _1(e,t),n})();class _1 extends ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:d1}}function y1(n){return Ze(null==n?void 0:n.lift)}function Vt(n){return e=>{if(y1(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(n,e,t,i,r){return new D7(n,e,t,i,r)}class D7 extends _w{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ae(n,e){return Vt((t,i)=>{let r=0;t.subscribe(Et(i,s=>{i.next(n.call(e,s,r++))}))})}function b1(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function qa(n){return this instanceof qa?(this.v=n,this):new qa(n)}function M7(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof qa?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function A7(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function C1(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Cw=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function E1(n){return Ze(null==n?void 0:n.then)}function T1(n){return Ze(n[bw])}function I1(n){return Symbol.asyncIterator&&Ze(null==n?void 0:n[Symbol.asyncIterator])}function D1(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const S1=function R7(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function x1(n){return Ze(null==n?void 0:n[S1])}function M1(n){return M7(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield qa(t.read());if(r)return yield qa(void 0);yield yield qa(i)}}finally{t.releaseLock()}})}function A1(n){return Ze(null==n?void 0:n.getReader)}function xi(n){if(n instanceof nt)return n;if(null!=n){if(T1(n))return function P7(n){return new nt(e=>{const t=n[bw]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Cw(n))return function O7(n){return new nt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(E1(n))return function N7(n){return new nt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,p1)})}(n);if(I1(n))return k1(n);if(x1(n))return function F7(n){return new nt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(A1(n))return function L7(n){return k1(M1(n))}(n)}throw D1(n)}function k1(n){return new nt(e=>{(function V7(n,e){var t,i,r,s;return function S7(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=A7(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function zs(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function tn(n,e,t=1/0){return Ze(e)?tn((i,r)=>Ae((s,o)=>e(i,s,r,o))(xi(n(i,r))),t):("number"==typeof e&&(t=e),Vt((i,r)=>function B7(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let y=!1;xi(t(g,u++)).subscribe(Et(e,b=>{null==r||r(b),s?f(b):e.next(b)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){const b=l.shift();o?zs(e,o,()=>p(b)):p(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(Et(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,t)))}function Yd(n=1/0){return tn(Po,n)}const hr=new nt(n=>n.complete());function R1(n){return n&&Ze(n.schedule)}function Ew(n){return n[n.length-1]}function P1(n){return Ze(Ew(n))?n.pop():void 0}function Xd(n){return R1(Ew(n))?n.pop():void 0}function jm(n,e=0){return Vt((t,i)=>{t.subscribe(Et(i,r=>zs(i,n,()=>i.next(r),e),()=>zs(i,n,()=>i.complete(),e),r=>zs(i,n,()=>i.error(r),e)))})}function $m(n,e=0){return Vt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function O1(n,e){if(!n)throw new Error("Iterable cannot be null");return new nt(t=>{zs(t,e,()=>{const i=n[Symbol.asyncIterator]();zs(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Bn(n,e){return e?function q7(n,e){if(null!=n){if(T1(n))return function j7(n,e){return xi(n).pipe($m(e),jm(e))}(n,e);if(Cw(n))return function z7(n,e){return new nt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(E1(n))return function $7(n,e){return xi(n).pipe($m(e),jm(e))}(n,e);if(I1(n))return O1(n,e);if(x1(n))return function G7(n,e){return new nt(t=>{let i;return zs(t,e,()=>{i=n[S1](),zs(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ze(null==i?void 0:i.return)&&i.return()})}(n,e);if(A1(n))return function W7(n,e){return O1(M1(n),e)}(n,e)}throw D1(n)}(n,e):xi(n)}function Or(...n){const e=Xd(n),t=function H7(n,e){return"number"==typeof Ew(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?xi(i[0]):Yd(t)(Bn(i,e)):hr}function N1(n={}){const{connector:e=(()=>new ne),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return Vt((g,y)=>{c++,!d&&!u&&h();const b=l=null!=l?l:e();y.add(()=>{c--,0===c&&!d&&!u&&(a=Tw(p,r))}),b.subscribe(y),!o&&c>0&&(o=new Qd({next:v=>b.next(v),error:v=>{d=!0,h(),a=Tw(f,t,v),b.error(v)},complete:()=>{u=!0,h(),a=Tw(f,i),b.complete()}}),xi(g).subscribe(o))})(s)}}function Tw(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Qd({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function Iw(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function tt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(tt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Dw(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const K7=ut({__forward_ref__:ut});function it(n){return n.__forward_ref__=it,n.toString=function(){return tt(this())},n}function Ee(n){return F1(n)?n():n}function F1(n){return"function"==typeof n&&n.hasOwnProperty(K7)&&n.__forward_ref__===it}class W extends Error{constructor(e,t){super(function Sw(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function _e(n){return"string"==typeof n?n:null==n?"":String(n)}function ai(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():_e(n)}function zm(n,e){const t=e?` in ${e}`:"";throw new W(-201,`No provider for ${ai(n)} found${t}`)}function Wi(n,e){null==n&&function wt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function he(n){return{providers:n.providers||[],imports:n.imports||[]}}function xw(n){return L1(n,Gm)||L1(n,B1)}function L1(n,e){return n.hasOwnProperty(e)?n[e]:null}function V1(n){return n&&(n.hasOwnProperty(Mw)||n.hasOwnProperty(tQ))?n[Mw]:null}const Gm=ut({\u0275prov:ut}),Mw=ut({\u0275inj:ut}),B1=ut({ngInjectableDef:ut}),tQ=ut({ngInjectorDef:ut});var ue=(()=>((ue=ue||{})[ue.Default=0]="Default",ue[ue.Host=1]="Host",ue[ue.Self=2]="Self",ue[ue.SkipSelf=4]="SkipSelf",ue[ue.Optional=8]="Optional",ue))();let Aw;function Oo(n){const e=Aw;return Aw=n,e}function U1(n,e,t){const i=xw(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ue.Optional?null:void 0!==e?e:void zm(tt(n),"Injector")}function No(n){return{toString:n}.toString()}var Nr=(()=>((Nr=Nr||{})[Nr.OnPush=0]="OnPush",Nr[Nr.Default=1]="Default",Nr))(),Fr=(()=>{return(n=Fr||(Fr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Fr;var n})();const iQ="undefined"!=typeof globalThis&&globalThis,rQ="undefined"!=typeof window&&window,sQ="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rt=iQ||"undefined"!=typeof global&&global||rQ||sQ,Rc={},dt=[],Wm=ut({\u0275cmp:ut}),kw=ut({\u0275dir:ut}),Rw=ut({\u0275pipe:ut}),H1=ut({\u0275mod:ut}),Ws=ut({\u0275fac:ut}),Zd=ut({__NG_ELEMENT_ID__:ut});let oQ=0;function Te(n){return No(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Nr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||dt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Fr.Emulated,id:"c",styles:n.styles||dt,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=oQ++,i.inputs=G1(n.inputs,t),i.outputs=G1(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(j1):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map($1):null,i})}function j1(n){return Qn(n)||function Fo(n){return n[kw]||null}(n)}function $1(n){return function Ka(n){return n[Rw]||null}(n)}const z1={};function ye(n){return No(()=>{const e={type:n.type,bootstrap:n.bootstrap||dt,declarations:n.declarations||dt,imports:n.imports||dt,exports:n.exports||dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(z1[n.id]=n.type),e})}function G1(n,e){if(null==n)return Rc;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const O=Te;function Qn(n){return n[Wm]||null}function fr(n,e){const t=n[H1]||null;if(!t&&!0===e)throw new Error(`Type ${tt(n)} does not have '\u0275mod' property.`);return t}function rs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Vr(n){return Array.isArray(n)&&!0===n[1]}function Nw(n){return 0!=(8&n.flags)}function Ym(n){return 2==(2&n.flags)}function Xm(n){return 1==(1&n.flags)}function Br(n){return null!==n.template}function hQ(n){return 0!=(512&n[2])}function Za(n,e){return n.hasOwnProperty(Ws)?n[Ws]:null}class mQ{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Kt(){return q1}function q1(n){return n.type.prototype.ngOnChanges&&(n.setInput=_Q),gQ}function gQ(){const n=Q1(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Rc)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function _Q(n,e,t,i){const r=Q1(n)||function yQ(n,e){return n[K1]=e}(n,{previous:Rc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new mQ(l&&l.currentValue,e,o===Rc),n[i]=e}Kt.ngInherit=!0;const K1="__ngSimpleChanges__";function Q1(n){return n[K1]||null}let Uw;function Bt(n){return!!n.listen}const Y1={createRenderer:(n,e)=>function Hw(){return void 0!==Uw?Uw:"undefined"!=typeof document?document:void 0}()};function nn(n){for(;Array.isArray(n);)n=n[0];return n}function Zm(n,e){return nn(e[n])}function gr(n,e){return nn(e[n.index])}function jw(n,e){return n.data[e]}function Ki(n,e){const t=e[n];return rs(t)?t:t[0]}function X1(n){return 4==(4&n[2])}function $w(n){return 128==(128&n[2])}function Lo(n,e){return null==e?null:n[e]}function Z1(n){n[18]=0}function zw(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const de={lFrame:oO(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function J1(){return de.bindingsEnabled}function M(){return de.lFrame.lView}function Ge(){return de.lFrame.tView}function st(n){return de.lFrame.contextLView=n,n[8]}function fn(){let n=eO();for(;null!==n&&64===n.type;)n=n.parent;return n}function eO(){return de.lFrame.currentTNode}function ss(n,e){const t=de.lFrame;t.currentTNode=n,t.isParent=e}function Gw(){return de.lFrame.isParent}function Ww(){de.lFrame.isParent=!1}function Jm(){return de.isInCheckNoChangesMode}function eg(n){de.isInCheckNoChangesMode=n}function li(){const n=de.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Vc(){return de.lFrame.bindingIndex++}function NQ(n,e){const t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,qw(e)}function qw(n){de.lFrame.currentDirectiveIndex=n}function Kw(n){const e=de.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function iO(){return de.lFrame.currentQueryIndex}function Qw(n){de.lFrame.currentQueryIndex=n}function LQ(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function rO(n,e,t){if(t&ue.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ue.Host||(r=LQ(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=de.lFrame=sO();return i.currentTNode=e,i.lView=n,!0}function tg(n){const e=sO(),t=n[1];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sO(){const n=de.lFrame,e=null===n?null:n.child;return null===e?oO(n):e}function oO(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function aO(){const n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const lO=aO;function ng(){const n=aO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ci(){return de.lFrame.selectedIndex}function Vo(n){de.lFrame.selectedIndex=n}function Ut(){const n=de.lFrame;return jw(n.tView,n.selectedIndex)}function ig(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function rg(n,e,t){uO(n,e,3,t)}function sg(n,e,t,i){(3&n[2])===t&&uO(n,e,t,i)}function Yw(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function uO(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(GQ(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function GQ(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ih{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function og(n,e,t){const i=Bt(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];Zw(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function dO(n){return 3===n||4===n||6===n}function Zw(n){return 64===n.charCodeAt(0)}function ag(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||hO(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function hO(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function fO(n){return-1!==n}function Bc(n){return 32767&n}function Uc(n,e){let t=function YQ(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Jw=!0;function lg(n){const e=Jw;return Jw=n,e}let XQ=0;function sh(n,e){const t=tC(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,eC(i.data,n),eC(e,null),eC(i.blueprint,null));const r=cg(n,e),s=n.injectorIndex;if(fO(r)){const o=Bc(r),a=Uc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function eC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function tC(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function cg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function ug(n,e,t){!function ZQ(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Zd)&&(i=t[Zd]),null==i&&(i=t[Zd]=XQ++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function gO(n,e,t){if(t&ue.Optional)return n;zm(e,"NodeInjector")}function _O(n,e,t,i){if(t&ue.Optional&&void 0===i&&(i=null),0==(t&(ue.Self|ue.Host))){const r=n[9],s=Oo(void 0);try{return r?r.get(e,i,t&ue.Optional):U1(e,i,t&ue.Optional)}finally{Oo(s)}}return gO(i,e,t)}function yO(n,e,t,i=ue.Default,r){if(null!==n){const s=function nY(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Zd)?n[Zd]:void 0;return"number"==typeof e?e>=0?255&e:eY:e}(t);if("function"==typeof s){if(!rO(e,n,i))return i&ue.Host?gO(r,t,i):_O(e,t,i,r);try{const o=s(i);if(null!=o||i&ue.Optional)return o;zm(t)}finally{lO()}}else if("number"==typeof s){let o=null,a=tC(n,e),l=-1,c=i&ue.Host?e[16][6]:null;for((-1===a||i&ue.SkipSelf)&&(l=-1===a?cg(n,e):e[a+8],-1!==l&&wO(i,!1)?(o=e[1],a=Bc(l),e=Uc(l,e)):a=-1);-1!==a;){const u=e[1];if(bO(s,a,u.data)){const d=tY(a,e,t,o,i,c);if(d!==vO)return d}l=e[a+8],-1!==l&&wO(i,e[1].data[a+8]===c)&&bO(s,a,e)?(o=u,a=Bc(l),e=Uc(l,e)):a=-1}}}return _O(e,t,i,r)}const vO={};function eY(){return new Hc(fn(),M())}function tY(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=dg(a,o,t,null==i?Ym(a)&&Jw:i!=o&&0!=(3&a.type),r&ue.Host&&s===a);return null!==u?oh(e,o,u,a):vO}function dg(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Br(f)&&f.type===t)return l}return null}function oh(n,e,t,i){let r=n[t];const s=e.data;if(function WQ(n){return n instanceof ih}(r)){const o=r;o.resolving&&function Q7(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new W(-200,`Circular dependency in DI detected for ${n}${t}`)}(ai(s[t]));const a=lg(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Oo(o.injectImpl):null;rO(n,i,ue.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function zQ(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=q1(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Oo(l),lg(a),o.resolving=!1,lO()}}return r}function bO(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function wO(n,e){return!(n&ue.Self||n&ue.Host&&e)}class Hc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return yO(this._tNode,this._lView,e,i,t)}}function Cn(n){return No(()=>{const e=n.prototype.constructor,t=e[Ws]||nC(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ws]||nC(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function nC(n){return F1(n)?()=>{const e=nC(Ee(n));return e&&e()}:Za(n)}function Ja(n){return function JQ(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(dO(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(fn(),n)}const $c="__parameters__";function Gc(n,e,t){return No(()=>{const i=function iC(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty($c)?l[$c]:Object.defineProperty(l,$c,{value:[]})[$c];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class k{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rY=new k("AnalyzeForEntryComponents");function _r(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),_r(i,e)):e!==n&&e.push(i)}return e}function os(n,e){n.forEach(t=>Array.isArray(t)?os(t,e):e(t))}function EO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ch(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Qi(n,e,t){let i=Wc(n,e);return i>=0?n[1|i]=t:(i=~i,function aY(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function sC(n,e){const t=Wc(n,e);if(t>=0)return n[1|t]}function Wc(n,e){return function DO(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const uh={},aC="__NG_DI_FLAG__",pg="ngTempTokenPath",pY=/\n/gm,xO="__source",gY=ut({provide:String,useValue:ut});let dh;function MO(n){const e=dh;return dh=n,e}function _Y(n,e=ue.Default){if(void 0===dh)throw new W(203,"");return null===dh?U1(n,void 0,e):dh.get(n,e&ue.Optional?null:void 0,e)}function I(n,e=ue.Default){return(function nQ(){return Aw}()||_Y)(Ee(n),e)}const mg=I;function lC(n){const e=[];for(let t=0;t<n.length;t++){const i=Ee(n[t]);if(Array.isArray(i)){if(0===i.length)throw new W(900,"");let r,s=ue.Default;for(let o=0;o<i.length;o++){const a=i[o],l=yY(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(I(r,s))}else e.push(I(i))}return e}function hh(n,e){return n[aC]=e,n.prototype[aC]=e,n}function yY(n){return n[aC]}const gg=hh(Gc("Inject",n=>({token:n})),-1),Le=hh(Gc("Optional"),8),qc=hh(Gc("SkipSelf"),4);let yg;function Qc(n){var e;return(null===(e=function uC(){if(void 0===yg&&(yg=null,rt.trustedTypes))try{yg=rt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return yg}())||void 0===e?void 0:e.createHTML(n))||n}class el{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kY extends el{getTypeName(){return"HTML"}}class RY extends el{getTypeName(){return"Style"}}class PY extends el{getTypeName(){return"Script"}}class OY extends el{getTypeName(){return"URL"}}class NY extends el{getTypeName(){return"ResourceURL"}}function Yi(n){return n instanceof el?n.changingThisBreaksApplicationSecurity:n}function as(n,e){const t=VO(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function VO(n){return n instanceof el&&n.getTypeName()||null}class HY{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Qc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class jY{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Qc(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Qc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const zY=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,GY=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ph(n){return(n=String(n)).match(zY)||n.match(GY)?n:"unsafe:"+n}function UO(n){return(n=String(n)).split(",").map(e=>ph(e.trim())).join(", ")}function ls(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function mh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const HO=ls("area,br,col,hr,img,wbr"),jO=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$O=ls("rp,rt"),hC=mh(HO,mh(jO,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mh($O,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mh($O,jO)),fC=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pC=ls("srcset"),zO=mh(fC,pC,ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),WY=ls("script,style,template");class qY{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!hC.hasOwnProperty(t))return this.sanitizedSomething=!0,!WY.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!zO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;fC[a]&&(l=ph(l)),pC[a]&&(l=UO(l)),this.buf.push(" ",o,'="',GO(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();hC.hasOwnProperty(t)&&!HO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(GO(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const KY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,QY=/([^\#-~ |!])/g;function GO(n){return n.replace(/&/g,"&amp;").replace(KY,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(QY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bg;function WO(n,e){let t=null;try{bg=bg||function BO(n){const e=new jY(n);return function $Y(){try{return!!(new window.DOMParser).parseFromString(Qc(""),"text/html")}catch(n){return!1}}()?new HY(e):e}(n);let i=e?String(e):"";t=bg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=bg.getInertBodyElement(i)}while(i!==s);return Qc((new qY).sanitizeChildren(mC(t)||t))}finally{if(t){const i=mC(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function mC(n){return"content"in n&&function YY(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function ui(n){const e=function gh(){const n=M();return n&&n[12]}();return e?e.sanitize(Ye.URL,n)||"":as(n,"URL")?Yi(n):ph(_e(n))}const QO="__ngContext__";function Xn(n,e){n[QO]=e}function _C(n){const e=function _h(n){return n[QO]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function vC(n){return n.ngOriginalError}function f9(n,...e){n.error(...e)}class Uo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function h9(n){return n&&n.ngErrorLogger||f9}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vC(e);for(;t&&vC(t);)t=vC(t);return t||null}}const E9=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rt))();function cs(n){return n instanceof Function?n():n}var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();function wC(n,e){return undefined(n,e)}function yh(n){const e=n[3];return Vr(e)?e[3]:e}function CC(n){return rN(n[13])}function EC(n){return rN(n[4])}function rN(n){for(;null!==n&&!Vr(n);)n=n[4];return n}function Xc(n,e,t,i,r){if(null!=i){let s,o=!1;Vr(i)?s=i:rs(i)&&(o=!0,i=i[0]);const a=nn(i);0===n&&null!==t?null==r?uN(e,t,a):tl(e,t,a,r||null,!0):1===n&&null!==t?tl(e,t,a,r||null,!0):2===n?function _N(n,e,t){const i=wg(n,e);i&&function L9(n,e,t,i){Bt(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function U9(n,e,t,i,r){const s=t[7];s!==nn(t)&&Xc(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];vh(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function IC(n,e,t){if(Bt(n))return n.createElement(e,t);{const i=null!==t?function CQ(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function oN(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,zw(r,-1)),t.splice(i,1)}function DC(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&oN(r,i),e>0&&(n[t-1][4]=i[4]);const s=hg(n,10+e);!function M9(n,e){vh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function aN(n,e){if(!(256&e[2])){const t=e[11];Bt(t)&&t.destroyNode&&vh(n,e,t,3,null,null),function R9(n){let e=n[13];if(!e)return SC(n[1],n);for(;e;){let t=null;if(rs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)rs(e)&&SC(e[1],e),e=e[3];null===e&&(e=n),rs(e)&&SC(e[1],e),t=e&&e[4]}e=t}}(e)}}function SC(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function F9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof ih)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function N9(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):nn(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Bt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Vr(e[3])){t!==e[3]&&oN(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function lN(n,e,t){return function cN(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Fr.None||r===Fr.Emulated)return null}return gr(i,t)}(n,e.parent,t)}function tl(n,e,t,i,r){Bt(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function uN(n,e,t){Bt(n)?n.appendChild(e,t):e.appendChild(t)}function dN(n,e,t,i,r){null!==i?tl(n,e,t,i,r):uN(n,e,t)}function wg(n,e){return Bt(n)?n.parentNode(e):e.parentNode}function hN(n,e,t){return pN(n,e,t)}let pN=function fN(n,e,t){return 40&n.type?gr(n,t):null};function Cg(n,e,t,i){const r=lN(n,i,e),s=e[11],a=hN(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)dN(s,r,t[l],a,!1);else dN(s,r,t,a,!1)}function Eg(n,e){if(null!==e){const t=e.type;if(3&t)return gr(e,n);if(4&t)return MC(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Eg(n,i);{const r=n[e.index];return Vr(r)?MC(-1,r):nn(r)}}if(32&t)return wC(e,n)()||nn(n[e.index]);{const i=gN(n,e);return null!==i?Array.isArray(i)?i[0]:Eg(yh(n[16]),i):Eg(n,e.next)}}return null}function gN(n,e){return null!==e?n[16][6].projection[e.projection]:null}function MC(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Eg(i,r)}return e[7]}function AC(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Xn(nn(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)AC(n,e,t.child,i,r,s,!1),Xc(e,n,r,a,s);else if(32&l){const c=wC(t,i);let u;for(;u=c();)Xc(e,n,r,u,s);Xc(e,n,r,a,s)}else 16&l?yN(n,e,i,t,r,s):Xc(e,n,r,a,s);t=o?t.projectionNext:t.next}}function vh(n,e,t,i,r,s){AC(t,i,n.firstChild,e,r,s,!1)}function yN(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Xc(e,n,r,l[c],s);else AC(n,e,l,o[3],r,s,!0)}function vN(n,e,t){Bt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function kC(n,e,t){Bt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function bN(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const wN="ng-template";function j9(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==bN(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function CN(n){return 4===n.type&&n.value!==wN}function $9(n,e,t){return e===(4!==n.type||t?n.value:wN)}function z9(n,e,t){let i=4;const r=n.attrs||[],s=function q9(n){for(let e=0;e<n.length;e++)if(dO(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!$9(n,l,t)||""===l&&1===e.length){if(Ur(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!j9(n.attrs,c,t)){if(Ur(i))return!1;o=!0}continue}const d=G9(8&i?"class":l,r,CN(n),t);if(-1===d){if(Ur(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==bN(f,c,0)||2&i&&c!==h){if(Ur(i))return!1;o=!0}}}}else{if(!o&&!Ur(i)&&!Ur(l))return!1;if(o&&Ur(l))continue;o=!1,i=l|1&i}}return Ur(i)||o}function Ur(n){return 0==(1&n)}function G9(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function K9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function EN(n,e,t=!1){for(let i=0;i<e.length;i++)if(z9(n,e[i],t))return!0;return!1}function Q9(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function TN(n,e){return n?":not("+e.trim()+")":e}function Y9(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ur(o)&&(e+=TN(s,r),r=""),i=o,s=s||!Ur(i);t++}return""!==r&&(e+=TN(s,r)),e}const ve={};function P(n){IN(Ge(),M(),ci()+n,Jm())}function IN(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&rg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&sg(e,s,0,t)}Vo(t)}function Tg(n,e){return n<<17|e<<2}function Hr(n){return n>>17&32767}function RC(n){return 2|n}function Qs(n){return(131068&n)>>2}function PC(n,e){return-131069&n|e<<2}function OC(n){return 1|n}function FN(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Qw(r),o.contentQueries(2,e[s],s)}}}function bh(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,Z1(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Zc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function $C(n,e,t,i,r){const s=eO(),o=Gw(),l=n.data[e]=function pX(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function OQ(){return de.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function nh(){const n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ss(s,!0),s}function Jc(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function wh(n,e,t){tg(e);try{const i=n.viewQuery;null!==i&&ZC(1,i,t);const r=n.template;null!==r&&LN(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&FN(n,e),n.staticViewQueries&&ZC(2,n.viewQuery,t);const s=n.components;null!==s&&function dX(n,e){for(let t=0;t<e.length;t++)RX(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,ng()}}function eu(n,e,t,i){const r=e[2];if(256==(256&r))return;tg(e);const s=Jm();try{Z1(e),function tO(n){return de.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&LN(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&rg(e,c,null)}else{const c=n.preOrderHooks;null!==c&&sg(e,c,0,null),Yw(e,0)}if(function AX(n){for(let e=CC(n);null!==e;e=EC(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&zw(s,1),r[2]|=1024}}}(e),function MX(n){for(let e=CC(n);null!==e;e=EC(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];$w(i)&&eu(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&FN(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&rg(e,c)}else{const c=n.contentHooks;null!==c&&sg(e,c,1),Yw(e,1)}!function cX(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Vo(~r);else{const s=r,o=t[++i],a=t[++i];NQ(o,s),a(2,e[s])}}}finally{Vo(-1)}}(n,e);const a=n.components;null!==a&&function uX(n,e){for(let t=0;t<e.length;t++)kX(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&ZC(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&rg(e,c)}else{const c=n.viewHooks;null!==c&&sg(e,c,2),Yw(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zw(e[3],-1))}finally{ng()}}function hX(n,e,t,i){const r=e[10],s=!Jm(),o=X1(e);try{s&&!o&&r.begin&&r.begin(),o&&wh(n,e,i),eu(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function LN(n,e,t,i,r){const s=ci(),o=2&i;try{Vo(-1),o&&e.length>20&&IN(n,e,20,Jm()),t(i,r)}finally{Vo(s)}}function VN(n,e,t){if(Nw(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function zC(n,e,t){!J1()||(function wX(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||sh(t,e),Xn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Br(l);c&&DX(e,t,l);const u=oh(e,n,a,t);Xn(u,e),null!==o&&SX(0,a-r,u,l,0,o),c&&(Ki(t.index,e)[8]=u)}}(n,e,t,gr(t,e)),128==(128&t.flags)&&function CX(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function FQ(){return de.lFrame.currentDirectiveIndex}();try{Vo(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];qw(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&WN(c,u)}}finally{Vo(-1),qw(a)}}(n,e,t))}function GC(n,e,t=gr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function BN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Sg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Sg(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function fX(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ve);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function jN(n,e,t,i){const r=ZN(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&JN(n).push(i,r.length-1))}function $N(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Zi(n,e,t,i,r,s,o,a){const l=gr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(nF(n,t,u,i,r),Ym(e)&&function _X(n,e){const t=Ki(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function gX(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Bt(s)?s.setProperty(l,i,r):Zw(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function WC(n,e,t,i){let r=!1;if(J1()){const s=function EX(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];EN(t,o.selectors,!1)&&(r||(r=[]),ug(sh(t,e),n,o.type),Br(o)?(qN(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,KN(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Jc(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=ag(t.mergedAttrs,d.hostAttrs),QN(n,t,e,c,d),IX(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function mX(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||CN(e)?null:xX(d,s);o.push(h),a=$N(d,c,a),l=$N(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function TX(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new W(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=ag(t.mergedAttrs,t.attrs),r}function GN(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function bX(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function WN(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function qN(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function IX(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Br(e)&&(t[""]=n)}}function KN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QN(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Za(r.type)),o=new ih(s,Br(r),null);n.blueprint[i]=o,t[i]=o,GN(n,e,0,i,Jc(n,t,r.hostVars,ve),r)}function DX(n,e,t){const i=gr(e,n),r=BN(t),s=n[10],o=xg(n,bh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function us(n,e,t,i,r,s){const o=gr(n,e);!function qC(n,e,t,i,r,s,o){if(null==s)Bt(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?_e(s):o(s,i||"",r);Bt(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function SX(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function xX(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function YN(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function kX(n,e){const t=Ki(e,n);if($w(t)){const i=t[1];80&t[2]?eu(i,t,i.template,t[8]):t[5]>0&&KC(t)}}function KC(n){for(let i=CC(n);null!==i;i=EC(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];eu(o,s,o.template,s[8])}else s[5]>0&&KC(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Ki(t[i],n);$w(r)&&r[5]>0&&KC(r)}}function RX(n,e){const t=Ki(e,n),i=t[1];(function PX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),wh(i,t,t[8])}function xg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function QC(n){for(;n;){n[2]|=64;const e=yh(n);if(hQ(n)&&!e)return n;n=e}return null}function XC(n,e,t){const i=e[10];i.begin&&i.begin();try{eu(n,e,n.template,t)}catch(r){throw tF(e,r),r}finally{i.end&&i.end()}}function XN(n){!function YC(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=_C(t),r=i[1];hX(r,i,r.template,t)}}(n[8])}function ZC(n,e,t){Qw(0),e(n,t)}const LX=(()=>Promise.resolve(null))();function ZN(n){return n[7]||(n[7]=[])}function JN(n){return n.cleanup||(n.cleanup=[])}function eF(n,e,t){return(null===n||Br(n))&&(t=function IQ(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function tF(n,e){const t=n[9],i=t?t.get(Uo,null):null;i&&i.handleError(e)}function nF(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ys(n,e,t){const i=Zm(e,n);!function sN(n,e,t){Bt(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Mg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Dw(r,a):2==s&&(i=Dw(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const JC=new k("INJECTOR",-1);class iF{get(e,t=uh){if(t===uh){const i=new Error(`NullInjectorError: No provider for ${tt(e)}!`);throw i.name="NullInjectorError",i}return t}}const eE=new k("Set Injector scope."),Ch={},UX={};let tE;function rF(){return void 0===tE&&(tE=new iF),tE}function sF(n,e=null,t=null,i){const r=oF(n,e,t,i);return r._resolveInjectorDefTypes(),r}function oF(n,e=null,t=null,i){return new HX(n,t,e||rF(),i)}class HX{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&os(t,a=>this.processProvider(a,e,t)),os([e],a=>this.processInjectorType(a,[],s)),this.records.set(JC,tu(void 0,this));const o=this.records.get(eE);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:tt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=uh,i=ue.Default){this.assertNotDestroyed();const r=MO(this),s=Oo(void 0);try{if(!(i&ue.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function QX(n){return"function"==typeof n||"object"==typeof n&&n instanceof k}(e)&&xw(e);a=l&&this.injectableDefInScope(l)?tu(nE(e),Ch):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&ue.Self?rF():this.parent).get(e,t=i&ue.Optional&&t===uh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[pg]=o[pg]||[]).unshift(tt(e)),r)throw o;return function vY(n,e,t,i){const r=n[pg];throw e[xO]&&r.unshift(e[xO]),n.message=function bY(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=tt(e);if(Array.isArray(e))r=e.map(tt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):tt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(pY,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[pg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Oo(s),MO(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(tt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processInjectorType(e,t,i){if(!(e=Ee(e)))return!1;let r=V1(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=V1(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{os(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];os(f,p=>this.processProvider(p,h,f||dt))}}this.injectorDefTypes.add(o);const l=Za(o)||(()=>new o);this.records.set(o,tu(l,Ch));const c=r.providers;if(null!=c&&!a){const u=e;os(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=nu(e=Ee(e))?e:Ee(e&&e.provide);const s=function $X(n,e,t){return lF(n)?tu(void 0,n.useValue):tu(aF(n),Ch)}(e);if(nu(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=tu(void 0,Ch,!0),o.factory=()=>lC(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===Ch&&(t.value=UX,t.value=t.factory()),"object"==typeof t.value&&t.value&&function KX(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ee(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function nE(n){const e=xw(n),t=null!==e?e.factory:Za(n);if(null!==t)return t;if(n instanceof k)throw new W(204,!1);if(n instanceof Function)return function jX(n){const e=n.length;if(e>0)throw ch(e,"?"),new W(204,!1);const t=function J7(n){const e=n&&(n[Gm]||n[B1]);if(e){const t=function eQ(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new W(204,!1)}function aF(n,e,t){let i;if(nu(n)){const r=Ee(n);return Za(r)||nE(r)}if(lF(n))i=()=>Ee(n.useValue);else if(function GX(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...lC(n.deps||[]));else if(function zX(n){return!(!n||!n.useExisting)}(n))i=()=>I(Ee(n.useExisting));else{const r=Ee(n&&(n.useClass||n.provide));if(!function qX(n){return!!n.deps}(n))return Za(r)||nE(r);i=()=>new r(...lC(n.deps))}return i}function tu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function lF(n){return null!==n&&"object"==typeof n&&gY in n}function nu(n){return"function"==typeof n}let ot=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return sF({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return sF({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=uh,n.NULL=new iF,n.\u0275prov=$({token:n,providedIn:"any",factory:()=>I(JC)}),n.__NG_ELEMENT_ID__=-1,n})();function iZ(n,e){ig(_C(n)[1],fn())}function X(n){let e=function bF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Br(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=sE(n.inputs),o.declaredInputs=sE(n.declaredInputs),o.outputs=sE(n.outputs);const a=r.hostBindings;a&&aZ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&sZ(n,l),c&&oZ(n,c),Iw(n.inputs,r.inputs),Iw(n.declaredInputs,r.declaredInputs),Iw(n.outputs,r.outputs),Br(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===X&&(t=!1)}}e=Object.getPrototypeOf(e)}!function rZ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ag(r.hostAttrs,t=ag(t,r.hostAttrs))}}(i)}function sE(n){return n===Rc?{}:n===dt?[]:n}function sZ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function oZ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function aZ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Ag=null;function iu(){if(!Ag){const n=rt.Symbol;if(n&&n.iterator)Ag=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Ag=i)}}}return Ag}function Eh(n){return!!oE(n)&&(Array.isArray(n)||!(n instanceof Map)&&iu()in n)}function oE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ds(n,e,t){return n[e]=t}function Zn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function at(n,e,t,i){const r=M();return Zn(r,Vc(),e)&&(Ge(),us(Ut(),r,n,e,t,i)),at}function su(n,e,t,i){return Zn(n,Vc(),t)?e+_e(t)+i:ve}function be(n,e,t,i,r,s,o,a){const l=M(),c=Ge(),u=n+20,d=c.firstCreatePass?function pZ(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Zc(e,n,4,o||null,Lo(c,a));WC(e,t,u,Lo(c,l)),ig(e,u);const d=u.tViews=Sg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];ss(d,!1);const h=l[11].createComment("");Cg(c,l,h,d),Xn(h,l),xg(l,l[u]=YN(h,l,h,d)),Xm(d)&&zC(c,l,d),null!=o&&GC(l,d,a)}function mt(n){return function Lc(n,e){return n[e]}(function PQ(){return de.lFrame.contextLView}(),20+n)}function _(n,e=ue.Default){const t=M();return null===t?I(n,e):yO(fn(),t,Ee(n),e)}function Pg(){throw new Error("invalid")}function V(n,e,t){const i=M();return Zn(i,Vc(),e)&&Zi(Ge(),Ut(),i,n,e,i[11],t,!1),V}function dE(n,e,t,i,r){const o=r?"class":"style";nF(n,t,e.inputs[o],o,i)}function C(n,e,t,i){const r=M(),s=Ge(),o=20+n,a=r[11],l=r[o]=IC(a,e,function $Q(){return de.lFrame.currentNamespace}()),c=s.firstCreatePass?function NZ(n,e,t,i,r,s,o){const a=e.consts,c=Zc(e,n,2,r,Lo(a,s));return WC(e,t,c,Lo(a,o)),null!==c.attrs&&Mg(c,c.attrs,!1),null!==c.mergedAttrs&&Mg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];ss(c,!0);const u=c.mergedAttrs;null!==u&&og(a,l,u);const d=c.classes;null!==d&&kC(a,l,d);const h=c.styles;return null!==h&&vN(a,l,h),64!=(64&c.flags)&&Cg(s,r,l,c),0===function xQ(){return de.lFrame.elementDepthCount}()&&Xn(l,r),function MQ(){de.lFrame.elementDepthCount++}(),Xm(c)&&(zC(s,r,c),VN(s,c,r)),null!==i&&GC(r,c),C}function E(){let n=fn();Gw()?Ww():(n=n.parent,ss(n,!1));const e=n;!function AQ(){de.lFrame.elementDepthCount--}();const t=Ge();return t.firstCreatePass&&(ig(t,n),Nw(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function KQ(n){return 0!=(16&n.flags)}(e)&&dE(t,e,M(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function QQ(n){return 0!=(32&n.flags)}(e)&&dE(t,e,M(),e.stylesWithoutHost,!1),E}function z(n,e,t,i){return C(n,e,t,i),E(),z}function Ih(n,e,t){const i=M(),r=Ge(),s=n+20,o=r.firstCreatePass?function FZ(n,e,t,i,r){const s=e.consts,o=Lo(s,i),a=Zc(e,n,8,"ng-container",o);return null!==o&&Mg(a,o,!0),WC(e,t,a,Lo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];ss(o,!0);const a=i[s]=i[11].createComment("");return Cg(r,i,a,o),Xn(a,i),Xm(o)&&(zC(r,i,o),VN(r,o,i)),null!=t&&GC(i,o),Ih}function Dh(){let n=fn();const e=Ge();return Gw()?Ww():(n=n.parent,ss(n,!1)),e.firstCreatePass&&(ig(e,n),Nw(n)&&e.queries.elementEnd(n)),Dh}function En(){return M()}function Sh(n){return!!n&&"function"==typeof n.then}const hE=function HF(n){return!!n&&"function"==typeof n.subscribe};function Q(n,e,t,i){const r=M(),s=Ge(),o=fn();return jF(s,r,r[11],o,n,e,!!t,i),Q}function Og(n,e){const t=fn(),i=M(),r=Ge();return jF(r,i,eF(Kw(r.data),t,i),t,n,e,!1),Og}function jF(n,e,t,i,r,s,o,a){const l=Xm(i),u=n.firstCreatePass&&JN(n),d=e[8],h=ZN(e);let f=!0;if(3&i.type||a){const y=gr(i,e),b=a?a(y):y,v=h.length,D=a?S=>a(nn(S[i.index])):i.index;if(Bt(t)){let S=null;if(!a&&l&&(S=function LZ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,f=!1;else{s=fE(i,e,d,s,!1);const N=t.listen(b,r,s);h.push(s,N),u&&u.push(r,D,v,v+1)}}else s=fE(i,e,d,s,!0),b.addEventListener(r,s,o),h.push(s),u&&u.push(r,D,v,o)}else s=fE(i,e,d,s,!1);const p=i.outputs;let g;if(f&&null!==p&&(g=p[r])){const y=g.length;if(y)for(let b=0;b<y;b+=2){const G=e[g[b]][g[b+1]].subscribe(s),ae=h.length;h.push(s,G),u&&u.push(r,i.index,ae,-(ae+1))}}}function $F(n,e,t,i){try{return!1!==t(i)}catch(r){return tF(n,r),!1}}function fE(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Ki(n.index,e):e;0==(32&e[2])&&QC(a);let l=$F(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=$F(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function De(n=1){return function VQ(n){return(de.lFrame.contextLView=function BQ(n,e){for(;n>0;)e=e[15],n--;return e}(n,de.lFrame.contextLView))[8]}(n)}function VZ(n,e){let t=null;const i=function W9(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?EN(n,s,!0):Q9(i,s))return r}else t=r}return t}function Tn(n){const e=M()[16][6];if(!e.projection){const i=e.projection=ch(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?VZ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function He(n,e=0,t){const i=M(),r=Ge(),s=Zc(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Ww(),64!=(64&s.flags)&&function B9(n,e,t){yN(e[11],0,e,t,lN(n,t,e),hN(t.parent||e[6],t,e))}(r,i,s)}function $o(n,e,t){return pu(n,"",e,"",t),$o}function pu(n,e,t,i,r){const s=M(),o=su(s,e,t,i);return o!==ve&&Zi(Ge(),Ut(),s,n,o,s[11],r,!1),pu}function ZF(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Hr(s):Qs(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];HZ(n[a],e)&&(l=!0,n[a+1]=i?OC(u):RC(u)),a=i?Hr(u):Qs(u)}l&&(n[t+1]=i?RC(s):OC(s))}function HZ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Wc(n,e)>=0}function Ng(n,e,t){return $r(n,e,t,!1),Ng}function Xe(n,e){return $r(n,e,null,!0),Xe}function $r(n,e,t,i){const r=M(),s=Ge(),o=function Ks(n){const e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function oL(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[ci()],o=function sL(n,e){return e>=n.expandoStartIndex}(n,t);(function uL(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function YZ(n,e,t,i){const r=Kw(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=xh(t=pE(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=pE(r,n,e,t,i),null===s){let l=function XZ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Qs(i))return n[Hr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=pE(null,n,e,l[1],i),l=xh(l,e.attrs,i),function ZZ(n,e,t,i){n[Hr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function JZ(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=xh(i,n[s].hostAttrs,t);return xh(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function BZ(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Hr(o),l=Qs(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Wc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Hr(n[a+1]);n[i+1]=Tg(h,a),0!==h&&(n[h+1]=PC(n[h+1],i)),n[a+1]=function J9(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Tg(a,0),0!==a&&(n[a+1]=PC(n[a+1],i)),a=i;else n[i+1]=Tg(l,0),0===a?a=i:n[l+1]=PC(n[l+1],i),l=i;c&&(n[i+1]=RC(n[i+1])),ZF(n,u,i,!0),ZF(n,u,i,!1),function UZ(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Wc(s,e)>=0&&(t[i+1]=OC(t[i+1]))}(e,u,n,i,s),o=Tg(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==ve&&Zn(r,o,e)&&function lL(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Fg(function xN(n){return 1==(1&n)}(c)?cL(l,e,t,r,Qs(c),o):void 0)||(Fg(s)||function SN(n){return 2==(2&n)}(c)&&(s=cL(l,null,t,r,a,o)),function H9(n,e,t,i,r){const s=Bt(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Xi.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Xi.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Zm(ci(),t),r,s))}(s,s.data[ci()],r,r[11],n,r[o+1]=function nJ(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=tt(Yi(n)))),n}(e,t),i,o)}function pE(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=xh(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function xh(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qi(n,o,!!t||e[++s]))}return void 0===n?null:n}function cL(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===ve&&(h=d?dt:void 0);let f=d?sC(h,i):u===i?h:void 0;if(c&&!Fg(f)&&(f=sC(l,i)),Fg(f)&&(a=f,o))return a;const p=n[r+1];r=o?Hr(p):Qs(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=sC(l,i))}return a}function Fg(n){return void 0!==n}function F(n,e=""){const t=M(),i=Ge(),r=n+20,s=i.firstCreatePass?Zc(i,r,1,e,null):i.data[r],o=t[r]=function TC(n,e){return Bt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Cg(i,t,o,s),ss(s,!1)}function ps(n){return hi("",n,""),ps}function hi(n,e,t){const i=M(),r=su(i,n,e,t);return r!==ve&&Ys(i,ci(),r),hi}function Mh(n,e,t){const i=M();return Zn(i,Vc(),e)&&Zi(Ge(),Ut(),i,n,e,i[11],t,!0),Mh}function Lg(n,e,t){const i=M();if(Zn(i,Vc(),e)){const s=Ge(),o=Ut();Zi(s,o,i,n,e,eF(Kw(s.data),o,i),t,!0)}return Lg}const Vg="en-US";let AL=Vg;function _E(n,e,t,i,r){if(n=Ee(n),Array.isArray(n))for(let s=0;s<n.length;s++)_E(n[s],e,t,i,r);else{const s=Ge(),o=M();let a=nu(n)?n:Ee(n.provide),l=aF(n);const c=fn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(nu(n)||!n.multi){const f=new ih(l,r,_),p=vE(a,e,r?u:u+h,d);-1===p?(ug(sh(c,o),s,a),yE(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=vE(a,e,u+h,d),p=vE(a,e,u,u+h),g=f>=0&&t[f],y=p>=0&&t[p];if(r&&!y||!r&&!g){ug(sh(c,o),s,a);const b=function wee(n,e,t,i,r){const s=new ih(n,t,_);return s.multi=[],s.index=e,s.componentProviders=0,eV(s,r,i&&!t),s}(r?bee:vee,t.length,r,i,l);!r&&y&&(t[p].providerFactory=b),yE(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(b),o.push(b)}else yE(s,n,f>-1?f:p,eV(t[r?p:f],l,!r&&i));!r&&i&&y&&t[p].componentProviders++}}}function yE(n,e,t,i){const r=nu(e),s=function WX(n){return!!n.useClass}(e);if(r||s){const l=(s?Ee(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function eV(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function vee(n,e,t,i){return bE(this.multi,[])}function bee(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=oh(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),bE(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],bE(r,s);return s}function bE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function je(n,e=[]){return t=>{t.providersResolver=(i,r)=>function yee(n,e,t){const i=Ge();if(i.firstCreatePass){const r=Br(n);_E(t,i.data,i.blueprint,r,!0),_E(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class tV{}class Tee{resolveComponentFactory(e){throw function Eee(n){const e=Error(`No component factory found for ${tt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let zo=(()=>{class n{}return n.NULL=new Tee,n})();function Iee(){return yu(fn(),M())}function yu(n,e){return new ce(gr(n,e))}let ce=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Iee,n})();function Dee(n){return n instanceof ce?n.nativeElement:n}class Oh{}let Xs=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function xee(){const n=M(),t=Ki(fn().index,n);return function See(n){return n[11]}(rs(t)?t:n)}(),n})(),Mee=(()=>{class n{}return n.\u0275prov=$({token:n,providedIn:"root",factory:()=>null}),n})();class Go{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const iV=new Go("13.2.7"),wE={};function $g(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(nn(s)),Vr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&$g(l[1],l,c,i)}const o=t.type;if(8&o)$g(n,e,t.child,i);else if(32&o){const a=wC(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=gN(e,t);if(Array.isArray(a))i.push(...a);else{const l=yh(e[16]);$g(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Nh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return $g(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Vr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(DC(e,i),hg(t,i))}this._attachedToViewContainer=!1}aN(this._lView[1],this._lView)}onDestroy(e){jN(this._lView[1],this._lView,null,e)}markForCheck(){QC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){XC(this._lView[1],this._lView,this.context)}checkNoChanges(){!function NX(n,e,t){eg(!0);try{XC(n,e,t)}finally{eg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new W(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function k9(n,e){vh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,"");this._appRef=e}}class Aee extends Nh{constructor(e){super(e),this._view=e}detectChanges(){XN(this._view)}checkNoChanges(){!function FX(n){eg(!0);try{XN(n)}finally{eg(!1)}}(this._view)}get context(){return null}}class rV extends zo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qn(e);return new CE(t,this.ngModule)}}function sV(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class CE extends tV{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function X9(n){return n.map(Y9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return sV(this.componentDef.inputs)}get outputs(){return sV(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function Ree(n,e){return{get:(t,i,r)=>{const s=n.get(t,wE,r);return s!==wE||i===wE?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Oh,Y1),a=s.get(Mee,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function HN(n,e,t){if(Bt(n))return n.selectRootElement(e,t===Fr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):IC(o.createRenderer(null,this.componentDef),c,function kee(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function vF(n,e){return{components:[],scheduler:n||E9,clean:LX,playerHandler:e||null,flags:0}}(),f=Sg(0,null,null,1,0,null,null,null,null,null),p=bh(null,f,h,d,null,null,o,l,a,s);let g,y;tg(p);try{const b=function _F(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Zc(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Mg(l,c,!0),null!==n&&(og(r,n,c),null!==l.classes&&kC(r,n,l.classes),null!==l.styles&&vN(r,n,l.styles)));const u=i.createRenderer(n,e),d=bh(t,BN(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(ug(sh(l,t),o,e.type),qN(o,l),KN(l,t.length,1)),xg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)og(l,u,["ng-version",iV.full]);else{const{attrs:v,classes:D}=function Z9(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ur(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&og(l,u,v),D&&D.length>0&&kC(l,u,D.join(" "))}if(y=jw(f,20),void 0!==t){const v=y.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const S=t[D];v.push(null!=S?Array.from(S):null)}}g=function yF(n,e,t,i,r){const s=t[1],o=function vX(n,e,t){const i=fn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),QN(n,i,e,Jc(n,e,1,null),t));const r=oh(e,n,i.directiveStart,i);Xn(r,e);const s=gr(i,e);return s&&Xn(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=fn();e.contentQueries(1,o,l.directiveStart)}const a=fn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Vo(a.index),GN(t[1],a,0,a.directiveStart,a.directiveEnd,e),WN(e,o)),o}(b,this.componentDef,p,h,[iZ]),wh(f,p,null)}finally{ng()}return new Oee(this.componentType,g,yu(y,p),p,y)}}class Oee extends class Cee{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Aee(r),this.componentType=e}get injector(){return new Hc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Zs{}class oV{}const vu=new Map;class cV extends Zs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new rV(this);const i=fr(e);this._bootstrapComponents=cs(i.bootstrap),this._r3Injector=oF(e,t,[{provide:Zs,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],tt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ot.THROW_IF_NOT_FOUND,i=ue.Default){return e===ot||e===Zs||e===JC?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class EE extends oV{constructor(e){super(),this.moduleType=e,null!==fr(e)&&function Fee(n){const e=new Set;!function t(i){const r=fr(i,!0),s=r.id;null!==s&&(function aV(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${tt(e)} vs ${tt(e.name)}`)}(s,vu.get(s),i),vu.set(s,i));const o=cs(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new cV(this.moduleType,e)}}function uV(n,e,t,i){return function dV(n,e,t,i,r,s){const o=e+t;return Zn(n,o,r)?ds(n,o+1,s?i.call(s,r):i(r)):Fh(n,o+1)}(M(),li(),n,e,t,i)}function rl(n,e,t,i,r){return function hV(n,e,t,i,r,s,o){const a=e+t;return function nl(n,e,t,i){const r=Zn(n,e,t);return Zn(n,e+1,i)||r}(n,a,r,s)?ds(n,a+2,o?i.call(o,r,s):i(r,s)):Fh(n,a+2)}(M(),li(),n,e,t,i,r)}function Fh(n,e){const t=n[e];return t===ve?void 0:t}function TE(n){return e=>{setTimeout(n,void 0,e)}}const ie=class Zee extends ne{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=TE(l),a&&(a=TE(a)),c&&(c=TE(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof et&&e.add(u),u}};function Jee(){return this._results[iu()]()}class Wo{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=iu(),i=Wo.prototype;i[t]||(i[t]=Jee)}get changes(){return this._changes||(this._changes=new ie)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=_r(e);(this._changesDetected=!function sY(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jn=(()=>{class n{}return n.__NG_ELEMENT_ID__=nte,n})();const ete=Jn,tte=class extends ete{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=bh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),wh(t,i,e),new Nh(i)}};function nte(){return zg(fn(),M())}function zg(n,e){return 4&n.type?new tte(e,n,yu(n,e)):null}let In=(()=>{class n{}return n.__NG_ELEMENT_ID__=ite,n})();function ite(){return yV(fn(),M())}const rte=In,gV=class extends rte{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return yu(this._hostTNode,this._hostLView)}get injector(){return new Hc(this._hostTNode,this._hostLView)}get parentInjector(){const e=cg(this._hostTNode,this._hostLView);if(fO(e)){const t=Uc(e,this._hostLView),i=Bc(e);return new Hc(t[1].data[i+8],t)}return new Hc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=_V(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function lh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new CE(Qn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Zs,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function SQ(n){return Vr(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new gV(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function P9(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],EO(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function O9(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=MC(s,o),l=i[11],c=wg(l,o[7]);return null!==c&&function A9(n,e,t,i,r,s){i[0]=r,i[6]=e,vh(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),EO(IE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=_V(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=DC(this._lContainer,t);i&&(hg(IE(this._lContainer),t),aN(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=DC(this._lContainer,t);return i&&null!=hg(IE(this._lContainer),t)?new Nh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function _V(n){return n[8]}function IE(n){return n[8]||(n[8]=[])}function yV(n,e){let t;const i=e[n.index];if(Vr(i))t=i;else{let r;if(8&n.type)r=nn(i);else{const s=e[11];r=s.createComment("");const o=gr(n,e);tl(s,wg(s,o),r,function V9(n,e){return Bt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=YN(i,e,r,n),xg(e,t)}return new gV(t,n,e)}class DE{constructor(e){this.queryList=e,this.matches=null}clone(){return new DE(this.queryList)}setDirty(){this.queryList.setDirty()}}class SE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new SE(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==EV(e,t).matches&&this.queries[t].setDirty()}}class vV{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class xE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new xE(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ME{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ME(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,ate(t,s)),this.matchTNodeWithReadOption(e,t,dg(t,e,s,!1,!1))}else i===Jn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dg(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ce||r===In||r===Jn&&4&t.type)this.addMatch(t.index,-2);else{const s=dg(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ate(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function cte(n,e,t,i){return-1===t?function lte(n,e){return 11&n.type?yu(n,e):4&n.type?zg(n,e):null}(e,n):-2===t?function ute(n,e,t){return t===ce?yu(e,n):t===Jn?zg(e,n):t===In?yV(e,n):void 0}(n,e,i):oh(n,n[1],t,e)}function bV(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:cte(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function AE(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=bV(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&AE(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];AE(f[1],f,c,i)}}}}}return i}function fe(n){const e=M(),t=Ge(),i=iO();Qw(i+1);const r=EV(t,i);if(n.dirty&&X1(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?AE(t,e,i,[]):bV(t,e,r,i);n.reset(s,Dee),n.notifyOnChanges()}return!0}return!1}function jt(n,e,t){const i=Ge();i.firstCreatePass&&(CV(i,new vV(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),wV(i,M(),e)}function It(n,e,t,i){const r=Ge();if(r.firstCreatePass){const s=fn();CV(r,new vV(e,t,i),s.index),function hte(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}wV(r,M(),t)}function pe(){return function dte(n,e){return n[19].queries[e].queryList}(M(),iO())}function wV(n,e,t){const i=new Wo(4==(4&t));jN(n,e,i,i.destroy),null===e[19]&&(e[19]=new SE),e[19].queries.push(new DE(i))}function CV(n,e,t){null===n.queries&&(n.queries=new xE),n.queries.track(new ME(e,t))}function EV(n,e){return n.queries.getByIndex(e)}function TV(n,e){return zg(n,e)}function qg(...n){}const Kg=new k("Application Initializer");let FE=(()=>{class n{constructor(t){this.appInits=t,this.resolve=qg,this.reject=qg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Sh(s))t.push(s);else if(hE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(I(Kg,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bh=new k("AppId",{providedIn:"root",factory:function HV(){return`${LE()}${LE()}${LE()}`}});function LE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jV=new k("Platform Initializer"),wu=new k("Platform ID"),$V=new k("appBootstrapListener");let zV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Js=new k("LocaleId",{providedIn:"root",factory:()=>mg(Js,ue.Optional|ue.SkipSelf)||function Mte(){return"undefined"!=typeof $localize&&$localize.locale||Vg}()});class kte{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let GV=(()=>{class n{compileModuleSync(t){return new EE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=cs(fr(t).declarations).reduce((o,a)=>{const l=Qn(a);return l&&o.push(new CE(l)),o},[]);return new kte(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pte=(()=>Promise.resolve(0))();function VE(n){"undefined"==typeof Zone?Pte.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Z{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Ote(){let n=rt.requestAnimationFrame,e=rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Lte(n){const e=()=>{!function Fte(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,UE(n),n.isCheckStableRunning=!0,BE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),UE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return WV(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),qV(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return WV(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),qV(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,UE(n),BE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Z.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Z.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Nte,qg,qg);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Nte={};function BE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function UE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WV(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qV(n){n._nesting--,BE(n)}class Vte{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie,this.onMicrotaskEmpty=new ie,this.onStable=new ie,this.onError=new ie}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let HE=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Z.assertNotInAngularZone(),VE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())VE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(I(Z))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),KV=(()=>{class n{constructor(){this._applications=new Map,jE.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return jE.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class Bte{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Gr,jE=new Bte;const QV=new k("AllowMultipleToken");class YV{constructor(e,t){this.name=e,this.token=t}}function XV(n,e,t=[]){const i=`Platform: ${e}`,r=new k(i);return(s=[])=>{let o=ZV();if(!o||o.injector.get(QV,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:eE,useValue:"platform"});!function $te(n){if(Gr&&!Gr.destroyed&&!Gr.injector.get(QV,!1))throw new W(400,"");Gr=n.get(JV);const e=n.get(jV,null);e&&e.forEach(t=>t())}(ot.create({providers:a,name:i}))}return function zte(n){const e=ZV();if(!e)throw new W(401,"");return e}()}}function ZV(){return Gr&&!Gr.destroyed?Gr:null}let JV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function Gte(n,e){let t;return t="noop"===n?new Vte:("zone.js"===n?void 0:n)||new Z({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Z,useValue:a}];return a.run(()=>{const c=ot.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(Uo,null);if(!d)throw new W(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{$E(this._modules,u),h.unsubscribe()})}),function Wte(n,e,t){try{const i=t();return Sh(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(FE);return h.runInitializers(),h.donePromise.then(()=>(function SJ(n){Wi(n,"Expected localeId to be defined"),"string"==typeof n&&(AL=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Js,Vg)||Vg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=eB({},i);return function Hte(n,e,t){const i=new EE(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qg);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new W(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(I(ot))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function eB(n,e){return Array.isArray(e)?e.reduce(eB,n):Object.assign(Object.assign({},n),e)}let Qg=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new nt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new nt(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Z.assertNotInAngularZone(),VE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Z.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Or(a,l.pipe(N1()))}bootstrap(t,i){if(!this._initStatus.done)throw new W(405,"");let r;r=t instanceof tV?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function jte(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Zs),a=r.create(ot.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(HE,null),u=c&&a.injector.get(KV);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),$E(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new W(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;$E(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($V,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(ot),I(Uo),I(zo),I(FE))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $E(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let nB=!0,Qt=(()=>{class n{}return n.__NG_ELEMENT_ID__=Qte,n})();function Qte(n){return function Yte(n,e,t){if(Ym(n)&&!t){const i=Ki(n.index,e);return new Nh(i,i)}return 47&n.type?new Nh(e[16],e):null}(fn(),M(),16==(16&n))}class aB{constructor(){}supports(e){return Eh(e)}create(e){return new nne(e)}}const tne=(n,e)=>e;class nne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||tne}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<cB(i,r,s)?t:i,a=cB(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Eh(e))throw new W(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function fZ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[iu()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new ine(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new lB),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ine{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class lB{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new rne,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cB(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class uB{constructor(){}supports(e){return e instanceof Map||oE(e)}create(){return new sne}}class sne{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||oE(e)))throw new W(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new one(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class one{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dB(){return new Zg([new aB])}let Zg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||dB()),deps:[[n,new qc,new Le]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new W(901,"")}}return n.\u0275prov=$({token:n,providedIn:"root",factory:dB}),n})();function hB(){return new Uh([new uB])}let Uh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||hB()),deps:[[n,new qc,new Le]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new W(901,"")}}return n.\u0275prov=$({token:n,providedIn:"root",factory:hB}),n})();const cne=XV(null,"core",[{provide:wu,useValue:"unknown"},{provide:JV,deps:[ot]},{provide:KV,deps:[]},{provide:zV,deps:[]}]);let une=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(I(Qg))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})(),Jg=null;function ms(){return Jg}const Se=new k("DocumentToken");let ol=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(){return function pne(){return I(fB)}()},providedIn:"platform"}),n})();const mne=new k("Location Initialized");let fB=(()=>{class n extends ol{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ms().getBaseHref(this._doc)}onPopState(t){const i=ms().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ms().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){pB()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){pB()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:function(){return function gne(){return new fB(I(Se))}()},providedIn:"platform"}),n})();function pB(){return!!window.history.pushState}function KE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function mB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function eo(n){return n&&"?"!==n[0]?"?"+n:n}let Cu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(){return function _ne(n){const e=I(Se).location;return new gB(I(ol),e&&e.origin||"")}()},providedIn:"root"}),n})();const QE=new k("appBaseHref");let gB=(()=>{class n extends Cu{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return KE(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+eo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+eo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(I(ol),I(QE,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),yne=(()=>{class n extends Cu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=KE(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(I(ol),I(QE,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),al=(()=>{class n{constructor(t,i){this._subject=new ie,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=mB(_B(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+eo(i))}normalize(t){return n.stripTrailingSlash(function bne(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,_B(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=eo,n.joinWithSlash=KE,n.stripTrailingSlash=mB,n.\u0275fac=function(t){return new(t||n)(I(Cu),I(ol))},n.\u0275prov=$({token:n,factory:function(){return function vne(){return new al(I(Cu),I(ol))}()},providedIn:"root"}),n})();function _B(n){return n.replace(/\/index.html$/,"")}let Eu=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Eh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(_(Zg),_(Uh),_(ce),_(Xs))},n.\u0275dir=O({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class sie{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ll=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new sie(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),DB(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{DB(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(_(In),_(Jn),_(Zg))},n.\u0275dir=O({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function DB(n,e){n.context.$implicit=e.item}let wr=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new oie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){SB("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){SB("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(_(In),_(Jn))},n.\u0275dir=O({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class oie{constructor(){this.$implicit=null,this.ngIf=null}}function SB(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${tt(e)}'.`)}class o0{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let c_=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),xB=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new o0(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(_(In),_(Jn),_(c_,9))},n.\u0275dir=O({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),gs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const kB="browser";let Fie=(()=>{class n{}return n.\u0275prov=$({token:n,providedIn:"root",factory:()=>new Lie(I(Se),window)}),n})();class Lie{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Vie(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=RB(this.window.history)||RB(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function RB(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class c0 extends class Uie extends class fne{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function hne(n){Jg||(Jg=n)}(new c0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Hie(){return $h=$h||document.querySelector("base"),$h?$h.getAttribute("href"):null}();return null==t?null:function jie(n){u_=u_||document.createElement("a"),u_.setAttribute("href",n);const e=u_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$h=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function iie(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let u_,$h=null;const PB=new k("TRANSITION_ID"),zie=[{provide:Kg,useFactory:function $ie(n,e,t){return()=>{t.get(FE).donePromise.then(()=>{const i=ms(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[PB,Se,ot],multi:!0}];class u0{static init(){!function Ute(n){jE=n}(new u0)}addToWindow(e){rt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),rt.getAllAngularRootElements=()=>e.getAllRootElements(),rt.frameworkStabilizers||(rt.frameworkStabilizers=[]),rt.frameworkStabilizers.push(i=>{const r=rt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?ms().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Gie=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const d_=new k("EventManagerPlugins");let h_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I(d_),I(Z))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class OB{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=ms().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let NB=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),zh=(()=>{class n extends NB{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(FB),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(FB))}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function FB(n){ms().remove(n)}const d0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},h0=/%COMP%/g;function f_(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?f_(n,r,t):(r=r.replace(h0,n),t.push(r))}return t}function BB(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let p_=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new f0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Fr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Xie(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Fr.ShadowDom:return new Zie(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=f_(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I(h_),I(zh),I(Bh))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class f0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(d0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=d0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=d0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Xi.DashCase|Xi.Important)?e.style.setProperty(t,i,r&Xi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,BB(i)):this.eventManager.addEventListener(e,t,BB(i))}}class Xie extends f0{constructor(e,t,i,r){super(e),this.component=i;const s=f_(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Kie(n){return"_ngcontent-%COMP%".replace(h0,n)}(r+"-"+i.id),this.hostAttr=function Qie(n){return"_nghost-%COMP%".replace(h0,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Zie extends f0{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=f_(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jie=(()=>{class n extends OB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const HB=["alt","control","meta","shift"],tre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jB={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nre={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ire=(()=>{class n extends OB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ms().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(HB.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function rre(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&jB.hasOwnProperty(e)&&(e=jB[e]))}return tre[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),HB.forEach(s=>{s!=r&&nre[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const lre=XV(cne,"browser",[{provide:wu,useValue:kB},{provide:jV,useValue:function sre(){c0.makeCurrent(),u0.init()},multi:!0},{provide:Se,useFactory:function are(){return function EQ(n){Uw=n}(document),document},deps:[]}]),cre=[{provide:eE,useValue:"root"},{provide:Uo,useFactory:function ore(){return new Uo},deps:[]},{provide:d_,useClass:Jie,multi:!0,deps:[Se,Z,wu]},{provide:d_,useClass:ire,multi:!0,deps:[Se]},{provide:p_,useClass:p_,deps:[h_,zh,Bh]},{provide:Oh,useExisting:p_},{provide:NB,useExisting:zh},{provide:zh,useClass:zh,deps:[Se]},{provide:HE,useClass:HE,deps:[Z]},{provide:h_,useClass:h_,deps:[d_,Z]},{provide:class Bie{},useClass:Gie,deps:[]}];let $B=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Bh,useValue:t.appId},{provide:PB,useExisting:Bh},zie]}}}return n.\u0275fac=function(t){return new(t||n)(I(n,12))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:cre,imports:[gs,une]}),n})();"undefined"!=typeof window&&window;let m0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(t){let i=null;return i=t?new(t||n):I(WB),i},providedIn:"root"}),n})(),WB=(()=>{class n extends m0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Ye.NONE:return i;case Ye.HTML:return as(i,"HTML")?Yi(i):WO(this._doc,String(i)).toString();case Ye.STYLE:return as(i,"Style")?Yi(i):i;case Ye.SCRIPT:if(as(i,"Script"))return Yi(i);throw new Error("unsafe value used in a script context");case Ye.URL:return VO(i),as(i,"URL")?Yi(i):ph(String(i));case Ye.RESOURCE_URL:if(as(i,"ResourceURL"))return Yi(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function FY(n){return new kY(n)}(t)}bypassSecurityTrustStyle(t){return function LY(n){return new RY(n)}(t)}bypassSecurityTrustScript(t){return function VY(n){return new PY(n)}(t)}bypassSecurityTrustUrl(t){return function BY(n){return new OY(n)}(t)}bypassSecurityTrustResourceUrl(t){return function UY(n){return new NY(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:function(t){let i=null;return i=t?new t:function vre(n){return new WB(n.get(Se))}(I(ot)),i},providedIn:"root"}),n})();function qB(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function m(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){qB(s,i,r,o,a,"next",l)}function a(l){qB(s,i,r,o,a,"throw",l)}o(void 0)})}}const R=function(n,e){if(!n)throw Tu(e)},Tu=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},KB=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},m_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),i.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const l=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==s||null==a||null==c||null==d)throw Error();i.push(s<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},QB=function(n){const e=KB(n);return m_.encodeByteArray(e,!0)},g_=function(n){return QB(n).replace(/\./g,"")},_0=function(n){try{return m_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Cre(t)||(n[t]=Gh(n[t],e[t]));return n}function Cre(n){return"__proto__"!==n}class cl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function Xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y0(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function v0(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function YB(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ko(){return"object"==typeof indexedDB}function Wh(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function b0(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ri extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cr.prototype.create)}}class Cr{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?function Mre(n,e){return n.replace(Are,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new Ri(r,`${this.serviceName}: ${o} (${r}).`,i)}}const Are=/\{\$([^}]+)}/g;function qh(n){return JSON.parse(n)}function _n(n){return JSON.stringify(n)}const __=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=qh(_0(s[0])||""),t=qh(_0(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:i,signature:r}};function Kr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Iu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function w0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function y_(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function v_(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(XB(s)&&XB(o)){if(!v_(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function XB(n){return null!==n&&"object"==typeof n}function Kh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Qh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Yh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Pre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function ZB(n,e){const t=new Ore(n,e);return t.subscribe.bind(t)}class Ore{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function Nre(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=C0),void 0===r.error&&(r.error=C0),void 0===r.complete&&(r.complete=C0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(o){}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C0(){}function Du(n,e){return`${n} failed: ${e} argument `}const b_=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function E0(n,e=1e3,t=2){const i=e*Math.pow(t,n),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Me(n){return n&&n._delegate?n._delegate:n}class Zt{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ul="[DEFAULT]";class jre{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch(r){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function zre(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ul})}catch(t){}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch(s){}}}}clearInstance(e=ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ul){return this.instances.has(e)}getOptions(e=ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===ul?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(r){}var n;return i||null}normalizeInstanceIdentifier(e=ul){return this.component?this.component.multipleInstances?e:ul:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Gre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jre(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const T0=[];var Ve=(()=>{return(n=Ve||(Ve={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Ve;var n})();const JB={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Wre=Ve.INFO,qre={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Kre=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=qre[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class Qo{constructor(e){this.name=e,this._logLevel=Wre,this._logHandler=Kre,this._userLogHandler=null,T0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?JB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}let e2,t2;const n2=new WeakMap,I0=new WeakMap,r2=new WeakMap,D0=new WeakMap,S0=new WeakMap;let x0={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return I0.get(n);if("objectStoreNames"===e)return n.objectStoreNames||r2.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return io(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function rse(n){return"function"==typeof n?function ise(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Jre(){return t2||(t2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(M0(this),e),io(n2.get(this))}:function(...e){return io(n.apply(M0(this),e))}:function(e,...t){const i=n.call(M0(this),e,...t);return r2.set(i,e.sort?e.sort():[e]),io(i)}}(n):(n instanceof IDBTransaction&&function tse(n){if(I0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});I0.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Zre(){return e2||(e2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,x0):n)}function io(n){if(n instanceof IDBRequest)return function ese(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(io(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&n2.set(t,n)}).catch(()=>{}),S0.set(e,n),e}(n);if(D0.has(n))return D0.get(n);const e=rse(n);return e!==n&&(D0.set(n,e),S0.set(e,n)),e}const M0=n=>S0.get(n);function w_(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=io(o);return i&&o.addEventListener("upgradeneeded",l=>{i(io(o.result),l.oldVersion,l.newVersion,io(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function A0(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),io(t).then(()=>{})}const sse=["get","getKey","getAll","getAllKeys","count"],ose=["put","add","delete","clear"],k0=new Map;function s2(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(k0.get(e))return k0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=ose.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!sse.includes(t))return;const s=function(){var o=m(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return k0.set(e,s),s}!function nse(n){x0=n(x0)}(n=>p7(f7({},n),{get:(e,t,i)=>s2(e,t)||n.get(e,t,i),has:(e,t)=>!!s2(e,t)||n.has(e,t)}));class ase{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function lse(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const R0="@firebase/app",dl=new Qo("@firebase/app"),hl="[DEFAULT]",Ose={[R0]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yo=new Map,Xh=new Map;function C_(n,e){try{n.container.addComponent(e)}catch(t){dl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function a2(n,e){n.container.addOrOverwriteComponent(e)}function on(n){const e=n.name;if(Xh.has(e))return dl.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,n);for(const t of Yo.values())C_(t,n);return!0}function Qr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nse(n,e,t=hl){Qr(n,e).clearInstance(t)}function Fse(){Xh.clear()}const Xo=new Cr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vse{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}const _s="9.10.0";function Er(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:hl,automaticDataCollectionEnabled:!1},e),i=t.name;if("string"!=typeof i||!i)throw Xo.create("bad-app-name",{appName:String(i)});const r=Yo.get(i);if(r){if(v_(n,r.options)&&v_(t,r.config))return r;throw Xo.create("duplicate-app",{appName:i})}const s=new Gre(i);for(const a of Xh.values())s.addComponent(a);const o=new Vse(n,t,s);return Yo.set(i,o),o}function Zo(n=hl){const e=Yo.get(n);if(!e)throw Xo.create("no-app",{appName:n});return e}function P0(){return Array.from(Yo.values())}function l2(n){return O0.apply(this,arguments)}function O0(){return(O0=m(function*(n){const e=n.name;Yo.has(e)&&(Yo.delete(e),yield Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)})).apply(this,arguments)}function $e(n,e,t){var i;let r=null!==(i=Ose[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void dl.warn(a.join(" "))}on(new Zt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function c2(n,e){if(null!==n&&"function"!=typeof n)throw Xo.create("invalid-log-argument");!function Yre(n,e){for(const t of T0){let i=null;e&&e.level&&(i=JB[e.level]),t.userLogHandler=null===n?null:(r,s,...o)=>{const a=o.map(l=>{if(null==l)return null;if("string"==typeof l)return l;if("number"==typeof l||"boolean"==typeof l)return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch(c){return null}}).filter(l=>l).join(" ");s>=(null!=i?i:r.logLevel)&&n({level:Ve[s].toLowerCase(),message:a,args:o,type:r.name})}}}(n,e)}function u2(n){!function Qre(n){T0.forEach(e=>{e.setLogLevel(n)})}(n)}const Zh="firebase-heartbeat-store";let N0=null;function d2(){return N0||(N0=w_("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Zh)}}).catch(n=>{throw Xo.create("idb-open",{originalErrorMessage:n.message})})),N0}function F0(){return(F0=m(function*(n){var e;try{return(yield d2()).transaction(Zh).objectStore(Zh).get(f2(n))}catch(t){if(t instanceof Ri)dl.warn(t.message);else{const i=Xo.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});dl.warn(i.message)}}})).apply(this,arguments)}function h2(n,e){return L0.apply(this,arguments)}function L0(){return(L0=m(function*(n,e){var t;try{const r=(yield d2()).transaction(Zh,"readwrite");return yield r.objectStore(Zh).put(e,f2(n)),r.done}catch(i){if(i instanceof Ri)dl.warn(i.message);else{const r=Xo.create("idb-set",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message});dl.warn(r.message)}}})).apply(this,arguments)}function f2(n){return`${n.name}!${n.options.appId}`}class zse{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wse(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return m(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=p2();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=p2(),{heartbeatsToSend:i,unsentEntries:r}=function Gse(n,e=1024){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),m2(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),m2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=g_(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function p2(){return(new Date).toISOString().substring(0,10)}class Wse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!Ko()&&Wh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Hse(n){return F0.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return h2(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return h2(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function m2(n){return g_(JSON.stringify({version:2,heartbeats:n})).length}!function qse(n){on(new Zt("platform-logger",e=>new ase(e),"PRIVATE")),on(new Zt("heartbeat",e=>new zse(e),"PRIVATE")),$e(R0,"0.7.33",n),$e(R0,"0.7.33","esm2017"),$e("fire-js","")}("");const g2="firebasestorage.googleapis.com",_2="storageBucket";class $t extends Ri{constructor(e,t){super(V0(e),`Firebase Storage: ${t} (${V0(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$t.prototype)}_codeEquals(e){return V0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function V0(n){return"storage/"+n}function B0(){return new $t("unknown","An unknown error occurred, please check the error payload for server response.")}function y2(){return new $t("canceled","User canceled the upload/download.")}function v2(){return new $t("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function U0(n){return new $t("invalid-argument",n)}function b2(){return new $t("app-deleted","The Firebase app was deleted.")}function Jh(n,e){return new $t("invalid-format","String does not match format '"+n+"': "+e)}function ef(n){throw new $t("internal-error","Internal error: "+n)}class mi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=mi.makeFromUrl(e,t)}catch(r){return new mi(e,"")}if(""===i.path)return i;throw function ioe(n){return new $t("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(S){S.path_=decodeURIComponent(S.path)}const d=t.replace(/[.]/g,"\\."),D=[{regex:a,indices:{bucket:1,path:3},postModify:function s(S){"/"===S.path.charAt(S.path.length-1)&&(S.path_=S.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===g2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<D.length;S++){const N=D[S],G=N.regex.exec(e);if(G){let ft=G[N.indices.path];ft||(ft=""),i=new mi(G[N.indices.bucket],ft),N.postModify(i);break}}if(null==i)throw function noe(n){return new $t("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class loe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function E_(n){return"string"==typeof n||n instanceof String}function w2(n){return H0()&&n instanceof Blob}function H0(){return"undefined"!=typeof Blob}function j0(n,e,t,i){if(i<e)throw U0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw U0(`Invalid value for '${n}'. Expected ${t} or less.`)}function ro(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function C2(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Jo=(()=>{return(n=Jo||(Jo={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Jo;var n})();class poe{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function doe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=B0();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?b2():y2():function toe(){return new $t("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new T_(!1,null,!0)):this.backoffId_=function coe(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function d(y){r=setTimeout(()=>{r=null,n(f,l())},y)}function h(){s&&clearTimeout(s)}function f(y,...b){if(c)return void h();if(y)return h(),void u.call(null,y,...b);if(l()||o)return h(),void u.call(null,y,...b);let D;i<64&&(i*=2),1===a?(a=2,D=0):D=1e3*(i+Math.random()),d(D)}let p=!1;function g(y){p||(p=!0,h(),!c&&(null!==r?(y||(a=2),clearTimeout(r),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},t),g}((i,r)=>{if(r)return void i(!1,new T_(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Jo.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===Jo.ABORT;return void i(!1,new T_(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new T_(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function uoe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class T_{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function woe(...n){const e=function boe(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(H0())return new Blob(n);throw new $t("unsupported-environment","This browser doesn't seem to support creating Blobs")}class $0{constructor(e,t){this.data=e,this.contentType=t||null}}function T2(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function I2(n,e){switch(n){case"base64":{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Jh(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Jh(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Eoe(n){return atob(n)}(e)}catch(r){throw Jh(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class D2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Jh("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Soe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class so{constructor(e,t){let i=0,r="";w2(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(w2(this.data_)){const r=function Coe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new so(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new so(i,!0)}}static getBlob(...e){if(H0()){const t=e.map(i=>i instanceof so?i.data_:i);return new so(woe.apply(null,t))}{const t=e.map(o=>E_(o)?function E2(n,e){switch(n){case"raw":return new $0(T2(e));case"base64":case"base64url":return new $0(I2(n,e));case"data_url":return new $0(function Ioe(n){const e=new D2(n);return e.base64?I2("base64",e.rest):function Toe(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Jh("data_url","Malformed data URL.")}return T2(e)}(e.rest)}(e),function Doe(n){return new D2(n).contentType}(e))}throw B0()}("raw",o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new so(r,!0)}}uploadData(){return this.data_}}function z0(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function foe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function S2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Aoe(n,e){return e}class gi{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Aoe}}let I_=null;function tf(){if(I_)return I_;const n=[];n.push(new gi("bucket")),n.push(new gi("generation")),n.push(new gi("metageneration")),n.push(new gi("name","fullPath",!0));const t=new gi("name");t.xform=function e(s,o){return function koe(n){return!E_(n)||n.length<2?n:S2(n)}(o)},n.push(t);const r=new gi("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new gi("timeCreated")),n.push(new gi("updated")),n.push(new gi("md5Hash",null,!0)),n.push(new gi("cacheControl",null,!0)),n.push(new gi("contentDisposition",null,!0)),n.push(new gi("contentEncoding",null,!0)),n.push(new gi("contentLanguage",null,!0)),n.push(new gi("contentType",null,!0)),n.push(new gi("metadata","customMetadata",!0)),I_=n,I_}function x2(n,e,t){const i=z0(e);return null===i?null:function Poe(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function Roe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new mi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function G0(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class ys{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vs(n){if(!n)throw B0()}function D_(n,e){return function t(i,r){const s=x2(n,r,e);return vs(null!==s),s}}function Su(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Jse(){return new $t("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Zse(){return new $t("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Xse(n){return new $t("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function eoe(n){return new $t("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function nf(n){const e=Su(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function Yse(n){return new $t("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function P2(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function $oe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class S_{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function W0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){vs(!1)}return vs(!!t&&-1!==(e||["active"]).indexOf(t)),t}function q0(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class qoe{constructor(e,t,i){if(function hoe(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function xu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Qoe extends class Koe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw ef("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ef("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ef("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ef("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ef("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xr(){return new Qoe}class eae{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=tf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function zoe(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=P2(e,i,r),a={name:o.fullPath},l=ro(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=G0(o,t),p=new ys(l,"POST",function f(g){let y;W0(g);try{y=g.getResponseHeader("X-Goog-Upload-URL")}catch(b){vs(!1)}return vs(E_(y)),y},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Su(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Xr,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function Goe(n,e,t,i){const l=new ys(t,"POST",function s(c){const u=W0(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){vs(!1)}d||vs(!1);const h=Number(d);return vs(!isNaN(h)),new S_(h,i.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Su(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Xr,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new S_(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Woe(n,e,t,i,r,s,o,a){const l=new S_(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function soe(){return new $t("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current,p={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},g=i.slice(d,d+u);if(null===g)throw v2();const D=new ys(t,"POST",function y(S,N){const G=W0(S,["active","final"]),ae=l.current+u,ft=i.size();let en;return en="final"===G?D_(e,s)(S,N):null,new S_(ae,ft,"final"===G,en)},e.maxUploadRetryTime);return D.headers=p,D.body=g.uploadData(),D.progressCallback=a||null,D.errorHandler=Su(n),D}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Xr,r,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=function k2(n,e,t){const r=ro(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ys(r,"GET",D_(n,t),o);return a.errorHandler=nf(e),a}(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Xr,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function O2(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let D="";for(let S=0;S<2;S++)D+=Math.random().toString().slice(2);return D}();o["Content-Type"]="multipart/related; boundary="+l;const c=P2(e,i,r),u=G0(c,t),f=so.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===f)throw v2();const p={name:c.fullPath},g=ro(s,n.host,n._protocol),b=n.maxUploadRetryTime,v=new ys(g,"POST",D_(n,t),b);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=Su(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Xr,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=y2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=q0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new qoe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(q0(this._state)){case"success":xu(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":xu(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(q0(this._state)){case"running":case"paused":e.next&&xu(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&xu(e.complete.bind(e))();break;default:e.error&&xu(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fl{constructor(e,t){this._service=e,this._location=t instanceof mi?t:mi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fl(e,t)}get root(){const e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S2(this._location.path)}get storage(){return this._service}get parent(){const e=function xoe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new mi(this._location.bucket,e);return new fl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function aoe(n){return new $t("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function lae(n){n._throwIfRoot("getDownloadURL");const e=function Uoe(n,e,t){const r=ro(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ys(r,"GET",function Voe(n,e){return function t(i,r){const s=x2(n,r,e);return vs(null!==s),function Ooe(n,e,t,i){const r=z0(e);if(null===r||!E_(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return ro("/b/"+o(n.bucket)+"/o/"+o(d),t,i)+C2({alt:"media",token:c})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=nf(e),a}(n.storage,n._location,tf());return n.storage.makeRequestWithTokens(e,Xr).then(t=>{if(null===t)throw function ooe(){return new $t("no-download-url","The given file does not have any download URLs.")}();return t})}function H2(n,e){if(n instanceof Q0){const t=n;if(null==t._bucket)throw function roe(){return new $t("no-default-bucket","No default bucket found. Did you set the '"+_2+"' property when initializing the app?")}();const i=new fl(t,t._bucket);return null!=e?H2(i,e):i}return void 0!==e?function U2(n,e){const t=function Moe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new mi(n._location.bucket,t);return new fl(n.storage,i)}(n,e):n}function j2(n,e){const t=null==e?void 0:e[_2];return null==t?null:mi.makeFromBucketSpec(t,n)}class Q0{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=g2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mi.makeFromBucketSpec(r,this._host):j2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?mi.makeFromBucketSpec(this._url,e):j2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){j0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){j0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return m(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return m(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fl(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new loe(b2());{const s=function voe(n,e,t,i,r,s){const o=C2(n.urlParams),a=n.url+o,l=Object.assign({},n.headers);return function _oe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function moe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function goe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function yoe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,i),new poe(a,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return m(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const $2="@firebase/storage",G2="storage";function W2(n,e,t){return function iae(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eae(n,new so(e),t)}(n=Me(n),e,t)}function x_(n){return lae(n=Me(n))}function rf(n,e){return function hae(n,e){if(e&&function uae(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Q0)return function dae(n,e){return new fl(n,e)}(n,e);throw U0("To use ref(service, url), the first argument must be a Storage instance.")}return H2(n,e)}(n=Me(n),e)}function sf(n=Zo(),e){return Qr(n=Me(n),G2).getImmediate({identifier:e})}function mae(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Q0(t,i,r,e,_s)}!function gae(){on(new Zt(G2,mae,"PUBLIC").setMultipleInstances(!0)),$e($2,"0.9.9",""),$e($2,"0.9.9","esm2017")}(),$e("firebase","9.10.0","app");const _i_firebase={projectId:"site-wynyard",appId:"1:788072440341:web:961357f1f92a55f4eba41c",storageBucket:"site-wynyard.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyDV7W5Hv2CnumoHfr3Tdtq_Xf1Kp8Rsls4",authDomain:"site-wynyard.firebaseapp.com",messagingSenderId:"788072440341"};var Y,vae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oo={},Y0=Y0||{},me=vae||self;function M_(){}function A_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function af(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var X0="closure_uid_"+(1e9*Math.random()>>>0),wae=0;function Cae(n,e,t){return n.call.apply(n.bind,arguments)}function Eae(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ei(n,e,t){return(ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cae:Eae).apply(null,arguments)}function k_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Un(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function ea(){this.s=this.s,this.o=this.o}var Iae={};ea.prototype.s=!1,ea.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function bae(n){return Object.prototype.hasOwnProperty.call(n,X0)&&n[X0]||(n[X0]=++wae)}(this);delete Iae[n]}},ea.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Z0(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function K2(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(A_(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ti.prototype.h=function(){this.defaultPrevented=!0};var Dae=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{me.addEventListener("test",M_,e),me.removeEventListener("test",M_,e)}catch(t){}return n}();function R_(n){return/^[\s\xa0]*$/.test(n)}var Q2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function J0(n,e){return n<e?-1:n>e?1:0}function P_(){var n=me.navigator;return n&&(n=n.userAgent)?n:""}function bs(n){return-1!=P_().indexOf(n)}function eT(n){return eT[" "](n),n}eT[" "]=M_;var O_,n,xae=bs("Opera"),Mu=bs("Trident")||bs("MSIE"),Y2=bs("Edge"),tT=Y2||Mu,X2=bs("Gecko")&&!(-1!=P_().toLowerCase().indexOf("webkit")&&!bs("Edge"))&&!(bs("Trident")||bs("MSIE"))&&!bs("Edge"),Mae=-1!=P_().toLowerCase().indexOf("webkit")&&!bs("Edge");function Z2(){var n=me.document;return n?n.documentMode:void 0}e:{var nT="",iT=(n=P_(),X2?/rv:([^\);]+)(\)|;)/.exec(n):Y2?/Edge\/([\d\.]+)/.exec(n):Mu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Mae?/WebKit\/(\S+)/.exec(n):xae?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iT&&(nT=iT?iT[1]:""),Mu){var rT=Z2();if(null!=rT&&rT>parseFloat(nT)){O_=String(rT);break e}}O_=nT}var Aae={};var Rae=me.document&&Mu&&(Z2()||parseInt(O_,10))||void 0;function lf(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(X2){e:{try{eT(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Pae[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&lf.X.h.call(this)}}Un(lf,ti);var Pae={2:"touch",3:"pen",4:"mouse"};lf.prototype.h=function(){lf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cf="closure_listenable_"+(1e6*Math.random()|0),Oae=0;function Nae(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++Oae,this.ba=this.ea=!1}function N_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function oT(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function eU(n){const e={};for(const t in n)e[t]=n[t];return e}const tU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nU(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<tU.length;s++)t=tU[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function F_(n){this.src=n,this.g={},this.h=0}function aT(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=q2(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(N_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lT(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==i)return r}return-1}F_.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=lT(n,e,i,r);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new Nae(e,this.src,s,!!i,r)).ea=t,n.push(e)),e};var cT="closure_lm_"+(1e6*Math.random()|0),uT={};function iU(n,e,t,i,r){if(i&&i.once)return sU(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)iU(n,e[s],t,i,r);return null}return t=pT(t),n&&n[cf]?n.N(e,t,af(i)?!!i.capture:!!i,r):rU(n,e,t,!1,i,r)}function rU(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=af(r)?!!r.capture:!!r,a=hT(n);if(a||(n[cT]=a=new F_(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function Fae(){const e=Lae;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Dae||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(aU(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function sU(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sU(n,e[s],t,i,r);return null}return t=pT(t),n&&n[cf]?n.O(e,t,af(i)?!!i.capture:!!i,r):rU(n,e,t,!0,i,r)}function oU(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)oU(n,e[s],t,i,r);else i=af(i)?!!i.capture:!!i,t=pT(t),n&&n[cf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lT(s=n.g[e],t,i,r))&&(N_(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=hT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lT(e,t,i,r)),(t=-1<n?e[n]:null)&&dT(t))}function dT(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[cf])aT(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(aU(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=hT(e))?(aT(t,n),0==t.h&&(t.src=null,e[cT]=null)):N_(n)}}}function aU(n){return n in uT?uT[n]:uT[n]="on"+n}function Lae(n,e){if(n.ba)n=!0;else{e=new lf(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&dT(n),n=t.call(i,e)}return n}function hT(n){return(n=n[cT])instanceof F_?n:null}var fT="__closure_events_fn_"+(1e9*Math.random()>>>0);function pT(n){return"function"==typeof n?n:(n[fT]||(n[fT]=function(e){return n.handleEvent(e)}),n[fT])}function Dn(){ea.call(this),this.i=new F_(this),this.P=this,this.I=null}function Hn(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var r=e;nU(e=new ti(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=L_(o,i,!0,e)&&r}if(r=L_(o=e.g=n,i,!0,e)&&r,r=L_(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=L_(o=e.g=t[s],i,!1,e)&&r}function L_(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&aT(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Un(Dn,ea),Dn.prototype[cf]=!0,Dn.prototype.removeEventListener=function(n,e,t,i){oU(this,n,e,t,i)},Dn.prototype.M=function(){if(Dn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)N_(t[i]);delete n.g[e],n.h--}}this.I=null},Dn.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Dn.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var mT=me.JSON.stringify;function Vae(){var n=uU;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var gT,lU=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Uae,n=>n.reset());class Uae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hae(n){me.setTimeout(()=>{throw n},0)}function cU(n,e){gT||function jae(){var n=me.Promise.resolve(void 0);gT=function(){n.then($ae)}}(),_T||(gT(),_T=!0),uU.add(n,e)}var _T=!1,uU=new class Bae{constructor(){this.h=this.g=null}add(e,t){const i=lU.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function $ae(){for(var n;n=Vae();){try{n.h.call(n.g)}catch(t){Hae(t)}var e=lU;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}_T=!1}function V_(n,e){Dn.call(this),this.h=n||1,this.g=e||me,this.j=ei(this.kb,this),this.l=Date.now()}function yT(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function vT(n,e,t){if("function"==typeof n)t&&(n=ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:me.setTimeout(n,e||0)}function dU(n){n.g=vT(()=>{n.g=null,n.i&&(n.i=!1,dU(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Un(V_,Dn),(Y=V_.prototype).ca=!1,Y.R=null,Y.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Hn(this,"tick"),this.ca&&(yT(this),this.start()))}},Y.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Y.M=function(){V_.X.M.call(this),yT(this),delete this.g};class zae extends ea{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dU(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uf(n){ea.call(this),this.h=n,this.g={}}Un(uf,ea);var hU=[];function fU(n,e,t,i){Array.isArray(t)||(t&&(hU[0]=t.toString()),t=hU);for(var r=0;r<t.length;r++){var s=iU(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function pU(n){oT(n.g,function(e,t){this.g.hasOwnProperty(t)&&dT(e)},n),n.g={}}function B_(){this.g=!0}function Au(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Kae(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return mT(t)}catch(a){return e}}(n,t)+(i?" "+i:"")})}uf.prototype.M=function(){uf.X.M.call(this),pU(this)},uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},B_.prototype.Aa=function(){this.g=!1},B_.prototype.info=function(){};var pl={},mU=null;function U_(){return mU=mU||new Dn}function gU(n){ti.call(this,pl.Oa,n)}function df(n){const e=U_();Hn(e,new gU(e,n))}function _U(n,e){ti.call(this,pl.STAT_EVENT,n),this.stat=e}function yi(n){const e=U_();Hn(e,new _U(e,n))}function yU(n,e){ti.call(this,pl.Pa,n),this.size=e}function hf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){n()},e)}pl.Oa="serverreachability",Un(gU,ti),pl.STAT_EVENT="statevent",Un(_U,ti),pl.Pa="timingevent",Un(yU,ti);var H_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},vU={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bT(){}function wU(){}bT.prototype.h=null;var ET,ff={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function wT(){ti.call(this,"d")}function CT(){ti.call(this,"c")}function j_(){}function pf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new uf(this),this.O=Qae,this.T=new V_(n=tT?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new CU}function CU(){this.i=null,this.g="",this.h=!1}Un(wT,ti),Un(CT,ti),Un(j_,bT),j_.prototype.g=function(){return new XMLHttpRequest},j_.prototype.i=function(){return{}},ET=new j_;var Qae=45e3,TT={},$_={};function IT(n,e,t){n.K=1,n.v=q_(ao(e)),n.s=t,n.P=!0,EU(n,null)}function EU(n,e){n.F=Date.now(),mf(n),n.A=ao(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),PU(t.i,"t",i),n.C=0,t=n.l.H,n.h=new CU,n.g=iH(n.l,t?e:null,!n.s),0<n.N&&(n.L=new zae(ei(n.Ka,n,n.g),n.N)),fU(n.S,n.g,"readystatechange",n.hb),e=n.H?eU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),df(1),function Gae(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function TU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function IU(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=Yae(n,t),r==$_){4==e&&(n.o=4,yi(14),i=!1),Au(n.j,n.m,null,"[Incomplete Response]");break}if(r==TT){n.o=4,yi(15),Au(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Au(n.j,n.m,r,null),DT(n,r)}TU(n)&&r!=$_&&r!=TT&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),OT(e),e.K=!0,yi(11))):(Au(n.j,n.m,t,"[Invalid Chunked Response]"),ml(n),gf(n))}function Yae(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?$_:(t=Number(e.substring(t,i)),isNaN(t)?TT:(i+=1)+t>e.length?$_:(e=e.substr(i,t),n.C=i+t,e))}function mf(n){n.V=Date.now()+n.O,DU(n,n.O)}function DU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hf(ei(n.fb,n),e)}function z_(n){n.B&&(me.clearTimeout(n.B),n.B=null)}function gf(n){0==n.l.G||n.I||JU(n.l,n)}function ml(n){z_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,yT(n.T),pU(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function DT(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ST(t.h,n)))if(!n.J&&ST(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=hf(ei(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;J_(t),X_(t)}PT(t),yi(18)}if(1>=FU(t.h)&&t.ja){try{t.ja()}catch(c){}t.ja=void 0}}else _l(t,11)}else if((n.J||t.g==n)&&J_(t),!R_(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.T=c[0],c=c[1],2==t.G)if("c"==c[0]){t.I=c[1],t.ka=c[2];const u=c[3];null!=u&&(t.ma=u,t.j.info("VER="+t.ma));const d=c[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.J=i=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(xT(s,s.h),s.h=null))}if(i.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.za=g,Dt(i.F,i.D,g))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((i=t).sa=nH(i,i.H?i.ka:null,i.V),o.J){LU(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(z_(a),mf(a)),i.g=o}else XU(i);0<t.i.length&&Z_(t)}else"stop"!=c[0]&&"close"!=c[0]||_l(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_l(t,7):RT(t):"noop"!=c[0]&&t.l&&t.l.wa(c),t.A=0)}df(4)}catch(c){}}function SU(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(A_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Zae(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(A_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Xae(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(A_(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(Y=pf.prototype).setTimeout=function(n){this.O=n},Y.hb=function(n){n=n.target;const e=this.L;e&&3==lo(n)?e.l():this.Ka(n)},Y.Ka=function(n){try{if(n==this.g)e:{const u=lo(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(3!=u||tT||this.g&&(this.h.h||this.g.fa()||GU(this.g)))){this.I||4!=u||7==e||df(8==e||0>=d?3:2),z_(this);var t=this.g.aa();this.Y=t;t:if(TU(this)){var i=GU(this.g);n="";var r=i.length,s=4==lo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ml(this),gf(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function Wae(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R_(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,yi(12),ml(this),gf(this);break e}Au(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,DT(this,t)}this.P?(IU(this,u,o),tT&&this.i&&3==u&&(fU(this.S,this.T,"tick",this.gb),this.T.start())):(Au(this.j,this.m,o,null),DT(this,o)),4==u&&ml(this),this.i&&!this.I&&(4==u?JU(this.l,this):(this.i=!1,mf(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),ml(this),gf(this)}}}catch(u){}},Y.gb=function(){if(this.g){var n=lo(this.g),e=this.g.fa();this.C<e.length&&(z_(this),IU(this,n,e),this.i&&4!=n&&mf(this))}},Y.cancel=function(){this.I=!0,ml(this)},Y.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function qae(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(df(3),yi(17)),ml(this),this.o=2,gf(this)):DU(this,this.V-n)};var xU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof gl){this.h=void 0!==e?e:n.h,G_(this,n.j),this.s=n.s,this.g=n.g,W_(this,n.m),this.l=n.l,e=n.i;var t=new vf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),MU(this,t),this.o=n.o}else n&&(t=String(n).match(xU))?(this.h=!!e,G_(this,t[1]||"",!0),this.s=_f(t[2]||""),this.g=_f(t[3]||"",!0),W_(this,t[4]),this.l=_f(t[5]||"",!0),MU(this,t[6]||"",!0),this.o=_f(t[7]||"")):(this.h=!!e,this.i=new vf(null,this.h))}function ao(n){return new gl(n)}function G_(n,e,t){n.j=t?_f(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function W_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function MU(n,e,t){e instanceof vf?(n.i=e,function sle(n,e){e&&!n.j&&(ta(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(kU(this,i),PU(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=yf(e,ile)),n.i=new vf(e,n.h))}function Dt(n,e,t){n.i.set(e,t)}function q_(n){return Dt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _f(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ele),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ele(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}gl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yf(e,AU,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yf(e,AU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(yf(t,"/"==t.charAt(0)?nle:tle,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yf(t,rle)),n.join("")};var AU=/[#\/\?@]/g,tle=/[#\?:]/g,nle=/[#\?]/g,ile=/[#\?@]/g,rle=/#/g;function vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ta(n){n.g||(n.g=new Map,n.h=0,n.i&&function Jae(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kU(n,e){ta(n),e=ku(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function RU(n,e){return ta(n),e=ku(n,e),n.g.has(e)}function PU(n,e,t){kU(n,e),0<t.length&&(n.i=null,n.g.set(ku(n,e),Z0(t)),n.h+=t.length)}function ku(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function OU(n){this.l=n||ale,n=me.PerformanceNavigationTiming?0<(n=me.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(me.g&&me.g.Ga&&me.g.Ga()&&me.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Y=vf.prototype).add=function(n,e){ta(this),this.i=null,n=ku(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Y.forEach=function(n,e){ta(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Y.oa=function(){ta(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},Y.W=function(n){ta(this);let e=[];if("string"==typeof n)RU(this,n)&&(e=e.concat(this.g.get(ku(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Y.set=function(n,e){return ta(this),this.i=null,RU(this,n=ku(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Y.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Y.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var ale=10;function NU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FU(n){return n.h?1:n.g?n.g.size:0}function ST(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xT(n,e){n.g?n.g.add(e):n.h=e}function LU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Z0(n.i)}function MT(){}function lle(){this.g=new MT}function cle(n,e,t){const i=t||"";try{SU(n,function(r,s){let o=r;af(r)&&(o=mT(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function K_(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function bf(n){this.l=n.$b||null,this.j=n.ib||!1}function Q_(n,e){Dn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=AT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}OU.prototype.cancel=function(){if(this.i=VU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},MT.prototype.stringify=function(n){return me.JSON.stringify(n,void 0)},MT.prototype.parse=function(n){return me.JSON.parse(n,void 0)},Un(bf,bT),bf.prototype.g=function(){return new Q_(this.l,this.j)},bf.prototype.i=function(n){return function(){return n}}({}),Un(Q_,Dn);var AT=0;function BU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function wf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cf(n)}function Cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Y=Q_.prototype).open=function(n,e){if(this.readyState!=AT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Cf(this)},Y.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wf(this)),this.readyState=AT},Y.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cf(this)),this.g&&(this.readyState=3,Cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==me.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;BU(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Y.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?wf(this):Cf(this),3==this.readyState&&BU(this)}},Y.Ua=function(n){this.g&&(this.response=this.responseText=n,wf(this))},Y.Ta=function(n){this.g&&(this.response=n,wf(this))},Y.ga=function(){this.g&&wf(this)},Y.setRequestHeader=function(n,e){this.v.append(n,e)},Y.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Y.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Q_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dle=me.JSON.parse;function an(n){Dn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=UU,this.K=this.L=!1}Un(an,Dn);var UU="",hle=/^https?$/i,fle=["POST","PUT"];function HU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jU(n),Y_(n)}function jU(n){n.D||(n.D=!0,Hn(n,"complete"),Hn(n,"error"))}function $U(n){if(n.h&&void 0!==Y0&&(!n.C[1]||4!=lo(n)||2!=n.aa()))if(n.v&&4==lo(n))vT(n.Ha,0,n);else if(Hn(n,"readystatechange"),4==lo(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var r=String(n.H).match(xU)[1]||null;if(!r&&me.self&&me.self.location){var s=me.self.location.protocol;r=s.substr(0,s.length-1)}i=!hle.test(r?r.toLowerCase():"")}t=i}if(t)Hn(n,"complete"),Hn(n,"success");else{n.m=6;try{var o=2<lo(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.aa()+"]",jU(n)}}finally{Y_(n)}}}function Y_(n,e){if(n.g){zU(n);const t=n.g,i=n.C[0]?M_:null;n.g=null,n.C=null,e||Hn(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function zU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(me.clearTimeout(n.A),n.A=null)}function lo(n){return n.g?n.g.readyState:0}function GU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case UU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function WU(n){let e="";return oT(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function kT(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=WU(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dt(n,e,t))}function Ef(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qU(n){this.Ca=0,this.i=[],this.j=new B_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Ef("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Ef("baseRetryDelayMs",5e3,n),this.ab=Ef("retryDelaySeedMs",1e4,n),this.Za=Ef("forwardChannelMaxRetries",2,n),this.ta=Ef("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new OU(n&&n.concurrentRequestLimit),this.Fa=new lle,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function RT(n){if(KU(n),3==n.G){var e=n.U++,t=ao(n.F);Dt(t,"SID",n.I),Dt(t,"RID",e),Dt(t,"TYPE","terminate"),Tf(n,t),(e=new pf(n,n.j,e,void 0)).K=2,e.v=q_(ao(t)),t=!1,me.navigator&&me.navigator.sendBeacon&&(t=me.navigator.sendBeacon(e.v.toString(),"")),!t&&me.Image&&((new Image).src=e.v,t=!0),t||(e.g=iH(e.l,null),e.g.da(e.v)),e.F=Date.now(),mf(e)}tH(n)}function X_(n){n.g&&(OT(n),n.g.cancel(),n.g=null)}function KU(n){X_(n),n.u&&(me.clearTimeout(n.u),n.u=null),J_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&me.clearTimeout(n.m),n.m=null)}function Z_(n){NU(n.h)||n.m||(n.m=!0,cU(n.Ja,n),n.C=0)}function QU(n,e){var t;t=e?e.m:n.U++;const i=ao(n.F);Dt(i,"SID",n.I),Dt(i,"RID",t),Dt(i,"AID",n.T),Tf(n,i),n.o&&n.s&&kT(i,n.o,n.s),t=new pf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=YU(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),xT(n.h,t),IT(t,i,e)}function Tf(n,e){n.ia&&oT(n.ia,function(t,i){Dt(e,i,t)}),n.l&&SU({},function(t,i){Dt(e,i,t)})}function YU(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ei(n.l.Qa,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{cle(u,o,"req"+c+"_")}catch(d){i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function XU(n){n.g||n.u||(n.Z=1,cU(n.Ia,n),n.A=0)}function PT(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=hf(ei(n.Ia,n),eH(n,n.A)),n.A++,0))}function OT(n){null!=n.B&&(me.clearTimeout(n.B),n.B=null)}function ZU(n){n.g=new pf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ao(n.sa);Dt(e,"RID","rpc"),Dt(e,"SID",n.I),Dt(e,"CI",n.L?"0":"1"),Dt(e,"AID",n.T),Dt(e,"TYPE","xmlhttp"),Tf(n,e),n.o&&n.s&&kT(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=q_(ao(e)),t.s=null,t.P=!0,EU(t,n)}function J_(n){null!=n.v&&(me.clearTimeout(n.v),n.v=null)}function JU(n,e){var t=null;if(n.g==e){J_(n),OT(n),n.g=null;var i=2}else{if(!ST(n.h,e))return;t=e.D,LU(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Hn(i=U_(),new yU(i,t,e,r)),Z_(n)}else XU(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function mle(n,e){return!(FU(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=hf(ei(n.Ja,n,e),eH(n,n.C)),n.C++,0)))}(n,e)||2==i&&PT(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:_l(n,5);break;case 4:_l(n,10);break;case 3:_l(n,6);break;default:_l(n,2)}}function eH(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function _l(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=ei(n.jb,n);t||(t=new gl("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||G_(t,"https"),q_(t)),function ule(n,e){const t=new B_;if(me.Image){const i=new Image;i.onload=k_(K_,t,i,"TestLoadImage: loaded",!0,e),i.onerror=k_(K_,t,i,"TestLoadImage: error",!1,e),i.onabort=k_(K_,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=k_(K_,t,i,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else yi(2);n.G=0,n.l&&n.l.va(e),tH(n),KU(n)}function tH(n){if(n.G=0,n.la=[],n.l){const e=VU(n.h);(0!=e.length||0!=n.i.length)&&(K2(n.la,e),K2(n.la,n.i),n.h.i.length=0,Z0(n.i),n.i.length=0),n.l.ua()}}function nH(n,e,t){var i=t instanceof gl?ao(t):new gl(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),W_(i,i.m);else{var r=me.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new gl(null,void 0);i&&G_(s,i),e&&(s.g=e),r&&W_(s,r),t&&(s.l=t),i=s}return e=n.za,(t=n.D)&&e&&Dt(i,t,e),Dt(i,"VER",n.ma),Tf(n,i),i}function iH(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new an(t&&n.Da&&!n.ra?new bf({ib:!0}):n.ra)).L=n.H,e}function rH(){}function ey(){if(Mu&&!(10<=Number(Rae)))throw Error("Environmental error: no available transport.")}function Ji(n,e){Dn.call(this),this.g=new qU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!R_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!R_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ru(this)}function sH(n){wT.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oH(){CT.call(this),this.status=1}function Ru(n){this.g=n}(Y=an.prototype).da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ET.g(),this.C=function bU(n){return n.h||(n.h=n.i())}(this.u?this.u:ET),this.g.onreadystatechange=ei(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void HU(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=me.FormData&&n instanceof me.FormData,!(0<=q2(fle,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zU(this),0<this.B&&((this.K=function ple(n){return Mu&&function kae(){return function Sae(n){var e=Aae;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Q2(String(O_)).split("."),t=Q2("9").split("."),i=Math.max(e.length,t.length);for(let o=0;0==n&&o<i;o++){var r=e[o]||"",s=t[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=J0(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||J0(0==r[2].length,0==s[2].length)||J0(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ei(this.qa,this)):this.A=vT(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){HU(this,s)}},Y.qa=function(){void 0!==Y0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hn(this,"timeout"),this.abort(8))},Y.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hn(this,"complete"),Hn(this,"abort"),Y_(this))},Y.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Y_(this,!0)),an.X.M.call(this)},Y.Ha=function(){this.s||(this.F||this.v||this.l?$U(this):this.eb())},Y.eb=function(){$U(this)},Y.aa=function(){try{return 2<lo(this)?this.g.status:-1}catch(n){return-1}},Y.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Y.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dle(e)}},Y.Ea=function(){return this.m},Y.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Y=qU.prototype).ma=8,Y.G=1,Y.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new pf(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=eU(s),nU(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YU(this,r,e),Dt(t=ao(this.F),"RID",n),Dt(t,"CVER",22),this.D&&Dt(t,"X-HTTP-Session-Id",this.D),Tf(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(WU(s)))+"&"+e:this.o&&kT(t,this.o,s)),xT(this.h,r),this.Xa&&Dt(t,"TYPE","init"),this.O?(Dt(t,"$req",e),Dt(t,"SID","null"),r.Z=!0,IT(r,t,null)):IT(r,t,e),this.G=2}}else 3==this.G&&(n?QU(this,n):0==this.i.length||NU(this.h)||QU(this))},Y.Ia=function(){if(this.u=null,ZU(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=hf(ei(this.cb,this),n)}},Y.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yi(10),X_(this),ZU(this))},Y.bb=function(){null!=this.v&&(this.v=null,X_(this),PT(this),yi(19))},Y.jb=function(n){n?(this.j.info("Successfully pinged google.com"),yi(2)):(this.j.info("Failed to ping google.com"),yi(1))},(Y=rH.prototype).xa=function(){},Y.wa=function(){},Y.va=function(){},Y.ua=function(){},Y.Qa=function(){},ey.prototype.g=function(n,e){return new Ji(n,e)},Un(Ji,Dn),Ji.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=nH(n,null,n.V),Z_(n)},Ji.prototype.close=function(){RT(this.g)},Ji.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mT(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Z_(e)},Ji.prototype.M=function(){this.g.l=null,delete this.j,RT(this.g),delete this.g,Ji.X.M.call(this)},Un(sH,wT),Un(oH,CT),Un(Ru,rH),Ru.prototype.xa=function(){Hn(this.g,"a")},Ru.prototype.wa=function(n){Hn(this.g,new sH(n))},Ru.prototype.va=function(n){Hn(this.g,new oH(n))},Ru.prototype.ua=function(){Hn(this.g,"b")},ey.prototype.createWebChannel=ey.prototype.g,Ji.prototype.send=Ji.prototype.u,Ji.prototype.open=Ji.prototype.m,Ji.prototype.close=Ji.prototype.close,H_.NO_ERROR=0,H_.TIMEOUT=8,H_.HTTP_ERROR=6,vU.COMPLETE="complete",wU.EventType=ff,ff.OPEN="a",ff.CLOSE="b",ff.ERROR="c",ff.MESSAGE="d",Dn.prototype.listen=Dn.prototype.N,an.prototype.listenOnce=an.prototype.O,an.prototype.getLastError=an.prototype.Na,an.prototype.getLastErrorCode=an.prototype.Ea,an.prototype.getStatus=an.prototype.aa,an.prototype.getResponseJson=an.prototype.Ra,an.prototype.getResponseText=an.prototype.fa,an.prototype.send=an.prototype.da;var gle=oo.createWebChannelTransport=function(){return new ey},_le=oo.getStatEventTarget=function(){return U_()},NT=oo.ErrorCode=H_,yle=oo.EventType=vU,vle=oo.Event=pl,aH=oo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ble=oo.FetchXmlHttpFactory=bf,ty=oo.WebChannel=wU,wle=oo.XhrIo=an;const lH="@firebase/firestore";class Sn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");let Pu="9.10.0";const na=new Qo("@firebase/firestore");function FT(){return na.logLevel}function A(n,...e){if(na.logLevel<=Ve.DEBUG){const t=e.map(LT);na.debug(`Firestore (${Pu}): ${n}`,...t)}}function Jt(n,...e){if(na.logLevel<=Ve.ERROR){const t=e.map(LT);na.error(`Firestore (${Pu}): ${n}`,...t)}}function yl(n,...e){if(na.logLevel<=Ve.WARN){const t=e.map(LT);na.warn(`Firestore (${Pu}): ${n}`,...t)}}function LT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function K(n="Unexpected state"){const e=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: `+n;throw Jt(e),new Error(e)}function oe(n,e){n||K()}function U(n,e){return n}const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends Ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sn.UNAUTHENTICATED))}shutdown(){}}class Ile{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dle{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(oe("string"==typeof i.accessToken),new cH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return oe(null===e||"string"==typeof e),new Sn(e)}}class Sle{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(oe(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class xle{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new Sle(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mle{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=s=>{null!=s.error&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe("string"==typeof t.token),this.A=t.token,new uH(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ale(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class dH{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Ale(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(n,e){return n<e?-1:n>e?1:0}function Ou(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function hH(n){return n+"\0"}class St{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new St(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new St(0,0))}static max(){return new re(new St(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class If{constructor(e,t,i){void 0===t?t=0:t>e.length&&K(),void 0===i?i=e.length-t:i>e.length-t&&K(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===If.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof If?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class We extends If{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new We(t)}static emptyPath(){return new We([])}}const kle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends If{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return kle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new x(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new x(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new x(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new x(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}class B{constructor(e){this.path=e}static fromPath(e){return new B(We.fromString(e))}static fromName(e){return new B(We.fromString(e).popFirst(5))}static empty(){return new B(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===We.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new We(e.slice()))}}class ny{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function VT(n){return n.fields.find(e=>2===e.kind)}function vl(n){return n.fields.filter(e=>2!==e.kind)}ny.UNKNOWN_ID=-1;class iy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Df(0,er.min())}}function fH(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=re.fromTimestamp(1e9===i?new St(t+1,0):new St(t,i));return new er(r,B.empty(),e)}function pH(n){return new er(n.readTime,n.key,-1)}class er{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new er(re.min(),B.empty(),-1)}static max(){return new er(re.max(),B.empty(),-1)}}function BT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=B.comparator(n.documentKey,e.documentKey),0!==t?t:ge(n.largestBatchId,e.largestBatchId))}const mH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ia(n){return UT.apply(this,arguments)}function UT(){return UT=m(function*(n){if(n.code!==T.FAILED_PRECONDITION||n.message!==mH)throw n;A("LocalStore","Unexpectedly lost primary lease")}),UT.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,i)=>{t(e)})}static reject(e){return new w((t,i)=>{i(e)})}static waitFor(e){return new w((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=w.resolve(!1);for(const i of e)t=t.next(r=>r?w.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new w((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new w((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class ry{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new xn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Sf(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=HT(i.target.error);this.P.reject(new Sf(e,r))}}static open(e,t,i,r){try{return new ry(t,e.transaction(r,i))}catch(s){throw new Sf(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Nle(t)}}class Zr{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Zr.D(Xt())&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),bl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ko())return!1;if(Zr.N())return!0;const e=Xt(),t=Zr.D(e),i=0<t&&t<10,r=Zr.k(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return m(function*(){return t.db||(A("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new Sf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new x(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new x(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Sf(e,a))},s.onupgradeneeded=o=>{A("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{A("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return m(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.F(e);const l=ry.open(s.db,e,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),w.reject(u))).toPromise();return c.catch(()=>{}),yield l.v,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(A("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ole{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return bl(this.U.delete())}}class Sf extends x{constructor(e,t){super(T.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ra(n){return"IndexedDbTransactionError"===n.name}class Nle{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(A("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),bl(i)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),bl(this.store.add(e))}get(e){return bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),A("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),bl(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),bl(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new w((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new w((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}Y(e,t){A("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(s,o,a)=>a.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new w((i,r)=>{t.onerror=s=>{const o=HT(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}H(e,t){const i=[];return new w((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Ole(a),c=t(a.primaryKey,a.value,l);if(c instanceof w){const u=c.catch(d=>(l.done(),w.reject(d)));i.push(u)}l.isDone?r():null===l.G?a.continue():a.continue(l.G)}}).next(()=>w.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bl(n){return new w((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=HT(i.target.error);t(r)}})}let _H=!1;function HT(n){const e=Zr.D(Xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _H||(_H=!0,setTimeout(()=>{throw i},0)),i}}return n}class Fle{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;A("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,m(function*(){t.task=null;try{A("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){ra(i)?A("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield ia(i)}yield t.nt(6e4)}))}}class Lle{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return m(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,s=!0;return w.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return A("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(r,s)).next(a=>(A("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=pH(s);BT(o,i)>0&&(i=o)}),new er(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function yH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Oi.at=-1;class Gt{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new Gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sy(this.root,e,this.comparator,!1)}getReverseIterator(){return new sy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sy(this.root,e,this.comparator,!0)}}class sy{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:jn.RED,this.left=null!=r?r:jn.EMPTY,this.right=null!=s?s:jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new jn(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1,jn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(n,e,t,i,r){return this}insert(n,e,t){return new jn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bH(this.data.getIterator())}getIteratorFrom(e){return new bH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class bH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nu(n){return n.hasNext()?n.getNext():void 0}class tr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new tr([])}unionWith(e){let t=new lt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ou(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yn(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const Ble=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(n){if(oe(!!n),"string"==typeof n){let e=0;const t=Ble.exec(n);if(oe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cl(n){return"string"==typeof n?yn.fromBase64String(n):yn.fromUint8Array(n)}function jT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wH(n){const e=n.mapValue.fields.__previous_value__;return jT(e)?wH(e):e}function xf(n){const e=sa(n.mapValue.fields.__local_write_time__.timestampValue);return new St(e.seconds,e.nanos)}class Ule{constructor(e,t,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class oa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}function Mf(n){return null==n}function Af(n){return 0===n&&1/n==-1/0}function CH(n){return"number"==typeof n&&Number.isInteger(n)&&!Af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const aa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oy={nullValue:"NULL_VALUE"};function El(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jT(n)?4:DH(n)?9007199254740991:10:K()}function ws(n,e){if(n===e)return!0;const t=El(n);if(t!==El(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xf(n).isEqual(xf(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=sa(i.timestampValue),o=sa(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Cl(n.bytesValue).isEqual(Cl(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Wt(i.geoPointValue.latitude)===Wt(r.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Wt(i.integerValue)===Wt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Wt(i.doubleValue),o=Wt(r.doubleValue);return s===o?Af(s)===Af(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Ou(n.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(yH(s)!==yH(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!ws(s[a],o[a])))return!1;return!0}(n,e);default:return K()}var r}function kf(n,e){return void 0!==(n.values||[]).find(t=>ws(t,e))}function la(n,e){if(n===e)return 0;const t=El(n),i=El(e);if(t!==i)return ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Wt(r.integerValue||r.doubleValue),a=Wt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return EH(n.timestampValue,e.timestampValue);case 4:return EH(xf(n),xf(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(r,s){const o=Cl(r),a=Cl(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ge(o[l],a[l]);if(0!==c)return c}return ge(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ge(Wt(r.latitude),Wt(s.latitude));return 0!==o?o:ge(Wt(r.longitude),Wt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=la(o[l],a[l]);if(c)return c}return ge(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===aa.mapValue&&s===aa.mapValue)return 0;if(r===aa.mapValue)return 1;if(s===aa.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ge(a[u],c[u]);if(0!==d)return d;const h=la(o[a[u]],l[c[u]]);if(0!==h)return h}return ge(a.length,c.length)}(n.mapValue,e.mapValue);default:throw K()}}function EH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ge(n,e);const t=sa(n),i=sa(e),r=ge(t.seconds,i.seconds);return 0!==r?r:ge(t.nanos,i.nanos)}function Fu(n){return $T(n)}function $T(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=sa(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cl(n.bytesValue).toBase64():"referenceValue"in n?B.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=$T(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${$T(i.fields[a])}`;return s+"}"}(n.mapValue):K();var e}function Tl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zT(n){return!!n&&"integerValue"in n}function Rf(n){return!!n&&"arrayValue"in n}function TH(n){return!!n&&"nullValue"in n}function IH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ay(n){return!!n&&"mapValue"in n}function Pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Pf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hle(n){return"nullValue"in n?oy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tl(oa.empty(),B.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:K()}function jle(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tl(oa.empty(),B.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?aa:K()}function SH(n,e){const t=la(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xH(n,e){const t=la(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pf(t)}setAll(e){let t=zt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Pf(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ay(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){wl(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new $n(Pf(this.value))}}function MH(n){const e=[];return wl(n.fields,(t,i)=>{const r=new zt([t]);if(ay(i)){const s=MH(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new tr(e)}class _t{constructor(e,t,i,r,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new _t(e,0,re.min(),re.min(),$n.empty(),0)}static newFoundDocument(e,t,i){return new _t(e,1,t,re.min(),i,0)}static newNoDocument(e,t){return new _t(e,2,t,re.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,re.min(),$n.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $le{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function AH(n,e=null,t=[],i=[],r=null,s=null,o=null){return new $le(n,e,t,i,r,s,o)}function Il(n){const e=U(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Fu(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Fu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Fu(i)).join(",")),e.ht=t}return e.ht}function Of(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Zle(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!ws(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NH(n.startAt,e.startAt)&&NH(n.endAt,e.endAt)}function ly(n){return B.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cy(n,e){return n.filters.filter(t=>t instanceof zn&&t.field.isEqual(e))}function kH(n,e,t){let i=oy,r=!0;for(const s of cy(n,e)){let o=oy,a=!0;switch(s.op){case"<":case"<=":o=Hle(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=oy}SH({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];SH({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function RH(n,e,t){let i=aa,r=!0;for(const s of cy(n,e)){let o=aa,a=!0;switch(s.op){case">=":case">":o=jle(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=aa}xH({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];xH({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class zn extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new Gle(e,t,i):"array-contains"===t?new Kle(e,i):"in"===t?new Qle(e,i):"not-in"===t?new Yle(e,i):"array-contains-any"===t?new Xle(e,i):new zn(e,t,i)}static lt(e,t,i){return"in"===t?new Wle(e,i):new qle(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(la(t,this.value)):null!==t&&El(this.value)===El(t)&&this.ft(la(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gle extends zn{constructor(e,t,i){super(e,t,i),this.key=B.fromName(i.referenceValue)}matches(e){const t=B.comparator(e.key,this.key);return this.ft(t)}}class Wle extends zn{constructor(e,t){super(e,"in",t),this.keys=PH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qle extends zn{constructor(e,t){super(e,"not-in",t),this.keys=PH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>B.fromName(i.referenceValue))}class Kle extends zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rf(t)&&kf(t.arrayValue,this.value)}}class Qle extends zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kf(this.value.arrayValue,t)}}class Yle extends zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kf(this.value.arrayValue,t)}}class Xle extends zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>kf(this.value.arrayValue,i))}}class ca{constructor(e,t){this.position=e,this.inclusive=t}}class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function OH(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),t.key):la(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function NH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ws(n.position[t],e.position[t]))return!1;return!0}class co{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function FH(n,e,t,i,r,s,o,a){return new co(n,e,t,i,r,s,o,a)}function Vu(n){return new co(n)}function LH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function GT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function WT(n){for(const e of n.filters)if(e.dt())return e.field;return null}function qT(n){return null!==n.collectionGroup}function Bu(n){const e=U(n);if(null===e._t){e._t=[];const t=WT(e),i=GT(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new Lu(t)),e._t.push(new Lu(zt.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Lu(zt.keyField(),s))}}}return e._t}function Ni(n){const e=U(n);if(!e.wt)if("F"===e.limitType)e.wt=AH(e.path,e.collectionGroup,Bu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Bu(e))t.push(new Lu(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new ca(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ca(e.startAt.position,e.startAt.inclusive):null;e.wt=AH(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function uy(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nf(n,e){return Of(Ni(n),Ni(e))&&n.limitType===e.limitType}function VH(n){return`${Il(Ni(n))}|lt:${n.limitType}`}function KT(n){return`Query(target=${function zle(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Fu(i.value)}`;var i}).join(", ")}]`),Mf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Fu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Fu(t)).join(",")),`Target(${e})`}(Ni(n))}; limitType=${n.limitType})`}function QT(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):B.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,o){const a=OH(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,Bu(t),i)||t.endAt&&!function(r,s,o){const a=OH(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,Bu(t),i)));var t,i}function BH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UH(n){return(e,t)=>{let i=!1;for(const r of Bu(n)){const s=Jle(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function Jle(n,e,t){const i=n.field.isKeyField()?B.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return null!==a&&null!==l?la(a,l):K()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return K()}}function HH(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function jH(n){return{integerValue:""+n}}function $H(n,e){return CH(e)?jH(e):HH(n,e)}class dy{constructor(){this._=void 0}}function ece(n,e,t){return n instanceof Uu?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Dl?GH(n,e):n instanceof Sl?WH(n,e):function(i,r){const s=zH(i,r),o=qH(s)+qH(i.yt);return zT(s)&&zT(i.yt)?jH(o):HH(i.It,o)}(n,e)}function tce(n,e,t){return n instanceof Dl?GH(n,e):n instanceof Sl?WH(n,e):t}function zH(n,e){return n instanceof Hu?zT(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Uu extends dy{}class Dl extends dy{constructor(e){super(),this.elements=e}}function GH(n,e){const t=KH(e);for(const i of n.elements)t.some(r=>ws(r,i))||t.push(i);return{arrayValue:{values:t}}}class Sl extends dy{constructor(e){super(),this.elements=e}}function WH(n,e){let t=KH(e);for(const i of n.elements)t=t.filter(r=>!ws(r,i));return{arrayValue:{values:t}}}class Hu extends dy{constructor(e,t){super(),this.It=e,this.yt=t}}function qH(n){return Wt(n.integerValue||n.doubleValue)}function KH(n){return Rf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ff{constructor(e,t){this.field=e,this.transform=t}}class ice{constructor(e,t){this.version=e,this.transformResults=t}}class xt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fy{}function QH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $u(n.key,xt.none()):new ju(n.key,n.data,xt.none());{const t=n.data,i=$n.empty();let r=new lt(zt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new uo(n.key,i,new tr(r.toArray()),xt.none())}}function rce(n,e,t){n instanceof ju?function(i,r,s){const o=i.value.clone(),a=ZH(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof uo?function(i,r,s){if(!hy(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=ZH(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(XH(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Lf(n,e,t,i){return n instanceof ju?function(r,s,o,a){if(!hy(r.precondition,s))return o;const l=r.value.clone(),c=JH(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof uo?function(r,s,o,a){if(!hy(r.precondition,s))return o;const l=JH(r.fieldTransforms,a,s),c=s.data;return c.setAll(XH(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):(o=t,hy(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function sce(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=zH(i.transform,r||null);null!=s&&(null===t&&(t=$n.empty()),t.set(i.field,s))}return t||null}function YH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Ou(t,i,(r,s)=>function nce(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Dl&&i instanceof Dl||t instanceof Sl&&i instanceof Sl?Ou(t.elements,i.elements,ws):t instanceof Hu&&i instanceof Hu?ws(t.yt,i.yt):t instanceof Uu&&i instanceof Uu);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class ju extends fy{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uo extends fy{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ZH(n,e,t){const i=new Map;oe(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,tce(o,a,t[r]))}return i}function JH(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,ece(s,o,e))}return i}class $u extends fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YT extends fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oce{constructor(e){this.count=e}}var ln,qe;function ej(n){switch(n){default:return K();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function tj(n){if(void 0===n)return Jt("GRPC error has no .code"),T.UNKNOWN;switch(n){case ln.OK:return T.OK;case ln.CANCELLED:return T.CANCELLED;case ln.UNKNOWN:return T.UNKNOWN;case ln.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case ln.INTERNAL:return T.INTERNAL;case ln.UNAVAILABLE:return T.UNAVAILABLE;case ln.UNAUTHENTICATED:return T.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case ln.NOT_FOUND:return T.NOT_FOUND;case ln.ALREADY_EXISTS:return T.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return T.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case ln.ABORTED:return T.ABORTED;case ln.OUT_OF_RANGE:return T.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return T.UNIMPLEMENTED;case ln.DATA_LOSS:return T.DATA_LOSS;default:return K()}}(qe=ln||(ln={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";class ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return vH(this.inner)}size(){return this.innerSize}}const ace=new Gt(B.comparator);function Fi(){return ace}const nj=new Gt(B.comparator);function Vf(...n){let e=nj;for(const t of n)e=e.insert(t.key,t);return e}function ij(n){let e=nj;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Cs(){return Bf()}function rj(){return Bf()}function Bf(){return new ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const lce=new Gt(B.comparator),cce=new lt(B.comparator);function Ce(...n){let e=cce;for(const t of n)e=e.add(t);return e}const uce=new lt(ge);function py(){return uce}class Uf{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Hf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uf(re.min(),i,py(),Fi(),Ce())}}class Hf{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Hf(yn.EMPTY_BYTE_STRING,t,Ce(),Ce(),Ce())}}class my{constructor(e,t,i,r){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=r}}class sj{constructor(e,t){this.targetId=e,this.At=t}}class oj{constructor(e,t,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class aj{constructor(){this.Rt=0,this.bt=cj(),this.Pt=yn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ce(),t=Ce(),i=Ce();return this.bt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:K()}}),new Hf(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=cj()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class dce{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Fi(),this.qt=lj(),this.Kt=new lt(ge)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,r)=>{this.Ht(r)&&t(r)})}Yt(e){const t=e.targetId,i=e.At.count,r=this.Xt(t);if(r){const s=r.target;if(ly(s))if(0===i){const o=new B(s.path);this.jt(t,o,_t.newNoDocument(o,re.min()))}else oe(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&ly(a.target)){const l=new B(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,_t.newNoDocument(l,e))}s.Dt&&(t.set(o,s.xt()),s.Nt())}});let i=Ce();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||2===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const r=new Uf(e,t,this.Kt,this.Ut,i);return this.Ut=Fi(),this.qt=lj(),this.Kt=new lt(ge),r}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new aj,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new lt(ge),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new aj),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function lj(){return new Gt(B.comparator)}function cj(){return new Gt(B.comparator)}const hce={asc:"ASCENDING",desc:"DESCENDING"},fce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pce{constructor(e,t){this.databaseId=e,this.gt=t}}function jf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uj(n,e){return n.gt?e.toBase64():e.toUint8Array()}function mce(n,e){return jf(n,e.toTimestamp())}function Mn(n){return oe(!!n),re.fromTimestamp(function(e){const t=sa(e);return new St(t.seconds,t.nanos)}(n))}function XT(n,e){return(t=n,new We(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dj(n){const e=We.fromString(n);return oe(bj(e)),e}function $f(n,e){return XT(n.databaseId,e.path)}function Es(n,e){const t=dj(e);if(t.get(1)!==n.databaseId.projectId)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(fj(t))}function ZT(n,e){return XT(n.databaseId,e)}function hj(n){const e=dj(n);return 4===e.length?We.emptyPath():fj(e)}function zf(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fj(n){return oe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pj(n,e,t){return{name:$f(n,e),fields:t.value.mapValue.fields}}function mj(n,e,t){const i=Es(n,e.name),r=Mn(e.updateTime),s=new $n({mapValue:{fields:e.fields}}),o=_t.newFoundDocument(i,r,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function Gf(n,e){let t;if(e instanceof ju)t={update:pj(n,e.key,e.value)};else if(e instanceof $u)t={delete:$f(n,e.key)};else if(e instanceof uo)t={update:pj(n,e.key,e.data),updateMask:Tce(e.fieldMask)};else{if(!(e instanceof YT))return K();t={verify:$f(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Uu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Dl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Sl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hu)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw K()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:mce(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:K()),t;var r}function JT(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?xt.updateTime(Mn(r.updateTime)):void 0!==r.exists?xt.exists(r.exists):xt.none():xt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let a=null;"setToServerValue"in o?(oe("REQUEST_TIME"===o.setToServerValue),a=new Uu):"appendMissingElements"in o?a=new Dl(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new Sl(o.removeAllFromArray.values||[]):"increment"in o?a=new Hu(s,o.increment):K();const l=zt.fromServerFormat(o.fieldPath);return new Ff(l,a)}(n,r)):[];var r;if(e.update){const r=Es(n,e.update.name),s=new $n({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new tr((e.updateMask.fieldPaths||[]).map(c=>zt.fromServerFormat(c)));return new uo(r,s,o,t,i)}return new ju(r,s,t,i)}if(e.delete){const r=Es(n,e.delete);return new $u(r,t)}if(e.verify){const r=Es(n,e.verify);return new YT(r,t)}return K()}function gj(n,e){return{documents:[ZT(n,e.path)]}}function _j(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=ZT(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZT(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0===l.length)return;const c=l.map(u=>function(d){if("=="===d.op){if(IH(d.value))return{unaryFilter:{field:zu(d.field),op:"IS_NAN"}};if(TH(d.value))return{unaryFilter:{field:zu(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(IH(d.value))return{unaryFilter:{field:zu(d.field),op:"IS_NOT_NAN"}};if(TH(d.value))return{unaryFilter:{field:zu(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(d.field),op:wce(d.op),value:d.value}}}(u));return 1===c.length?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:zu((u=c).field),direction:bce(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(c=e.limit,n.gt||Mf(c)?c:{value:c});var c,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function yj(n){let e=hj(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){oe(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=vj(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new Lu(Gu((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,Mf(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new ca((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new ca(u.values||[],!u.before)}(t.endAt)),FH(e,r,o,s,a,"F",l,c)}function vj(n){return n?void 0!==n.unaryFilter?[Ece(n)]:void 0!==n.fieldFilter?[Cce(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>vj(e)).reduce((e,t)=>e.concat(t)):K():[]}function bce(n){return hce[n]}function wce(n){return fce[n]}function zu(n){return{fieldPath:n.canonicalString()}}function Gu(n){return zt.fromServerFormat(n.fieldPath)}function Cce(n){return zn.create(Gu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ece(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gu(n.unaryFilter.field);return zn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gu(n.unaryFilter.field);return zn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gu(n.unaryFilter.field);return zn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Gu(n.unaryFilter.field);return zn.create(r,"!=",{nullValue:"NULL_VALUE"});default:return K()}}function Tce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wj(e)),e=Ice(n.get(t),e);return wj(e)}function Ice(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function wj(n){return n+"\x01\x01"}function Ts(n){const e=n.length;if(oe(e>=2),2===e)return oe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),We.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&K(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:K()}s=o+2}return new We(i)}const Cj=["userId","batchId"];function gy(n,e){return[n,vi(e)]}function Ej(n,e,t){return[n,vi(e),t]}const Dce={},Sce=["prefixPath","collectionGroup","readTime","documentId"],xce=["prefixPath","collectionGroup","documentId"],Mce=["collectionGroup","readTime","prefixPath","documentId"],Ace=["canonicalId","targetId"],kce=["targetId","path"],Rce=["path","targetId"],Pce=["collectionId","parent"],Oce=["indexId","uid"],Nce=["uid","sequenceNumber"],Fce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lce=["indexId","uid","orderedDocumentKey"],Vce=["userId","collectionPath","documentId"],Bce=["userId","collectionPath","largestBatchId"],Uce=["userId","collectionGroup","largestBatchId"],Tj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hce=[...Tj,"documentOverlays"],Ij=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dj=Ij,jce=[...Dj,"indexConfiguration","indexState","indexEntries"];class eI extends gH{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function An(n,e){const t=U(n);return Zr.O(t.ie,e)}class tI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&rce(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Lf(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Lf(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=rj();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=QH(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Ou(this.mutations,e.mutations,(t,i)=>YH(t,i))&&Ou(this.baseMutations,e.baseMutations,(t,i)=>YH(t,i))}}class nI{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){oe(e.mutations.length===i.length);let r=lce;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new nI(e,t,i,r)}}class iI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class da{constructor(e,t,i,r,s=re.min(),o=re.min(),a=yn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sj{constructor(e){this.re=e}}function xj(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_y(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:$f(r=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:jf(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:xl(e.version)};else{if(!e.isUnknownDocument())return K();i.unknownDocument={path:t.path.toArray(),version:xl(e.version)}}var r,s;return i}function _y(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ml(n){const e=new St(n.seconds,n.nanoseconds);return re.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(s=>JT(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>JT(n.re,s)),r=St.fromMillis(e.localWriteTimeMs);return new tI(e.batchId,r,t,i)}function Wf(n){const e=Ml(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ml(n.lastLimboFreeSnapshotVersion):re.min();let i;var r;return void 0!==n.query.documents?(oe(1===(r=n.query).documents.length),i=Ni(Vu(hj(r.documents[0])))):i=Ni(yj(n.query)),new da(i,n.targetId,0,n.lastListenSequenceNumber,e,t,yn.fromBase64String(n.resumeToken))}function Mj(n,e){const t=xl(e.snapshotVersion),i=xl(e.lastLimboFreeSnapshotVersion);let r;r=ly(e.target)?gj(n.re,e.target):_j(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Il(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function rI(n){const e=yj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?uy(e,e.limit,"L"):e}function sI(n,e){return new iI(e.largestBatchId,JT(n.re,e.overlayMutation))}function Aj(n,e){const t=e.path.lastSegment();return[n,vi(e.path.popLast()),t]}function kj(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xl(i.readTime),documentKey:vi(i.documentKey.path),largestBatchId:i.largestBatchId}}class zce{getBundleMetadata(e,t){return Rj(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Ml(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Rj(e).put({bundleId:(i=t).id,createTime:xl(Mn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Pj(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:rI(r.bundledQuery),readTime:Ml(r.readTime)};var r})}saveNamedQuery(e,t){return Pj(e).put({name:(i=t).name,readTime:xl(Mn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Rj(n){return An(n,"bundles")}function Pj(n){return An(n,"namedQueries")}class yy{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new yy(e,t.uid||"")}getOverlay(e,t){return qf(e).get(Aj(this.userId,t)).next(i=>i?sI(this.It,i):null)}getOverlays(e,t){const i=Cs();return w.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new iI(t,o);r.push(this.ue(e,a))}),w.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(vi(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(qf(e).Y("collectionPathOverlayIndex",a))}),w.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Cs(),s=vi(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qf(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=sI(this.It,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Cs();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qf(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=sI(this.It,c);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(e,t){return qf(e).put(function(i,r,s){const[o,a,l]=Aj(r,s.mutation.key);return{userId:r,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gf(i.re,s.mutation)}}(this.It,this.userId,t))}}function qf(n){return An(n,"documentOverlays")}class kl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Wt(e.integerValue));else if("doubleValue"in e){const i=Wt(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),Af(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Cl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?DH(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):K()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const r of Object.keys(i))this._e(r,t),this.ae(i[r],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const r of i)this.ae(r,t)}ge(e,t){this.le(t,37),B.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Gce(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Oj(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=Gce(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}kl.Te=new kl;class Wce{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=t.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(e){const t=this.Ce(e),i=Oj(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ne(e){const t=this.Ce(e),i=Oj(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class qce{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Kce{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Kf{constructor(){this.Be=new Wce,this.Le=new qce(this.Be),this.Ue=new Kce(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Rl{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Rl(this.indexId,this.documentKey,this.arrayValue,i)}}function Pl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Nj(n.arrayValue,e.arrayValue),0!==t?t:(t=Nj(n.directionalValue,e.directionalValue),0!==t?t:B.comparator(n.documentKey,e.documentKey)))}function Nj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Qce{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=VT(e);if(void 0!==t&&!this.ze(t))return!1;const i=vl(e);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const o=i[r];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++r}for(;r<i.length;++r){const o=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Yce{constructor(){this.Ye=new oI}addToCollectionParentIndex(e,t){return this.Ye.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(er.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(er.min())}updateCollectionGroup(e,t,i){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class oI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new lt(We.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new lt(We.comparator)).toArray()}}const vy=new Uint8Array(0);class Xce{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new oI,this.Ze=new ua(i=>Il(i),(i,r)=>Of(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:i,parent:vi(r)};return Fj(e).put(s)}return w.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[hH(t),""],!1,!0);return Fj(e).W(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(Ts(o.parent))}return i})}addFieldIndex(e,t){const i=by(e),r={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete r.indexId;const s=i.add(r);if(t.indexState){const o=Yf(e);return s.next(a=>{o.put(kj(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=by(e),r=Yf(e),s=Qf(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Qf(e);let r=!0;const s=new Map;return w.forEach(this.tn(t),o=>this.en(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Ce();const a=[];return w.forEach(s,(l,c)=>{var u;A("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`} to execute ${Il(t)}`);const d=function(D,S){const N=VT(S);if(void 0===N)return null;for(const G of cy(D,N.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(c,l),h=function(D,S){const N=new Map;for(const G of vl(S))for(const ae of cy(D,G.fieldPath))switch(ae.op){case"==":case"in":N.set(G.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return N.set(G.fieldPath.canonicalString(),ae.value),Array.from(N.values())}return null}(c,l),f=function(D,S){const N=[];let G=!0;for(const ae of vl(S)){const ft=0===ae.kind?kH(D,ae.fieldPath,D.startAt):RH(D,ae.fieldPath,D.startAt);N.push(ft.value),G&&(G=ft.inclusive)}return new ca(N,G)}(c,l),p=function(D,S){const N=[];let G=!0;for(const ae of vl(S)){const ft=0===ae.kind?RH(D,ae.fieldPath,D.endAt):kH(D,ae.fieldPath,D.endAt);N.push(ft.value),G&&(G=ft.inclusive)}return new ca(N,G)}(c,l),g=this.nn(l,c,f),y=this.nn(l,c,p),b=this.sn(l,c,h),v=this.rn(l.indexId,d,g,f.inclusive,y,p.inclusive,b);return w.forEach(v,D=>i.J(D,t.limit).next(S=>{S.forEach(N=>{const G=B.fromSegments(N.documentKey);o.has(G)||(o=o.add(G),a.push(G))})}))}).next(()=>a)}return w.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const h=t?this.on(t[d/c]):vy,f=this.un(e,h,i[d%c],r),p=this.cn(e,h,s[d%c],o),g=a.map(y=>this.un(e,h,y,!0));u.push(...this.createRange(f,p,g))}return u}un(e,t,i,r){const s=new Rl(e,B.empty(),t,i);return r?s:s.Ke()}cn(e,t,i,r){const s=new Rl(e,B.empty(),t,i);return r?s.Ke():s}en(e,t){const i=new Qce(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;return w.forEach(this.tn(t),r=>this.en(e,r).next(s=>{s?0!==i&&s.fields.length<function(o){let a=new lt(zt.comparator),l=!1;for(const c of o.filters){const u=c;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const c of o.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(l?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Kf;for(const r of vl(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.qe(r.kind);kl.Te.ce(s,o)}return i.$e()}on(e){const t=new Kf;return kl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Kf;return kl.Te.ce(Tl(this.databaseId,t),i.qe(function(r){const s=vl(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let r=[];r.push(new Kf);let s=0;for(const o of vl(e)){const a=i[s++];for(const l of r)if(this.ln(t,o.fieldPath)&&Rf(a))r=this.fn(r,o,a);else{const c=l.qe(o.kind);kl.Te.ce(a,c)}}return this.dn(r)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new Kf;l.seed(a.$e()),kl.Te.ce(o,l.qe(t.kind)),s.push(l)}return s}ln(e,t){return!!e.filters.find(i=>i instanceof zn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=by(e),r=Yf(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const o=[];return w.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new Df(u.sequenceNumber,new er(Ml(u.readTime),new B(Ts(u.documentKey)),u.largestBatchId)):Df.empty(),h=c.fields.map(([f,p])=>new iy(zt.fromServerFormat(f),p));return new ny(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:ge(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=by(e),s=Yf(e);return this._n(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>w.forEach(a,l=>s.put(kj(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return w.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?w.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),w.forEach(a,l=>this.wn(e,r,l).next(c=>{const u=this.mn(s,l);return c.isEqual(u)?w.resolve():this.gn(e,s,l,c,u)}))))})}yn(e,t,i,r){return Qf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,r){return Qf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=Qf(e);let s=new lt(Pl);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(o,a)=>{s=s.add(new Rl(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(e,t){let i=new lt(Pl);const r=this.an(t,e);if(null==r)return i;const s=VT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Rf(o))for(const a of o.arrayValue.values||[])i=i.add(new Rl(t.indexId,e.key,this.on(a),r))}else i=i.add(new Rl(t.indexId,e.key,vy,r));return i}gn(e,t,i,r,s){A("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=Nu(h),g=Nu(f);for(;p||g;){let y=!1,b=!1;if(p&&g){const v=c(p,g);v<0?b=!0:v>0&&(y=!0)}else null!=p?b=!0:y=!0;y?(u(g),g=Nu(f)):b?(d(p),p=Nu(h)):(p=Nu(h),g=Nu(f))}}(r,s,Pl,a=>{o.push(this.yn(e,t,i,a))},a=>{o.push(this.pn(e,t,i,a))}),w.waitFor(o)}_n(e){let t=1;return Yf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Pl(o,a)).filter((o,a,l)=>!a||0!==Pl(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=Pl(o,e),l=Pl(o,t);if(0===a)r[0]=e.Ke();else if(a>0&&l<0)r.push(o),r.push(o.Ke());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2)s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,vy,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,vy,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lj)}getMinOffset(e,t){return w.mapArray(this.tn(t),i=>this.en(e,i).next(r=>r||K())).next(Lj)}}function Fj(n){return An(n,"collectionParents")}function Qf(n){return An(n,"indexEntries")}function by(n){return An(n,"indexConfiguration")}function Yf(n){return An(n,"indexState")}function Lj(n){oe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;BT(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new er(e.readTime,e.documentKey,t)}const Vj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bj(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Z({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{oe(1===a)}));const c=[];for(const u of t.mutations){const d=Ej(e,u.key.path,t.batchId);s.push(r.delete(d)),c.push(u.key)}return w.waitFor(s).next(()=>c)}function wy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class Cy{constructor(e,t,i,r){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(e,t,i,r){oe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Cy(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).Z({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Wu(e),o=ha(e);return o.add({}).next(a=>{oe("number"==typeof a);const l=new tI(a,t,i,r),c=function(h,f,p){const g=p.baseMutations.map(b=>Gf(h.re,b)),y=p.mutations.map(b=>Gf(h.re,b));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:y}}(this.It,this.userId,l),u=[];let d=new lt((h,f)=>ge(h.canonicalString(),f.canonicalString()));for(const h of r){const f=Ej(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,Dce))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),w.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return ha(e).get(t).next(i=>i?(oe(i.userId===this.userId),Al(this.It,i)):null)}Tn(e,t){return this.In[t]?w.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ha(e).Z({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=i),s=Al(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ha(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).W("userMutationsIndex",t).next(i=>i.map(r=>Al(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=gy(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Wu(e).Z({range:r},(o,a,l)=>{const[c,u,d]=o,h=Ts(u);if(c===this.userId&&t.path.isEqual(h))return ha(e).get(d).next(f=>{if(!f)throw K();oe(f.userId===this.userId),s.push(Al(this.It,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(ge);const r=[];return t.forEach(s=>{const o=gy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Wu(e).Z({range:a},(c,u,d)=>{const[h,f,p]=c,g=Ts(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(l)}),w.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=gy(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new lt(ge);return Wu(e).Z({range:o},(l,c,u)=>{const[d,h,f]=l,p=Ts(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.En(e,a))}En(e,t){const i=[],r=[];return t.forEach(s=>{r.push(ha(e).get(s).next(o=>{if(null===o)throw K();oe(o.userId===this.userId),i.push(Al(this.It,o))}))}),w.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Bj(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),w.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Wu(e).Z({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Ts(s[1]);r.push(l)}else a.done()}).next(()=>{oe(0===r.length)})})}containsKey(e,t){return Uj(e,this.userId,t)}Rn(e){return Hj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uj(n,e,t){const i=gy(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Wu(n).Z({range:s,X:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===r&&(o=!0),c.done()}).next(()=>o)}function ha(n){return An(n,"mutations")}function Wu(n){return An(n,"documentMutations")}function Hj(n){return An(n,"mutationQueues")}class Ol{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ol(0)}static vn(){return new Ol(-1)}}class Zce{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new Ol(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>re.fromTimestamp(new St(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(oe(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return qu(e).Z((o,a)=>{const l=Wf(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>w.waitFor(s)).next(()=>r)}forEachTarget(e,t){return qu(e).Z((i,r)=>{const s=Wf(r);t(s)})}Vn(e){return jj(e).get("targetGlobalKey").next(t=>(oe(null!==t),t))}Sn(e,t){return jj(e).put("targetGlobalKey",t)}Dn(e,t){return qu(e).put(Mj(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Il(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return qu(e).Z({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=Wf(a);Of(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=fa(e);return t.forEach(o=>{const a=vi(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),w.waitFor(r)}removeMatchingKeys(e,t,i){const r=fa(e);return w.forEach(t,s=>{const o=vi(s.path);return w.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=fa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=fa(e);let s=Ce();return r.Z({range:i,X:!0},(o,a,l)=>{const c=Ts(o[1]),u=new B(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const i=vi(t.path),r=IDBKeyRange.bound([i],[hH(i)],!1,!0);let s=0;return fa(e).Z({index:"documentTargetsIndex",X:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}se(e,t){return qu(e).get(t).next(i=>i?Wf(i):null)}}function qu(n){return An(n,"targets")}function jj(n){return An(n,"targetGlobal")}function fa(n){return An(n,"targetDocuments")}function $j([n,e],[t,i]){const r=ge(n,t);return 0===r?ge(e,i):r}class Jce{constructor(e){this.xn=e,this.buffer=new lt($j),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();$j(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eue{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;A("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,m(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){ra(i)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ia(i)}yield t.Fn(3e5)}))}}class tue{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return w.resolve(Oi.at);const i=new Jce(t);return this.$n.forEachTarget(e,r=>i.Mn(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.Mn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(Vj)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vj):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),FT()<=Ve.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}class nue{constructor(e,t){this.db=e,this.garbageCollector=new tue(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return Ey(e,i)}removeReference(e,t,i){return Ey(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Ey(e,t)}Gn(e,t){return function(i,r){let s=!1;return Hj(i).tt(o=>Uj(i,o,r).next(a=>(a&&(s=!0),w.resolve(!a)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=t){const l=this.Gn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,re.min()),fa(e).delete([0,vi(o.path)])))});r.push(l)}}).next(()=>w.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Ey(e,t)}Kn(e,t){const i=fa(e);let r,s=Oi.at;return i.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Oi.at&&t(new B(Ts(r)),s),s=c,r=l):s=Oi.at}).next(()=>{s!==Oi.at&&t(new B(Ts(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ey(n,e){return fa(n).put((i=n.currentSequenceNumber,{targetId:0,path:vi(e.path),sequenceNumber:i}));var i}class zj{constructor(){this.changes=new ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?w.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iue{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Nl(e).put(i)}removeEntry(e,t,i){return Nl(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],_y(s),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=_t.newInvalidDocument(t);return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xf(t))},(r,s)=>{i=this.jn(t,s)}).next(()=>i)}Wn(e,t){let i={size:0,document:_t.newInvalidDocument(t)};return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xf(t))},(r,s)=>{i={document:this.jn(t,s),size:wy(s)}}).next(()=>i)}getEntries(e,t){let i=Fi();return this.zn(e,t,(r,s)=>{const o=this.jn(r,s);i=i.insert(r,o)}).next(()=>i)}Hn(e,t){let i=Fi(),r=new Gt(B.comparator);return this.zn(e,t,(s,o)=>{const a=this.jn(s,o);i=i.insert(s,a),r=r.insert(s,wy(o))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return w.resolve();let r=new lt(Kj);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Xf(r.first()),Xf(r.last())),o=r.getIterator();let a=o.getNext();return Nl(e).Z({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=B.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Kj(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.j(Xf(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),_y(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nl(e).W(IDBKeyRange.bound(r,s,!0)).next(o=>{let a=Fi();for(const l of o){const c=this.jn(B.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,t,i,r){let s=Fi();const o=qj(t,i),a=qj(t,er.max());return Nl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.jn(B.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new rue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wj(e).get("remoteDocumentGlobalKey").next(t=>(oe(!!t),t))}Qn(e,t){return Wj(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function $ce(n,e){let t;if(e.document)t=mj(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=B.fromSegments(e.noDocument.path),r=Ml(e.noDocument.readTime);t=_t.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{const i=B.fromSegments(e.unknownDocument.path),r=Ml(e.unknownDocument.version);t=_t.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new St(i[0],i[1]);return re.fromTimestamp(r)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(re.min()))return i}return _t.newInvalidDocument(e)}}function Gj(n){return new iue(n)}class rue extends zj{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ua(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new lt((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=xj(this.Yn.It,o);r=r.add(s.path.popLast()),i+=wy(l)-a.size,t.push(this.Yn.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=xj(this.Yn.It,o.convertToNoDocument(re.min()));t.push(this.Yn.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,i)),w.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function Wj(n){return An(n,"remoteDocumentGlobal")}function Nl(n){return An(n,"remoteDocumentsV14")}function Xf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qj(n,e){const t=e.documentKey.path.toArray();return[n,_y(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kj(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=ge(t[s],i[s]),r)return r;return r=ge(t.length,i.length),r||(r=ge(t[t.length-2],i[i.length-2]),r||ge(t[t.length-1],i[i.length-1]))}class sue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qj{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&Lf(i.mutation,r,tr.empty(),St.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ce()){const r=Cs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Vf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Cs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ce()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Fi();const o=Bf(),a=Bf();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof uo)?s=s.insert(c.key,c):void 0!==u&&(o.set(c.key,u.mutation.getFieldMask()),Lf(u.mutation,c,u.mutation.getFieldMask(),St.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new sue(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Bf();let r=new Gt((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=i.get(l)||tr.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||Ce()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=rj();u.forEach(h=>{if(!s.has(h)){const f=QH(t.get(h),i.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return w.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return B.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):w.resolve(Cs());let a=-1,l=s;return o.next(c=>w.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.getBaseDocument(e,u,d).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ce())).next(u=>({batchId:a,changes:ij(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(i=>{let r=Vf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Vf();return this.indexManager.getCollectionParents(e,r).next(o=>w.forEach(o,a=>{const l=(c=t,u=a.child(r),new co(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((a,l)=>{const c=l.getKey();null===r.get(c)&&(r=r.insert(c,_t.newInvalidDocument(c)))});let o=Vf();return r.forEach((a,l)=>{const c=s.get(a);void 0!==c&&Lf(c.mutation,l,tr.empty(),St.now()),QT(t,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):w.resolve(_t.newInvalidDocument(t))}}class oue{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return w.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Mn(i.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:rI(i.bundledQuery),readTime:Mn(i.readTime)}),w.resolve();var i}}class aue{constructor(){this.overlays=new Gt(B.comparator),this.es=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Cs();return w.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ue(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),w.resolve()}getOverlaysForCollection(e,t,i){const r=Cs(),s=t.length+1,o=new B(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return w.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Gt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=Cs(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Cs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return w.resolve(a)}ue(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new iI(t,i));let s=this.es.get(t);void 0===s&&(s=Ce(),this.es.set(t,s)),this.es.set(t,s.add(i.key))}}class aI{constructor(){this.ns=new lt(kn.ss),this.rs=new lt(kn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new kn(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new kn(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new B(new We([])),i=new kn(t,e),r=new kn(t,e+1),s=[];return this.rs.forEachInRange([i,r],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new B(new We([])),i=new kn(t,e),r=new kn(t,e+1);let s=Ce();return this.rs.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new kn(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class kn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return B.comparator(e.key,t.key)||ge(e._s,t._s)}static os(e,t){return ge(e._s,t._s)||B.comparator(e.key,t.key)}}class lue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new lt(kn.ss)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.ws;this.ws++;const o=new tI(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new kn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),s=r<0?0:r;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],o=>{const a=this.ys(o._s);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(ge);return t.forEach(r=>{const s=new kn(r,0),o=new kn(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{i=i.add(a._s)})}),w.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;B.isDocumentKey(s)||(s=s.child(""));const o=new kn(new B(s),0);let a=new lt(ge);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l._s)),!0)},o),w.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){oe(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return w.forEach(t.mutations,r=>{const s=new kn(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new kn(t,0),r=this.gs.firstAfterOrEqual(i);return w.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return w.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cue{constructor(e){this.Es=e,this.docs=new Gt(B.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return w.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let i=Fi();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():_t.newInvalidDocument(r))}),w.resolve(i)}getAllFromCollection(e,t,i){let r=Fi();const s=new B(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||BT(pH(l),i)<=0||(r=r.insert(l.key,l.mutableCopy()))}return w.resolve(r)}getAllFromCollectionGroup(e,t,i,r){K()}As(e,t){return w.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new uue(this)}getSize(e){return w.resolve(this.size)}}class uue extends zj{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),w.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class due{constructor(e){this.persistence=e,this.Rs=new ua(t=>Il(t),Of),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.bs=0,this.Ps=new aI,this.targetCount=0,this.vs=Ol.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),w.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.Dn(t),w.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(s).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return w.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),w.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),w.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return w.resolve(i)}containsKey(e,t){return w.resolve(this.Ps.containsKey(t))}}class Yj{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Oi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new due(this),this.indexManager=new Yce,this.remoteDocumentCache=new cue(i=>this.referenceDelegate.xs(i)),this.It=new Sj(t),this.Ns=new oue(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new lue(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){A("MemoryPersistence","Starting transaction:",e);const r=new hue(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Ms(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Os(e,t){return w.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class hue extends gH{constructor(e){super(),this.currentSequenceNumber=e}}class Ty{constructor(e){this.persistence=e,this.Fs=new aI,this.$s=null}static Bs(e){return new Ty(e)}get Ls(){if(this.$s)return this.$s;throw K()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),w.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),w.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ls,i=>{const r=B.fromPath(i);return this.Us(e,r).next(s=>{s||t.removeEntry(r,re.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return w.or([()=>w.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class fue{constructor(e){this.It=e}$(e,t,i,r){const s=new ry("createOrUpgrade",t);var a;i<1&&r>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cj,{unique:!0}),a.createObjectStore("documentMutations"),Xj(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=w.resolve();return i<3&&r>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Xj(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cj,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return w.waitFor(d)})}(e,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.qs(s))),i<6&&r>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),i<7&&r>=7&&(o=o.next(()=>this.Gs(s))),i<8&&r>=8&&(o=o.next(()=>this.Qs(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.js(s))),i<11&&r>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:Vce});l.createIndex("collectionPathOverlayIndex",Bce,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Uce,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:Sce});l.createIndex("documentKeyIndex",xce),l.createIndex("collectionGroupIndex",Mce)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.zs(e,s))),i<15&&r>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:Oce}).createIndex("sequenceNumberIndex",Nce,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:Fce}).createIndex("documentKeyIndex",Lce,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=wy(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>w.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>w.forEach(a,l=>{oe(l.userId===s.userId);const c=Al(this.It,l);return Bj(e,s.userId,c).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((o,a)=>{const l=new We(o),c=[0,vi(l)];s.push(t.get(c).next(u=>u?w.resolve():t.put({targetId:0,path:vi(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>w.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Pce});const i=t.store("collectionParents"),r=new oI,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:vi(l)})}};return t.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new We(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,a,l],c)=>{const u=Ts(a);return s(u.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const s=Wf(r),o=Mj(this.It,s);return t.put(o)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(c=o,c.document?new B(We.fromString(c.document.name).popFirst(5)):c.noDocument?B.fromSegments(c.noDocument.path):c.unknownDocument?B.fromSegments(c.unknownDocument.path):K()).path.toArray();var c;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>w.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=Gj(this.It),s=new Yj(Ty.Bs,this.It.re);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Ce();Al(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),w.forEach(a,(l,c)=>{const u=new Sn(c),d=yy.oe(this.It,u),h=s.getIndexManager(u),f=Cy.oe(u,this.It,h,s.referenceDelegate);return new Qj(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new eI(t,Oi.at),l).next()})})}}function Xj(n){n.createObjectStore("targetDocuments",{keyPath:kce}).createIndex("documentTargetsIndex",Rce,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ace,{unique:!0}),n.createObjectStore("targetGlobal")}const lI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cI{constructor(e,t,i,r,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=h=>Promise.resolve(),!cI.C())throw new x(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nue(this,r),this.ii=t+"main",this.It=new Sj(l),this.ri=new Zr(this.ii,this.Xs,new fue(this.It)),this.Cs=new Zce(this.referenceDelegate,this.It),this.remoteDocumentCache=Gj(this.It),this.Ns=new zce,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&Jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,lI);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Oi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=m(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=m(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(m(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Iy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ra(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zf(e).get("owner").next(t=>w.resolve(this.mi(t)))}gi(e){return Iy(e).delete(this.clientId)}yi(){var e=this;return m(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=An(i,"clientMetadata");return r.W().next(s=>{const o=e.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return w.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?w.resolve(!0):Zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,lI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Iy(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&A("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return m(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new eI(t,Oi.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Iy(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Cy.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xce(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return yy.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){A("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?jce:14===o?Dj:13===o?Ij:12===o?Hce:11===o?Tj:void K();var o;let a;return this.ri.runTransaction(e,r,s,l=>(a=new eI(l,this.Ss?this.Ss.next():Oi.at),"readwrite-primary"===t?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new x(T.FAILED_PRECONDITION,mH);return i(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return Zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new x(T.FAILED_PRECONDITION,lI)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put("owner",t)}static C(){return Zr.C()}_i(e){const t=Zf(e);return t.get("owner").next(i=>this.mi(i)?(A("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Jt(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function Sre(){return!function Tre(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return A("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Jt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(n){return An(n,"owner")}function Iy(n){return An(n,"clientMetadata")}function uI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dI{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=Ce(),r=Ce();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new dI(e,t.fromCache,i,r)}}class Zj{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(s=>s||this.Mi(e,t,r,i)).next(s=>s||this.Oi(e,t))}ki(e,t){if(LH(t))return w.resolve(null);let i=Ni(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=uy(t,null,"F"),i=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Ce(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,uy(t,null,"F")):this.Bi(e,c,t,l)}))})))}Mi(e,t,i,r){return LH(t)||r.isEqual(re.min())?this.Oi(e,t):this.Ni.getDocuments(e,i).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,i,r)?this.Oi(e,t):(FT()<=Ve.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),KT(t)),this.Bi(e,o,t,fH(r,-1)))})}Fi(e,t){let i=new lt(UH(e));return t.forEach((r,s)=>{QT(e,s)&&(i=i.add(s))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Oi(e,t){return FT()<=Ve.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",KT(t)),this.Ni.getDocumentsMatchingQuery(e,t,er.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class pue{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new Gt(ge),this.qi=new ua(s=>Il(s),Of),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qj(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Jj(n,e,t,i){return new pue(n,e,t,i)}function e$(n,e){return hI.apply(this,arguments)}function hI(){return hI=m(function*(n,e){const t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Ce();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}),hI.apply(this,arguments)}function mue(n,e){const t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);oe(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Ce();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function t$(n){const e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function gue(n,e){const t=U(n),i=e.snapshotVersion;let r=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.Ui;const a=[];e.targetChanges.forEach((u,d)=>{const h=r.get(d);if(!h)return;a.push(t.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,y;e.targetMismatches.has(d)?f=f.withResumeToken(yn.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),g=f,y=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0)&&a.push(t.Cs.updateTargetData(s,f))});let l=Fi(),c=Ce();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(n$(s,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!i.isEqual(re.min())){const u=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ui=r,s))}function n$(n,e,t){let i=Ce(),r=Ce();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Fi();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function _ue(n,e){const t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ku(n,e){const t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(s=>s?(r=s,w.resolve(r)):t.Cs.allocateTargetId(i).next(o=>(r=new da(e,o,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Qu(n,e,t){return fI.apply(this,arguments)}function fI(){return fI=m(function*(n,e,t){const i=U(n),r=i.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ra(o))throw o;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ui=i.Ui.remove(e),i.qi.delete(r.target)}),fI.apply(this,arguments)}function Dy(n,e,t){const i=U(n);let r=re.min(),s=Ce();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=U(a),d=u.qi.get(c);return void 0!==d?w.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,c)}(i,o,Ni(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,e,t?r:re.min(),t?s:Ce())).next(a=>(s$(i,BH(e),a),{documents:a,Hi:s})))}function i$(n,e){const t=U(n),i=U(t.Cs),r=t.Ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.se(s,e).next(o=>o?o.target:null))}function r$(n,e){const t=U(n),i=t.Ki.get(e)||re.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,fH(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(s$(t,e,r),r))}function s$(n,e,t){let i=re.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(e,i)}function pI(){return pI=m(function*(n,e,t,i){const r=U(n);let s=Ce(),o=Fi();for(const c of t){const u=e.Ji(c.metadata.name);c.document&&(s=s.add(u));const d=e.Yi(c);d.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(u,d)}const a=r.Gi.newChangeBuffer({trackRemovals:!0}),l=yield Ku(r,(c=i,Ni(Vu(We.fromString(`__bundle__/docs/${c}`)))));var c;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>n$(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Cs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Cs.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.Wi,u.zi)).next(()=>u.Wi)))}),pI.apply(this,arguments)}function vue(n,e){return mI.apply(this,arguments)}function mI(){return mI=m(function*(n,e,t=Ce()){const i=yield Ku(n,Ni(rI(e.bundledQuery))),r=U(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Mn(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ns.saveNamedQuery(s,e);const a=i.withResumeToken(yn.EMPTY_BYTE_STRING,o);return r.Ui=r.Ui.insert(a.targetId,a),r.Cs.updateTargetData(s,a).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,e))})}),mI.apply(this,arguments)}function o$(n,e){return`firestore_clients_${n}_${e}`}function a$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function gI(n,e){return`firestore_targets_${n}_${e}`}class Sy{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new x(r.error.code,r.error.message))),o?new Sy(e,t,r.state,s):(Jt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new x(i.error.code,i.error.message))),s?new Jf(e,i.state,r):(Jt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=py();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=CH(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new xy(e,s):(Jt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _I{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _I(t.clientId,t.onlineState):(Jt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yI{constructor(){this.activeTargetIds=py()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vI{constructor(e,t,i,r,s){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gt(ge),this.started=!1,this.cr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=o$(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new yI),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return m(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const s=e.getItem(o$(e.persistenceKey,r));if(s){const o=xy.Zi(r,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gI(this.persistenceKey,e));if(i){const r=Jf.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gI(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return A("SharedClientState","READ",e,t),t}setItem(e,t){A("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(A("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(m(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(s){let o=Oi.at;if(null!=s)try{const a=JSON.parse(s);oe("number"==typeof a),o=a}catch(a){Jt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);r!==Oi.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Mr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Or(s)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new Sy(this.currentUser,e,t,i),s=a$(this.persistenceKey,this.currentUser,e);this.setItem(s,r.tr())}Er(e){const t=a$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=gI(this.persistenceKey,e),s=new Jf(e,t,i);this.setItem(r,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return xy.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return Sy.Zi(new Sn(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return Jf.Zi(r,t)}yr(e){return _I.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return m(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);A("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),s=this.Ir(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=py();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class l${constructor(){this.Lr=new yI,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new yI,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bue{qr(e){}shutdown(){}}class c${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Cue{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Eue extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,i,r,s){const o=this.ao(e,t);A("RestConnection","Sending: ",o,i);const a={};return this.ho(a,r,s),this.lo(e,o,a,i).then(l=>(A("RestConnection","Received: ",l),l),l=>{throw yl("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",i),l})}fo(e,t,i,r,s,o){return this.co(e,t,i,r,s)}ho(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ao(e,t){return`${this.oo}/v1/${t}:${wue[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,i,r){return new Promise((s,o)=>{const a=new wle;a.listenOnce(yle.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case NT.NO_ERROR:const c=a.getResponseJson();A("Connection","XHR received:",JSON.stringify(c)),s(c);break;case NT.TIMEOUT:A("Connection",'RPC "'+e+'" timed out'),o(new x(T.DEADLINE_EXCEEDED,"Request time out"));break;case NT.HTTP_ERROR:const u=a.getStatus();if(A("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(p)>=0?p:T.UNKNOWN}(d.status);o(new x(h,d.message))}else o(new x(T.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new x(T.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{A("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(t,"POST",l,i,15)})}_o(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gle(),o=_le(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new ble({})),this.ho(a.initMessageHeaders,t,i),a.encodeInitMessageHeaders=!0;const l=r.join("");A("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new Cue({Hr:p=>{d?A("Connection","Not sending because WebChannel is closed:",p):(u||(A("Connection","Opening WebChannel transport."),c.open(),u=!0),A("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,g,y)=>{p.listen(g,b=>{try{y(b)}catch(v){setTimeout(()=>{throw v},0)}})};return f(c,ty.EventType.OPEN,()=>{d||A("Connection","WebChannel transport opened.")}),f(c,ty.EventType.CLOSE,()=>{d||(d=!0,A("Connection","WebChannel transport closed"),h.io())}),f(c,ty.EventType.ERROR,p=>{d||(d=!0,yl("Connection","WebChannel transport errored:",p),h.io(new x(T.UNAVAILABLE,"The operation could not be completed")))}),f(c,ty.EventType.MESSAGE,p=>{var g;if(!d){const y=p.data[0];oe(!!y);const b=y,v=b.error||(null===(g=b[0])||void 0===g?void 0:g.error);if(v){A("Connection","WebChannel received error:",v);const D=v.status;let S=function(G){const ae=ln[G];if(void 0!==ae)return tj(ae)}(D),N=v.message;void 0===S&&(S=T.INTERNAL,N="Unknown error status: "+D+" with message "+v.message),d=!0,h.io(new x(S,N)),c.close()}else A("Connection","WebChannel received:",y),h.ro(y)}}),f(o,vle.STAT_EVENT,p=>{p.stat===aH.PROXY?A("Connection","Detected buffering proxy"):p.stat===aH.NOPROXY&&A("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function u$(){return"undefined"!=typeof window?window:null}function My(){return"undefined"!=typeof document?document:null}function ep(n){return new pce(n,!0)}class bI{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Hs=e,this.timerId=t,this.wo=i,this.mo=r,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,t-i);r>0&&A("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class d${constructor(e,t,i,r,s,o,a,l){this.Hs=e,this.Po=i,this.vo=r,this.Vo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new bI(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return m(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return m(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return m(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===T.RESOURCE_EXHAUSTED?(Jt(t.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),i.xo.Eo()):t&&t.code===T.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new x(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var e=this;this.state=5,this.xo.Ao(m(function*(){e.state=0,e.start()}))}Qo(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tue extends d${constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.It=s}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function _ce(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:K(),r=e.targetChange.targetIds||[],s=function(l,c){return l.gt?(oe(void 0===c||"string"==typeof c),yn.fromBase64String(c||"")):(oe(void 0===c||c instanceof Uint8Array),yn.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?T.UNKNOWN:tj(l.code);return new x(c,l.message||"")}(o);t=new oj(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=Es(n,i.document.name),s=Mn(i.document.updateTime),o=new $n({mapValue:{fields:i.document.fields}}),a=_t.newFoundDocument(r,s,o);t=new my(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const i=e.documentDelete,r=Es(n,i.document),s=i.readTime?Mn(i.readTime):re.min(),o=_t.newNoDocument(r,s);t=new my([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=Es(n,i.document);t=new my([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return K();{const i=e.filter,s=new oce(i.count||0);t=new sj(i.targetId,s)}}var l;return t}(this.It,e),i=function(r){if(!("targetChange"in r))return re.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Mn(s.readTime):re.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=zf(this.It),t.addTarget=function(r,s){let o;const a=s.target;return o=ly(a)?{documents:gj(r,a)}:{query:_j(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=uj(r,s.resumeToken):s.snapshotVersion.compareTo(re.min())>0&&(o.readTime=jf(r,s.snapshotVersion.toTimestamp())),o}(this.It,e);const i=function vce(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=zf(this.It),t.removeTarget=e,this.Bo(t)}}class Iue extends d${constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function yce(n,e){return n&&n.length>0?(oe(void 0!==e),n.map(t=>function(i,r){let s=Mn(i.updateTime?i.updateTime:r);return s.isEqual(re.min())&&(s=Mn(r)),new ice(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Mn(e.commitTime);return this.listener.Zo(i,t)}return oe(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=zf(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Gf(this.It,i))};this.Bo(t)}}class Due extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.Vo.co(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new x(T.UNKNOWN,r.toString())})}fo(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.Vo.fo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(T.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Sue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Jt(t),this.ou=!1):A("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xue{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{i.enqueueAndForget(m(function*(){var l;pa(o)&&(A("RemoteStore","Restarting streams for network reachability change."),yield(l=m(function*(c){const u=U(c);u._u.add(4),yield Yu(u),u.gu.set("Unknown"),u._u.delete(4),yield tp(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.gu=new Sue(i,r)}}function tp(n){return wI.apply(this,arguments)}function wI(){return wI=m(function*(n){if(pa(n))for(const e of n.wu)yield e(!0)}),wI.apply(this,arguments)}function Yu(n){return CI.apply(this,arguments)}function CI(){return CI=m(function*(n){for(const e of n.wu)yield e(!1)}),CI.apply(this,arguments)}function Ay(n,e){const t=U(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),II(t)?TI(t):Zu(t).ko()&&EI(t,e))}function np(n,e){const t=U(n),i=Zu(t);t.du.delete(e),i.ko()&&h$(t,e),0===t.du.size&&(i.ko()?i.Fo():pa(t)&&t.gu.set("Unknown"))}function EI(n,e){n.yu.Ot(e.targetId),Zu(n).zo(e)}function h$(n,e){n.yu.Ot(e),Zu(n).Ho(e)}function TI(n){n.yu=new dce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Zu(n).start(),n.gu.uu()}function II(n){return pa(n)&&!Zu(n).No()&&n.du.size>0}function pa(n){return 0===U(n)._u.size}function f$(n){n.yu=void 0}function Mue(n){return DI.apply(this,arguments)}function DI(){return DI=m(function*(n){n.du.forEach((e,t)=>{EI(n,e)})}),DI.apply(this,arguments)}function Aue(n,e){return SI.apply(this,arguments)}function SI(){return SI=m(function*(n,e){f$(n),II(n)?(n.gu.hu(e),TI(n)):n.gu.set("Unknown")}),SI.apply(this,arguments)}function kue(n,e,t){return xI.apply(this,arguments)}function xI(){return xI=m(function*(n,e,t){if(n.gu.set("Online"),e instanceof oj&&2===e.state&&e.cause)try{yield(i=m(function*(r,s){const o=s.cause;for(const a of s.targetIds)r.du.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.du.delete(a),r.yu.removeTarget(a))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield ky(n,i)}else if(e instanceof my?n.yu.Gt(e):e instanceof sj?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(re.min()))try{const i=yield t$(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const o=r.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.du.get(l);c&&r.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(yn.EMPTY_BYTE_STRING,l.snapshotVersion)),h$(r,a);const c=new da(l.target,a,1,l.sequenceNumber);EI(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){A("RemoteStore","Failed to raise snapshot:",i),yield ky(n,i)}var i}),xI.apply(this,arguments)}function ky(n,e,t){return MI.apply(this,arguments)}function MI(){return MI=m(function*(n,e,t){if(!ra(e))throw e;n._u.add(1),yield Yu(n),n.gu.set("Offline"),t||(t=()=>t$(n.localStore)),n.asyncQueue.enqueueRetryable(m(function*(){A("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield tp(n)}))}),MI.apply(this,arguments)}function p$(n,e){return e().catch(t=>ky(n,t,e))}function Xu(n){return AI.apply(this,arguments)}function AI(){return AI=m(function*(n){const e=U(n),t=ma(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Rue(e);)try{const r=yield _ue(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,Pue(e,r)}catch(r){yield ky(e,r)}m$(e)&&g$(e)}),AI.apply(this,arguments)}function Rue(n){return pa(n)&&n.fu.length<10}function Pue(n,e){n.fu.push(e);const t=ma(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function m$(n){return pa(n)&&!ma(n).No()&&n.fu.length>0}function g$(n){ma(n).start()}function Oue(n){return kI.apply(this,arguments)}function kI(){return kI=m(function*(n){ma(n).eu()}),kI.apply(this,arguments)}function Nue(n){return RI.apply(this,arguments)}function RI(){return RI=m(function*(n){const e=ma(n);for(const t of n.fu)e.Xo(t.mutations)}),RI.apply(this,arguments)}function Fue(n,e,t){return PI.apply(this,arguments)}function PI(){return PI=m(function*(n,e,t){const i=n.fu.shift(),r=nI.from(i,e,t);yield p$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Xu(n)}),PI.apply(this,arguments)}function Lue(n,e){return OI.apply(this,arguments)}function OI(){return OI=m(function*(n,e){var t;e&&ma(n).Yo&&(yield(t=m(function*(i,r){if(ej(s=r.code)&&s!==T.ABORTED){const o=i.fu.shift();ma(i).Oo(),yield p$(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Xu(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),m$(n)&&g$(n)}),OI.apply(this,arguments)}function _$(n,e){return NI.apply(this,arguments)}function NI(){return NI=m(function*(n,e){const t=U(n);t.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");const i=pa(t);t._u.add(3),yield Yu(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield tp(t)}),NI.apply(this,arguments)}function FI(n,e){return LI.apply(this,arguments)}function LI(){return LI=m(function*(n,e){const t=U(n);e?(t._u.delete(2),yield tp(t)):e||(t._u.add(2),yield Yu(t),t.gu.set("Unknown"))}),LI.apply(this,arguments)}function Zu(n){return n.pu||(n.pu=function(e,t,i){const r=U(e);return r.su(),new Tue(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Mue.bind(null,n),Zr:Aue.bind(null,n),Wo:kue.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.pu.Oo(),II(n)?TI(n):n.gu.set("Unknown")):(yield n.pu.stop(),f$(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ma(n){return n.Iu||(n.Iu=function(e,t,i){const r=U(e);return r.su(),new Iue(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Oue.bind(null,n),Zr:Lue.bind(null,n),tu:Nue.bind(null,n),Zo:Fue.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.Iu.Oo(),yield Xu(n)):(yield n.Iu.stop(),n.fu.length>0&&(A("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class VI{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new VI(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ju(n,e){if(Jt("AsyncQueue",`${e}: ${n}`),ra(n))return new x(T.UNAVAILABLE,`${e}: ${n}`);throw n}class ed{constructor(e){this.comparator=e?(t,i)=>e(t,i)||B.comparator(t.key,i.key):(t,i)=>B.comparator(t.key,i.key),this.keyedMap=Vf(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new ed(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ed)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ed;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class y${constructor(){this.Tu=new Gt(B.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):K():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class td{constructor(e,t,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new td(e,t,ed.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class Vue{constructor(){this.Au=void 0,this.listeners=[]}}class Bue{constructor(){this.queries=new ua(e=>VH(e),Nf),this.onlineState="Unknown",this.Ru=new Set}}function BI(n,e){return UI.apply(this,arguments)}function UI(){return UI=m(function*(n,e){const t=U(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new Vue),r)try{s.Au=yield t.onListen(i)}catch(o){const a=Ju(o,`Initialization of query '${KT(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&$I(t)}),UI.apply(this,arguments)}function HI(n,e){return jI.apply(this,arguments)}function jI(){return jI=m(function*(n,e){const t=U(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),jI.apply(this,arguments)}function Uue(n,e){const t=U(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.Pu(r)&&(i=!0);o.Au=r}}i&&$I(t)}function Hue(n,e,t){const i=U(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function $I(n){n.Ru.forEach(e=>{e.next()})}class zI{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new td(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class jue{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class v${constructor(e){this.It=e}Ji(e){return Es(this.It,e)}Yi(e){return e.metadata.exists?mj(this.It,e.document,!1):_t.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Mn(e)}}class $ue{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=b$(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=We.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,i=new v$(this.It);for(const r of e)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Ce()).add(s);t.set(o,a)}}return t}complete(){var e=this;return m(function*(){const t=yield function yue(n,e,t,i){return pI.apply(this,arguments)}(e.localStore,new v$(e.It),e.documents,e.Mu.id),i=e.Fu(e.documents);for(const r of e.queries)yield vue(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function b$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class w${constructor(e){this.key=e}}class C${constructor(e){this.key=e}}class E${constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ce(),this.mutatedKeys=Ce(),this.Ku=UH(e),this.Gu=new ed(this.Ku)}get Qu(){return this.Lu}ju(e,t){const i=t?t.Wu:new y$,r=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const h=r.get(u),f=QT(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),y=!0):this.zu(h,f)||(i.track({type:2,doc:f}),y=!0,(l&&this.Ku(f,l)>0||c&&this.Ku(f,c)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),y=!0):h&&!f&&(i.track({type:1,doc:h}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Gu:o,Wu:i,$i:a,mutatedKeys:s}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return f(d)-f(h)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(i);const o=t?this.Ju():[],a=0===this.qu.size&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,0!==s.length||l?{snapshot:new td(this.query,e.Gu,r,s,e.mutatedKeys,0===a,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new y$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ce(),this.Gu.forEach(i=>{this.Xu(i.key)&&(this.qu=this.qu.add(i.key))});const t=[];return e.forEach(i=>{this.qu.has(i)||t.push(new C$(i))}),this.qu.forEach(i=>{e.has(i)||t.push(new w$(i))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ce();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return td.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class zue{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Gue{constructor(e){this.key=e,this.ec=!1}}class Wue{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new ua(a=>VH(a),Nf),this.ic=new Map,this.rc=new Set,this.oc=new Gt(B.comparator),this.uc=new Map,this.cc=new aI,this.ac={},this.hc=new Map,this.lc=Ol.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function que(n,e){return GI.apply(this,arguments)}function GI(){return GI=m(function*(n,e){const t=pD(n);let i,r;const s=t.sc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.tc();else{const o=yield Ku(t.localStore,Ni(e));t.isPrimaryClient&&Ay(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield WI(t,e,i,"current"===a)}return r}),GI.apply(this,arguments)}function WI(n,e,t,i){return qI.apply(this,arguments)}function qI(){return qI=m(function*(n,e,t,i){n.dc=(u,d,h)=>{return(f=m(function*(p,g,y,b){let v=g.view.ju(y);v.$i&&(v=yield Dy(p.localStore,g.query,!1).then(({documents:N})=>g.view.ju(N,v)));const D=b&&b.targetChanges.get(g.targetId),S=g.view.applyChanges(v,p.isPrimaryClient,D);return iD(p,g.targetId,S.Yu),S.snapshot}),function(p,g,y,b){return f.apply(this,arguments)})(n,u,d,h);var f};const r=yield Dy(n.localStore,e,!0),s=new E$(e,r.Hi),o=s.ju(r.documents),a=Hf.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),l=s.applyChanges(o,n.isPrimaryClient,a);iD(n,t,l.Yu);const c=new zue(e,t,s);return n.sc.set(e,c),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),l.snapshot}),qI.apply(this,arguments)}function Kue(n,e){return KI.apply(this,arguments)}function KI(){return KI=m(function*(n,e){const t=U(n),i=t.sc.get(e),r=t.ic.get(i.targetId);if(r.length>1)return t.ic.set(i.targetId,r.filter(s=>!Nf(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qu(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),np(t.remoteStore,i.targetId),nd(t,i.targetId)}).catch(ia))):(nd(t,i.targetId),yield Qu(t.localStore,i.targetId,!0))}),KI.apply(this,arguments)}function QI(){return QI=m(function*(n,e,t){const i=mD(n);try{const r=yield function(s,o){const a=U(s),l=St.now(),c=o.reduce((h,f)=>h.add(f.key),Ce());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Fi(),p=Ce();return a.Gi.getEntries(h,c).next(g=>{f=g,f.forEach((y,b)=>{b.isValidDocument()||(p=p.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const y=[];for(const b of o){const v=sce(b,u.get(b.key).overlayedDocument);null!=v&&y.push(new uo(b.key,v,MH(v.value.mapValue),xt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,y,o)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:ij(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.ac[s.currentUser.toKey()];l||(l=new Gt(ge)),l=l.insert(o,a),s.ac[s.currentUser.toKey()]=l}(i,r.batchId,t),yield ho(i,r.changes),yield Xu(i.remoteStore)}catch(r){const s=Ju(r,"Failed to persist write");t.reject(s)}}),QI.apply(this,arguments)}function T$(n,e){return YI.apply(this,arguments)}function YI(){return YI=m(function*(n,e){const t=U(n);try{const i=yield gue(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.uc.get(s);o&&(oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ec=!0:r.modifiedDocuments.size>0?oe(o.ec):r.removedDocuments.size>0&&(oe(o.ec),o.ec=!1))}),yield ho(t,i,e)}catch(i){yield ia(i)}}),YI.apply(this,arguments)}function I$(n,e,t){const i=U(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.sc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=U(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&$I(a)}(i.eventManager,e),r.length&&i.nc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Yue(n,e,t){return XI.apply(this,arguments)}function XI(){return XI=m(function*(n,e,t){const i=U(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.uc.get(e),s=r&&r.key;if(s){let o=new Gt(B.comparator);o=o.insert(s,_t.newNoDocument(s,re.min()));const a=Ce().add(s),l=new Uf(re.min(),new Map,new lt(ge),o,a);yield T$(i,l),i.oc=i.oc.remove(s),i.uc.delete(e),rD(i)}else yield Qu(i.localStore,e,!1).then(()=>nd(i,e,t)).catch(ia)}),XI.apply(this,arguments)}function Xue(n,e){return ZI.apply(this,arguments)}function ZI(){return ZI=m(function*(n,e){const t=U(n),i=e.batch.batchId;try{const r=yield mue(t.localStore,e);nD(t,i,null),tD(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield ho(t,r)}catch(r){yield ia(r)}}),ZI.apply(this,arguments)}function Zue(n,e,t){return JI.apply(this,arguments)}function JI(){return JI=m(function*(n,e,t){const i=U(n);try{const r=yield function(s,o){const a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(oe(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);nD(i,e,t),tD(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield ho(i,r)}catch(r){yield ia(r)}}),JI.apply(this,arguments)}function eD(){return eD=m(function*(n,e){const t=U(n);pa(t.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=U(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===i)return void e.resolve();const r=t.hc.get(i)||[];r.push(e),t.hc.set(i,r)}catch(i){const r=Ju(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),eD.apply(this,arguments)}function tD(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function nD(n,e,t){const i=U(n);let r=i.ac[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.ac[i.currentUser.toKey()]=r}}function nd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ic.get(e))n.sc.delete(i),t&&n.nc._c(i,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(i=>{n.cc.containsKey(i)||D$(n,i)})}function D$(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(np(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),rD(n))}function iD(n,e,t){for(const i of t)i instanceof w$?(n.cc.addReference(i.key,e),ede(n,i)):i instanceof C$?(A("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,e),n.cc.containsKey(i.key)||D$(n,i.key)):K()}function ede(n,e){const t=e.key,i=t.path.canonicalString();n.oc.get(t)||n.rc.has(i)||(A("SyncEngine","New document in limbo: "+t),n.rc.add(i),rD(n))}function rD(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new B(We.fromString(e)),i=n.lc.next();n.uc.set(i,new Gue(t)),n.oc=n.oc.insert(t,i),Ay(n.remoteStore,new da(Ni(Vu(t.path)),i,2,Oi.at))}}function ho(n,e,t){return sD.apply(this,arguments)}function sD(){return sD=m(function*(n,e,t){const i=U(n),r=[],s=[],o=[];var a;i.sc.isEmpty()||(i.sc.forEach((a,l)=>{o.push(i.dc(l,e,t).then(c=>{if(c){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=dI.Ci(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.nc.Wo(r),yield(a=m(function*(l,c){const u=U(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(c,h=>w.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ra(d))throw d;A("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ui.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ui=u.Ui.insert(h,g)}}}),function(l,c){return a.apply(this,arguments)})(i.localStore,s))}),sD.apply(this,arguments)}function tde(n,e){return oD.apply(this,arguments)}function oD(){return oD=m(function*(n,e){const t=U(n);if(!t.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());const i=yield e$(t.localStore,e);t.currentUser=e,(r=t).hc.forEach(o=>{o.forEach(a=>{a.reject(new x(T.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ho(t,i.ji)}var r}),oD.apply(this,arguments)}function nde(n,e){const t=U(n),i=t.uc.get(e);if(i&&i.ec)return Ce().add(i.key);{let r=Ce();const s=t.ic.get(e);if(!s)return r;for(const o of s){const a=t.sc.get(o);r=r.unionWith(a.view.Qu)}return r}}function ide(n,e){return aD.apply(this,arguments)}function aD(){return aD=m(function*(n,e){const t=U(n),i=yield Dy(t.localStore,e.query,!0),r=e.view.Zu(i);return t.isPrimaryClient&&iD(t,e.targetId,r.Yu),r}),aD.apply(this,arguments)}function rde(n,e){return lD.apply(this,arguments)}function lD(){return lD=m(function*(n,e){const t=U(n);return r$(t.localStore,e).then(i=>ho(t,i))}),lD.apply(this,arguments)}function sde(n,e,t,i){return cD.apply(this,arguments)}function cD(){return cD=m(function*(n,e,t,i){const r=U(n),s=yield function(o,a){const l=U(o),c=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):w.resolve(null)))}(r.localStore,e);var a;null!==s?("pending"===t?yield Xu(r.remoteStore):"acknowledged"===t||"rejected"===t?(nD(r,e,i||null),tD(r,e),a=e,U(U(r.localStore).mutationQueue).An(a)):K(),yield ho(r,s)):A("SyncEngine","Cannot apply mutation batch with id: "+e)}),cD.apply(this,arguments)}function uD(){return uD=m(function*(n,e){const t=U(n);if(pD(t),mD(t),!0===e&&!0!==t.fc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield S$(t,i.toArray());t.fc=!0,yield FI(t.remoteStore,!0);for(const s of r)Ay(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const i=[];let r=Promise.resolve();t.ic.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(nd(t,o),Qu(t.localStore,o,!0))),np(t.remoteStore,o)}),yield r,yield S$(t,i),function(s){const o=U(s);o.uc.forEach((a,l)=>{np(o.remoteStore,l)}),o.cc.fs(),o.uc=new Map,o.oc=new Gt(B.comparator)}(t),t.fc=!1,yield FI(t.remoteStore,!1)}}),uD.apply(this,arguments)}function S$(n,e,t){return dD.apply(this,arguments)}function dD(){return dD=m(function*(n,e,t){const i=U(n),r=[],s=[];for(const o of e){let a;const l=i.ic.get(o);if(l&&0!==l.length){a=yield Ku(i.localStore,Ni(l[0]));for(const c of l){const u=i.sc.get(c),d=yield ide(i,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield i$(i.localStore,o);a=yield Ku(i.localStore,c),yield WI(i,x$(c),o,!1)}r.push(a)}return i.nc.Wo(s),r}),dD.apply(this,arguments)}function x$(n){return FH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ade(n){const e=U(n);return U(U(e.localStore).persistence).vi()}function lde(n,e,t,i){return hD.apply(this,arguments)}function hD(){return hD=m(function*(n,e,t,i){const r=U(n);if(r.fc)return void A("SyncEngine","Ignoring unexpected query state notification.");const s=r.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield r$(r.localStore,BH(s[0])),a=Uf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ho(r,o,a);break}case"rejected":yield Qu(r.localStore,e,!0),nd(r,e,i);break;default:K()}}),hD.apply(this,arguments)}function cde(n,e,t){return fD.apply(this,arguments)}function fD(){return fD=m(function*(n,e,t){const i=pD(n);if(i.fc){for(const r of e){if(i.ic.has(r)){A("SyncEngine","Adding an already active target "+r);continue}const s=yield i$(i.localStore,r),o=yield Ku(i.localStore,s);yield WI(i,x$(s),o.targetId,!1),Ay(i.remoteStore,o)}for(const r of t)i.ic.has(r)&&(yield Qu(i.localStore,r,!1).then(()=>{np(i.remoteStore,r),nd(i,r)}).catch(ia))}}),fD.apply(this,arguments)}function pD(n){const e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=T$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yue.bind(null,e),e.nc.Wo=Uue.bind(null,e.eventManager),e.nc._c=Hue.bind(null,e.eventManager),e}function mD(n){const e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zue.bind(null,e),e}class M${constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return m(function*(){t.It=ep(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Jj(this.persistence,new Zj,e.initialUser,this.It)}gc(e){return new Yj(Ty.Bs,this.It)}mc(e){return new l$}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class A$ extends M${constructor(e,t,i){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e),yield i.Ec.initialize(i,e),yield mD(i.Ec.syncEngine),yield Xu(i.Ec.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Jj(this.persistence,new Zj,e.initialUser,this.It)}Ic(e,t){return new eue(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const i=new Lle(t,this.persistence);return new Fle(e.asyncQueue,i)}gc(e){const t=uI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new cI(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,u$(),My(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new l$}}class dde extends A${constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e);const r=i.Ec.syncEngine;i.sharedClientState instanceof vI&&(i.sharedClientState.syncEngine={Fr:sde.bind(null,r),$r:lde.bind(null,r),Br:cde.bind(null,r),vi:ade.bind(null,r),Or:rde.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=m(function*(o){yield function ode(n,e){return uD.apply(this,arguments)}(i.Ec.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}mc(e){const t=u$();if(!vI.C(t))throw new x(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=uI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vI(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class gD{initialize(e,t){var i=this;return m(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>I$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=tde.bind(null,i.syncEngine),yield FI(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Bue}createDatastore(e){const t=ep(e.databaseInfo.databaseId),i=new Eue(e.databaseInfo);return new Due(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>I$(this.syncEngine,a,0),o=c$.C()?new c$:new bue,new xue(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,l,c){const u=new Wue(i,r,s,o,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=m(function*(t){const i=U(t);A("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Yu(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function k$(n,e=10240){let t=0;return{read:()=>m(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>m(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hde{constructor(e,t){this.bc=e,this.It=t,this.metadata=new xn,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(i=>{i&&i.ku()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.bc.cancel()}getMetadata(){var e=this;return m(function*(){return e.metadata.promise})()}wc(){var e=this;return m(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return m(function*(){const t=yield e.Vc();if(null===t)return null;const i=e.Pc.decode(t),r=Number(i);isNaN(r)&&e.Sc(`length string (${i}) is not valid number`);const s=yield e.Dc(r);return new jue(JSON.parse(s),t.length+r)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return m(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Dc(e){var t=this;return m(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const i=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return m(function*(){const t=yield e.bc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class fde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return m(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new x(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=m(function*(s,o){const a=U(s),l=zf(a.It)+"/documents",c={documents:o.map(f=>$f(a.It,f))},u=yield a.fo("BatchGetDocuments",l,c,o.length),d=new Map;u.forEach(f=>{const p=function gce(n,e){return"found"in e?function(t,i){oe(!!i.found);const r=Es(t,i.found.name),s=Mn(i.found.updateTime),o=new $n({mapValue:{fields:i.found.fields}});return _t.newFoundDocument(r,s,o)}(n,e):"missing"in e?function(t,i){oe(!!i.missing),oe(!!i.readTime);const r=Es(t,i.missing),s=Mn(i.readTime);return _t.newNoDocument(r,s)}(n,e):K()}(a.It,f);d.set(p.key.toString(),p)});const h=[];return o.forEach(f=>{const p=d.get(f.toString());oe(!!p),h.push(p)}),h}),function(s,o){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new $u(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return m(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=B.fromPath(r);e.mutations.push(new YT(s,e.precondition(s)))}),yield(i=m(function*(r,s){const o=U(r),a=zf(o.It)+"/documents",l={writes:s.map(c=>Gf(o.It,c))};yield o.co("Commit",a,l)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new x(T.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(re.min())?xt.exists(!1):xt.updateTime(t):xt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(re.min()))throw new x(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xt.updateTime(t)}return xt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pde{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Nc=i.maxAttempts,this.xo=new bI(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao(m(function*(){const t=new fde(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Oc(s)}))}).catch(r=>{e.Oc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!Mf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ej(t)}return!1}}class mde{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Sn.UNAUTHENTICATED,this.clientId=dH.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=m(function*(a){A("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(A("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Ju(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function R$(n,e){return _D.apply(this,arguments)}function _D(){return _D=m(function*(n,e){n.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=m(function*(s){i.isEqual(s)||(yield e$(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_D.apply(this,arguments)}function P$(n,e){return yD.apply(this,arguments)}function yD(){return yD=m(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vD(n);A("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>_$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>_$(e.remoteStore,s)),n.onlineComponents=e}),yD.apply(this,arguments)}function vD(n){return bD.apply(this,arguments)}function bD(){return bD=m(function*(n){return n.offlineComponents||(A("FirestoreClient","Using default OfflineComponentProvider"),yield R$(n,new M$)),n.offlineComponents}),bD.apply(this,arguments)}function Py(n){return wD.apply(this,arguments)}function wD(){return wD=m(function*(n){return n.onlineComponents||(A("FirestoreClient","Using default OnlineComponentProvider"),yield P$(n,new gD)),n.onlineComponents}),wD.apply(this,arguments)}function O$(n){return vD(n).then(e=>e.persistence)}function Oy(n){return vD(n).then(e=>e.localStore)}function N$(n){return Py(n).then(e=>e.remoteStore)}function CD(n){return Py(n).then(e=>e.syncEngine)}function id(n){return ED.apply(this,arguments)}function ED(){return ED=m(function*(n){const e=yield Py(n),t=e.eventManager;return t.onListen=que.bind(null,e.syncEngine),t.onUnlisten=Kue.bind(null,e.syncEngine),t}),ED.apply(this,arguments)}function F$(n,e,t={}){const i=new xn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,s,o,a,l){const c=new Ry({next:d=>{s.enqueueAndForget(()=>HI(r,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new x(T.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new x(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new zI(Vu(o.path),c,{includeMetadataChanges:!0,Nu:!0});return BI(r,u)}(yield id(n),n.asyncQueue,e,t,i)})),i.promise}function L$(n,e,t={}){const i=new xn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,s,o,a,l){const c=new Ry({next:d=>{s.enqueueAndForget(()=>HI(r,u)),d.fromCache&&"server"===a.source?l.reject(new x(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new zI(o,c,{includeMetadataChanges:!0,Nu:!0});return BI(r,u)}(yield id(n),n.asyncQueue,e,t,i)})),i.promise}const V$=new Map;function TD(n,e,t){if(!t)throw new x(T.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function B$(n,e,t,i){if(!0===e&&!0===i)throw new x(T.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U$(n){if(!B.isDocumentKey(n))throw new x(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H$(n){if(B.isDocumentKey(n))throw new x(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ny(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":K()}function ze(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ny(n);throw new x(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function j$(n,e){if(e<=0)throw new x(T.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $${constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new x(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new x(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,B$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ip{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Tle;switch(t.type){case"gapi":return new xle(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new x(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=V$.get(e);t&&(A("ComponentProvider","Removing Datastore"),V$.delete(e),t.terminate())}(this),Promise.resolve()}}class Ct{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class ni{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Is extends ni{constructor(e,t,i){super(e,t,Vu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new B(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function ID(n,e,...t){if(n=Me(n),TD("collection","path",e),n instanceof ip){const i=We.fromString(e,...t);return H$(i),new Is(n,null,i)}{if(!(n instanceof Ct||n instanceof Is))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return H$(i),new Is(n.firestore,null,i)}}function Fy(n,e,...t){if(n=Me(n),1===arguments.length&&(e=dH.R()),TD("doc","path",e),n instanceof ip){const i=We.fromString(e,...t);return U$(i),new Ct(n,null,new B(i))}{if(!(n instanceof Ct||n instanceof Is))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return U$(i),new Ct(n.firestore,n instanceof Is?n.converter:null,new B(i))}}function z$(n,e){return n=Me(n),e=Me(e),(n instanceof Ct||n instanceof Is)&&(e instanceof Ct||e instanceof Is)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function G$(n,e){return n=Me(n),e=Me(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&Nf(n._query,e._query)&&n.converter===e.converter}class Dde{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new bI(this,"async_queue_retry"),this.jc=()=>{const t=My();t&&A("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=My();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=My();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new xn;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return m(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!ra(t))throw t;A("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(i=>{throw this.qc=i,this.Kc=!1,Jt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Kc=!1,i))));return this.$c=t,t}enqueueAfterDelay(e,t,i){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const r=VI.createAndSchedule(this,e,t,i,s=>this.Jc(s));return this.Uc.push(r),r}Wc(){this.qc&&K()}verifyOperationInProgress(){}Yc(){var e=this;return m(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function DD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Sde{constructor(){this._progressObserver={},this._taskCompletionResolver=new xn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mt extends ip{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Dde,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||q$(this),this._firestoreClient.terminate()}}function W$(n,e){const i="string"==typeof n?n:e||"(default)";return Qr("object"==typeof n?n:Zo(),"firestore").getImmediate({identifier:i})}function cn(n){return n._firestoreClient||q$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function q$(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ule(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new mde(n._authCredentials,n._appCheckCredentials,n._queue,i)}function K$(n,e,t){const i=new xn;return n.asyncQueue.enqueue(m(function*(){try{yield R$(n,t),yield P$(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(o=s).name?o.code===T.FAILED_PRECONDITION||o.code===T.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;yl("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var o})).then(()=>i.promise)}function Q$(n){if(n._initialized||n._terminated)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new x(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(yn.fromBase64String(e))}catch(t){throw new x(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ds(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fl{constructor(e){this._methodName=e}}class Ly{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}const Lde=/^__.*__$/;class Vde{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class Y${constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function X$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Vy{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Vy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:i,ra:!1});return r.oa(e),r}ua(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:i,ra:!1});return r.ea(),r}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Hy(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(X$(this.na)&&Lde.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Bde{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||ep(e)}fa(e,t,i,r=!1){return new Vy({na:e,methodName:t,la:i,path:zt.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ll(n){const e=n._freezeSettings(),t=ep(n._databaseId);return new Bde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function By(n,e,t,i,r,s={}){const o=n.fa(s.merge||s.mergeFields?2:0,e,t,r);AD("Data must be an object, but it was:",o,i);const a=ez(i,o);let l,c;if(s.merge)l=new tr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=kD(e,d,t);if(!o.contains(h))throw new x(T.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);nz(u,h)||u.push(h)}l=new tr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Vde(new $n(a),l,c)}class rp extends Fl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rp}}function Z$(n,e,t){return new Vy({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class SD extends Fl{_toFieldTransform(e){return new Ff(e.path,new Uu)}isEqual(e){return e instanceof SD}}class Ude extends Fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Z$(this,e,!0),i=this.da.map(s=>Vl(s,t)),r=new Dl(i);return new Ff(e.path,r)}isEqual(e){return this===e}}class Hde extends Fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Z$(this,e,!0),i=this.da.map(s=>Vl(s,t)),r=new Sl(i);return new Ff(e.path,r)}isEqual(e){return this===e}}class jde extends Fl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Hu(e.It,$H(e.It,this._a));return new Ff(e.path,t)}isEqual(e){return this===e}}function xD(n,e,t,i){const r=n.fa(1,e,t);AD("Data must be an object, but it was:",r,i);const s=[],o=$n.empty();wl(i,(l,c)=>{const u=Uy(e,l,t);c=Me(c);const d=r.ua(u);if(c instanceof rp)s.push(u);else{const h=Vl(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new tr(s);return new Y$(o,a,r.fieldTransforms)}function MD(n,e,t,i,r,s){const o=n.fa(1,e,t),a=[kD(e,i,t)],l=[r];if(s.length%2!=0)throw new x(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(kD(e,s[h])),l.push(s[h+1]);const c=[],u=$n.empty();for(let h=a.length-1;h>=0;--h)if(!nz(c,a[h])){const f=a[h];let p=l[h];p=Me(p);const g=o.ua(f);if(p instanceof rp)c.push(f);else{const y=Vl(p,g);null!=y&&(c.push(f),u.set(f,y))}}const d=new tr(c);return new Y$(u,d,o.fieldTransforms)}function J$(n,e,t,i=!1){return Vl(t,n.fa(i?4:3,e))}function Vl(n,e){if(tz(n=Me(n)))return AD("Unsupported field value:",e,n),ez(n,e);if(n instanceof Fl)return function(t,i){if(!X$(i.na))throw i.aa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.aa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=Vl(o,i.ca(s));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=Me(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $H(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=St.fromDate(t);return{timestampValue:jf(i.It,r)}}if(t instanceof St){const r=new St(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jf(i.It,r)}}if(t instanceof Ly)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ds)return{bytesValue:uj(i.It,t._byteString)};if(t instanceof Ct){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:XT(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.aa(`Unsupported field value: ${Ny(t)}`)}(n,e)}function ez(n,e){const t={};return vH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wl(n,(i,r)=>{const s=Vl(r,e.ia(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function tz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Ly||n instanceof Ds||n instanceof Ct||n instanceof Fl)}function AD(n,e,t){if(!tz(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Ny(t);throw e.aa("an object"===i?n+" a custom object":n+" "+i)}var i}function kD(n,e,t){if((e=Me(e))instanceof fo)return e._internalPath;if("string"==typeof e)return Uy(n,e);throw Hy("Field path arguments must be of type string or ",n,!1,void 0,t)}const $de=new RegExp("[~\\*/\\[\\]]");function Uy(n,e,t){if(e.search($de)>=0)throw Hy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fo(...e.split("."))._internalPath}catch(i){throw Hy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hy(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new x(T.INVALID_ARGUMENT,a+n+l)}function nz(n,e){return n.some(t=>t.isEqual(e))}class sp{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zde extends sp{data(){return super.data()}}function jy(n,e){return"string"==typeof e?Uy(n,e):e instanceof fo?e._internalPath:e._delegate._internalPath}class Bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends sp{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jy("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class op extends po{data(e={}){return super.data(e)}}class ga{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new op(this._firestore,this._userDataWriter,i.key,i,new Bl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new op(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Bl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const a=new op(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Bl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Gde(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gde(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function iz(n,e){return n instanceof po&&e instanceof po?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ga&&e instanceof ga&&n._firestore===e._firestore&&G$(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function rz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new x(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}function _a(n,...e){for(const t of e)n=t._apply(n);return n}class Wde extends ap{constructor(e,t,i){super(),this.wa=e,this.ma=t,this.ga=i,this.type="where"}_apply(e){const t=Ll(e.firestore),i=function(r,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new x(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){uz(u,c);const f=[];for(const p of u)f.push(cz(a,r,p));d={arrayValue:{values:f}}}else d=cz(a,r,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||uz(u,c),d=J$(o,"where",u,"in"===c||"not-in"===c);const h=zn.create(l,c,d);return function(f,p){if(p.dt()){const y=WT(f);if(null!==y&&!y.isEqual(p.field))throw new x(T.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${y.toString()}' and '${p.field.toString()}'`);const b=GT(f);null!==b&&dz(0,p.field,b)}const g=function(y,b){for(const v of y.filters)if(b.indexOf(v.op)>=0)return v.op;return null}(f,function(y){switch(y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(null!==g)throw new x(T.INVALID_ARGUMENT,g===p.op?`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`:`Invalid query. You cannot use '${p.op.toString()}' filters with '${g.toString()}' filters.`)}(r,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ni(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Kde extends ap{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Lu(r,s);return function(a,l){if(null===GT(a)){const c=WT(a);null!==c&&dz(0,c,l.field)}}(i,o),o}(e._query,this.wa,this.ya);return new ni(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new co(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class sz extends ap{constructor(e,t,i){super(),this.type=e,this.pa=t,this.Ia=i}_apply(e){return new ni(e.firestore,e.converter,uy(e._query,this.pa,this.Ia))}}class oz extends ap{constructor(e,t,i){super(),this.type=e,this.Ta=t,this.Ea=i}_apply(e){const t=lz(e,this.type,this.Ta,this.Ea);return new ni(e.firestore,e.converter,(r=t,new co((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class az extends ap{constructor(e,t,i){super(),this.type=e,this.Ta=t,this.Ea=i}_apply(e){const t=lz(e,this.type,this.Ta,this.Ea);return new ni(e.firestore,e.converter,(r=t,new co((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function lz(n,e,t,i){if(t[0]=Me(t[0]),t[0]instanceof sp)return function(r,s,o,a,l){if(!a)throw new x(T.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Bu(r))if(u.field.isKeyField())c.push(Tl(s,a.key));else{const d=a.data.field(u.field);if(jT(d))throw new x(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new x(T.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new ca(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Ll(n.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new x(T.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new x(T.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!qT(s)&&-1!==p.indexOf("/"))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const g=s.path.child(We.fromString(p));if(!B.isDocumentKey(g))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const y=new B(g);h.push(Tl(o,y))}else{const g=J$(a,l,p);h.push(g)}}return new ca(h,u)}(n._query,n.firestore._databaseId,r,e,t,i)}}function cz(n,e,t){if("string"==typeof(t=Me(t))){if(""===t)throw new x(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&-1!==t.indexOf("/"))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!B.isDocumentKey(i))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Tl(n,new B(i))}if(t instanceof Ct)return Tl(n,t._key);throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(t)}.`)}function uz(n,e){if(!Array.isArray(n)||0===n.length)throw new x(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new x(T.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dz(n,e,t){if(!t.isEqual(e))throw new x(T.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const nhe={maxAttempts:5};class RD{convertValue(e,t="none"){switch(El(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw K()}}convertObject(e,t){const i={};return wl(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Ly(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wH(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xf(e));default:return null}}convertTimestamp(e){const t=sa(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);oe(bj(i));const r=new oa(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(t)||Jt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function $y(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class ihe extends RD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}class hz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ll(e)}set(e,t,i){this._verifyNotCommitted();const r=ya(e,this._firestore),s=$y(r.converter,t,i),o=By(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,xt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=ya(e,this._firestore);let o;return o="string"==typeof(t=Me(t))||t instanceof fo?MD(this._dataReader,"WriteBatch.update",s._key,t,i,r):xD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ya(e,this._firestore);return this._mutations=this._mutations.concat(new $u(t._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ya(n,e){if((n=Me(n)).firestore!==e)throw new x(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ul extends RD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function fz(n,e,t){n=ze(n,Ct);const i=ze(n.firestore,Mt),r=$y(n.converter,e,t);return rd(i,[By(Ll(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,xt.none())])}function pz(n,e,t,...i){n=ze(n,Ct);const r=ze(n.firestore,Mt),s=Ll(r);let o;return o="string"==typeof(e=Me(e))||e instanceof fo?MD(s,"updateDoc",n._key,e,t,i):xD(s,"updateDoc",n._key,e),rd(r,[o.toMutation(n._key,xt.exists(!0))])}function mz(n,e){const t=ze(n.firestore,Mt),i=Fy(n),r=$y(n.converter,e);return rd(t,[By(Ll(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,xt.exists(!1))]).then(()=>i)}function gz(n,...e){var t,i,r;n=Me(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||DD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(DD(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[o+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}let l,c,u;if(n instanceof Ct)c=ze(n.firestore,Mt),u=Vu(n._key.path),l={next:d=>{e[o]&&e[o](PD(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=ze(n,ni);c=ze(d.firestore,Mt),u=d._query;const h=new Ul(c);l={next:f=>{e[o]&&e[o](new ga(c,h,d,f))},error:e[o+1],complete:e[o+2]},rz(n._query)}return function(d,h,f,p){const g=new Ry(p),y=new zI(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return BI(yield id(d),y)})),()=>{g.Rc(),d.asyncQueue.enqueueAndForget(m(function*(){return HI(yield id(d),y)}))}}(cn(c),u,a,l)}function rd(n,e){return function(t,i){const r=new xn;return t.asyncQueue.enqueueAndForget(m(function*(){return function Que(n,e,t){return QI.apply(this,arguments)}(yield CD(t),i,r)})),r.promise}(cn(n),e)}function PD(n,e,t){const i=t.docs.get(e._key),r=new Ul(n);return new po(n,r,e._key,i,new Bl(t.hasPendingWrites,t.fromCache),e.converter)}class hhe extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ll(e)}get(e){const t=ya(e,this._firestore),i=new ihe(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return K();const s=r[0];if(s.isFoundDocument())return new sp(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new sp(this._firestore,i,t._key,null,t.converter);throw K()})}set(e,t,i){const r=ya(e,this._firestore),s=$y(r.converter,t,i),o=By(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,o),this}update(e,t,i,...r){const s=ya(e,this._firestore);let o;return o="string"==typeof(t=Me(t))||t instanceof fo?MD(this._dataReader,"Transaction.update",s._key,t,i,r):xD(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=ya(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ya(e,this._firestore),i=new Ul(this._firestore);return super.get(e).then(r=>new po(this._firestore,i,t._key,r._document,new Bl(!1,!1),t.converter))}}!function(n,e=!0){Pu=_s,on(new Zt("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Mt(new Dle(t.getProvider("auth-internal")),new Mle(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new x(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),$e(lH,"3.5.0",n),$e(lH,"3.5.0","esm2017")}();class vhe{constructor(e,t){this._delegate=e,this.firebase=t,C_(e,new Zt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),l2(this._delegate)))}_getService(e,t=hl){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=hl){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){C_(this._delegate,e)}_addOrOverwriteComponent(e){a2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const yz=new Cr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Che=function vz(){const n=function whe(n){const e={},t={__esModule:!0,initializeApp:function s(c,u={}){const d=Er(c,u);if(Kr(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h},app:r,registerVersion:$e,setLogLevel:u2,onLog:c2,apps:null,SDK_VERSION:_s,INTERNAL:{registerComponent:function a(c){const u=c.name,d=u.replace("-compat","");if(on(c)&&"PUBLIC"===c.type){const h=(f=r())=>{if("function"!=typeof f[d])throw yz.create("invalid-app-argument",{appName:u});return f[d]()};void 0!==c.serviceProps&&Gh(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return"PUBLIC"===c.type?t[d]:null},removeApp:function i(c){delete e[c]},useAsService:function l(c,u){return"serverAuth"===u?null:u},modularAPIs:Kd}};function r(c){if(!Kr(e,c=c||hl))throw yz.create("no-app",{appName:c});return e[c]}return t.default=t,Object.defineProperty(t,"apps",{get:function o(){return Object.keys(e).map(c=>e[c])}}),r.App=n,t}(vhe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:vz,extendNamespace:function e(t){Gh(n,t)},createSubscribe:ZB,ErrorFactory:Cr,deepExtend:Gh}),n}(),bz=new Qo("@firebase/app-compat");if(function Ire(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){bz.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&bz.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Tr=Che;function OD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new x("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wz(){if("undefined"==typeof Uint8Array)throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function Cz(){if(!function Vle(){return"undefined"!=typeof atob}())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function Ihe(n){$e("@firebase/app-compat","0.1.34",n)}(),Tr.registerVersion("firebase","9.10.0","app-compat");class lp{constructor(e){this._delegate=e}static fromBase64String(e){return Cz(),new lp(Ds.fromBase64String(e))}static fromUint8Array(e){return wz(),new lp(Ds.fromUint8Array(e))}toBase64(){return Cz(),this._delegate.toBase64()}toUint8Array(){return wz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ND(n){return function Ahe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class khe{enableIndexedDbPersistence(e,t){return function Mde(n,e){Q$(n=ze(n,Mt));const t=cn(n),i=n._freezeSettings(),r=new gD;return K$(t,r,new A$(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ade(n){Q$(n=ze(n,Mt));const e=cn(n),t=n._freezeSettings(),i=new gD;return K$(e,i,new dde(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kde(n){if(n._initialized&&!n._terminated)throw new x(T.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xn;return n._queue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{yield(t=m(function*(i){if(!Zr.C())return Promise.resolve();const r=i+"main";yield Zr.delete(r)}),function(i){return t.apply(this,arguments)})(uI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ez{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof oa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Tde(n,e,t,i={}){var r;const s=(n=ze(n,ip))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&yl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=Sn.MOCK_USER;else{o=function Ere(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[g_(JSON.stringify({alg:"none",type:"JWT"})),g_(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new x(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Sn(l)}n._authCredentials=new Ile(new cH(o,a))}}(this._delegate,e,t,i)}enableNetwork(){return function Pde(n){return function gde(n){return n.asyncQueue.enqueue(m(function*(){const e=yield O$(n),t=yield N$(n);return e.setNetworkEnabled(!0),function(i){const r=U(i);return r._u.delete(0),tp(r)}(t)}))}(cn(n=ze(n,Mt)))}(this._delegate)}disableNetwork(){return function Ode(n){return function _de(n){return n.asyncQueue.enqueue(m(function*(){const e=yield O$(n),t=yield N$(n);return e.setNetworkEnabled(!1),(i=m(function*(r){const s=U(r);s._u.add(0),yield Yu(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(cn(n=ze(n,Mt)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,B$("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Rde(n){return function(e){const t=new xn;return e.asyncQueue.enqueueAndForget(m(function*(){return function Jue(n,e){return eD.apply(this,arguments)}(yield CD(e),t)})),t.promise}(cn(n=ze(n,Mt)))}(this._delegate)}onSnapshotsInSync(e){return function dhe(n,e){return function bde(n,e){const t=new Ry(e);return n.asyncQueue.enqueueAndForget(m(function*(){return i=yield id(n),r=t,U(i).Ru.add(r),void r.next();var i,r})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget(m(function*(){return i=yield id(n),r=t,void U(i).Ru.delete(r);var i,r}))}}(cn(n=ze(n,Mt)),DD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sd(this,ID(this._delegate,e))}catch(t){throw bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ir(this,Fy(this._delegate,e))}catch(t){throw bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wi(this,function Ide(n,e){if(n=ze(n,ip),TD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,(t=e,new co(We.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fhe(n,e,t){n=ze(n,Mt);const i=Object.assign(Object.assign({},nhe),t);return function(r){if(r.maxAttempts<1)throw new x(T.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function wde(n,e,t){const i=new xn;return n.asyncQueue.enqueueAndForget(m(function*(){const r=yield(s=n,Py(s).then(o=>o.datastore));var s;new pde(n.asyncQueue,r,t,e,i).run()})),i.promise}(cn(n),r=>e(new hhe(n,r)),i)}(this._delegate,t=>e(new Tz(this,t)))}batch(){return cn(this._delegate),new Iz(new hz(this._delegate,e=>rd(this._delegate,e)))}loadBundle(e){return function Nde(n,e){const t=cn(n=ze(n,Mt)),i=new Sde;return function Cde(n,e,t,i){const r=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,c){if(l instanceof Uint8Array)return k$(l,c);if(l instanceof ArrayBuffer)return k$(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new hde(l,o);var l}(t,ep(e));n.asyncQueue.enqueueAndForget(m(function*(){!function ude(n,e,t){const i=U(n);var r;(r=m(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(h,f){const p=U(h),g=Mn(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",y=>p.Ns.getBundleMetadata(y,f.id)).then(y=>!!y&&y.createTime.compareTo(g)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=l).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(b$(l));const c=new $ue(l,s.localStore,o.It);let u=yield o.wc();for(;u;){const h=yield c.Ou(u);h&&a._updateProgress(h),u=yield o.wc()}const d=yield c.complete();return yield ho(s,d.Bu,void 0),yield function(h,f){const p=U(h);return p.persistence.runTransaction("Save bundle","readwrite",g=>p.Ns.saveBundleMetadata(g,f))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.$u)}catch(l){return yl("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var h}),function(s,o,a){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield CD(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Fde(n,e){return function Ede(n,e){return n.asyncQueue.enqueue(m(function*(){return function(t,i){const r=U(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield Oy(n),e)}))}(cn(n=ze(n,Mt)),e).then(t=>t?new ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new wi(this,t):null)}}class zy extends RD{constructor(e){super(),this.firestore=e}convertBytes(e){return new lp(new Ds(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ir.forKey(t,this.firestore,null)}}class Tz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zy(e)}get(e){const t=jl(e);return this._delegate.get(t).then(i=>new cp(this._firestore,new po(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=jl(e);return i?(OD("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=jl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=jl(e);return this._delegate.delete(t),this}}class Iz{constructor(e){this._delegate=e}set(e,t,i){const r=jl(e);return i?(OD("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=jl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=jl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new op(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new up(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Hl.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Hl(e,new zy(e),t),r.set(t,s)),s}}Hl.INSTANCES=new WeakMap;class Ir{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zy(e)}static forPath(e,t,i){if(e.length%2!=0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ir(t,new Ct(t._delegate,i,new B(e)))}static forKey(e,t,i){return new Ir(t,new Ct(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new sd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sd(this.firestore,ID(this._delegate,e))}catch(t){throw bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Me(e))instanceof Ct&&z$(this._delegate,e)}set(e,t){t=OD("DocumentReference.set",t);try{return t?fz(this._delegate,e,t):fz(this._delegate,e)}catch(i){throw bi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?pz(this._delegate,e):pz(this._delegate,e,t,...i)}catch(r){throw bi(r,"updateDoc()","DocumentReference.update()")}}delete(){return function uhe(n){return rd(ze(n.firestore,Mt),[new $u(n._key,xt.none())])}(this._delegate)}onSnapshot(...e){const t=Dz(e),i=Sz(e,r=>new cp(this.firestore,new po(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return gz(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function she(n){n=ze(n,Ct);const e=ze(n.firestore,Mt),t=cn(e),i=new Ul(e);return function yde(n,e){const t=new xn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,s,o){try{const a=yield function(l,c){const u=U(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new x(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ju(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(r,s,o){return i.apply(this,arguments)})(yield Oy(n),e,t);var i})),t.promise}(t,n._key).then(r=>new po(e,i,n._key,r,new Bl(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ohe(n){n=ze(n,Ct);const e=ze(n.firestore,Mt);return F$(cn(e),n._key,{source:"server"}).then(t=>PD(e,n,t))}(this._delegate):function rhe(n){n=ze(n,Ct);const e=ze(n.firestore,Mt);return F$(cn(e),n._key).then(t=>PD(e,n,t))}(this._delegate),t.then(i=>new cp(this.firestore,new po(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ir(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}function bi(n,e,t){return n.message=n.message.replace(e,t),n}function Dz(n){for(const e of n)if("object"==typeof e&&!ND(e))return e;return{}}function Sz(n,e){var t,i;let r;return r=ND(n[0])?n[0]:ND(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class cp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iz(this._delegate,e._delegate)}}class up extends cp{data(e){const t=this._delegate.data(e);return function Ele(n,e){n||K()}(void 0!==t),t}}class wi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zy(e)}where(e,t,i){try{return new wi(this.firestore,_a(this._delegate,function qde(n,e,t){const i=e,r=jy("where",n);return new Wde(r,i,t)}(e,t,i)))}catch(r){throw bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wi(this.firestore,_a(this._delegate,function Qde(n,e="asc"){const t=e,i=jy("orderBy",n);return new Kde(i,t)}(e,t)))}catch(i){throw bi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wi(this.firestore,_a(this._delegate,function Yde(n){return j$("limit",n),new sz("limit",n,"F")}(e)))}catch(t){throw bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wi(this.firestore,_a(this._delegate,function Xde(n){return j$("limitToLast",n),new sz("limitToLast",n,"L")}(e)))}catch(t){throw bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wi(this.firestore,_a(this._delegate,function Zde(...n){return new oz("startAt",n,!0)}(...e)))}catch(t){throw bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wi(this.firestore,_a(this._delegate,function Jde(...n){return new oz("startAfter",n,!1)}(...e)))}catch(t){throw bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wi(this.firestore,_a(this._delegate,function ehe(...n){return new az("endBefore",n,!1)}(...e)))}catch(t){throw bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wi(this.firestore,_a(this._delegate,function the(...n){return new az("endAt",n,!0)}(...e)))}catch(t){throw bi(t,"endAt()","Query.endAt()")}}isEqual(e){return G$(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function lhe(n){n=ze(n,ni);const e=ze(n.firestore,Mt),t=cn(e),i=new Ul(e);return function vde(n,e){const t=new xn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,s,o){try{const a=yield Dy(r,s,!0),l=new E$(s,a.Hi),c=l.ju(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=Ju(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(r,s,o){return i.apply(this,arguments)})(yield Oy(n),e,t);var i})),t.promise}(t,n._query).then(r=>new ga(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function che(n){n=ze(n,ni);const e=ze(n.firestore,Mt),t=cn(e),i=new Ul(e);return L$(t,n._query,{source:"server"}).then(r=>new ga(e,i,n,r))}(this._delegate):function ahe(n){n=ze(n,ni);const e=ze(n.firestore,Mt),t=cn(e),i=new Ul(e);return rz(n._query),L$(t,n._query).then(r=>new ga(e,i,n,r))}(this._delegate),t.then(i=>new FD(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=Dz(e),i=Sz(e,r=>new FD(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return gz(this._delegate,t,i)}withConverter(e){return new wi(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}class Phe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new up(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new up(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Phe(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new up(this._firestore,i))})}isEqual(e){return iz(this._delegate,e._delegate)}}class sd extends wi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ir(this.firestore,e):null}doc(e){try{return new Ir(this.firestore,void 0===e?Fy(this._delegate):Fy(this._delegate,e))}catch(t){throw bi(t,"doc()","CollectionReference.doc()")}}add(e){return mz(this._delegate,e).then(t=>new Ir(this.firestore,t))}isEqual(e){return z$(this._delegate,e._delegate)}withConverter(e){return new sd(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}function jl(n){return ze(n,Ct)}class LD{constructor(...e){this._delegate=new fo(...e)}static documentId(){return new LD(zt.keyField().canonicalString())}isEqual(e){return(e=Me(e))instanceof fo&&this._delegate._internalPath.isEqual(e._internalPath)}}class $l{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mhe(){return new SD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $l(e)}static delete(){const e=function phe(){return new rp("deleteField")}();return e._methodName="FieldValue.delete",new $l(e)}static arrayUnion(...e){const t=function ghe(...n){return new Ude("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $l(t)}static arrayRemove(...e){const t=function _he(...n){return new Hde("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $l(t)}static increment(e){const t=function yhe(n){return new jde("increment",n)}(e);return t._methodName="FieldValue.increment",new $l(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ohe={Firestore:Ez,GeoPoint:Ly,Timestamp:St,Blob:lp,Transaction:Tz,WriteBatch:Iz,DocumentReference:Ir,DocumentSnapshot:cp,Query:wi,QueryDocumentSnapshot:up,QuerySnapshot:FD,CollectionReference:sd,FieldPath:LD,FieldValue:$l,setLogLevel:function Rhe(n){!function Cle(n){na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Fhe(n){(function Nhe(n,e){n.INTERNAL.registerComponent(new Zt("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Ohe)))})(n,(e,t)=>new Ez(e,t,new khe)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(Tr);class Lhe{}const xz="@firebase/database";let VD="";class Bhe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_n(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:qh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Uhe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Az=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bhe(e)}}catch(e){}return new Uhe},zl=Az("localStorage"),BD=Az("sessionStorage"),od=new Qo("@firebase/database"),kz=function(){let n=1;return function(){return n++}}(),Rz=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,R(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new Pre;t.update(e);const i=t.digest();return m_.encodeByteArray(i)},dp=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=dp.apply(null,i):e+="object"==typeof i?_n(i):i,e+=" "}return e};let Gl=null,Pz=!0;const Rn=function(...n){if(!0===Pz&&(Pz=!1,null===Gl&&!0===BD.get("logging_enabled")&&function(n,e){R(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(od.logLevel=Ve.VERBOSE,Gl=od.log.bind(od),e&&BD.set("logging_enabled",!0)):"function"==typeof n?Gl=n:(Gl=null,BD.remove("logging_enabled"))}(!0)),Gl){const e=dp.apply(null,n);Gl(e)}},hp=function(n){return function(...e){Rn(n,...e)}},UD=function(...n){const e="FIREBASE INTERNAL ERROR: "+dp(...n);od.error(e)},Ss=function(...n){const e=`FIREBASE FATAL ERROR: ${dp(...n)}`;throw od.error(e),new Error(e)},ii=function(...n){const e="FIREBASE WARNING: "+dp(...n);od.warn(e)},Gy=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mo="[MIN_NAME]",xs="[MAX_NAME]",Wl=function(n,e){if(n===e)return 0;if(n===mo||e===xs)return-1;if(e===mo||n===xs)return 1;{const t=Wy(n),i=Wy(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},$he=function(n,e){return n===e?0:n<e?-1:1},fp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+_n(e))},HD=function(n){if("object"!=typeof n||null===n)return _n(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=_n(e[i]),t+=":",t+=HD(n[e[i]]);return t+="}",t},Nz=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Pn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Fz=function(n){R(!Gy(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},qhe=new RegExp("^-?(0*)\\d{1,10}$"),Wy=function(n){if(qhe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ad=function(n){try{n()}catch(e){setTimeout(()=>{throw ii("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pp=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Qhe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ii(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Yhe{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ii(e)}}let mp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gz="websocket",Wz="long_polling";class zD{constructor(e,t,i,r,s=!1,o="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qz(n,e,t){let i;if(R("string"==typeof e,"typeof type must == string"),R("object"==typeof t,"typeof params must == object"),e===Gz)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Wz)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Xhe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Pn(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class Zhe{constructor(){this.counters_={}}incrementCounter(e,t=1){Kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function wre(n){return Gh(void 0,n)}(this.counters_)}}const GD={},WD={};function qD(n){const e=n.toString();return GD[e]||(GD[e]=new Zhe),GD[e]}class efe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ad(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class va{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hp(e),this.stats_=qD(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),qz(t,Wz,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new efe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new KD((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){va.forceAllow_=!0}static forceDisallow(){va.forceDisallow_=!0}static isAvailable(){return!(!va.forceAllow_&&(va.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=_n(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=QB(t),r=Nz(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=_n(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class KD{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=kz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=KD.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Rn("frame writing exception"),a.stack&&Rn(a.stack),Rn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Rn("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let Ky=null;"undefined"!=typeof MozWebSocket?Ky=MozWebSocket:"undefined"!=typeof WebSocket&&(Ky=WebSocket);let ld=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hp(this.connId),this.stats_=qD(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),qz(t,Gz,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zl.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new Ky(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Ky&&!n.forceDisallow_}static previouslyFailed(){return zl.isInMemoryStorage||!0===zl.get("previous_websocket_failure")}markConnectionHealthy(){zl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=qh(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(R(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=_n(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Nz(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),eG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[va,ld]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=ld&&ld.isAvailable();let r=i&&!ld.previouslyFailed();if(t.webSocketOnly&&(i||ii("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ld];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class aG{constructor(e,t,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hp("c:"+this.id+":"),this.transportManager_=new eG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fp("t",e),i=fp("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fp("t",e),i=fp("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fp("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?UD("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UD("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&ii("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),pp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lG{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class cG{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){R(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Qy extends cG{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!y0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qy}getInitialEvent(e){return R("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Je{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qe(){return new Je("")}function ke(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ba(n){return n.pieces_.length-n.pieceNum_}function ht(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Je(n.pieces_,e)}function YD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Je(e,0)}function At(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Je)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Je(t,0)}function Re(n){return n.pieceNum_>=n.pieces_.length}function Ci(n,e){const t=ke(n),i=ke(e);if(null===t)return e;if(t===i)return Ci(ht(n),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XD(n,e){if(ba(n)!==ba(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Dr(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ba(n)>ba(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Efe{constructor(e,t){this.errorPrefix_=t,this.parts_=gp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=b_(this.parts_[i]);fG(this)}}function fG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ql(n))}function ql(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ZD extends cG{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ZD}getInitialEvent(e){return R("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _p=1e3;let Xy,Kl=(()=>{class n extends lG{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=hp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_p,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZD.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Qy.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(_n(o)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new cl,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&Kr(t,"w")){const r=Iu(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();ii(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=__(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=__(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+_n(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):UD("Unrecognized action received from server: "+_n(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_p,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_p,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_p),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return m(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){R(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new aG(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,g=>{ii(g+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&ii(f),u())}}})()}interrupt(t){Rn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Rn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],w0(this.interruptReasons_)&&(this.reconnectDelay_=_p,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>HD(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Je(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Rn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Rn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+VD.replace(/\./g,"-")]=1,y0()?t["framework.cordova"]=1:YB()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qy.getInstance().currentlyOnline();return w0(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Oe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Oe(e,t)}}class Yy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Oe(mo,e),r=new Oe(mo,t);return 0!==this.compare(i,r)}minPost(){return Oe.MIN}}class gG extends Yy{static get __EMPTY_NODE(){return Xy}static set __EMPTY_NODE(e){Xy=e}compare(e,t){return Wl(e.name,t.name)}isDefinedOn(e){throw Tu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(xs,Xy)}makePost(e,t){return R("string"==typeof e,"KeyIndex indexValue must always be a string."),new Oe(e,Xy)}toString(){return".key"}}const Ms=new gG;class Zy{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let eS,Jr=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Vi.EMPTY_NODE,this.right=null!=o?o:Vi.EMPTY_NODE}copy(t,i,r,s,o){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return Vi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Vi{constructor(e,t=Vi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Vi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Vi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jr.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zy(this.root_,null,this.comparator_,!0,e)}}function kfe(n,e){return Wl(n.name,e.name)}function JD(n,e){return Wl(n,e)}Vi.EMPTY_NODE=new class Afe{copy(e,t,i,r,s){return this}insert(e,t,i){return new Jr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _G=function(n){return"number"==typeof n?"number:"+Fz(n):"string:"+n},yG=function(n){if(n.isLeafNode()){const e=n.val();R("string"==typeof e||"number"==typeof e||"object"==typeof e&&Kr(e,".sv"),"Priority must be a string or number.")}else R(n===eS||n.isEmpty(),"priority of unexpected type.");R(n===eS||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vG,bG,wG,cd=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,R(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yG(this.priorityNode_)}static set __childrenNodeConstructor(t){vG=t}static get __childrenNodeConstructor(){return vG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Re(t)?this:".priority"===ke(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=ke(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(R(".priority"!==r||1===ba(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_G(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Fz(this.value_):this.value_,this.lazyHash_=Rz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return R(s>=0,"Unknown leaf type: "+i),R(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yt=new class Nfe extends Yy{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Wl(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(xs,new cd("[PRIORITY-POST]",wG))}makePost(e,t){const i=bG(e);return new Oe(t,new cd("[PRIORITY-POST]",i))}toString(){return".priority"}},Ffe=Math.log(2);class Lfe{constructor(e){this.count=parseInt(Math.log(e+1)/Ffe,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jy=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new Jr(h,d.node,Jr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),g=r(f+1,c);return d=n[f],h=t?t(d):d,new Jr(h,d.node,Jr.BLACK,p,g)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,g){const y=d-p,b=d;d-=p;const v=r(y+1,b),D=n[y],S=t?t(D):D;f(new Jr(S,D.node,g,null,v))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(p+1));g?h(y,Jr.BLACK):(h(y,Jr.BLACK),h(y,Jr.RED))}return u}(new Lfe(n.length));return new Vi(i||e,a)};let tS;const ud={};class go{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return R(ud&&yt,"ChildrenNode.ts has not been loaded"),tS=tS||new go({".priority":ud},{".priority":yt}),tS}get(e){const t=Iu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vi?t:null}hasIndex(e){return Kr(this.indexSet_,e.toString())}addIndex(e,t){R(e!==Ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Oe.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?Jy(i,e.getCompare()):ud;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new go(u,c)}addToIndexes(e,t){const i=y_(this.indexes_,(r,s)=>{const o=Iu(this.indexSet_,s);if(R(o,"Missing index implementation for "+s),r===ud){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Oe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Jy(a,o.getCompare())}return ud}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Oe(e.name,a))),l.insert(e,e.node)}});return new go(i,this.indexSet_)}removeFromIndexes(e,t){const i=y_(this.indexes_,r=>{if(r===ud)return r;{const s=t.get(e.name);return s?r.remove(new Oe(e.name,s)):r}});return new go(i,this.indexSet_)}}let yp,we=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yG(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yp||(yp=new n(new Vi(JD),null,go.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?yp:i}}getChild(t){const i=ke(t);return null===i?this:this.getImmediateChild(i).getChild(ht(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(R(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Oe(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?yp:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=ke(t);if(null===r)return i;{R(".priority"!==ke(t)||1===ba(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ht(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(yt,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_G(this.getPriority().val())+":"),this.forEachChild(yt,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":Rz(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Oe(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Oe(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Oe(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Oe.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Oe.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vp?-1:0}withIndex(t){if(t===Ms||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ms||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(yt),s=i.getIterator(yt);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Ms?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vp=new class Vfe extends we{constructor(){super(new Vi(JD),we.EMPTY_NODE,go.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return we.EMPTY_NODE}isEmpty(){return!1}};function Ft(n,e=null){if(null===n)return we.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),R(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new cd(n,Ft(e));if(n instanceof Array){let t=we.EMPTY_NODE;return Pn(n,(i,r)=>{if(Kr(n,i)&&"."!==i.substring(0,1)){const s=Ft(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Ft(e))}{const t=[];let i=!1;if(Pn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Ft(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Oe(o,l)))}}),0===t.length)return we.EMPTY_NODE;const s=Jy(t,kfe,o=>o.name,JD);if(i){const o=Jy(t,yt.getCompare());return new we(s,Ft(e),new go({".priority":o},{".priority":yt}))}return new we(s,Ft(e),go.Default)}}Object.defineProperties(Oe,{MIN:{value:new Oe(mo,we.EMPTY_NODE)},MAX:{value:new Oe(xs,vp)}}),gG.__EMPTY_NODE=we.EMPTY_NODE,cd.__childrenNodeConstructor=we,function Rfe(n){eS=n}(vp),function Ofe(n){wG=n}(vp),function Pfe(n){bG=n}(Ft);class nS extends Yy{constructor(e){super(),this.indexPath_=e,R(!Re(e)&&".priority"!==ke(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Wl(e.name,t.name):s}makePost(e,t){const i=Ft(e),r=we.EMPTY_NODE.updateChild(this.indexPath_,i);return new Oe(t,r)}maxPost(){const e=we.EMPTY_NODE.updateChild(this.indexPath_,vp);return new Oe(xs,e)}toString(){return gp(this.indexPath_,0).join("/")}}const iS=new class Ufe extends Yy{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Wl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,t){const i=Ft(e);return new Oe(t,i)}toString(){return".value"}},dd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Hfe=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=dd.charAt(t%64),t=Math.floor(t/64);R(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=dd.charAt(e[r]);return R(20===o.length,"nextPushId: Length should be 20."),o}}();function DG(n){return{type:"value",snapshotNode:n}}function hd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class sS{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(bp(t,a)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(hd(t,i)):o.trackChildChange(wp(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(yt,(r,s)=>{t.hasChild(r)||i.trackChildChange(bp(r,s))}),t.isLeafNode()||t.forEachChild(yt,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(wp(r,s,o))}else i.trackChildChange(hd(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?we.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Cp{constructor(e){this.indexedFilter_=new sS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Cp.getStartPost_(e),this.endPost_=Cp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,o){return this.matches(new Oe(t,i))||(i=we.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=we.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(we.EMPTY_NODE);const s=this;return t.forEachChild(yt,(o,a)=>{s.matches(new Oe(o,a))||(r=r.updateImmediateChild(o,we.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $fe{constructor(e){this.rangedFilter_=new Cp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Oe(t,i))||(i=we.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=we.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=we.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(r=t.withIndex(this.index_),r=r.updatePriority(we.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,o)<=0?c++:r=r.updateImmediateChild(d.name,we.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;R(a.numChildren()===this.limit_,"");const l=new Oe(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!i.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(wp(t,i,d)),a.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(bp(t,d));const g=a.updateImmediateChild(t,we.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(hd(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}return i.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(bp(c.name,c.node)),s.trackChildChange(hd(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,we.EMPTY_NODE)):e}}class oS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mo}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yt}copy(){const e=new oS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SG(n){const e={};if(n.isDefault())return e;let t;return n.index_===yt?t="$priority":n.index_===iS?t="$value":n.index_===Ms?t="$key":(R(n.index_ instanceof nS,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=_n(t),n.startSet_&&(e.startAt=_n(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+_n(n.indexStartName_))),n.endSet_&&(e.endAt=_n(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+_n(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function xG(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yt&&(e.i=n.index_.toString()),e}class tv extends lG{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=tv.getListenId_(e,i),a={};this.listens_[o]=a;const l=SG(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,i),Iu(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,t){const i=tv.getListenId_(e,t);delete this.listens_[i]}get(e){const t=SG(e._queryParams),i=e._path.toString(),r=new cl;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Kh(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=qh(a.responseText)}catch(c){ii("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&ii("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class Qfe{constructor(){this.rootNode_=we.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nv(){return{value:null,children:new Map}}function fd(n,e,t){if(Re(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=ke(e);n.children.has(i)||n.children.set(i,nv()),fd(n.children.get(i),e=ht(e),t)}}function uS(n,e,t){null!==n.value?t(e,n.value):function Yfe(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{uS(r,new Je(e.toString()+"/"+i),t)})}class Xfe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Pn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class epe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xfe(e);const i=1e4+2e4*Math.random();pp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Pn(e,(r,s)=>{s>0&&Kr(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),pp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Sr=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Sr||(Sr={})),Sr))();function fS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iv{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Sr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Re(this.path)){if(null!=this.affectedTree.value)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Je(e));return new iv(Qe(),t,this.revert)}}return R(ke(this.path)===e,"operationForChild called for unrelated child."),new iv(ht(this.path),this.affectedTree,this.revert)}}class Ep{constructor(e,t){this.source=e,this.path=t,this.type=Sr.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new Ep(this.source,Qe()):new Ep(this.source,ht(this.path))}}class Ql{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Sr.OVERWRITE}operationForChild(e){return Re(this.path)?new Ql(this.source,Qe(),this.snap.getImmediateChild(e)):new Ql(this.source,ht(this.path),this.snap)}}class pd{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Sr.MERGE}operationForChild(e){if(Re(this.path)){const t=this.children.subtree(new Je(e));return t.isEmpty()?null:t.value?new Ql(this.source,Qe(),t.value):new pd(this.source,Qe(),t)}return R(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pd(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wa{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const t=ke(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tpe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Tp(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function rpe(n,e,t){if(null==e.childName||null==t.childName)throw Tu("Should only compare child_ events.");const i=new Oe(e.childName,e.snapshotNode),r=new Oe(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function ipe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function rv(n,e){return{eventCache:n,serverCache:e}}function Ip(n,e,t,i){return rv(new wa(e,t,i),n.serverCache)}function AG(n,e,t,i){return rv(n.eventCache,new wa(e,t,i))}function sv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let pS;class vt{constructor(e,t=(()=>(pS||(pS=new Vi($he)),pS))()){this.value=e,this.children=t}static fromObject(e){let t=new vt(null);return Pn(e,(i,r)=>{t=t.set(new Je(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Qe(),value:this.value};if(Re(e))return null;{const i=ke(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ht(e),t);return null!=s?{path:At(new Je(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const t=ke(e),i=this.children.get(t);return null!==i?i.subtree(ht(e)):new vt(null)}}set(e,t){if(Re(e))return new vt(t,this.children);{const i=ke(e),s=(this.children.get(i)||new vt(null)).set(ht(e),t),o=this.children.insert(i,s);return new vt(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=ke(e),i=this.children.get(t);if(i){const r=i.remove(ht(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new vt(null):new vt(this.value,s)}return this}}get(e){if(Re(e))return this.value;{const t=ke(e),i=this.children.get(t);return i?i.get(ht(e)):null}}setTree(e,t){if(Re(e))return t;{const i=ke(e),s=(this.children.get(i)||new vt(null)).setTree(ht(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new vt(this.value,o)}}fold(e){return this.fold_(Qe(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(At(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Qe(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Re(e))return null;{const s=ke(e),o=this.children.get(s);return o?o.findOnPath_(ht(e),At(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qe(),t)}foreachOnPath_(e,t,i){if(Re(e))return this;{this.value&&i(t,this.value);const r=ke(e),s=this.children.get(r);return s?s.foreachOnPath_(ht(e),At(t,r),i):new vt(null)}}foreach(e){this.foreach_(Qe(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(At(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class es{constructor(e){this.writeTree_=e}static empty(){return new es(new vt(null))}}function Dp(n,e,t){if(Re(e))return new es(new vt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Ci(r,e);return s=s.updateChild(o,t),new es(n.writeTree_.set(r,s))}{const r=new vt(t),s=n.writeTree_.setTree(e,r);return new es(s)}}}function mS(n,e,t){let i=n;return Pn(t,(r,s)=>{i=Dp(i,At(e,r),s)}),i}function kG(n,e){if(Re(e))return es.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new es(t)}}function gS(n,e){return null!=Xl(n,e)}function Xl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ci(t.path,e)):null}function RG(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yt,(i,r)=>{e.push(new Oe(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Oe(i,r.value))}),e}function Ca(n,e){if(Re(e))return n;{const t=Xl(n,e);return new es(null!=t?new vt(t):n.writeTree_.subtree(e))}}function _S(n){return n.writeTree_.isEmpty()}function md(n,e){return PG(Qe(),n.writeTree_,e)}function PG(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?(R(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=PG(At(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(At(n,".priority"),i)),t}}function ov(n,e){return VG(e,n)}function upe(n,e){if(n.snap)return Dr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Dr(At(n.path,t),e))return!0;return!1}function hpe(n){return n.visible}function OG(n,e,t){let i=es.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)Dr(t,o)?(a=Ci(t,o),i=Dp(i,a,s.snap)):Dr(o,t)&&(a=Ci(o,t),i=Dp(i,Qe(),s.snap.getChild(a)));else{if(!s.children)throw Tu("WriteRecord should have .snap or .children");if(Dr(t,o))a=Ci(t,o),i=mS(i,a,s.children);else if(Dr(o,t))if(a=Ci(o,t),Re(a))i=mS(i,Qe(),s.children);else{const l=Iu(s.children,ke(a));if(l){const c=l.getChild(ht(a));i=Dp(i,Qe(),c)}}}}}return i}function NG(n,e,t,i,r){if(i||r){const s=Ca(n.visibleWrites,e);return!r&&_S(s)?t:r||null!=t||gS(s,Qe())?md(OG(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Dr(c.path,e)||Dr(e,c.path))},e),t||we.EMPTY_NODE):null}{const s=Xl(n.visibleWrites,e);if(null!=s)return s;{const o=Ca(n.visibleWrites,e);return _S(o)?t:null!=t||gS(o,Qe())?md(o,t||we.EMPTY_NODE):null}}}function av(n,e,t,i){return NG(n.writeTree,n.treePath,e,t,i)}function yS(n,e){return function fpe(n,e,t){let i=we.EMPTY_NODE;const r=Xl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(yt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Ca(n.visibleWrites,e);return t.forEachChild(yt,(o,a)=>{const l=md(Ca(s,new Je(o)),a);i=i.updateImmediateChild(o,l)}),RG(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return RG(Ca(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function FG(n,e,t,i){return function ppe(n,e,t,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=At(e,t);if(gS(n.visibleWrites,s))return null;{const o=Ca(n.visibleWrites,s);return _S(o)?r.getChild(t):md(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function lv(n,e){return function gpe(n,e){return Xl(n.visibleWrites,e)}(n.writeTree,At(n.treePath,e))}function vS(n,e,t){return function mpe(n,e,t,i){const r=At(e,t),s=Xl(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?md(Ca(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function LG(n,e){return VG(At(n.treePath,e),n.writeTree)}function VG(n,e){return{treePath:n,writeTree:e}}class bpe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;R("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),R(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,wp(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,bp(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,hd(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Tu("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,wp(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const BG=new class wpe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class bS{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new wa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vS(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yl(this.viewCache_),s=function vpe(n,e,t,i,r,s){return function _pe(n,e,t,i,r,s,o){let a;const l=Ca(n.visibleWrites,e),c=Xl(l,Qe());if(null!=c)a=c;else{if(null==t)return[];a=md(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=h.getNext();for(;f&&u.length<r;)0!==d(f,i)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function UG(n,e,t,i,r,s){const o=e.eventCache;if(null!=lv(i,t))return e;{let a,l;if(Re(t))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Yl(e),d=yS(i,c instanceof we?c:we.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=av(i,Yl(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ke(t);if(".priority"===c){R(1===ba(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=FG(i,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=ht(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=FG(i,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=vS(i,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,r,s):o.getNode()}}return Ip(e,a,o.isFullyInitialized()||Re(t),n.filter.filtersNodes())}}function cv(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(Re(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ke(t);if(!l.isCompleteForPath(t)&&ba(t)>1)return e;const p=ht(t),y=l.getNode().getImmediateChild(f).updateChild(p,i);c=".priority"===f?u.updatePriority(l.getNode(),y):u.updateChild(l.getNode(),f,y,p,BG,null)}const d=AG(e,c,l.isFullyInitialized()||Re(t),u.filtersNodes());return UG(n,d,t,r,new bS(r,d,s),a)}function wS(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const u=new bS(r,e,s);if(Re(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Ip(e,c,!0,n.filter.filtersNodes());else{const d=ke(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Ip(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ht(t),f=a.getNode().getImmediateChild(d);let p;if(Re(h))p=i;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===YD(h)&&g.getChild(hG(h)).isEmpty()?g:g.updateChild(h,i):we.EMPTY_NODE}l=f.equals(p)?e:Ip(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function HG(n,e){return n.eventCache.isCompleteForChild(e)}function jG(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function CS(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=Re(t)?i:new vt(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=jG(0,e.serverCache.getNode().getImmediateChild(d),h);l=cv(n,l,new Je(d),p,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const g=jG(0,e.serverCache.getNode().getImmediateChild(d),h);l=cv(n,l,new Je(d),g,r,s,o,a)}}),l}class Ape{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new sS(i.getIndex()),s=function zfe(n){return n.loadsAllData()?new sS(n.getIndex()):n.hasLimit()?new $fe(n):new Cp(n)}(i);this.processor_=function Cpe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(we.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(we.EMPTY_NODE,a.getNode(),null),u=new wa(l,o.isFullyInitialized(),r.filtersNodes()),d=new wa(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=rv(d,u),this.eventGenerator_=new tpe(this.query_)}get query(){return this.query_}}function Ppe(n,e){const t=Yl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Re(e)&&!t.getImmediateChild(ke(e)).isEmpty())?t.getChild(e):null}function $G(n){return 0===n.eventRegistrations_.length}function zG(n,e,t){const i=[];if(t){R(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function GG(n,e,t,i){e.type===Sr.MERGE&&null!==e.source.queryId&&(R(Yl(n.viewCache_),"We should always have a full cache before handling merges"),R(sv(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Tpe(n,e,t,i,r){const s=new bpe;let o,a;if(t.type===Sr.OVERWRITE){const c=t;c.source.fromUser?o=wS(n,e,c.path,c.snap,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=cv(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Sr.MERGE){const c=t;c.source.fromUser?o=function Dpe(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=At(t,l);HG(e,ke(u))&&(a=wS(n,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=At(t,l);HG(e,ke(u))||(a=wS(n,a,u,c,r,s,o))}),a}(n,e,c.path,c.children,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=CS(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Sr.ACK_USER_WRITE){const c=t;o=c.revert?function Mpe(n,e,t,i,r,s){let o;if(null!=lv(i,t))return e;{const a=new bS(i,e,r),l=e.eventCache.getNode();let c;if(Re(t)||".priority"===ke(t)){let u;if(e.serverCache.isFullyInitialized())u=av(i,Yl(e));else{const d=e.serverCache.getNode();R(d instanceof we,"serverChildren would be complete if leaf node"),u=yS(i,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=ke(t);let d=vS(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,ht(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,we.EMPTY_NODE,ht(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=av(i,Yl(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=lv(i,Qe()),Ip(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,i,r,s):function Spe(n,e,t,i,r,s,o){if(null!=lv(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(Re(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return cv(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Re(t)){let c=new vt(null);return l.getNode().forEachChild(Ms,(u,d)=>{c=c.set(new Je(u),d)}),CS(n,e,t,c,r,s,a,o)}return e}{let c=new vt(null);return i.foreach((u,d)=>{const h=At(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),CS(n,e,t,c,r,s,a,o)}}(n,e,c.path,c.affectedTree,i,r,s)}else{if(t.type!==Sr.LISTEN_COMPLETE)throw Tu("Unknown operation type: "+t.type);o=function xpe(n,e,t,i,r){const s=e.serverCache;return UG(n,AG(e,s.getNode(),s.isFullyInitialized()||Re(t),s.isFiltered()),t,i,BG,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function Ipe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=sv(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(DG(sv(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function Epe(n,e){R(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),R(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,WG(n,s.changes,s.viewCache.eventCache.getNode(),null)}function WG(n,e,t,i){return function npe(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function jfe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Tp(n,r,"child_removed",e,i,t),Tp(n,r,"child_added",e,i,t),Tp(n,r,"child_moved",s,i,t),Tp(n,r,"child_changed",e,i,t),Tp(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let uv,hv;class qG{constructor(){this.views=new Map}}function ES(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return R(null!=s,"SyncTree gave us an op for an invalid query."),GG(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(GG(o,e,t,i));return s}}function KG(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=av(t,r?i:null),l=!1;a?l=!0:i instanceof we?(a=yS(t,i),l=!1):(a=we.EMPTY_NODE,l=!1);const c=rv(new wa(a,l,!1),new wa(i,r,!1));return new Ape(e,c)}return o}function QG(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ea(n,e){let t=null;for(const i of n.views.values())t=t||Ppe(i,e);return t}function YG(n,e){return e._queryParams.loadsAllData()?dv(n):n.views.get(e._queryIdentifier)}function XG(n,e){return null!=YG(n,e)}function Ta(n){return null!=dv(n)}function dv(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $pe=1;class ZG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=function ype(){return{visibleWrites:es.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TS(n,e,t,i,r){return function ope(n,e,t,i,r){R(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Dp(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?gd(n,new Ql({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ia(n,e,t=!1){const i=function lpe(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function cpe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);R(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&upe(a,i.path)?r=!1:Dr(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function dpe(n){n.visibleWrites=OG(n.allWrites,hpe,Qe()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=kG(n.visibleWrites,i.path):Pn(i.children,l=>{n.visibleWrites=kG(n.visibleWrites,At(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new vt(null);return null!=i.snap?s=s.set(Qe(),!0):Pn(i.children,o=>{s=s.set(new Je(o),!0)}),gd(n,new iv(i.path,s,t))}return[]}function Sp(n,e,t){return gd(n,new Ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function fv(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||XG(o,e))){const l=function Upe(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Ta(n);if("default"===r)for(const[l,c]of n.views.entries())o=o.concat(zG(c,t,i)),$G(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(r);l&&(o=o.concat(zG(l,t,i)),$G(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Ta(n)&&s.push(new(function Lpe(){return R(uv,"Reference.ts has not been loaded"),uv}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function Vpe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>Ta(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function Ype(n){return n.fold((e,t,i)=>{if(t&&Ta(t))return[dv(t)];{let r=[];return t&&(r=QG(t)),Pn(i,(s,o)=>{r=r.concat(o)}),r}})}(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,b=nW(n,g);n.listenProvider_.startListening(Mp(y),xp(n,y),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(Mp(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(mv(h));n.listenProvider_.stopListening(Mp(h),f)}))}!function Xpe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=mv(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function JG(n,e,t,i){const r=DS(n,i);if(null!=r){const s=SS(r),o=s.path,a=s.queryId,l=Ci(o,e);return xS(n,o,new Ql(fS(a),l,t))}return[]}function IS(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=Ci(h,r);s=s||Ea(f,p),o=o||Ta(f)});let l,a=n.syncPointTree_.get(r);a?(o=o||Ta(a),s=s||Ea(a,Qe())):(a=new qG,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=we.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{const g=Ea(p,Qe());g&&(s=s.updateImmediateChild(f,g))}));const c=XG(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=mv(e);R(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function Zpe(){return $pe++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function Bpe(n,e,t,i,r,s){const o=KG(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Ope(n,e){n.eventRegistrations_.push(e)}(o,t),function Npe(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yt,(s,o)=>{i.push(hd(s,o))}),t.isFullyInitialized()&&i.push(DG(t.getNode())),WG(n,i,t.getNode(),e)}(o,t)}(a,e,t,ov(n.pendingWriteTree_,r),s,l);if(!c&&!o&&!i){const h=YG(a,e);d=d.concat(function Jpe(n,e,t){const i=e._path,r=xp(n,e),s=nW(n,t),o=n.listenProvider_.startListening(Mp(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)R(!Ta(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Re(c)&&u&&Ta(u))return[dv(u).query];{let h=[];return u&&(h=h.concat(QG(u).map(f=>f.query))),Pn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Mp(u),xp(n,u))}}return o}(n,e,h))}return d}function pv(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ea(a,Ci(o,e));if(c)return c});return NG(r,e,s,t,!0)}function gd(n,e){return eW(e,n.syncPointTree_,null,ov(n.pendingWriteTree_,Qe()))}function eW(n,e,t,i){if(Re(n.path))return tW(n,e,t,i);{const r=e.get(Qe());null==t&&null!=r&&(t=Ea(r,Qe()));let s=[];const o=ke(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=LG(i,o);s=s.concat(eW(a,l,c,u))}return r&&(s=s.concat(ES(r,n,i,t))),s}}function tW(n,e,t,i){const r=e.get(Qe());null==t&&null!=r&&(t=Ea(r,Qe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=LG(i,o),u=n.operationForChild(o);u&&(s=s.concat(tW(u,a,l,c)))}),r&&(s=s.concat(ES(r,n,i,t))),s}function nW(n,e){const t=e.query,i=xp(n,t);return{hashFn:()=>(function kpe(n){return n.viewCache_.serverCache.getNode()}(e)||we.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function qpe(n,e,t){const i=DS(n,t);if(i){const r=SS(i),s=r.path,o=r.queryId,a=Ci(s,e);return xS(n,s,new Ep(fS(o),a))}return[]}(n,t._path,i):function Wpe(n,e){return gd(n,new Ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Whe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return fv(n,t,null,s)}}}}function xp(n,e){const t=mv(e);return n.queryToTagMap.get(t)}function mv(n){return n._path.toString()+"$"+n._queryIdentifier}function DS(n,e){return n.tagToQueryMap.get(e)}function SS(n){const e=n.indexOf("$");return R(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Je(n.substr(0,e))}}function xS(n,e,t){const i=n.syncPointTree_.get(e);return R(i,"Missing sync point for query tag that we're tracking"),ES(i,t,ov(n.pendingWriteTree_,e),null)}function Mp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function jpe(){return R(hv,"Reference.ts has not been loaded"),hv}())(n._repo,n._path):n}class MS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new MS(t)}node(){return this.node_}}class AS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=At(this.path_,e);return new AS(this.syncTree_,t)}node(){return pv(this.syncTree_,this.path_)}}const iW=function(n,e,t){return n&&"object"==typeof n?(R(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?tme(n[".sv"],e,t):"object"==typeof n[".sv"]?nme(n[".sv"],e):void R(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},tme=function(n,e,t){if("timestamp"===n)return t.timestamp;R(!1,"Unexpected server value: "+n)},nme=function(n,e,t){n.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&R(!1,"Unexpected increment value: "+i);const r=e.node();if(R(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},kS=function(n,e,t){return RS(n,new MS(e),t)};function RS(n,e,t){const i=n.getPriority().val(),r=iW(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=iW(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new cd(a,Ft(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new cd(r))),o.forEachChild(yt,(a,l)=>{const c=RS(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class PS{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function gv(n,e){let t=e instanceof Je?e:new Je(e),i=n,r=ke(t);for(;null!==r;){const s=Iu(i.node.children,r)||{children:{},childCount:0};i=new PS(r,i,s),t=ht(t),r=ke(t)}return i}function Zl(n){return n.node.value}function OS(n,e){n.node.value=e,NS(n)}function sW(n){return n.node.childCount>0}function _v(n,e){Pn(n.node.children,(t,i)=>{e(new PS(t,n,i))})}function oW(n,e,t,i){t&&!i&&e(n),_v(n,r=>{oW(r,e,!0,i)}),t&&i&&e(n)}function Ap(n){return new Je(null===n.parent?n.name:Ap(n.parent)+"/"+n.name)}function NS(n){null!==n.parent&&function sme(n,e,t){const i=function ime(n){return void 0===Zl(n)&&!sW(n)}(t),r=Kr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,NS(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,NS(n))}(n.parent,n.name,n)}const ome=/[\[\].#$\/\u0000-\u001F\u007F]/,ame=/[\[\].#$\u0000-\u001F\u007F]/,FS=10485760,yv=function(n){return"string"==typeof n&&0!==n.length&&!ome.test(n)},aW=function(n){return"string"==typeof n&&0!==n.length&&!ame.test(n)},As=function(n,e,t,i){i&&void 0===e||Rp(Du(n,"value"),e,t)},Rp=function(n,e,t){const i=t instanceof Je?new Efe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ql(i));if("function"==typeof e)throw new Error(n+"contains a function "+ql(i)+" with contents = "+e.toString());if(Gy(e))throw new Error(n+"contains "+e.toString()+" "+ql(i));if("string"==typeof e&&e.length>FS/3&&b_(e)>FS)throw new Error(n+"contains a string greater than "+FS+" utf8 bytes "+ql(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Pn(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!yv(o)))throw new Error(n+" contains an invalid key ("+o+") "+ql(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tfe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=b_(e),fG(n)})(i,o),Rp(n,a,i),function Ife(n){const e=n.parts_.pop();n.byteLength_-=b_(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+ql(i)+" in addition to actual children.")}},VS=function(n,e,t,i){if(!(i&&void 0===t||aW(t)))throw new Error(Du(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ks=function(n,e){if(".info"===ke(e))throw new Error(n+" failed = Can't modify data under /.info/")};class dme{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vv(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!XD(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function uW(n,e,t){vv(n,t),dW(n,i=>XD(i,e))}function nr(n,e,t){vv(n,t),dW(n,i=>Dr(i,e)||Dr(e,i))}function dW(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(hme(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function hme(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Gl&&Rn("event: "+t.toString()),ad(i)}}}class pme{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dme,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nv(),this.transactionQueueTree_=new PS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fW(n){const t=n.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Op(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:fW(n)})}function pW(n,e,t,i,r){n.dataUpdateCount++;const s=new Je(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=y_(t,c=>Ft(c));o=function Kpe(n,e,t,i){const r=DS(n,i);if(r){const s=SS(r),o=s.path,a=s.queryId,l=Ci(o,e),c=vt.fromObject(t);return xS(n,o,new pd(fS(a),l,c))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Ft(t);o=JG(n.serverSyncTree_,s,l,r)}else if(i){const l=y_(t,c=>Ft(c));o=function Gpe(n,e,t){const i=vt.fromObject(t);return gd(n,new pd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Ft(t);o=Sp(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=yd(n,s)),nr(n.eventQueue_,a,o)}function mW(n,e){BS(n,"connected",e),!1===e&&function vme(n){_d(n,"onDisconnectEvents");const e=Op(n),t=nv();uS(n.onDisconnect_,Qe(),(r,s)=>{const o=function(n,e,t,i){return RS(e,new AS(t,n),i)}(r,s,n.serverSyncTree_,e);fd(t,r,o)});let i=[];uS(t,Qe(),(r,s)=>{i=i.concat(Sp(n.serverSyncTree_,r,s));const o=$S(n,r);yd(n,o)}),n.onDisconnect_=nv(),nr(n.eventQueue_,Qe(),i)}(n)}function BS(n,e,t){const i=new Je("/.info/"+e),r=Ft(t);n.infoData_.updateSnapshot(i,r);const s=Sp(n.infoSyncTree_,i,r);nr(n.eventQueue_,i,s)}function bv(n){return n.nextWriteId_++}function US(n,e,t,i,r){_d(n,"set",{path:e.toString(),value:t,priority:i});const s=Op(n),o=Ft(t,i),a=pv(n.serverSyncTree_,e),l=kS(o,a,s),c=bv(n),u=TS(n.serverSyncTree_,e,l,c,!0);vv(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||ii("set at "+e+" failed: "+h);const g=Ia(n.serverSyncTree_,c,!p);nr(n.eventQueue_,e,g),function Da(n,e,t,i){e&&ad(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}(0,r,h,f)});const d=$S(n,e);yd(n,d),nr(n.eventQueue_,d,[])}function HS(n,e,t){let i;i=".info"===ke(e._path)?fv(n.infoSyncTree_,e,t):fv(n.serverSyncTree_,e,t),uW(n.eventQueue_,e._path,i)}function _d(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Rn(t,...e)}function jS(n,e,t){return pv(n.serverSyncTree_,e,t)||we.EMPTY_NODE}function wv(n,e=n.transactionQueueTree_){if(e||Cv(n,e),Zl(e)){const t=vW(n,e);R(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function Dme(n,e,t){const i=t.map(c=>c.currentWriteId),r=jS(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const u=t[c];R(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ci(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{_d(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Ia(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Cv(n,gv(n.transactionQueueTree_,e)),wv(n,n.transactionQueueTree_),nr(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)ad(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{ii("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}yd(n,e)}},o)}(n,Ap(e),t)}else sW(e)&&_v(e,t=>{wv(n,t)})}function yd(n,e){const t=yW(n,e),i=Ap(t);return function Sme(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ci(t,l.path);let d,u=!1;if(R(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(Ia(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",r=r.concat(Ia(n.serverSyncTree_,l.currentWriteId,!0));else{const h=jS(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Rp("transaction failed: Data returned ",f,l.path);let p=Ft(f);"object"==typeof f&&null!=f&&Kr(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=l.currentWriteId,b=Op(n),v=kS(p,h,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=bv(n),o.splice(o.indexOf(y),1),r=r.concat(TS(n.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),r=r.concat(Ia(n.serverSyncTree_,y,!0))}else u=!0,d="nodata",r=r.concat(Ia(n.serverSyncTree_,l.currentWriteId,!0))}nr(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Cv(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)ad(i[a]);wv(n,n.transactionQueueTree_)}(n,vW(n,t),i),i}function yW(n,e){let t,i=n.transactionQueueTree_;for(t=ke(e);null!==t&&void 0===Zl(i);)i=gv(i,t),t=ke(e=ht(e));return i}function vW(n,e){const t=[];return bW(n,e,t),t.sort((i,r)=>i.order-r.order),t}function bW(n,e,t){const i=Zl(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);_v(e,r=>{bW(n,r,t)})}function Cv(n,e){const t=Zl(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,OS(e,t.length>0?t:void 0)}_v(e,i=>{Cv(n,i)})}function $S(n,e){const t=Ap(yW(n,e)),i=gv(n.transactionQueueTree_,e);return function rme(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{zS(n,r)}),zS(n,i),oW(i,r=>{zS(n,r)}),t}function zS(n,e){const t=Zl(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(R(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(R(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(Ia(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?OS(e,void 0):t.length=s+1,nr(n.eventQueue_,Ap(e),r);for(let o=0;o<i.length;o++)ad(i[o])}}const GS=function(n,e){const t=Ame(n),i=t.namespace;return"firebase.com"===t.domain&&Ss(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ii("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zD(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Je(t.pathString)}},Ame=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=function xme(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(u,d)));const h=function Mme(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ii(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class wW{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_n(this.snapshot.exportVal())}}class CW{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class WS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ir{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Re(this._path)?null:YD(this._path)}get ref(){return new ts(this._repo,this._path)}get _queryIdentifier(){const e=xG(this._queryParams),t=HD(e);return"{}"===t?"default":t}get _queryObject(){return xG(this._queryParams)}isEqual(e){if(!((e=Me(e))instanceof ir))return!1;const t=this._repo===e._repo,i=XD(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function wfe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ts extends ir{constructor(e,t){super(e,t,new oS,!1)}get parent(){const e=hG(this._path);return null===e?null:new ts(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jl{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Je(e),i=vd(this.ref,e);return new Jl(this._node.getChild(t),i,yt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Jl(r,vd(this.ref,i),yt)))}hasChild(e){const t=new Je(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kt(n,e){return(n=Me(n))._checkNotDeleted("ref"),void 0!==e?vd(n._root,e):n._root}function vd(n,e){return null===ke((n=Me(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VS("child","path",t,!1)):VS("child","path",e,!1),new ts(n._repo,At(n._path,e));var t}function qS(n,e){n=Me(n),ks("push",n._path),As("push",e,n._path,!0);const t=fW(n._repo),i=Hfe(t),r=vd(n,i),s=vd(n,i);let o;return o=null!=e?Rs(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function EW(n){return ks("remove",n._path),Rs(n,null)}function Rs(n,e){n=Me(n),ks("set",n._path),As("set",e,n._path,!1);const t=new cl;return US(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function TW(n){n=Me(n);const e=new WS(()=>{}),t=new Np(e);return function _me(n,e,t){const i=function Qpe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Ci(c,t);i=i||Ea(u,d)});let r=n.syncPointTree_.get(t);r?i=i||Ea(r,Qe()):(r=new qG,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new wa(i,!0,!1):null;return function Rpe(n){return sv(n.viewCache_)}(KG(r,e,ov(n.pendingWriteTree_,e._path),s?o.getNode():we.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Ft(r).withIndex(e._queryParams.getIndex());let o;if(IS(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Sp(n.serverSyncTree_,e._path,s);else{const a=xp(n.serverSyncTree_,e);o=JG(n.serverSyncTree_,e._path,s,a)}return nr(n.eventQueue_,e._path,o),fv(n.serverSyncTree_,e,t,null,!0),s},r=>(_d(n,"get for query "+_n(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Jl(i,new ts(n._repo,n._path),n._queryParams.getIndex()))}class Np{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new wW("value",this,new Jl(e.snapshotNode,new ts(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CW(this,e,t):null}matches(e){return e instanceof Np&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Iv{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CW(this,e,t):null}createEvent(e,t){R(null!=e.childName,"Child events should have a childName.");const i=vd(new ts(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new wW(e.type,this,new Jl(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Iv&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function xr(n,e,t,i){return function Fp(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,c=(u,d)=>{HS(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new WS(t,s||void 0),a="value"===e?new Np(o):new Iv(e,o);return function Eme(n,e,t){let i;i=".info"===ke(e._path)?IS(n.infoSyncTree_,e,t):IS(n.serverSyncTree_,e,t),uW(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>HS(n._repo,n,a)}(n,"value",e,t,i)}(function Fpe(n){R(!uv,"__referenceConstructor has already been defined"),uv=n})(ts),function Hpe(n){R(!hv,"__referenceConstructor has already been defined"),hv=n}(ts);const KS={};function $me(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=GS(s,r),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=GS(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new mp(mp.OWNER):new Yhe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!yv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aW(n)}(t))throw new Error(Du(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),Re(o.path)||Ss("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Gme(n,e,t,i){let r=KS[e.name];r||(r={},KS[e.name]=r);let s=r[n.toURLString()];return s&&Ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pme(n,false,t,i),r[n.toURLString()]=s,s}(a,n,u,new Qhe(n.name,t));return new qme(d,n)}class qme{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mme(n,e,t){if(n.stats_=qD(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new tv(n.repoInfo_,(i,r,s,o)=>{pW(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mW(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_n(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Kl(n.repoInfo_,e,(i,r,s,o)=>{pW(n,i,r,s,o)},i=>{mW(n,i)},i=>{!function gme(n,e){Pn(e,(t,i)=>{BS(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Jhe(n,e){const t=n.toString();return WD[t]||(WD[t]=e()),WD[t]}(n.repoInfo_,()=>new epe(n.stats_,n.server_)),n.infoData_=new Qfe,n.infoSyncTree_=new ZG({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=Sp(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),BS(n,"connected",!1),n.serverSyncTree_=new ZG({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);nr(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ts(this._repo,Qe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zme(n,e){const t=KS[e];(!t||t[n.key]!==n)&&Ss(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function _W(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ss("Cannot call "+e+" on a deleted database.")}}function rr(n=Zo(),e){return Qr(n,"database").getImmediate({identifier:e})}function J(...n){return Bn(n,Xd(n))}Kl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Kl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Kme(n){(function Vhe(n){VD=n})(_s),on(new Zt("database",(e,{instanceIdentifier:t})=>$me(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),$e(xz,"0.13.6",n),$e(xz,"0.13.6","esm2017")}();class Mr extends ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:Xme}=Array,{getPrototypeOf:Zme,prototype:Jme,keys:ege}=Object;function MW(n){if(1===n.length){const e=n[0];if(Xme(e))return{args:e,keys:null};if(function tge(n){return n&&"object"==typeof n&&Zme(n)===Jme}(e)){const t=ege(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:nge}=Array;function QS(n){return Ae(e=>function ige(n,e){return nge(e)?n(...e):n(e)}(n,e))}function AW(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function kW(n,e,t){n?zs(t,n,e):e()}function Lp(n,e){const t=Ze(n)?n:()=>n,i=r=>r.error(t());return new nt(e?r=>e.schedule(i,0,r):i)}const Dv=pw(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Sv(...n){return function oge(){return Yd(1)}()(Bn(n,Xd(n)))}function YS(n){return new nt(e=>{xi(n()).subscribe(e)})}function RW(){return Vt((n,e)=>{let t=null;n._refCount++;const i=Et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class age extends nt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,y1(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;const t=this.getSubject();e.add(this.source.subscribe(Et(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return RW()(this)}}function Ps(n,e){return Vt((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Et(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;xi(n(l,u)).subscribe(r=Et(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function un(n){return n<=0?()=>hr:Vt((e,t)=>{let i=0;e.subscribe(Et(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Bi(...n){const e=Xd(n);return Vt((t,i)=>{(e?Sv(n,t,e):Sv(n,t)).subscribe(i)})}function lge(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Et(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function PW(n,e){return Vt(lge(n,e,arguments.length>=2,!0))}function ct(n,e){return Vt((t,i)=>{let r=0;t.subscribe(Et(i,s=>n.call(e,s,r++)&&i.next(s)))})}function _o(n){return Vt((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Et(t,void 0,void 0,o=>{s=xi(n(o,_o(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function bd(n,e){return Ze(e)?tn(n,e,1):tn(n,1)}function XS(n){return n<=0?()=>hr:Vt((e,t)=>{let i=[];e.subscribe(Et(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function OW(n=cge){return Vt((e,t)=>{let i=!1;e.subscribe(Et(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function cge(){return new Dv}function NW(n){return Vt((e,t)=>{let i=!1;e.subscribe(Et(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function wd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ct((r,s)=>n(r,s,i)):Po,un(1),t?NW(e):OW(()=>new Dv))}function On(n,e,t){const i=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return i?Vt((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Et(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Po}function FW(n){return Vt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class yo{constructor(e,t){this.id=e,this.url=t}}class ZS extends yo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vp extends yo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class LW extends yo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dge extends yo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hge extends yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fge extends yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pge extends yo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mge extends yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gge extends yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VW{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class BW{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _ge{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yge{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vge{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bge{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UW{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ne="primary";class wge{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cd(n){return new wge(n)}const HW="ngNavigationCancelingError";function JS(n){const e=Error("NavigationCancelingError: "+n);return e[HW]=!0,e}function Ege(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Os(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!jW(n[r],e[r]))return!1;return!0}function jW(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function $W(n){return Array.prototype.concat.apply([],n)}function zW(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ns(n){return hE(n)?n:Sh(n)?Bn(Promise.resolve(n)):J(n)}const Dge={exact:function qW(n,e,t){if(!tc(n.segments,e.segments)||!xv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!qW(n.children[i],e.children[i],t))return!1;return!0},subset:KW},GW={exact:function Sge(n,e){return Os(n,e)},subset:function xge(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jW(n[t],e[t]))},ignored:()=>!0};function WW(n,e,t){return Dge[t.paths](n.root,e.root,t.matrixParams)&&GW[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function KW(n,e,t){return QW(n,e,e.segments,t)}function QW(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!tc(r,t)||e.hasChildren()||!xv(r,t,i))}if(n.segments.length===t.length){if(!tc(n.segments,t)||!xv(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!KW(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(tc(n.segments,r)&&xv(n.segments,r,i)&&n.children[Ne])&&QW(n.children[Ne],e,s,i)}}function xv(n,e,t){return e.every((i,r)=>GW[t](n[r].parameters,i.parameters))}class ec{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return kge.serialize(this)}}class Be{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mv(this)}}class Bp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cd(this.parameters)),this._parameterMap}toString(){return e3(this)}}function tc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class YW{}class XW{parse(e){const t=new Uge(e);return new ec(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Up(e.root,!0)}`,i=function Oge(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Av(t)}=${Av(r)}`).join("&"):`${Av(t)}=${Av(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function Rge(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const kge=new XW;function Mv(n){return n.segments.map(e=>e3(e)).join("/")}function Up(n,e){if(!n.hasChildren())return Mv(n);if(e){const t=n.children[Ne]?Up(n.children[Ne],!1):"",i=[];return Gn(n.children,(r,s)=>{s!==Ne&&i.push(`${s}:${Up(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Age(n,e){let t=[];return Gn(n.children,(i,r)=>{r===Ne&&(t=t.concat(e(i,r)))}),Gn(n.children,(i,r)=>{r!==Ne&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Ne?[Up(n.children[Ne],!1)]:[`${r}:${Up(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ne]?`${Mv(n)}/${t[0]}`:`${Mv(n)}/(${t.join("//")})`}}function ZW(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Av(n){return ZW(n).replace(/%3B/gi,";")}function ex(n){return ZW(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kv(n){return decodeURIComponent(n)}function JW(n){return kv(n.replace(/\+/g,"%20"))}function e3(n){return`${ex(n.path)}${function Pge(n){return Object.keys(n).map(e=>`;${ex(e)}=${ex(n[e])}`).join("")}(n.parameters)}`}const Nge=/^[^\/()?;=#]+/;function Rv(n){const e=n.match(Nge);return e?e[0]:""}const Fge=/^[^=?&#]+/,Vge=/^[^&#]+/;class Uge{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Be([],{}):new Be([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ne]=new Be(e,t)),i}parseSegment(){const e=Rv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Bp(kv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rv(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Rv(this.remaining);r&&(i=r,this.capture(i))}e[kv(t)]=kv(i)}parseQueryParam(e){const t=function Lge(n){const e=n.match(Fge);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Bge(n){const e=n.match(Vge);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=JW(t),s=JW(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Rv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ne);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ne]:new Be([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class t3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=tx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return nx(e,this._root).map(t=>t.value)}}function tx(n,e){if(n===e.value)return e;for(const t of e.children){const i=tx(n,t);if(i)return i}return null}function nx(n,e){if(n===e.value)return[e];for(const t of e.children){const i=nx(n,t);if(i.length)return i.unshift(e),i}return[]}class vo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ed(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class n3 extends t3{constructor(e,t){super(e),this.snapshot=t,ix(this,e)}toString(){return this.snapshot.toString()}}function r3(n,e){const t=function Hge(n,e){const o=new Pv([],{},{},"",{},Ne,e,null,n.root,-1,{});return new o3("",new vo(o,[]))}(n,e),i=new Mr([new Bp("",{})]),r=new Mr({}),s=new Mr({}),o=new Mr({}),a=new Mr(""),l=new xa(i,r,o,a,s,Ne,e,t.root);return l.snapshot=t.root,new n3(new vo(l,[]),t)}class xa{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(e=>Cd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(e=>Cd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function s3(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function jge(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Pv{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class o3 extends t3{constructor(e,t){super(t),this.url=e,ix(this,t)}toString(){return a3(this._root)}}function ix(n,e){e.value._routerState=n,e.children.forEach(t=>ix(n,t))}function a3(n){const e=n.children.length>0?` { ${n.children.map(a3).join(", ")} } `:"";return`${n.value}${e}`}function rx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Os(e.params,t.params)||n.params.next(t.params),function Tge(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function sx(n,e){const t=Os(n.params,e.params)&&function Mge(n,e){return tc(n,e)&&n.every((t,i)=>Os(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sx(n.parent,e.parent))}function Hp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function zge(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Hp(n,i,r);return Hp(n,i)})}(n,e,t);return new vo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Hp(n,a)),o}}const i=function Gge(n){return new xa(new Mr(n.url),new Mr(n.params),new Mr(n.queryParams),new Mr(n.fragment),new Mr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Hp(n,s));return new vo(i,r)}}function Ov(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jp(n){return"object"==typeof n&&null!=n&&n.outlets}function ox(n,e,t,i,r){let s={};if(i&&Gn(i,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new ec(t,s,r);const o=l3(n,e,t);return new ec(o,s,r)}function l3(n,e,t){const i={};return Gn(n.children,(r,s)=>{i[s]=r===e?t:l3(r,e,t)}),new Be(n.segments,i)}class c3{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ov(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(jp);if(r&&r!==zW(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ax{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function u3(n,e,t){if(n||(n=new Be([],{})),0===n.segments.length&&n.hasChildren())return Nv(n,e,t);const i=function Xge(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(jp(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!h3(l,c,o))return s;i+=2}else{if(!h3(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Be(n.segments.slice(0,i.pathIndex),{});return s.children[Ne]=new Be(n.segments.slice(i.pathIndex),n.children),Nv(s,0,r)}return i.match&&0===r.length?new Be(n.segments,{}):i.match&&!n.hasChildren()?lx(n,e,t):i.match?Nv(n,0,r):lx(n,e,t)}function Nv(n,e,t){if(0===t.length)return new Be(n.segments,{});{const i=function Yge(n){return jp(n[0])?n[0].outlets:{[Ne]:n}}(t),r={};return Gn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=u3(n.children[o],e,s))}),Gn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Be(n.segments,r)}}function lx(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(jp(s)){const l=Zge(s.outlets);return new Be(i,l)}if(0===r&&Ov(t[0])){i.push(new Bp(n.segments[e].path,d3(t[0]))),r++;continue}const o=jp(s)?s.outlets[Ne]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Ov(a)?(i.push(new Bp(o,d3(a))),r+=2):(i.push(new Bp(o,{})),r++)}return new Be(i,{})}function Zge(n){const e={};return Gn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=lx(new Be([],{}),0,t))}),e}function d3(n){const e={};return Gn(n,(t,i)=>e[i]=`${t}`),e}function h3(n,e,t){return n==t.path&&Os(e,t.parameters)}class e_e{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),rx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ed(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Gn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ed(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ed(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ed(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new bge(s.value.snapshot))}),e.children.length&&this.forwardEvent(new yge(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(rx(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rx(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function t_e(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class cx{constructor(e,t){this.routes=e,this.module=t}}function Ma(n){return"function"==typeof n}function nc(n){return n instanceof ec}const $p=Symbol("INITIAL_VALUE");function zp(){return Ps(n=>function rge(...n){const e=Xd(n),t=P1(n),{args:i,keys:r}=MW(n);if(0===i.length)return Bn([],e);const s=new nt(function sge(n,e,t=Po){return i=>{kW(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)kW(e,()=>{const c=Bn(n[l],e);let u=!1;c.subscribe(Et(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>AW(r,o):Po));return t?s.pipe(QS(t)):s}(n.map(e=>e.pipe(un(1),Bi($p)))).pipe(PW((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==$p?r:(s===$p&&(i=!0),i||!1!==s&&o!==t.length-1&&!nc(s)?r:s),e)},$p),ct(e=>e!==$p),Ae(e=>nc(e)?e:!0===e),un(1)))}class a_e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gp,this.attachRef=null}}class Gp{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new a_e,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ux=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ie,this.deactivateEvents=new ie,this.attachEvents=new ie,this.detachEvents=new ie,this.name=s||Ne,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new l_e(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_(Gp),_(In),_(zo),Ja("name"),_(Qt))},n.\u0275dir=O({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class l_e{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===xa?this.route:e===Gp?this.childContexts:this.parent.get(e,t)}}let f3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Te({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&z(0,"router-outlet")},directives:[ux],encapsulation:2}),n})();function p3(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];c_e(i,u_e(e,i))}}function c_e(n,e){n.children&&p3(n.children,e)}function u_e(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function dx(n){const e=n.children&&n.children.map(dx),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=f3),t}function Ar(n){return n.outlet||Ne}function m3(n,e){const t=n.filter(i=>Ar(i)===e);return t.push(...n.filter(i=>Ar(i)!==e)),t}const g3={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fv(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},g3):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Ege)(t,n,e);if(!s)return Object.assign({},g3);const o={};Gn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Lv(n,e,t,i,r="corrected"){if(t.length>0&&function f_e(n,e,t){return t.some(i=>Vv(n,e,i)&&Ar(i)!==Ne)}(n,t,i)){const o=new Be(e,function h_e(n,e,t,i){const r={};r[Ne]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ar(s)!==Ne){const o=new Be([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Ar(s)]=o}return r}(n,e,i,new Be(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function p_e(n,e,t){return t.some(i=>Vv(n,e,i))}(n,t,i)){const o=new Be(n.segments,function d_e(n,e,t,i,r,s){const o={};for(const a of i)if(Vv(n,t,a)&&!r[Ar(a)]){const l=new Be([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ar(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Be(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Vv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _3(n,e,t,i){return!!(Ar(n)===i||i!==Ne&&Vv(e,t,n))&&("**"===n.path||Fv(e,n,t).matched)}function y3(n,e,t){return 0===e.length&&!n.children[t]}class Bv{constructor(e){this.segmentGroup=e||null}}class v3{constructor(e){this.urlTree=e}}function Wp(n){return Lp(new Bv(n))}function b3(n){return Lp(new v3(n))}function m_e(n){return Lp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class y_e{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Zs)}apply(){const e=Lv(this.urlTree.root,[],[],this.config).segmentGroup,t=new Be(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ne).pipe(Ae(s=>this.createUrlTree(hx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_o(s=>{if(s instanceof v3)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Bv?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ne).pipe(Ae(r=>this.createUrlTree(hx(r),e.queryParams,e.fragment))).pipe(_o(r=>{throw r instanceof Bv?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Be([],{[Ne]:e}):e;return new ec(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Ae(s=>new Be([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Bn(r).pipe(bd(s=>{const o=i.children[s],a=m3(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Ae(l=>({segment:l,outlet:s})))}),PW((s,o)=>(s[o.outlet]=o.segment,s),{}),function uge(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ct((r,s)=>n(r,s,i)):Po,XS(1),t?NW(e):OW(()=>new Dv))}())}expandSegment(e,t,i,r,s,o){return Bn(i).pipe(bd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(_o(c=>{if(c instanceof Bv)return J(null);throw c}))),wd(a=>!!a),_o((a,l)=>{if(a instanceof Dv||"EmptyError"===a.name)return y3(t,r,s)?J(new Be([],{})):Wp(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return _3(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Wp(t):Wp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?b3(s):this.lineralizeSegments(i,s).pipe(tn(o=>{const a=new Be(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Fv(t,r,s);if(!a)return Wp(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?b3(d):this.lineralizeSegments(r,d).pipe(tn(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?J(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(Ae(d=>(i._loadedConfig=d,new Be(r,{})))):J(new Be(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Fv(t,i,r);return o?this.getChildConfig(e,i,r).pipe(tn(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=Lv(t,a,l,h),g=new Be(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(Ae(D=>new Be(a,D)));if(0===h.length&&0===p.length)return J(new Be(a,{}));const y=Ar(i)===s;return this.expandSegment(d,g,h,p,y?Ne:s,!0).pipe(Ae(v=>new Be(a.concat(v.segments),v.children)))})):Wp(t)}getChildConfig(e,t,i){return t.children?J(new cx(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?J(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(tn(r=>r?this.configLoader.load(e.injector,t).pipe(Ae(s=>(t._loadedConfig=s,s))):function g_e(n){return Lp(JS(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):J(new cx([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return J(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function i_e(n){return n&&Ma(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Ma(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return Ns(l)});return J(s).pipe(zp(),On(o=>{if(!nc(o))return;const a=JS(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Ae(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return J(i);if(r.numberOfChildren>1||!r.children[Ne])return m_e(e.redirectTo);r=r.children[Ne]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new ec(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Gn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Gn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Be(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function hx(n){const e={};for(const i of Object.keys(n.children)){const s=hx(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function v_e(n){if(1===n.numberOfChildren&&n.children[Ne]){const e=n.children[Ne];return new Be(n.segments.concat(e.segments),e.children)}return n}(new Be(n.segments,e))}class w3{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Uv{constructor(e,t){this.component=e,this.route=t}}function w_e(n,e,t){const i=n._root;return qp(i,e?e._root:null,t,[i.value])}function Hv(n,e,t){const i=function E_e(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function qp(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ed(e);return n.children.forEach(o=>{(function T_e(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function I_e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tc(n.url,e.url)||!Os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sx(n,e)||!Os(n.queryParams,e.queryParams);default:return!sx(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new w3(i)):(s.data=o.data,s._resolvedData=o._resolvedData),qp(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Uv(a.outlet.component,o))}else o&&Kp(e,a,r),r.canActivateChecks.push(new w3(i)),qp(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Gn(s,(o,a)=>Kp(o,t.getContext(a),r)),r}function Kp(n,e,t){const i=Ed(n),r=n.value;Gn(i,(s,o)=>{Kp(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Uv(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class O_e{}function C3(n){return new nt(e=>e.error(n))}class F_e{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Lv(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ne);if(null===t)return null;const i=new Pv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ne,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new vo(i,t),s=new o3(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=s3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=m3(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=E3(i);return function L_e(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return y3(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!_3(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?zW(i).parameters:{};s=new Pv(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,D3(e),Ar(e),e.component,e,T3(t),I3(t)+i.length,S3(e))}else{const f=Fv(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new Pv(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,D3(e),Ar(e),e.component,e,T3(t),I3(t)+o.length,S3(e))}const l=function V_e(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Lv(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new vo(s,f)]}if(0===l.length&&0===u.length)return[new vo(s,[])];const d=Ar(e)===r,h=this.processSegment(l,c,u,d?Ne:r);return null===h?null:[new vo(s,h)]}}function B_e(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function E3(n){const e=[],t=new Set;for(const i of n){if(!B_e(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=E3(i.children);e.push(new vo(i.value,r))}return e.filter(i=>!t.has(i))}function T3(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function I3(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function D3(n){return n.data||{}}function S3(n){return n.resolve||{}}function x3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function fx(n){return Ps(e=>{const t=n(e);return t?Bn(t).pipe(Ae(()=>e)):J(e)})}class q_e extends class W_e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const px=new k("ROUTES");class M3{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new cx($W(o.injector.get(px,void 0,ue.Self|ue.Optional)).map(dx),o)}),_o(s=>{throw t._loader$=void 0,s}));return t._loader$=new age(r,()=>new ne).pipe(RW()),t._loader$}loadModuleFactory(e){return Ns(e()).pipe(tn(t=>t instanceof oV?J(t):Bn(this.compiler.compileModuleAsync(t))))}}class Q_e{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Y_e(n){throw n}function X_e(n,e,t){return e.parse("/")}function A3(n,e){return J(null)}const Z_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},J_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rt=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne,this.errorHandler=Y_e,this.malformedUriErrorHandler=X_e,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:A3,afterPreactivation:A3},this.urlHandlingStrategy=new Q_e,this.routeReuseStrategy=new q_e,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Zs),this.console=o.get(zV);const d=o.get(Z);this.isNgZoneEnabled=d instanceof Z&&Z.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Ige(){return new ec(new Be([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new M3(o,a,h=>this.triggerEvent(new VW(h)),h=>this.triggerEvent(new BW(h))),this.routerState=r3(this.currentUrlTree,this.rootComponentType),this.transitions=new Mr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ct(r=>0!==r.id),Ae(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ps(r=>{let s=!1,o=!1;return J(r).pipe(On(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ps(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return k3(a.source)&&(this.browserUrlTree=a.extractedUrl),J(a).pipe(Ps(d=>{const h=this.transitions.getValue();return i.next(new ZS(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?hr:Promise.resolve(d)}),function b_e(n,e,t,i){return Ps(r=>function __e(n,e,t,i,r){return new y_e(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Ae(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),On(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function U_e(n,e,t,i,r){return tn(s=>function N_e(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new F_e(n,e,t,i,r,s).recognize();return null===o?C3(new O_e):J(o)}catch(o){return C3(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(Ae(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),On(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new hge(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:y}=a,b=new ZS(h,this.serializeUrl(f),p,g);i.next(b);const v=r3(f,this.rootComponentType).snapshot;return J(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},y),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),hr}),fx(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),On(a=>{const l=new fge(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Ae(a=>Object.assign(Object.assign({},a),{guards:w_e(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function D_e(n,e){return tn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?J(Object.assign(Object.assign({},t),{guardsResult:!0})):function S_e(n,e,t,i){return Bn(n).pipe(tn(r=>function P_e(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?J(s.map(a=>{const l=Hv(a,e,r);let c;if(function o_e(n){return n&&Ma(n.canDeactivate)}(l))c=Ns(l.canDeactivate(n,e,t,i));else{if(!Ma(l))throw new Error("Invalid CanDeactivate guard");c=Ns(l(n,e,t,i))}return c.pipe(wd())})).pipe(zp()):J(!0)}(r.component,r.route,t,e,i)),wd(r=>!0!==r,!0))}(o,i,r,n).pipe(tn(a=>a&&function n_e(n){return"boolean"==typeof n}(a)?function x_e(n,e,t,i){return Bn(e).pipe(bd(r=>Sv(function A_e(n,e){return null!==n&&e&&e(new _ge(n)),J(!0)}(r.route.parent,i),function M_e(n,e){return null!==n&&e&&e(new vge(n)),J(!0)}(r.route,i),function R_e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function C_e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>YS(()=>J(o.guards.map(l=>{const c=Hv(l,o.node,t);let u;if(function s_e(n){return n&&Ma(n.canActivateChild)}(c))u=Ns(c.canActivateChild(i,n));else{if(!Ma(c))throw new Error("Invalid CanActivateChild guard");u=Ns(c(i,n))}return u.pipe(wd())})).pipe(zp())));return J(s).pipe(zp())}(n,r.path,t),function k_e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return J(!0);const r=i.map(s=>YS(()=>{const o=Hv(s,e,t);let a;if(function r_e(n){return n&&Ma(n.canActivate)}(o))a=Ns(o.canActivate(e,n));else{if(!Ma(o))throw new Error("Invalid CanActivate guard");a=Ns(o(e,n))}return a.pipe(wd())}));return J(r).pipe(zp())}(n,r.route,t))),wd(r=>!0!==r,!0))}(i,s,n,e):J(a)),Ae(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),On(a=>{if(nc(a.guardsResult)){const c=JS(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new pge(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ct(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),fx(a=>{if(a.guards.canActivateChecks.length)return J(a).pipe(On(l=>{const c=new mge(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ps(l=>{let c=!1;return J(l).pipe(function H_e(n,e){return tn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return J(t);let s=0;return Bn(r).pipe(bd(o=>function j_e(n,e,t,i){return function $_e(n,e,t,i){const r=x3(n);if(0===r.length)return J({});const s={};return Bn(r).pipe(tn(o=>function z_e(n,e,t,i){const r=Hv(n,e,i);return Ns(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(On(a=>{s[o]=a}))),XS(1),tn(()=>x3(s).length===r.length?J(s):hr))}(n._resolve,n,e,i).pipe(Ae(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),s3(n,t).resolve),null)))}(o.route,i,n,e)),On(()=>s++),XS(1),tn(o=>s===r.length?J(t):hr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),On({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),On(l=>{const c=new gge(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),fx(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ae(a=>{const l=function $ge(n,e,t){const i=Hp(n,e._root,t?t._root:void 0);return new n3(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),On(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Ae(i=>(new e_e(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),On({next(){s=!0},complete(){s=!0}}),FW(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),_o(a=>{if(o=!0,function Cge(n){return n&&n[HW]}(a)){const l=nc(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new LW(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||k3(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new dge(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return hr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){p3(t),this.config=t.map(dx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function Wge(n,e,t,i,r){if(0===t.length)return ox(e.root,e.root,e.root,i,r);const s=function qge(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new c3(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Gn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new c3(t,e,i)}(t);if(s.toRoot())return ox(e.root,e.root,new Be([],{}),i,r);const o=function Kge(n,e,t){if(n.isAbsolute)return new ax(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new ax(s,s===e.root,0)}const i=Ov(n.commands[0])?0:1;return function Qge(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new ax(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Nv(o.segmentGroup,o.index,s.commands):u3(o.segmentGroup,o.index,s.commands);return ox(e.root,o.segmentGroup,a,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=nc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function eye(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Z_e):!1===i?Object.assign({},J_e):i,nc(t))return WW(this.currentUrlTree,t,r);const s=this.parseUrl(t);return WW(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Vp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,g)=>{c=p,u=g});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new LW(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Pg()},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function k3(n){return"imperative"!==n}let jv=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new ne,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Td(this.skipLocationChange),replaceUrl:Td(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Td(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(_(Rt),_(xa),Ja("tabindex"),_(Xs),_(ce))},n.\u0275dir=O({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&Q("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Kt]}),n})();function Td(n){return""===n||!!n}class R3{}class P3{preload(e,t){return J(null)}}let O3=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new M3(r,i,l=>t.triggerEvent(new VW(l)),l=>t.triggerEvent(new BW(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof Vp),bd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Bn(r).pipe(Yd(),Ae(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?J(i._loadedConfig):this.loader.load(t.injector,i)).pipe(tn(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(I(Rt),I(GV),I(ot),I(R3))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),gx=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof UW&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new UW(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Pg()},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const ic=new k("ROUTER_CONFIGURATION"),N3=new k("ROUTER_FORROOT_GUARD"),rye=[al,{provide:YW,useClass:XW},{provide:Rt,useFactory:function cye(n,e,t,i,r,s,o={},a,l){const c=new Rt(null,n,e,t,i,r,$W(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function uye(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[YW,Gp,al,ot,GV,px,ic,[class K_e{},new Le],[class G_e{},new Le]]},Gp,{provide:xa,useFactory:function dye(n){return n.routerState.root},deps:[Rt]},O3,P3,class iye{preload(e,t){return t().pipe(_o(()=>J(null)))}},{provide:ic,useValue:{enableTracing:!1}}];function sye(){return new YV("Router",Rt)}let _x=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[rye,F3(t),{provide:N3,useFactory:lye,deps:[[Rt,new Le,new qc]]},{provide:ic,useValue:i||{}},{provide:Cu,useFactory:aye,deps:[ol,[new gg(QE),new Le],ic]},{provide:gx,useFactory:oye,deps:[Rt,Fie,ic]},{provide:R3,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:P3},{provide:YV,multi:!0,useFactory:sye},[yx,{provide:Kg,multi:!0,useFactory:hye,deps:[yx]},{provide:L3,useFactory:fye,deps:[yx]},{provide:$V,multi:!0,useExisting:L3}]]}}static forChild(t){return{ngModule:n,providers:[F3(t)]}}}return n.\u0275fac=function(t){return new(t||n)(I(N3,8),I(Rt,8))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();function oye(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gx(n,e,t)}function aye(n,e,t={}){return t.useHash?new yne(n,e):new gB(n,e)}function lye(n){return"guarded"}function F3(n){return[{provide:rY,multi:!0,useValue:n},{provide:px,multi:!0,useValue:n}]}let yx=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ne}appInitializer(){return this.injector.get(mne,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(Rt),o=this.injector.get(ic);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?J(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(ic),r=this.injector.get(O3),s=this.injector.get(gx),o=this.injector.get(Rt),a=this.injector.get(Qg);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(I(ot))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function hye(n){return n.appInitializer.bind(n)}function fye(n){return n.bootstrapListener.bind(n)}const L3=new k("Router Initializer");let Fs=(()=>{class n{constructor(t){this.router=t,this.email="",this.app=Er(_i_firebase),this.fbapp=Tr.initializeApp(_i_firebase),this.fb_db=Tr.firestore(),this.userlist=[]}fetch_userdata_with_keymail(t){let s;return TW(kt(rr(this.app),"/users/"+t)).then(o=>{o.exists()&&(s=o.val(),this.updatedData="",console.log("data:",s),this.updatedData=o.val(),console.log("updated Data:",this.updatedData),this.email=s.email,this.name=s.name,this.username=s.username,"bio"in s||(s.bio=""),this.userdata=s)}),this.userdata}set_after_edit(t,i,r){let s=t.replace(".",""),a=kt(rr(this.app),"/users/"+s);console.log(r),Rs(a,r).then(()=>{console.log("Data updated in realtime database")}).catch(l=>{console.log("There was some error while adding user data in realtime database")}),i!=r.username?(this.modify_chats(i,r.username),this.modify_ontoone_chats(i,r.username),this.modify_posts(i,r.username),this.modify_comments(i,r.username)):console.log("Username not changed"),this.updatedData="",this.fetch_userdata_with_keymail(s)}modify_chats(t,i){let r=[],s=rr(this.app);xr(kt(s,"Chats/"),a=>{a.forEach(l=>{l.val().username==t&&r.push({key:l.key,username:i,chat:l.val().chat})})}),r.forEach(a=>{Rs(kt(s,"Chats/"+a.key),{username:a.username,chat:a.chat})})}modify_ontoone_chats(t,i){let r=rr(this.app);xr(kt(r,"OneToOne/"),o=>{o.forEach(a=>{a.forEach(l=>{l.val().username==t&&Rs(kt(r,"OneToOne/"+a.key+"/"+l.key),{username:i,chat:l.val().chat})})})})}modify_comments(t,i){try{let r=rr(this.app);xr(kt(r,"post_comments/"),o=>{o.forEach(a=>{a.forEach(l=>{l.forEach(c=>{c.val().username==t&&Rs(kt(r,o.key+"/"+a.key+"/"+l.key+"/"+c.key+"/"),{username:i,comment:c.val().comment,keymail:c.val().keymail})})})})})}catch(r){console.log(r)}}modify_posts(t,i){var r=this;return m(function*(){(yield r.fb_db.collection("posts_metadata").where("username","==",t).get()).forEach(o=>{r.fb_db.collection("posts_metadata").doc(o.id).update({username:i})})})()}get_all_users(t){return this.userlist=[],TW(kt(rr(this.app),"/users")).then(s=>{s.forEach(o=>{o.key!=t&&this.userlist.push(o.val())})}),this.userlist}}return n.\u0275fac=function(t){return new(t||n)(I(Rt))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qp=(()=>{class n{constructor(t,i){this.userdata=t,this.router=i,this.emitChangeSource=new ne,this.changeEmitted$=this.emitChangeSource.asObservable(),this.app=Er(_i_firebase),this.firebase_storage=sf(this.app),this.firebase_firestore_db=W$(this.app),this.fbapp=Tr.initializeApp(_i_firebase),this.fb_db=Tr.firestore(),this.post_url_list=[],this.current_post_url="",this.fetched_post_data=new Lhe,this.fetched_posts_list=[],this.progress=0}emitChange(t){this.emitChangeSource.next(t)}ngOnInit(){}save_metadata_of_post(t,i){var r=this;return m(function*(){const s=r.userdata.email.replace(".","");try{yield mz(ID(r.firebase_firestore_db,"posts_metadata"),{caption:t.caption,name:t.name,keymail:s,fileType:t.fileType,username:t.username,url:i}),alert("Data uploaded in firestore successfully"),r.router.navigateByUrl("/")}catch(o){console.error("Error adding document: ",o)}})()}Upload_post(t){var i=this;const r=this.userdata.email.replace(".",""),a=W2(rf(this.firebase_storage,"posts/"+r+"/"+t.name),t.post);a.on("state_changed",l=>{switch(this.progress=l.bytesTransferred/l.totalBytes*100,this.emitChange(this.progress),l.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},l=>{console.log("error occured while uploading the post:",l)},()=>{x_(a.snapshot.ref).then(function(){var l=m(function*(c){i.current_post_url=c,console.log(i.current_post_url),t.post_url=c,console.log("File available at",c),i.save_metadata_of_post(t,c)});return function(c){return l.apply(this,arguments)}}())})}delete_post(t,i){var r=this;return m(function*(){(function pae(n){return function cae(n){n._throwIfRoot("deleteObject");const e=function joe(n,e){const i=ro(e.fullServerUrl(),n.host,n._protocol),a=new ys(i,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=nf(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xr)}(n=Me(n))})(rf(sf(),"posts/"+t+"/"+i)).then(()=>{alert("post deleted successfully")}).catch(u=>{}),Tr.firestore(),(yield r.fb_db.collection("posts_metadata").get()).forEach(function(){var u=m(function*(d){d.data().keymail==t&&d.data().name==i&&(d.ref.delete(),alert("Metadata deleted successfully"),r.router.navigateByUrl("/profile"))});return function(d){return u.apply(this,arguments)}}())})()}get_user_post(){}get_all_posts(){return m(function*(){})()}save_profile_pic(t){const i=this.userdata.email.replace(".",""),s=W2(rf(this.firebase_storage,"profile_pic/"+i+"/"+i),t);s.on("state_changed",o=>{switch(console.log("Upload is "+o.bytesTransferred/o.totalBytes*100+"% done"),o.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},o=>{console.log("Error while uploading the profile pic:",o)},()=>{x_(s.snapshot.ref).then(o=>{console.log("File available at",o)})})}}return n.\u0275fac=function(t){return new(t||n)(I(Fs),I(Rt))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V3=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class B3{}const bo="*";function Aa(n,e){return{type:7,name:n,definitions:e,options:{}}}function sr(n,e=null){return{type:4,styles:e,timings:n}}function U3(n,e=null){return{type:3,steps:n,options:e}}function H3(n,e=null){return{type:2,steps:n,options:e}}function Pt(n){return{type:6,styles:n,offset:null}}function Ui(n,e,t){return{type:0,name:n,styles:e,options:t}}function or(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function j3(n=null){return{type:9,options:n}}function $3(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function z3(n){Promise.resolve(null).then(n)}class Yp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){z3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class G3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?z3(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Ue=!1;function W3(n){return new W(3e3,Ue)}function Qye(){return"undefined"!=typeof window&&void 0!==window.document}function bx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ka(n){switch(n.length){case 0:return new Yp;case 1:return n[0];default:return new G3(n)}}function q3(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let g=p,y=u[p];if("offset"!==p)switch(g=e.normalizePropertyName(g,o),y){case"!":y=r[p];break;case bo:y=s[p];break;default:y=e.normalizeStyleValue(p,g,y,o)}f[g]=y}),h||a.push(f),c=f,l=d}),o.length)throw function Vye(n){return new W(3502,Ue)}();return a}function wx(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Cx(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Cx(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Cx(t,"destroy",n)))}}function Cx(n,e,t){const i=t.totalTime,s=Ex(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Ex(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ar(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function K3(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Tx=(n,e)=>!1,Q3=(n,e,t)=>[],Y3=null;function Ix(n){const e=n.parentNode||n.host;return e===Y3?null:e}(bx()||"undefined"!=typeof Element)&&(Qye()?(Y3=(()=>document.documentElement)(),Tx=(n,e)=>{for(;e;){if(e===n)return!0;e=Ix(e)}return!1}):Tx=(n,e)=>n.contains(e),Q3=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let rc=null,X3=!1;function Z3(n){rc||(rc=function Xye(){return"undefined"!=typeof document?document.body:null}()||{},X3=!!rc.style&&"WebkitAppearance"in rc.style);let e=!0;return rc.style&&!function Yye(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in rc.style,!e&&X3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in rc.style)),e}const J3=Tx,eq=Q3;let tq=(()=>{class n{validateStyleProperty(t){return Z3(t)}matchesElement(t,i){return!1}containsElement(t,i){return J3(t,i)}getParentElement(t){return Ix(t)}query(t,i,r){return eq(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Yp(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),Dx=(()=>{class n{}return n.NOOP=new tq,n})();const Sx="ng-enter",zv="ng-leave",Gv="ng-trigger",Wv=".ng-trigger",iq="ng-animating",xx=".ng-animating";function sc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Mx(parseFloat(e[1]),e[2])}function Mx(n,e){return"s"===e?1e3*n:n}function qv(n,e,t){return n.hasOwnProperty("duration")?n:function eve(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(W3()),{duration:0,delay:0,easing:""};r=Mx(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Mx(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function gye(){return new W(3100,Ue)}()),a=!0),s<0&&(e.push(function _ye(){return new W(3101,Ue)}()),a=!0),a&&e.splice(l,0,W3())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Id(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ra(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Id(n,t);return t}function sq(n,e,t){return t?e+":"+t+";":""}function oq(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=sq(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=sq(0,ive(t),n.style[t]));n.setAttribute("style",e)}function Ls(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=kx(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),bx()&&oq(n))}function oc(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=kx(t);n.style[i]=""}),bx()&&oq(n))}function Xp(n){return Array.isArray(n)?1==n.length?n[0]:H3(n):n}const Ax=new RegExp("{{\\s*(.+?)\\s*}}","g");function aq(n){let e=[];if("string"==typeof n){let t;for(;t=Ax.exec(n);)e.push(t[1]);Ax.lastIndex=0}return e}function Kv(n,e,t){const i=n.toString(),r=i.replace(Ax,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function vye(n){return new W(3003,Ue)}()),a=""),a.toString()});return r==i?n:r}function Qv(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const nve=/-+([a-z0-9])/g;function kx(n){return n.replace(nve,(...e)=>e[1].toUpperCase())}function ive(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function bye(n){return new W(3004,Ue)}()}}function lq(n,e){return window.getComputedStyle(n)[e]}function cve(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function uve(n,e,t){if(":"==n[0]){const l=function dve(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Oye(n){return new W(3016,Ue)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Pye(n){return new W(3015,Ue)}()),e;const r=i[1],s=i[2],o=i[3];e.push(cq(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(cq(o,r))}(i,t,e)):t.push(n),t}const Jv=new Set(["true","1"]),eb=new Set(["false","0"]);function cq(n,e){const t=Jv.has(n)||eb.has(n),i=Jv.has(e)||eb.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Jv.has(n):eb.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Jv.has(e):eb.has(e)),o&&a}}const hve=new RegExp("s*:selfs*,?","g");function Rx(n,e,t,i){return new fve(n).build(e,t,i)}class fve{constructor(e){this._driver=e}build(e,t,i){const r=new gve(t);this._resetContextStyleTimingState(r);const s=lr(this,Xp(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Cye(){return new W(3006,Ue)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function Eye(){return new W(3007,Ue)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(tb(a)){const l=a;Object.keys(l).forEach(c=>{aq(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(Qv(s.values()),t.errors.push(function Tye(n,e){return new W(3008,Ue)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=lr(this,Xp(e.animation),t);return{type:1,matchers:cve(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ac(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>lr(this,i,t)),options:ac(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=lr(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:ac(e.options)}}visitAnimate(e,t){const i=function yve(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Px(qv(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Px(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||qv(i,e),Px(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Pt({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Pt(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==bo?i.push(o):t.errors.push(function Iye(n){return new W(3002,Ue)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(tb(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function Dye(n,e,t,i,r){return new W(3010,Ue)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function tve(n,e,t){const i=e.params||{},r=aq(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function yye(n){return new W(3001,Ue)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Sye(){return new W(3011,Ue)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(b=>{const v=this._makeStyleAst(b,t);let D=null!=v.offset?v.offset:function _ve(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(tb(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(tb(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(v.styles),S=0;return null!=D&&(s++,S=v.offset=D),l=l||S<0||S>1,a=a||S<c,c=S,o.push(S),v});l&&t.errors.push(function xye(){return new W(3012,Ue)}()),a&&t.errors.push(function Mye(){return new W(3200,Ue)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Aye(){return new W(3202,Ue)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,y=g.duration;return u.forEach((b,v)=>{const D=h>0?v==f?1:h*v:o[v],S=D*y;t.currentTime=p+g.delay+S,g.duration=S,this._validateStyleAst(b,t),b.offset=D,i.styles.push(b)}),i}visitReference(e,t){return{type:8,animation:lr(this,Xp(e.animation),t),options:ac(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ac(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ac(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function pve(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(hve,"")),n=n.replace(/@\*/g,Wv).replace(/@\w+/g,t=>Wv+"-"+t.substr(1)).replace(/:animating/g,xx),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ar(t.collectedStyles,t.currentQuerySelector,{});const a=lr(this,Xp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ac(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function kye(){return new W(3013,Ue)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:qv(e.timings,t.errors,!0);return{type:12,animation:lr(this,Xp(e.animation),t),timings:i,options:null}}}class gve{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tb(n){return!Array.isArray(n)&&"object"==typeof n}function ac(n){return n?(n=Id(n)).params&&(n.params=function mve(n){return n?Id(n):null}(n.params)):n={},n}function Px(n,e,t){return{duration:n,delay:e,easing:t}}function Ox(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class nb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const wve=new RegExp(":enter","g"),Eve=new RegExp(":leave","g");function Nx(n,e,t,i,r,s={},o={},a,l,c=[]){return(new Tve).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class Tve{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new nb;const d=new Fx(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),lr(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const g=h[p];if(g.element===t){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[Ox(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?sc(i.duration):null,a=null!=i.delay?sc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),lr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ib);const o=sc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>lr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?sc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),lr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return qv(t.params?Kv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?sc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ib);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),lr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;lr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const ib={};class Fx{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ib,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new rb(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=sc(i.duration)),null!=i.delay&&(r.delay=sc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Kv(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Fx(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ib,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new Ive(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(wve,"."+this._enterClassName)).replace(Eve,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Rye(n){return new W(3014,Ue)}()),a}}class rb{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new rb(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||bo,this._currentKeyframe[t]=bo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function Dve(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=bo})):Ra(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=Kv(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:bo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ra(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==bo&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?Qv(e.values()):[],o=t.size?Qv(t.values()):[];if(i){const a=r[0],l=Id(a);a.offset=0,l.offset=1,r=[a,l]}return Ox(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Ive extends rb{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Ra(e[0],!1);l.offset=0,s.push(l);const c=Ra(e[0],!1);c.offset=hq(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Ra(e[d],!1);h.offset=hq((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return Ox(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function hq(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Lx{}class Sve extends Lx{normalizePropertyName(e,t){return kx(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(xve[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function wye(n,e){return new W(3005,Ue)}())}return o+s}}const xve=(()=>function Mve(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function fq(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const Vx={};class pq{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Ave(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||Vx,p=this.buildStyles(i,a&&a.params||Vx,d),g=l&&l.params||Vx,y=this.buildStyles(r,g,d),b=new Set,v=new Map,D=new Map,S="void"===r,N={params:Object.assign(Object.assign({},h),g)},G=u?[]:Nx(e,t,this.ast.animation,s,o,p,y,N,c,d);let ae=0;if(G.forEach(en=>{ae=Math.max(en.duration+en.delay,ae)}),d.length)return fq(t,this._triggerName,i,r,S,p,y,[],[],v,D,ae,d);G.forEach(en=>{const Ii=en.element,Gd=ar(v,Ii,{});en.preStyleProps.forEach(is=>Gd[is]=!0);const Ro=ar(D,Ii,{});en.postStyleProps.forEach(is=>Ro[is]=!0),Ii!==t&&b.add(Ii)});const ft=Qv(b.values());return fq(t,this._triggerName,i,r,S,p,y,G,ft,v,D,ae)}}class kve{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Id(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=Kv(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class Pve{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new kve(r.style,r.options&&r.options.params||{},i)}),mq(this.states,"true","1"),mq(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new pq(e,r,this.states))}),this.fallbackTransition=function Ove(n,e,t){return new pq(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function mq(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Nve=new nb;class Fve{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=Rx(this._driver,t,i,[]);if(i.length)throw function Bye(n){return new W(3503,Ue)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=q3(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=Nx(this._driver,t,s,Sx,zv,{},{},i,Nve,r),o.forEach(u=>{const d=ar(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function Uye(){return new W(3300,Ue)}()),o=[]),r.length)throw function Hye(n){return new W(3504,Ue)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,bo)})});const c=ka(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function jye(n){return new W(3301,Ue)}();return t}listen(e,t,i,r){const s=Ex(t,"","","");return wx(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const gq="ng-animate-queued",Bx="ng-animate-disabled",Hve=[],_q={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jve={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},kr="__ng_removed";class Ux{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Wve(n){return null!=n?n:null}(i?e.value:e),i){const s=Id(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Zp="void",Hx=new Ux(Zp);class $ve{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Rr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function $ye(n,e){return new W(3302,Ue)}();if(null==i||0==i.length)throw function zye(n){return new W(3303,Ue)}();if(!function qve(n){return"start"==n||"done"==n}(i))throw function Gye(n,e){return new W(3400,Ue)}();const s=ar(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=ar(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Rr(e,Gv),Rr(e,Gv+"-"+t),a[t]=Hx),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Wye(n){return new W(3401,Ue)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new jx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Rr(e,Gv),Rr(e,Gv+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new Ux(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=Hx),c.value!==Zp&&l.value===c.value){if(!function Yve(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],y=s.matchStyles(l.value,l.params,g),b=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{oc(e,y),Ls(e,b)})}return}const h=ar(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Rr(e,gq),o.onStart(()=>{Dd(e,gq)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const y=this._engine.playersByElement.get(e);if(y){let b=y.indexOf(o);b>=0&&y.splice(b,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Wv,!0);i.forEach(r=>{if(r[kr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,Zp,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&ka(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||Hx,u=new Ux(Zp),d=new jx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[kr];(!s||s===_q)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Rr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=Ex(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,wx(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class zve{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new $ve(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(sb(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!sb(t))return;const s=t[kr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Rr(e,Bx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Dd(e,Bx))}removeNode(e,t,i,r){if(sb(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[kr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return sb(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Wv,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,xx,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ka(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[kr];if(i&&i.setForRemoval){if(e[kr]=_q,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Bx))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Rr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ka(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function qye(n){return new W(3402,Ue)}()}_flushAnimations(e,t){const i=new nb,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(q=>{u.add(q);const ee=this.driver.query(q,".ng-animate-queued",!0);for(let le=0;le<ee.length;le++)u.add(ee[le])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=bq(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((q,ee)=>{const le=Sx+g++;p.set(ee,le),q.forEach(Ke=>Rr(Ke,le))});const y=[],b=new Set,v=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){const ee=this.collectedLeaveElements[q],le=ee[kr];le&&le.setForRemoval&&(y.push(ee),b.add(ee),le.hasAnimation?this.driver.query(ee,".ng-star-inserted",!0).forEach(Ke=>b.add(Ke)):v.add(ee))}const D=new Map,S=bq(h,Array.from(b));S.forEach((q,ee)=>{const le=zv+g++;D.set(ee,le),q.forEach(Ke=>Rr(Ke,le))}),e.push(()=>{f.forEach((q,ee)=>{const le=p.get(ee);q.forEach(Ke=>Dd(Ke,le))}),S.forEach((q,ee)=>{const le=D.get(ee);q.forEach(Ke=>Dd(Ke,le))}),y.forEach(q=>{this.processLeaveNode(q)})});const N=[],G=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach(le=>{const Ke=le.player,Vn=le.element;if(N.push(Ke),this.collectedEnterElements.length){const Di=Vn[kr];if(Di&&Di.setForMove){if(Di.previousTriggersValues&&Di.previousTriggersValues.has(le.triggerName)){const Ac=Di.previousTriggersValues.get(le.triggerName),za=this.statesByElement.get(le.element);za&&za[le.triggerName]&&(za[le.triggerName].value=Ac)}return void Ke.destroy()}}const $s=!d||!this.driver.containsElement(d,Vn),dr=D.get(Vn),$a=p.get(Vn),Lt=this._buildInstruction(le,i,$a,dr,$s);if(Lt.errors&&Lt.errors.length)return void G.push(Lt);if($s)return Ke.onStart(()=>oc(Vn,Lt.fromStyles)),Ke.onDestroy(()=>Ls(Vn,Lt.toStyles)),void r.push(Ke);if(le.isFallbackTransition)return Ke.onStart(()=>oc(Vn,Lt.fromStyles)),Ke.onDestroy(()=>Ls(Vn,Lt.toStyles)),void r.push(Ke);const u7=[];Lt.timelines.forEach(Di=>{Di.stretchStartingKeyframe=!0,this.disabledNodes.has(Di.element)||u7.push(Di)}),Lt.timelines=u7,i.append(Vn,Lt.timelines),o.push({instruction:Lt,player:Ke,element:Vn}),Lt.queriedElements.forEach(Di=>ar(a,Di,[]).push(Ke)),Lt.preStyleProps.forEach((Di,Ac)=>{const za=Object.keys(Di);if(za.length){let kc=l.get(Ac);kc||l.set(Ac,kc=new Set),za.forEach(u1=>kc.add(u1))}}),Lt.postStyleProps.forEach((Di,Ac)=>{const za=Object.keys(Di);let kc=c.get(Ac);kc||c.set(Ac,kc=new Set),za.forEach(u1=>kc.add(u1))})});if(G.length){const q=[];G.forEach(ee=>{q.push(function Kye(n,e){return new W(3505,Ue)}())}),N.forEach(ee=>ee.destroy()),this.reportError(q)}const ae=new Map,ft=new Map;o.forEach(q=>{const ee=q.element;i.has(ee)&&(ft.set(ee,ee),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,ae))}),r.forEach(q=>{const ee=q.element;this._getPreviousPlayers(ee,!1,q.namespaceId,q.triggerName,null).forEach(Ke=>{ar(ae,ee,[]).push(Ke),Ke.destroy()})});const en=y.filter(q=>Cq(q,l,c)),Ii=new Map;vq(Ii,this.driver,v,c,bo).forEach(q=>{Cq(q,l,c)&&en.push(q)});const Ro=new Map;f.forEach((q,ee)=>{vq(Ro,this.driver,new Set(q),l,"!")}),en.forEach(q=>{const ee=Ii.get(q),le=Ro.get(q);Ii.set(q,Object.assign(Object.assign({},ee),le))});const is=[],Wd=[],qd={};o.forEach(q=>{const{element:ee,player:le,instruction:Ke}=q;if(i.has(ee)){if(u.has(ee))return le.onDestroy(()=>Ls(ee,Ke.toStyles)),le.disabled=!0,le.overrideTotalTime(Ke.totalTime),void r.push(le);let Vn=qd;if(ft.size>1){let dr=ee;const $a=[];for(;dr=dr.parentNode;){const Lt=ft.get(dr);if(Lt){Vn=Lt;break}$a.push(dr)}$a.forEach(Lt=>ft.set(Lt,Vn))}const $s=this._buildAnimation(le.namespaceId,Ke,ae,s,Ro,Ii);if(le.setRealPlayer($s),Vn===qd)is.push(le);else{const dr=this.playersByElement.get(Vn);dr&&dr.length&&(le.parentPlayer=ka(dr)),r.push(le)}}else oc(ee,Ke.fromStyles),le.onDestroy(()=>Ls(ee,Ke.toStyles)),Wd.push(le),u.has(ee)&&r.push(le)}),Wd.forEach(q=>{const ee=s.get(q.element);if(ee&&ee.length){const le=ka(ee);q.setRealPlayer(le)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<y.length;q++){const ee=y[q],le=ee[kr];if(Dd(ee,zv),le&&le.hasAnimation)continue;let Ke=[];if(a.size){let $s=a.get(ee);$s&&$s.length&&Ke.push(...$s);let dr=this.driver.query(ee,xx,!0);for(let $a=0;$a<dr.length;$a++){let Lt=a.get(dr[$a]);Lt&&Lt.length&&Ke.push(...Lt)}}const Vn=Ke.filter($s=>!$s.destroyed);Vn.length?Kve(this,ee,Vn):this.processLeaveNode(ee)}return y.length=0,is.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();const ee=this.players.indexOf(q);this.players.splice(ee,1)}),q.play()}),is}elementContainsData(e,t){let i=!1;const r=t[kr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Zp;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=ar(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}oc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const y=g[kr];if(y&&y.removedBeforeQueried)return new Yp(p.duration,p.delay);const b=g!==l,v=function Qve(n){const e=[];return wq(n,e),e}((i.get(g)||Hve).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===g),D=s.get(g),S=o.get(g),N=q3(0,this._normalizer,0,p.keyframes,D,S),G=this._buildPlayer(p,N,v);if(p.subTimeline&&r&&d.add(g),b){const ae=new jx(e,a,g);ae.setRealPlayer(G),c.push(ae)}return G});c.forEach(p=>{ar(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Gve(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Rr(p,iq));const f=ka(h);return f.onDestroy(()=>{u.forEach(p=>Dd(p,iq)),Ls(l,t.toStyles)}),d.forEach(p=>{ar(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Yp(e.duration,e.delay)}}class jx{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Yp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>wx(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ar(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function sb(n){return n&&1===n.nodeType}function yq(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function vq(n,e,t,i,r){const s=[];t.forEach(l=>s.push(yq(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[kr]=jve,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>yq(l,s[a++])),o}function bq(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Rr(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Dd(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Kve(n,e,t){ka(t).onDone(()=>n.processLeaveNode(e))}function wq(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof G3?wq(i.players,e):e.push(i)}}function Cq(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class ob{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new zve(e,t,i),this._timelineEngine=new Fve(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=Rx(this._driver,s,l,[]);if(l.length)throw function Lye(n,e){return new W(3404,Ue)}();a=function Rve(n,e,t){return new Pve(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=K3(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=K3(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Zve=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ls(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ls(this._element,this._initialStyles),this._endStyles&&(Ls(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(oc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oc(this._element,this._endStyles),this._endStyles=null),Ls(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $x(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Jve(r)&&(e=e||{},e[r]=n[r])}return e}function Jve(n){return"display"===n||"position"===n}class Eq{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:lq(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ebe{validateStyleProperty(e){return Z3(e)}matchesElement(e,t){return!1}containsElement(e,t){return J3(e,t)}getParentElement(e){return Ix(e)}query(e,t,i){return eq(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof Eq);(function rve(n,e){return 0===n||0===e})(i,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function sve(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=lq(n,l)})}}return e}(e,t=t.map(h=>Ra(h,!1)),c);const d=function Xve(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=$x(e[0]),e.length>1&&(i=$x(e[e.length-1]))):e&&(t=$x(e)),t||i?new Zve(n,t,i):null}(e,t);return new Eq(e,t,l,d)}}let tbe=(()=>{class n extends B3{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Fr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?H3(t):t;return Tq(this._renderer,null,i,"register",[r]),new nbe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(I(Oh),I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class nbe extends class mye{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ibe(this._id,e,t||{},this._renderer)}}class ibe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Tq(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Tq(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Iq="@.disabled";let rbe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new Dq("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new sbe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(I(Oh),I(ob),I(Z))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class Dq{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Iq?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class sbe extends Dq{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Iq?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function obe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function abe(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let lbe=(()=>{class n extends ob{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(I(Se),I(Dx),I(Lx))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const ri=new k("AnimationModuleType"),Sq=[{provide:B3,useClass:tbe},{provide:Lx,useFactory:function cbe(){return new Sve}},{provide:ob,useClass:lbe},{provide:Oh,useFactory:function ube(n,e,t){return new rbe(n,e,t)},deps:[p_,ob,Z]}],xq=[{provide:Dx,useFactory:()=>new ebe},{provide:ri,useValue:"BrowserAnimations"},...Sq],dbe=[{provide:Dx,useClass:tq},{provide:ri,useValue:"NoopAnimations"},...Sq];let hbe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?dbe:xq}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:xq,imports:[$B]}),n})();const fbe=new k("cdk-dir-doc",{providedIn:"root",factory:function pbe(){return mg(Se)}}),mbe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let zx,cr=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ie,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function gbe(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?mbe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(I(fbe,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();try{zx="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){zx=!1}let Sd,Nn=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Nie(n){return n===kB}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zx)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(I(wu))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aq=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function kq(){if(Sd)return Sd;if("object"!=typeof document||!document)return Sd=new Set(Aq),Sd;let n=document.createElement("input");return Sd=new Set(Aq.filter(e=>(n.setAttribute("type",e),n.type===e))),Sd}let em,lb,lc,Gx;function xd(n){return function _be(){if(null==em&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>em=!0}))}finally{em=em||!1}return em}()?n:!!n.capture}function Rq(){if(null==lc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return lc=!1,lc;if("scrollBehavior"in document.documentElement.style)lc=!0;else{const n=Element.prototype.scrollTo;lc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return lc}function tm(){if("object"!=typeof document||!document)return 0;if(null==lb){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),lb=0,0===n.scrollLeft&&(n.scrollLeft=1,lb=0===n.scrollLeft?1:2),n.remove()}return lb}function Wx(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function cc(n){return n.composedPath?n.composedPath()[0]:n.target}function qx(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Md(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class Rbe extends et{constructor(e,t){super()}schedule(e,t=0){return this}}const cb={setInterval(n,e,...t){const{delegate:i}=cb;return(null==i?void 0:i.setInterval)?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=cb;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class ub extends Rbe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return cb.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;cb.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Lm(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Nq={now:()=>(Nq.delegate||Date).now(),delegate:void 0};class nm{constructor(e,t=nm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}nm.now=Nq.now;class db extends nm{constructor(e,t=nm.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const im=new db(ub),Pbe=im;function Jx(n,e=im){return Vt((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Et(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function Fq(n){return ct((e,t)=>n<=t)}function hb(n,e=Po){return n=null!=n?n:Obe,Vt((t,i)=>{let r,s=!0;t.subscribe(Et(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Obe(n,e){return n===e}function Ot(n){return Vt((e,t)=>{xi(n).subscribe(Et(t,()=>t.complete(),Bm)),!t.closed&&e.subscribe(t)})}function dn(n){return null!=n&&"false"!=`${n}`}function Pa(n,e=0){return function Nbe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Lq(n){return Array.isArray(n)?n:[n]}function hn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wo(n){return n instanceof ce?n.nativeElement:n}let Vq=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fbe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=wo(t);return new nt(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new ne,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(I(Vq))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bq=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new ie,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=dn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Pa(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Jx(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(_(Fbe),_(ce),_(Z))},n.\u0275dir=O({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),eM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[Vq]}),n})();class jq extends class Bbe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ne,this._typeaheadSubscription=et.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ne,this.change=new ne,e instanceof Wo&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(On(t=>this._pressedLetters.push(t)),Jx(e),ct(()=>this._pressedLetters.length>0),Ae(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Md(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Wo?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let tM=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Hbe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Ube(n){try{return n.frameElement}catch(e){return null}}(function Qbe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===zq(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=zq(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function qbe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Kbe(n){return!function $be(n){return function Gbe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function jbe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function zbe(n){return function Wbe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||$q(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(I(Nn))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $q(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function zq(n){if(!$q(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Ybe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(un(1)).subscribe(e)}}let Gq=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Ybe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(I(tM),I(Z),I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nM(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function iM(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Xbe=new k("cdk-input-modality-detector-options"),Zbe={ignoreKeys:[18,17,224,91,16]},Ad=xd({passive:!0,capture:!0});let Jbe=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Mr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=cc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(nM(o)?"keyboard":"mouse"),this._mostRecentTarget=cc(o))},this._onTouchstart=o=>{iM(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=cc(o))},this._options=Object.assign(Object.assign({},Zbe),s),this.modalityDetected=this._modality.pipe(Fq(1)),this.modalityChanged=this.modalityDetected.pipe(hb()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ad),r.addEventListener("mousedown",this._onMousedown,Ad),r.addEventListener("touchstart",this._onTouchstart,Ad)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ad),document.removeEventListener("mousedown",this._onMousedown,Ad),document.removeEventListener("touchstart",this._onTouchstart,Ad))}}return n.\u0275fac=function(t){return new(t||n)(I(Nn),I(Z),I(Se),I(Xbe,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const twe=new k("cdk-focus-monitor-default-options"),fb=xd({passive:!0,capture:!0});let uc=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ne,this._rootNodeFocusAndBlurListener=a=>{const l=cc(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=wo(t);if(!this._platform.isBrowser||1!==r.nodeType)return J(null);const s=function vbe(n){if(function ybe(){if(null==Gx){const n="undefined"!=typeof document?document.head:null;Gx=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Gx}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ne,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=wo(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=wo(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=cc(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,fb),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,fb)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ot(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fb),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fb),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(Nn),I(Jbe),I(Se,8),I(twe,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nwe=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new ie}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(uc))},n.\u0275dir=O({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const qq="cdk-high-contrast-black-on-white",Kq="cdk-high-contrast-white-on-black",rM="cdk-high-contrast-active";let Qq=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(rM),t.remove(qq),t.remove(Kq),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(rM),t.add(qq)):2===i&&(t.add(rM),t.add(Kq))}}}return n.\u0275fac=function(t){return new(t||n)(I(Nn),I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iwe=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(I(Qq))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[eM]]}),n})();const swe=new k("mat-sanity-checks",{providedIn:"root",factory:function rwe(){return!0}});let bt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!qx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(I(Qq),I(swe,8),I(Se))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[Jp],Jp]}),n})();function pb(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=dn(e)}}}function rm(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function sM(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=dn(e)}}}function owe(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Pa(t):this.defaultTabIndex}}}function awe(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new ne,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let Xq=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[bt],bt]}),n})();class cwe{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Jq={enterDuration:225,exitDuration:150},oM=xd({passive:!0}),e4=["mousedown","touchstart"],t4=["mouseup","mouseleave","touchend","touchcancel"];class dwe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wo(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Jq),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function fwe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function hwe(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new cwe(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Jq),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wo(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(e4))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(t4),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=nM(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!iM(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,oM)})})}_removeTriggerEvents(){this._triggerElement&&(e4.forEach(e=>{this._triggerElement.removeEventListener(e,this,oM)}),this._pointerUpEventsRegistered&&t4.forEach(e=>{this._triggerElement.removeEventListener(e,this,oM)}))}}const pwe=new k("mat-ripple-global-options");let om=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new dwe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Z),_(Nn),_(pwe,8),_(ri,8))},n.\u0275dir=O({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),aM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[bt],bt]}),n})();const mwe=["*",[["mat-card-footer"]]],gwe=["*","mat-card-footer"],_we=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],ywe=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let n4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),r4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),s4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),o4=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),vwe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),cM=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:gwe,decls:2,vars:0,template:function(t,i){1&t&&(Tn(mwe),He(0),He(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),a4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Te({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:ywe,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,i){1&t&&(Tn(_we),He(0),C(1,"div",0),He(2,1),E(),He(3,2))},encapsulation:2,changeDetection:0}),n})(),mb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[bt],bt]}),n})();function l4(...n){const e=P1(n),{args:t,keys:i}=MW(n),r=new nt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;xi(t[u]).subscribe(Et(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?AW(i,a):a),s.complete())}))}});return e?r.pipe(QS(e)):r}class bwe{}class Oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wwe{encodeKey(e){return c4(e)}encodeValue(e){return c4(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ewe=/%(\d[a-f0-9])/gi,Twe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function c4(n){return encodeURIComponent(n).replace(Ewe,(e,t)=>{var i;return null!==(i=Twe[t])&&void 0!==i?i:e})}function u4(n){return`${n}`}class Na{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wwe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Cwe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Na({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(u4(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(u4(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Iwe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function d4(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function h4(n){return"undefined"!=typeof Blob&&n instanceof Blob}function f4(n){return"undefined"!=typeof FormData&&n instanceof FormData}class am{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Dwe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Oa),this.context||(this.context=new Iwe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Na,this.urlWithParams=t}serializeBody(){return null===this.body?null:d4(this.body)||h4(this.body)||f4(this.body)||function Swe(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Na?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||f4(this.body)?null:h4(this.body)?this.body.type||null:d4(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Na?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new am(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var Wn=(()=>((Wn=Wn||{})[Wn.Sent=0]="Sent",Wn[Wn.UploadProgress=1]="UploadProgress",Wn[Wn.ResponseHeader=2]="ResponseHeader",Wn[Wn.DownloadProgress=3]="DownloadProgress",Wn[Wn.Response=4]="Response",Wn[Wn.User=5]="User",Wn))();class uM extends class xwe{constructor(e,t=200,i="OK"){this.headers=e.headers||new Oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new uM({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function dM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let m4=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof am)s=t;else{let l,c;l=r.headers instanceof Oa?r.headers:new Oa(r.headers),r.params&&(c=r.params instanceof Na?r.params:new Na({fromObject:r.params})),s=new am(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=J(s).pipe(bd(l=>this.handler.handle(l)));if(t instanceof am||"events"===r.observe)return o;const a=o.pipe(ct(l=>l instanceof uM));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ae(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ae(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ae(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ae(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Na).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,dM(r,i))}post(t,i,r={}){return this.request("POST",t,dM(r,i))}put(t,i,r={}){return this.request("PUT",t,dM(r,i))}}return n.\u0275fac=function(t){return new(t||n)(I(bwe))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Awe=["*"];let gb;function lm(n){var e;return(null===(e=function kwe(){if(void 0===gb&&(gb=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(gb=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return gb}())||void 0===e?void 0:e.createHTML(n))||n}function g4(n){return Error(`Unable to find icon with the name "${n}"`)}function _4(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function y4(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class dc{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let _b=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new dc(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Ye.HTML,r);if(!o)throw y4(r);const a=lm(o);return this._addSvgIconConfig(t,i,new dc("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new dc(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Ye.HTML,i);if(!s)throw y4(i);const o=lm(s);return this._addSvgIconSetConfig(t,new dc("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Ye.RESOURCE_URL,t);if(!i)throw _4(t);const r=this._cachedIconsByUrl.get(i);return r?J(yb(r)):this._loadSvgIconFromConfig(new dc(t,null)).pipe(On(s=>this._cachedIconsByUrl.set(i,s)),Ae(s=>yb(s)))}getNamedSvgIcon(t,i=""){const r=v4(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Lp(g4(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?J(yb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ae(i=>yb(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?J(r):l4(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(_o(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ye.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),J(null)})))).pipe(Ae(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw g4(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(On(i=>t.svgText=i),Ae(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?J(null):this._fetchIcon(t).pipe(On(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(lm("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(lm("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function Rwe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Ye.RESOURCE_URL,r);if(!a)throw _4(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Ae(u=>lm(u)),FW(()=>this._inProgressUrlFetches.delete(a)),N1());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(v4(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Owe(s)?new dc(s.url,null,s.options):new dc(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(I(m4,8),I(m0),I(Se,8),I(Uo))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yb(n){return n.cloneNode(!0)}function v4(n,e){return n+":"+e}function Owe(n){return!(!n.url||!n.options)}const Nwe=rm(class{constructor(n){this._elementRef=n}}),Fwe=new k("mat-icon-location",{providedIn:"root",factory:function Lwe(){const n=mg(Se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),b4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Vwe=b4.map(n=>`[${n}]`).join(", "),Bwe=/^url\(['"]?#(.*?)['"]?\)$/;let hM,Fa=(()=>{class n extends Nwe{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=et.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=dn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Vwe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)b4.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(Bwe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(un(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(_b),Ja("aria-hidden"),_(Fwe),_(Uo))},n.\u0275cmp=Te({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(at("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Xe("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[X],ngContentSelectors:Awe,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),He(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),cm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[bt],bt]}),n})(),Uwe=1;const vb={};function w4(n){return n in vb&&(delete vb[n],!0)}const Hwe={setImmediate(n){const e=Uwe++;return vb[e]=!0,hM||(hM=Promise.resolve()),hM.then(()=>w4(e)&&n()),e},clearImmediate(n){w4(n)}},{setImmediate:jwe,clearImmediate:$we}=Hwe,bb={setImmediate(...n){const{delegate:e}=bb;return((null==e?void 0:e.setImmediate)||jwe)(...n)},clearImmediate(n){const{delegate:e}=bb;return((null==e?void 0:e.clearImmediate)||$we)(n)},delegate:void 0},fM=new class Gwe extends db{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class zwe extends ub{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=bb.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(bb.clearImmediate(t),e._scheduled=void 0)}});function pM(n){return Ae(()=>n)}function C4(n,e){return e?t=>Sv(e.pipe(un(1),function Wwe(){return Vt((n,e)=>{n.subscribe(Et(e,Bm))})}()),t.pipe(C4(n))):tn((t,i)=>n(t,i).pipe(un(1),pM(t)))}function mM(n=0,e,t=Pbe){let i=-1;return null!=e&&(R1(e)?t=e:i=e),new nt(r=>{let s=function qwe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function E4(n,e=im){const t=mM(n,e);return C4(()=>t)}class gM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class _M extends gM{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class kd extends gM{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Kwe extends gM{constructor(e){super(),this.element=e instanceof ce?e.nativeElement:e}}class yM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof _M?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof kd?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Kwe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Qwe extends yM{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ot.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ywe=(()=>{class n extends kd{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(_(Jn),_(In))},n.\u0275dir=O({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[X]}),n})(),Rd=(()=>{class n extends yM{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ie,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(_(zo),_(In),_(Se))},n.\u0275dir=O({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[X]}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const Xwe=["addListener","removeListener"],Zwe=["addEventListener","removeEventListener"],Jwe=["on","off"];function Co(n,e,t,i){if(Ze(t)&&(i=t,t=void 0),i)return Co(n,e,t).pipe(QS(i));const[r,s]=function nCe(n){return Ze(n.addEventListener)&&Ze(n.removeEventListener)}(n)?Zwe.map(o=>a=>n[o](e,a,t)):function eCe(n){return Ze(n.addListener)&&Ze(n.removeListener)}(n)?Xwe.map(T4(n,e)):function tCe(n){return Ze(n.on)&&Ze(n.off)}(n)?Jwe.map(T4(n,e)):[];if(!r&&Cw(n))return tn(o=>Co(o,e,t))(xi(n));if(!r)throw new TypeError("Invalid event target");return new nt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function T4(n,e){return t=>i=>n[t](e,i)}const um={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=um;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new et(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=um;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=um;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class rCe extends db{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class iCe extends ub{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=um.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(um.cancelAnimationFrame(t),e._scheduled=void 0)}});function I4(n,e=im){return function oCe(n){return Vt((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Et(t,c=>{i=!0,r=c,s||xi(n(c)).subscribe(s=Et(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>mM(n,e))}let vM=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new nt(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(I4(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):J()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ct(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=wo(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Co(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(I(Z),I(Nn),I(Se,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bM=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ne,this._elementScrolled=new nt(o=>this.ngZone.runOutsideAngular(()=>Co(this.elementRef.nativeElement,"scroll").pipe(Ot(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=tm()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==tm()?t.left=t.right:1==tm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;Rq()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==tm()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==tm()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(vM),_(Z),_(cr,8))},n.\u0275dir=O({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Pd=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ne,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(I4(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(I(Nn),I(Z),I(Se,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})(),D4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[Jp,dm],Jp,dm]}),n})();const S4=Rq();class cCe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=hn(-this._previousScrollPosition.left),e.style.top=hn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),S4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),S4&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class uCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class x4{enable(){}disable(){}attach(){}}function wM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function M4(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class dCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();wM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let hCe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new x4,this.close=o=>new uCe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new cCe(this._viewportRuler,this._document),this.reposition=o=>new dCe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(I(vM),I(Pd),I(Z),I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CM{constructor(e){if(this.scrollStrategy=new x4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class fCe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class pCe{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new ne,this._attachments=new ne,this._detachments=new ne,this._locationChanges=et.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new ne,this._outsidePointerEvents=new ne,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(un(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=hn(this._config.width),e.height=hn(this._config.height),e.minWidth=hn(this._config.minWidth),e.minHeight=hn(this._config.minHeight),e.maxWidth=hn(this._config.maxWidth),e.maxHeight=hn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=Lq(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ot(Or(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let EM=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||qx()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),qx()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(I(Se),I(Nn))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A4="cdk-overlay-connected-position-bounding-box",mCe=/([A-Za-z%]+)$/;class gCe{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne,this._resizeSubscription=et.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(A4),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(A4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=R4(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),g=this._subtractOverflows(s.height,h,f),y=p*g;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=k4(this._overlayRef.getConfig().minHeight),a=k4(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=R4(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new fCe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=hn(i.height),r.top=hn(i.top),r.bottom=hn(i.bottom),r.width=hn(i.width),r.left=hn(i.left),r.right=hn(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=hn(s)),o&&(r.maxWidth=hn(o))}this._lastBoundingBoxSize=i,hc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){hc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();hc(i,this._getExactOverlayY(t,e,u)),hc(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=hn(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=hn(o.maxWidth):s&&(i.maxWidth="")),hc(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=hn(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=hn(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:M4(e,i),isOriginOutsideView:wM(e,i),isOverlayClipped:M4(t,i),isOverlayOutsideView:wM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Lq(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ce)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function hc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function k4(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(mCe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function R4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const P4="cdk-global-overlay-wrapper";class _Ce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(P4),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(P4),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let yCe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new _Ce}flexibleConnectedTo(t){return new gCe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(I(Pd),I(Se),I(Nn),I(EM))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O4=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(I(Se))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vCe=(()=>{class n extends O4{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(I(Se),I(Z,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bCe=(()=>{class n extends O4{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=cc(s)},this._clickListener=s=>{const o=cc(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(I(Se),I(Nn),I(Z,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wCe=0,Od=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new CM(t);return o.direction=o.direction||this._directionality.value,new pCe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+wCe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Qg)),new Qwe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(I(hCe),I(EM),I(zo),I(yCe),I(vCe),I(ot),I(Z),I(Se),I(cr),I(al),I(bCe))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const TCe={provide:new k("cdk-connected-overlay-scroll-strategy"),deps:[Od],useFactory:function ECe(n){return()=>n.scrollStrategies.reposition()}};let N4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[Od,TCe],imports:[[Jp,wb,D4],D4]}),n})();const ICe=["mat-menu-item",""];function DCe(n,e){1&n&&(function cO(){de.lFrame.currentNamespace="svg"}(),C(0,"svg",2),z(1,"polygon",3),E())}const F4=["*"];function SCe(n,e){if(1&n){const t=En();C(0,"div",0),Q("keydown",function(r){return st(t),De()._handleKeydown(r)})("click",function(){return st(t),De().closed.emit("click")})("@transformMenu.start",function(r){return st(t),De()._onAnimationStart(r)})("@transformMenu.done",function(r){return st(t),De()._onAnimationDone(r)}),C(1,"div",1),He(2),E()()}if(2&n){const t=De();V("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),at("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Cb={transformMenu:Aa("transformMenu",[Ui("void",Pt({opacity:0,transform:"scale(0.8)"})),or("void => enter",sr("120ms cubic-bezier(0, 0, 0.2, 1)",Pt({opacity:1,transform:"scale(1)"}))),or("* => void",sr("100ms 25ms linear",Pt({opacity:0})))]),fadeInItems:Aa("fadeInItems",[Ui("showing",Pt({opacity:1})),or("void => *",[Pt({opacity:0}),sr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},xCe=new k("MatMenuContent"),TM=new k("MAT_MENU_PANEL"),MCe=sM(pb(class{}));let hm=(()=>{class n extends MCe{constructor(t,i,r,s,o){var a;super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new ne,this._focused=new ne,this._highlighted=!1,this._triggersSubmenu=!1,null===(a=null==s?void 0:s.addItem)||void 0===a||a.call(s,this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var i;this._highlighted=t,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Se),_(uc),_(TM,8),_(Qt))},n.\u0275cmp=Te({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&Q("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(at("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),Xe("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[X],attrs:ICe,ngContentSelectors:F4,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(Tn(),He(0),z(1,"div",0),be(2,DCe,2,0,"svg",1)),2&t&&(P(1),V("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),P(1),V("ngIf",i._triggersSubmenu))},directives:[om,wr],encapsulation:2,changeDetection:0}),n})();const L4=new k("mat-menu-default-options",{providedIn:"root",factory:function ACe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let kCe=0,fm=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Wo,this._tabSubscription=et.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new ne,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new ie,this.close=this.closed,this.panelId="mat-menu-panel-"+kCe++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=dn(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=dn(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new jq(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),Ps(t=>Or(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const s=t.toArray(),o=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[o]&&!s[o].disabled?r.setActiveItem(o):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),Ps(i=>Or(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:Md(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(un(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){var r;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===i,s["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Bi(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Z),_(L4),_(Qt))},n.\u0275dir=O({type:n,contentQueries:function(t,i,r){if(1&t&&(It(r,xCe,5),It(r,hm,5),It(r,hm,4)),2&t){let s;fe(s=pe())&&(i.lazyContent=s.first),fe(s=pe())&&(i._allItems=s),fe(s=pe())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&jt(Jn,5),2&t){let r;fe(r=pe())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),V4=(()=>{class n extends fm{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Z),_(L4),_(Qt))},n.\u0275cmp=Te({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&at("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[je([{provide:TM,useExisting:n}]),X],ngContentSelectors:F4,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(Tn(),be(0,SCe,3,6,"ng-template"))},directives:[Eu],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Cb.transformMenu,Cb.fadeInItems]},changeDetection:0}),n})();const B4=new k("mat-menu-scroll-strategy"),PCe={provide:B4,deps:[Od],useFactory:function RCe(n){return()=>n.scrollStrategies.reposition()}},H4=xd({passive:!0});let OCe=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=et.EMPTY,this._hoverSubscription=et.EMPTY,this._menuCloseSubscription=et.EMPTY,this._handleTouchStart=d=>{iM(d)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new ie,this.onMenuOpen=this.menuOpened,this.menuClosed=new ie,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof fm?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,H4),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,H4),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),i=t.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof fm&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Ot(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof fm?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(ct(r=>"void"===r.toState),un(1),Ot(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,i=this.menu.parentMenu;for(;i;)t++,i=i.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new CM({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,s)):this.menu.setPositionClasses(r,s)})}_setPosition(t){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,o]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[a,l]=[s,o],[c,u]=[i,r],d=0;this.triggersSubmenu()?(u=i="before"===this.menu.xPosition?"start":"end",r=c="end"===i?"start":"end",d="bottom"===s?8:-8):this.menu.overlapTrigger||(a="top"===s?"bottom":"top",l="top"===o?"bottom":"top"),t.withPositions([{originX:i,originY:a,overlayX:c,overlayY:s,offsetY:d},{originX:r,originY:a,overlayX:u,overlayY:s,offsetY:d},{originX:i,originY:l,overlayX:c,overlayY:o,offsetY:-d},{originX:r,originY:l,overlayX:u,overlayY:o,offsetY:-d}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return Or(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:J(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(ct(o=>o!==this._menuItemInstance),ct(()=>this._menuOpen)):J(),i)}_handleMousedown(t){nM(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(ct(t=>t===this._menuItemInstance&&!t.disabled),E4(0,fM)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof fm&&this.menu._isAnimating?this.menu._animationDone.pipe(un(1),E4(0,fM),Ot(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new kd(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(_(Od),_(ce),_(In),_(B4),_(TM,8),_(hm,10),_(cr,8),_(uc),_(Z))},n.\u0275dir=O({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,i){1&t&&Q("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&at("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),j4=(()=>{class n extends OCe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Cn(n)))(i||n)}}(),n.\u0275dir=O({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[X]}),n})(),Eb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[PCe],imports:[[gs,bt,aM,N4],dm,bt]}),n})();const NCe=["mat-button",""],FCe=["*"],VCe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],BCe=rm(pb(sM(class{constructor(n){this._elementRef=n}})));let Vs=(()=>{class n extends BCe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of VCe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(uc),_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&jt(om,5),2&t){let r;fe(r=pe())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(at("disabled",i.disabled||null),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[X],attrs:NCe,ngContentSelectors:FCe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Tn(),C(0,"span",0),He(1),E(),z(2,"span",1)(3,"span",2)),2&t&&(P(2),Xe("mat-button-ripple-round",i.isRoundButton||i.isIconButton),V("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[om],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),pm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[aM,bt],bt]}),n})();function UCe(n,e){if(1&n&&z(0,"img",13),2&n){const t=De();$o("src",t.post_details.url,ui),pu("alt","post_details by ",t.post_details.username,"")}}function HCe(n,e){1&n&&z(0,"video",14),2&n&&$o("src",De().post_details.url,ui)}let jCe=(()=>{class n{constructor(t,i,r){this.postserv=t,this.postprofserv=i,this.router=r}ngOnInit(){this.post_details=this.postprofserv.post_details}ondel(t,i){confirm("You Sure ? ").valueOf()&&this.postserv.delete_post(t,i)}}return n.\u0275fac=function(t){return new(t||n)(_(Qp),_(V3),_(Rt))},n.\u0275cmp=Te({type:n,selectors:[["app-post-view"]],decls:41,vars:6,consts:[[1,"hero"],[1,"cube"],[1,"maindiv"],[1,"example-card"],[1,"example-spacer"],[2,"float","right"],[3,"matMenuTriggerFor"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-button",""],["yPosition","above","xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){if(1&t&&(C(0,"body")(1,"div",0),z(2,"div",1)(3,"div",1)(4,"div",1)(5,"div",1)(6,"div",1)(7,"div",1)(8,"div",1)(9,"div",1)(10,"div",1)(11,"div",1)(12,"div",1),C(13,"div",2)(14,"mat-card",3)(15,"mat-card-header")(16,"mat-card-title"),F(17),E(),z(18,"span",4),C(19,"div",5)(20,"mat-icon",6),F(21,"menu"),E()(),z(22,"mat-card-subtitle"),E(),be(23,UCe,1,2,"img",7),be(24,HCe,1,1,"video",8),C(25,"mat-card-content")(26,"b"),F(27),E(),F(28),E(),C(29,"mat-card-actions")(30,"button",9),F(31,"LIKE"),E(),C(32,"button",9),F(33,"SHARE"),E()()()()()(),C(34,"mat-menu",10,11)(36,"button",12),Q("click",function(){return i.ondel(i.post_details.keymail,i.post_details.name)}),C(37,"mat-icon"),F(38,"delete"),E(),C(39,"span"),F(40,"Delete"),E()()()),2&t){const r=mt(35);P(17),hi("",i.post_details.username," "),P(3),V("matMenuTriggerFor",r),P(3),V("ngIf","image"===i.post_details.fileType),P(1),V("ngIf","video"===i.post_details.fileType),P(3),ps(i.post_details.username),P(1),hi(" \xa0 \xa0 ",i.post_details.caption," ")}},directives:[cM,a4,r4,Fa,j4,s4,wr,lM,n4,o4,Vs,V4,hm],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#e4e4e4;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain}mat-card-content[_ngcontent-%COMP%]{font-size:large}.avataricon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px;border-radius:30px}.caption[_ngcontent-%COMP%]{font-size:large;word-wrap:break-word;width:300px}mat-card[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:auto;background:whitesmoke}mat-expansion-panel[_ngcontent-%COMP%]{background:whitesmoke}mat-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #8f4a78}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}.maindiv[_ngcontent-%COMP%]{background-color:#b885fa;display:flex;justify-content:center}.hero[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]{background-color:#b885fa;position:relative;height:90%;overflow-y:scroll;overflow-x:hidden;font-family:Montserrat,sans-serif}.hero__title[_ngcontent-%COMP%]{color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:50px;z-index:1}.cube[_ngcontent-%COMP%]{position:absolute;top:80vh;left:45vw;width:10px;height:10px;border:double 1px #f88df8;border-radius:80px;transform-origin:top left;transform:scale(0) rotate(0) translate(-50%,-50%);animation:cube 12s ease-in forwards infinite}.cube[_ngcontent-%COMP%]:nth-child(2n){border-color:#47059e}.cube[_ngcontent-%COMP%]:nth-child(2){animation-delay:0s;left:25vw;top:40vh;border-color:#ff0}.cube[_ngcontent-%COMP%]:nth-child(3){animation-delay:1s;left:75vw;top:50vh}.cube[_ngcontent-%COMP%]:nth-child(4){animation-delay:3s;left:90vw;top:10vh}.cube[_ngcontent-%COMP%]:nth-child(5){animation-delay:5s;left:10vw;top:85vh}.cube[_ngcontent-%COMP%]:nth-child(6){animation-delay:7s;left:50vw;top:10vh}@keyframes cube{0%{transform:scale(0) rotate(0) translate(-50%,-50%);opacity:1}to{transform:scale(20) rotate(960deg) translate(-50%,-50%);opacity:0}}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();function $Ce(n,e){}class IM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const zCe={dialogContainer:Aa("dialogContainer",[Ui("void, exit",Pt({opacity:0,transform:"scale(0.7)"})),Ui("enter",Pt({transform:"none"})),or("* => enter",U3([sr("150ms cubic-bezier(0, 0, 0.2, 1)",Pt({transform:"none",opacity:1})),$3("@*",j3(),{optional:!0})])),or("* => void, * => exit",U3([sr("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Pt({opacity:0})),$3("@*",j3(),{optional:!0})]))])};let GCe=(()=>{class n extends yM{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new ie,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Wx())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=Wx(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Wx();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Gq),_(Qt),_(Se,8),_(IM),_(tM),_(Z),_(uc))},n.\u0275dir=O({type:n,viewQuery:function(t,i){if(1&t&&jt(Rd,7),2&t){let r;fe(r=pe())&&(i._portalOutlet=r.first)}},features:[X]}),n})(),WCe=(()=>{class n extends GCe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Cn(n)))(i||n)}}(),n.\u0275cmp=Te({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&Og("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(Mh("id",i._id),at("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Lg("@dialogContainer",i._state))},features:[X],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&be(0,$Ce,0,0,"ng-template",0)},directives:[Rd],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[zCe.dialogContainer]}}),n})(),qCe=0;class mm{constructor(e,t,i="mat-dialog-"+qCe++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ne,this._afterClosed=new ne,this._beforeClosed=new ne,this._state=0,t._id=i,t._animationStateChanged.pipe(ct(r=>"opened"===r.state),un(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(ct(r=>"closed"===r.state),un(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(ct(r=>27===r.keyCode&&!this.disableClose&&!Md(r))).subscribe(r=>{r.preventDefault(),DM(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():DM(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ct(t=>"closing"===t.state),un(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function DM(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const $4=new k("MatDialogData"),KCe=new k("mat-dialog-default-options"),z4=new k("mat-dialog-scroll-strategy"),YCe={provide:z4,deps:[Od],useFactory:function QCe(n){return()=>n.scrollStrategies.block()}};let XCe=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._ariaHiddenElements=new Map,this.afterAllClosed=YS(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bi(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function ZCe(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new IM),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new CM({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=ot.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:IM,useValue:i}]}),o=new _M(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof Jn)i.attachTemplatePortal(new kd(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new _M(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(cr,null,ue.Optional))&&o.push({provide:cr,useValue:{value:t.direction,change:J()}}),ot.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Pg()},n.\u0275dir=O({type:n}),n})(),Nd=(()=>{class n extends XCe{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,mm,WCe,$4,c)}}return n.\u0275fac=function(t){return new(t||n)(I(Od),I(ot),I(al,8),I(KCe,8),I(z4),I(n,12),I(EM),I(ri,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),JCe=0,eEe=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=G4(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){DM(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(_(mm,8),_(ce),_(Nd))},n.\u0275dir=O({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&Q("click",function(s){return i._onButtonClick(s)}),2&t&&at("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Kt]}),n})(),tEe=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+JCe++}ngOnInit(){this._dialogRef||(this._dialogRef=G4(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(_(mm,8),_(ce),_(Nd))},n.\u0275dir=O({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&Mh("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),nEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),iEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function G4(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let SM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[Nd,YCe],imports:[[N4,wb,bt],bt]}),n})();const rEe=["connectionContainer"],sEe=["inputContainer"],oEe=["label"];function aEe(n,e){1&n&&(Ih(0),C(1,"div",14),z(2,"div",15)(3,"div",16)(4,"div",17),E(),C(5,"div",18),z(6,"div",15)(7,"div",16)(8,"div",17),E(),Dh())}function lEe(n,e){if(1&n){const t=En();C(0,"div",19),Q("cdkObserveContent",function(){return st(t),De().updateOutlineGap()}),He(1,1),E()}2&n&&V("cdkObserveContentDisabled","outline"!=De().appearance)}function cEe(n,e){if(1&n&&(Ih(0),He(1,2),C(2,"span"),F(3),E(),Dh()),2&n){const t=De(2);P(3),ps(t._control.placeholder)}}function uEe(n,e){1&n&&He(0,3,["*ngSwitchCase","true"])}function dEe(n,e){1&n&&(C(0,"span",23),F(1," *"),E())}function hEe(n,e){if(1&n){const t=En();C(0,"label",20,21),Q("cdkObserveContent",function(){return st(t),De().updateOutlineGap()}),be(2,cEe,4,1,"ng-container",12),be(3,uEe,1,0,"ng-content",12),be(4,dEe,2,0,"span",22),E()}if(2&n){const t=De();Xe("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),V("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),at("for",t._control.id)("aria-owns",t._control.id),P(2),V("ngSwitchCase",!1),P(1),V("ngSwitchCase",!0),P(1),V("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function fEe(n,e){1&n&&(C(0,"div",24),He(1,4),E())}function pEe(n,e){if(1&n&&(C(0,"div",25),z(1,"span",26),E()),2&n){const t=De();P(1),Xe("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function mEe(n,e){1&n&&(C(0,"div"),He(1,5),E()),2&n&&V("@transitionMessages",De()._subscriptAnimationState)}function gEe(n,e){if(1&n&&(C(0,"div",30),F(1),E()),2&n){const t=De(2);V("id",t._hintLabelId),P(1),ps(t.hintLabel)}}function _Ee(n,e){if(1&n&&(C(0,"div",27),be(1,gEe,2,2,"div",28),He(2,6),z(3,"div",29),He(4,7),E()),2&n){const t=De();V("@transitionMessages",t._subscriptAnimationState),P(1),V("ngIf",t.hintLabel)}}const yEe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],vEe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],bEe=new k("MatError"),wEe={transitionMessages:Aa("transitionMessages",[Ui("enter",Pt({opacity:1,transform:"translateY(0%)"})),or("void => enter",[Pt({opacity:0,transform:"translateY(-5px)"}),sr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let xM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n}),n})();const CEe=new k("MatHint");let Tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-label"]]}),n})(),EEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-placeholder"]]}),n})();const TEe=new k("MatPrefix"),IEe=new k("MatSuffix");let W4=0;const SEe=rm(class{constructor(n){this._elementRef=n}},"primary"),xEe=new k("MAT_FORM_FIELD_DEFAULT_OPTIONS"),K4=new k("MatFormField");let Q4=(()=>{class n extends SEe{constructor(t,i,r,s,o,a,l){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ne,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+W4++,this._labelId="mat-form-field-label-"+W4++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=dn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Bi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ot(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ot(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Or(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Bi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Bi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ot(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Co(this._label.nativeElement,"transitionend").pipe(un(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const u=i.querySelectorAll(`${r}, ${s}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(r),c=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const u=i.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),h=t.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let g=0;g<h.length;g++)p+=h[g].offsetWidth;o=Math.abs(f-d)-5,a=p>0?.75*p+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${o}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(cr,8),_(xEe,8),_(Nn),_(Z),_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(It(r,xM,5),It(r,xM,7),It(r,Tb,5),It(r,Tb,7),It(r,EEe,5),It(r,bEe,5),It(r,CEe,5),It(r,TEe,5),It(r,IEe,5)),2&t){let s;fe(s=pe())&&(i._controlNonStatic=s.first),fe(s=pe())&&(i._controlStatic=s.first),fe(s=pe())&&(i._labelChildNonStatic=s.first),fe(s=pe())&&(i._labelChildStatic=s.first),fe(s=pe())&&(i._placeholderChild=s.first),fe(s=pe())&&(i._errorChildren=s),fe(s=pe())&&(i._hintChildren=s),fe(s=pe())&&(i._prefixChildren=s),fe(s=pe())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(jt(rEe,7),jt(sEe,5),jt(oEe,5)),2&t){let r;fe(r=pe())&&(i._connectionContainerRef=r.first),fe(r=pe())&&(i._inputContainerRef=r.first),fe(r=pe())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&Xe("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[je([{provide:K4,useExisting:n}]),X],ngContentSelectors:vEe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(Tn(yEe),C(0,"div",0)(1,"div",1,2),Q("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),be(3,aEe,9,0,"ng-container",3),be(4,lEe,2,1,"div",4),C(5,"div",5,6),He(7),C(8,"span",7),be(9,hEe,5,16,"label",8),E()(),be(10,fEe,2,0,"div",9),E(),be(11,pEe,2,4,"div",10),C(12,"div",11),be(13,mEe,2,1,"div",12),be(14,_Ee,5,2,"div",13),E()()),2&t&&(P(3),V("ngIf","outline"==i.appearance),P(1),V("ngIf",i._prefixChildren.length),P(5),V("ngIf",i._hasFloatingLabel()),P(1),V("ngIf",i._suffixChildren.length),P(1),V("ngIf","outline"!=i.appearance),P(1),V("ngSwitch",i._getDisplayedMessages()),P(1),V("ngSwitchCase","error"),P(1),V("ngSwitchCase","hint"))},directives:[wr,Bq,c_,xB],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[wEe.transitionMessages]},changeDetection:0}),n})(),Ib=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,bt,eM],bt]}),n})();function La(n){return null==n||0===n.length}function Z4(n){return null!=n&&"number"==typeof n.length}const si=new k("NgValidators"),Va=new k("NgAsyncValidators"),PEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class OEe{static min(e){return function J4(n){return e=>{if(La(e.value)||La(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function e5(n){return e=>{if(La(e.value)||La(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function t5(n){return La(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function n5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function r5(n){return La(n.value)||PEe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function s5(n){return e=>La(e.value)||!Z4(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function o5(n){return e=>Z4(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function a5(n){if(!n)return Db;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(La(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return f5(e)}static composeAsync(e){return p5(e)}}function Db(n){return null}function l5(n){return null!=n}function c5(n){const e=Sh(n)?Bn(n):n;return hE(e),e}function u5(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function d5(n,e){return e.map(t=>t(n))}function h5(n){return n.map(e=>function NEe(n){return!n.validate}(e)?e:t=>e.validate(t))}function f5(n){if(!n)return null;const e=n.filter(l5);return 0==e.length?null:function(t){return u5(d5(t,e))}}function AM(n){return null!=n?f5(h5(n)):null}function p5(n){if(!n)return null;const e=n.filter(l5);return 0==e.length?null:function(t){return l4(d5(t,e).map(c5)).pipe(Ae(u5))}}function kM(n){return null!=n?p5(h5(n)):null}function m5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function g5(n){return n._rawValidators}function _5(n){return n._rawAsyncValidators}function RM(n){return n?Array.isArray(n)?n:[n]:[]}function Sb(n,e){return Array.isArray(n)?n.includes(e):n===e}function y5(n,e){const t=RM(e);return RM(n).forEach(r=>{Sb(t,r)||t.push(r)}),t}function v5(n,e){return RM(e).filter(t=>!Sb(n,t))}class b5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Eo extends b5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ei extends b5{get formDirective(){return null}get path(){return null}}function gm(n,e){NM(n,e),e.valueAccessor.writeValue(n.value),function GEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&E5(n,e)})}(n,e),function qEe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function WEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&E5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zEe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ab(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Rb(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NM(n,e){const t=g5(n);null!==e.validator?n.setValidators(m5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=_5(n);null!==e.asyncValidator?n.setAsyncValidators(m5(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();kb(e._rawValidators,r),kb(e._rawAsyncValidators,r)}function Rb(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=g5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=_5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return kb(e._rawValidators,i),kb(e._rawAsyncValidators,i),t}function E5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function T5(n,e){NM(n,e)}function D5(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function VM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _m="VALID",Pb="INVALID",Fd="PENDING",ym="DISABLED";function UM(n){return(Ob(n)?n.validators:n)||null}function S5(n){return Array.isArray(n)?AM(n):n||null}function HM(n,e){return(Ob(e)?e.asyncValidators:n)||null}function x5(n){return Array.isArray(n)?kM(n):n||null}function Ob(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const M5=n=>n instanceof P5,jM=n=>n instanceof zM;function A5(n){return M5(n)?n.value:n.getRawValue()}function k5(n,e){const t=jM(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new W(1e3,"");if(!i[e])throw new W(1001,"")}function R5(n,e){jM(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new W(1002,"")})}class $M{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=S5(this._rawValidators),this._composedAsyncValidatorFn=x5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_m}get invalid(){return this.status===Pb}get pending(){return this.status==Fd}get disabled(){return this.status===ym}get enabled(){return this.status!==ym}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=S5(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=x5(e)}addValidators(e){this.setValidators(y5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(y5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(v5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(v5(e,this._rawAsyncValidators))}hasValidator(e){return Sb(this._rawValidators,e)}hasAsyncValidator(e){return Sb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ym,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_m,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_m||this.status===Fd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ym:_m}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fd,this._hasOwnPendingAsyncValidator=!0;const t=c5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function XEe(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=jM(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof JEe)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ie,this.statusChanges=new ie}_calculateStatus(){return this._allControlsDisabled()?ym:this.errors?Pb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fd)?Fd:this._anyControlsHaveStatus(Pb)?Pb:_m}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ob(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class P5 extends $M{constructor(e=null,t,i){super(UM(t),HM(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ob(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class zM extends $M{constructor(e,t,i){super(UM(t),HM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){R5(this,e),Object.keys(e).forEach(i=>{k5(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=A5(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class JEe extends $M{constructor(e,t,i){super(UM(t),HM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){R5(this,e),e.forEach((i,r)=>{k5(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>A5(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const e0e={provide:Ei,useExisting:it(()=>Nb)},vm=(()=>Promise.resolve(null))();let Nb=(()=>{class n extends Ei{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ie,this.form=new zM({},AM(t),kM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vm.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),gm(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vm.then(()=>{const i=this._findContainer(t.path),r=new zM({});T5(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){vm.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,D5(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(_(si,10),_(Va,10))},n.\u0275dir=O({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&Q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([e0e]),X]}),n})();const u0e={provide:Ei,useExisting:it(()=>Fb)};let Fb=(()=>{class n extends Ei{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ie,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return gm(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ab(t.control||null,t,!1),VM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,D5(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ab(i||null,t),M5(r)&&(gm(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);T5(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function KEe(n,e){return Rb(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){NM(this.form,this),this._oldForm&&Rb(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(_(si,10),_(Va,10))},n.\u0275dir=O({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&Q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([u0e]),X,Kt]}),n})();const n8=xd({passive:!0});let M0e=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return hr;const i=wo(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new ne,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,n8),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,n8)}}),s}stopMonitoring(t){const i=wo(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(I(Nn),I(Z))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),i8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const A0e=new k("MAT_INPUT_VALUE_ACCESSOR"),k0e=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let R0e=0;const P0e=awe(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let r8=(()=>{class n extends P0e{constructor(t,i,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+R0e++,this.focused=!1,this.stateChanges=new ne,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>kq().has(p)),this._iOSKeyupListener=p=>{const g=p.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=dn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(OEe.required))&&void 0!==s&&s}set required(t){this._required=dn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&kq().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=dn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){k0e.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Nn),_(Eo,10),_(Nb,8),_(Fb,8),_(Xq),_(A0e,10),_(M0e),_(Z),_(K4,8))},n.\u0275dir=O({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&Q("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(Mh("disabled",i.disabled)("required",i.required),at("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),Xe("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[je([{provide:xM,useExisting:n}]),X,Kt]}),n})(),s8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[Xq],imports:[[i8,Ib,bt],i8,Ib]}),n})(),O0e=(()=>{class n{constructor(t,i,r,s){this.dialogRef=t,this.data=i,this.udserv=r,this.postTask=s,this.profile_pic_url="/assets/images/prj_logo_colour.png",this.app=Er(_i_firebase)}ngOnInit(){this.userdata=this.data}onSelectFile(t){const i=t.target.files[0];if(i){var r=new FileReader;r.readAsDataURL(i),r.onload=s=>{this.profile_pic_url=s.target.result},this.profile_pic=i}}edit_user_details(t,i,r){this.postTask.save_profile_pic(this.profile_pic),this.userdata.name=t,this.userdata.username=i,this.userdata.bio=r,this.udserv.set_after_edit(this.userdata.email,this.udserv.username,this.userdata)}}return n.\u0275fac=function(t){return new(t||n)(_(mm),_($4),_(Fs),_(Qp))},n.\u0275cmp=Te({type:n,selectors:[["app-EditProfileDialog"]],decls:37,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content","","align","center"],["alt","Profile Picture","height","100px","width","100px",3,"src"],["mat-raised-button","","color","primary",1,"profile_pic_button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input_file_button",3,"change"],["appearance","fill"],["matInput","",3,"value"],["fullName",""],["username",""],["bio",""],["mat-dialog-actions","","align","center"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"div")(1,"h1",0),F(2,"User Details"),E(),C(3,"div",1),z(4,"img",2)(5,"br")(6,"br"),C(7,"button",3)(8,"label",4),F(9," Select Pic "),C(10,"input",5),Q("change",function(o){return i.onSelectFile(o)}),E()()(),z(11,"br")(12,"br"),C(13,"mat-form-field",6)(14,"mat-label"),F(15,"Full Name"),E(),z(16,"input",7,8),E(),z(18,"br"),C(19,"mat-form-field",6)(20,"mat-label"),F(21,"Full Name"),E(),z(22,"input",7,9),E(),z(24,"br"),C(25,"mat-form-field",6)(26,"mat-label"),F(27,"Textarea"),E(),z(28,"textarea",7,10),E(),z(30,"br")(31,"br"),E(),C(32,"div",11)(33,"button",12),F(34,"Cancel"),E(),C(35,"button",13),Q("click",function(){st(r);const o=mt(17),a=mt(23),l=mt(29);return i.edit_user_details(o.value,a.value,l.value)}),F(36,"Save"),E()()()}2&t&&(P(4),V("src",i.profile_pic_url,ui),P(12),V("value",i.userdata.name),P(6),V("value",i.userdata.username),P(6),V("value",i.userdata.bio))},directives:[tEe,nEe,Vs,Q4,Tb,r8,iEe,eEe],styles:["img[_ngcontent-%COMP%]{border-radius:100%}.profile_pic_button[_ngcontent-%COMP%]{cursor:pointer;text-align:center}.input_file_button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}"]}),n})();const o8=["*"],N0e=["content"];function F0e(n,e){if(1&n){const t=En();C(0,"div",2),Q("click",function(){return st(t),De()._onBackdropClicked()}),E()}2&n&&Xe("mat-drawer-shown",De()._isShowingBackdrop())}function L0e(n,e){1&n&&(C(0,"mat-drawer-content"),He(1,2),E())}const V0e=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],B0e=["mat-drawer","mat-drawer-content","*"],U0e={transformDrawer:Aa("transform",[Ui("open, open-instant",Pt({transform:"none",visibility:"visible"})),Ui("void",Pt({"box-shadow":"none",visibility:"hidden"})),or("void => open-instant",sr("0ms")),or("void <=> open, open-instant => void",sr("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},H0e=new k("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function j0e(){return!1}}),a8=new k("MAT_DRAWER_CONTAINER");let YM=(()=>{class n extends bM{constructor(t,i,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(_(Qt),_(it(()=>Vb)),_(ce),_(vM),_(Z))},n.\u0275cmp=Te({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&Ng("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[je([{provide:bM,useExisting:n}]),X],ngContentSelectors:o8,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),He(0))},encapsulation:2,changeDetection:0}),n})(),Lb=(()=>{class n{constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ne,this._animationEnd=new ne,this._animationState="void",this.openedChange=new ie(!0),this._openedStream=this.openedChange.pipe(ct(u=>u),Ae(()=>{})),this.openedStart=this._animationStarted.pipe(ct(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),pM(void 0)),this._closedStream=this.openedChange.pipe(ct(u=>!u),Ae(()=>{})),this.closedStart=this._animationStarted.pipe(ct(u=>u.fromState!==u.toState&&"void"===u.toState),pM(void 0)),this._destroyed=new ne,this.onPositionChanged=new ie,this._modeChanged=new ne,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Co(this._elementRef.nativeElement,"keydown").pipe(ct(u=>27===u.keyCode&&!this.disableClose&&!Md(u)),Ot(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(hb((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=dn(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=dn(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(dn(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(un(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Gq),_(uc),_(Nn),_(Z),_(tM),_(Se,8),_(a8,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&jt(N0e,5),2&t){let r;fe(r=pe())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&Og("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(at("align",null),Lg("@transform",i._animationState),Xe("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:o8,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Tn(),C(0,"div",0,1),He(2),E())},directives:[bM],encapsulation:2,data:{animation:[U0e.transformDrawer]},changeDetection:0}),n})(),Vb=(()=>{class n{constructor(t,i,r,s,o,a=!1,l){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Wo,this.backdropClick=new ie,this._destroyed=new ne,this._doCheckSubject=new ne,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ne,t&&t.change.pipe(Ot(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Ot(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=dn(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:dn(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Bi(this._allDrawers),Ot(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Bi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Jx(10),Ot(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(ct(i=>i.fromState!==i.toState),Ot(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Ot(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Ot(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(un(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ot(Or(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(_(cr,8),_(ce),_(Z),_(Qt),_(Pd),_(H0e),_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(It(r,YM,5),It(r,Lb,5)),2&t){let s;fe(s=pe())&&(i._content=s.first),fe(s=pe())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&jt(YM,5),2&t){let r;fe(r=pe())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[je([{provide:a8,useExisting:n}])],ngContentSelectors:B0e,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Tn(V0e),be(0,F0e,1,2,"div",0),He(1),He(2,1),be(3,L0e,2,0,"mat-drawer-content",1)),2&t&&(V("ngIf",i.hasBackdrop),P(3),V("ngIf",!i._content))},directives:[YM,wr],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),Bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,bt,dm],dm,bt]}),n})();const l8=["*"];class z0e{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new G0e(this.rowIndex,t)}_findMatchingGap(e){let t=-1,i=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(i=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)))}while(i-t<e||0==i);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}}class G0e{constructor(e,t){this.row=e,this.col=t}}const c8=new k("MAT_GRID_LIST");let u8=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(Pa(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(Pa(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(c8,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,i){2&t&&at("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:l8,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,i){1&t&&(Tn(),C(0,"div",0),He(1),E())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})();const W0e=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class XM{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=d8(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":mc(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",mc(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class q0e extends XM{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=d8(this.fixedRowHeight),W0e.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",mc(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",mc(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class K0e extends XM{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){this.baseTileHeight=this.getBaseTileSize(i/this.rowHeightRatio,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",mc(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",mc(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class Q0e extends XM{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",mc(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function mc(n){return`calc(${n})`}function d8(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let X0e=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(Pa(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const i=`${null==t?"":t}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new Q0e:t&&t.indexOf(":")>-1?new K0e(t):new q0e(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new z0e);const t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(cr,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,i,r){if(1&t&&It(r,u8,5),2&t){let s;fe(s=pe())&&(i._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,i){2&t&&at("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[je([{provide:c8,useExisting:n}])],ngContentSelectors:l8,decls:2,vars:0,template:function(t,i){1&t&&(Tn(),C(0,"div"),He(1),E())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),Z0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[Zq,bt],Zq,bt]}),n})();function J0e(n,e){if(1&n&&z(0,"img",3),2&n){const t=De();$o("src",t.post_details.url,ui),pu("alt","post_details by ",t.post_details.username,"")}}function eTe(n,e){1&n&&z(0,"video",4),2&n&&$o("src",De().post_details.url,ui)}let tTe=(()=>{class n{constructor(t,i){this.router=t,this.profserv=i}ngOnInit(){}sendtoview(){this.profserv.post_details=this.post_details,this.router.navigate(["ViewPost"])}}return n.\u0275fac=function(t){return new(t||n)(_(Rt),_(V3))},n.\u0275cmp=Te({type:n,selectors:[["app-post-thumbnail"]],inputs:{post_details:"post_details"},decls:3,vars:2,consts:[[3,"click"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){1&t&&(C(0,"div",0),Q("click",function(){return i.sendtoview()}),be(1,J0e,1,2,"img",1),be(2,eTe,1,1,"video",2),E()),2&t&&(P(1),V("ngIf","image"===i.post_details.fileType),P(1),V("ngIf","video"===i.post_details.fileType))},directives:[wr,lM],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#faebd7;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain}div[_ngcontent-%COMP%]:hover{box-shadow:5px 15px 10px #888}"]}),n})();function nTe(n,e){if(1&n&&(C(0,"mat-grid-tile"),z(1,"app-post-thumbnail",2),E()),2&n){const t=e.$implicit;P(1),V("post_details",t)}}let iTe=(()=>{class n{constructor(){this.fb_db=Tr.firestore()}ngOnInit(){this.user_posts()}user_posts(){var t=this;return m(function*(){t.post_list=[],(yield t.fb_db.collection("posts_metadata").get()).forEach(s=>{s.data().keymail==t.keymail&&t.post_list.push(s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Te({type:n,selectors:[["app-post_grid"]],inputs:{keymail:"keymail"},decls:2,vars:1,consts:[["cols","3","rowHeight","2:1"],[4,"ngFor","ngForOf"],[3,"post_details"]],template:function(t,i){1&t&&(C(0,"mat-grid-list",0),be(1,nTe,2,1,"mat-grid-tile",1),E()),2&t&&(P(1),V("ngForOf",i.post_list))},directives:[X0e,ll,u8,tTe],styles:["mat-grid-list[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})(),rTe=(()=>{class n{constructor(t,i,r,s,o){this.dialog=t,this.router=i,this.user_data_service=r,this.location=s,this.postTask=o,this.profile_pic_url="/assets/images/prj_logo_colour.png",this.showFiller=!1,this.fbapp=Tr.initializeApp(_i_firebase),this.fb_db=Tr.firestore(),this.keymail=this.user_data_service.email.replace(".","")}ngOnInit(){""==this.keymail&&(alert("Must be logged in to view profile"),this.router.navigateByUrl("/home"));let t=this.user_data_service.fetch_userdata_with_keymail(this.keymail);console.log("ngOnInit():",t),this.fullName=t.name,this.userName=t.username,this.bio=t.bio,this.fetch_profile_pic()}ngOnChanges(){console.log("Yo")}Refresh_profile_data(){let t=this.user_data_service.updatedData;console.log("ProfileData",t),this.fullName=t.name,this.userName=t.username,this.bio=t.bio,this.fetch_profile_pic()}openDialog(){this.dialog.open(O0e,{width:"40%",height:"70%",data:this.user_data_service.fetch_userdata_with_keymail(this.keymail)})}go_to_Add_Post(){this.router.navigate(["/add-post"])}go_back(){this.location.back()}fetch_profile_pic(){x_(rf(sf(),"profile_pic/"+this.keymail+"/"+this.keymail)).then(i=>{this.profile_pic_url=i}).catch(i=>{console.log("Error while loading profile pic:",i)})}}return n.\u0275fac=function(t){return new(t||n)(_(Nd),_(Rt),_(Fs),_(al),_(Qp))},n.\u0275cmp=Te({type:n,selectors:[["app-profile"]],features:[Kt],decls:48,vars:6,consts:[[1,"example-container"],["mode","side",1,"example-sidenav"],["drawer",""],["alt","Profile Picture","height","100px","width","100px",3,"src"],["mat-raised-button","",1,"profile-button",3,"click"],["mat-raised-button","",1,"profile-button"],[1,"mat_icon_button",3,"click"],[2,"text-align","center"],[1,"mat_icon_left-arrow",3,"click"],[2,"margin-left","96%",3,"click"],[1,"col-1"],[1,"matcard_col1"],[1,"imgdiv",2,"background-color","rgba(0, 0, 0, 0)"],["alt","Profile Picture","height","200px","width","200px",3,"src"],["align","center",1,"col-2"],[1,"matcard_col2"],[2,"background-color","rgba(0, 0, 0, 0)"],["align","center"],[1,"main_scroll"],[3,"keymail"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2),z(3,"img",3)(4,"br")(5,"br"),C(6,"button",4),Q("click",function(){return i.openDialog()}),F(7,"Edit Profile"),E(),z(8,"br")(9,"br"),C(10,"button",4),Q("click",function(){return i.go_to_Add_Post()}),F(11,"Add Post"),E(),z(12,"br")(13,"br"),C(14,"button",5),F(15,"Settings"),E(),z(16,"br")(17,"br"),E(),C(18,"div")(19,"div")(20,"mat-icon",6),Q("click",function(){return st(r),mt(2).toggle()}),F(21,"more_vert"),E()(),C(22,"div",7),F(23),z(24,"hr"),E(),C(25,"mat-icon",8),Q("click",function(){return i.go_back()}),F(26,"keyboard_arrow_left"),E(),C(27,"mat-icon",9),Q("click",function(){return i.Refresh_profile_data()}),F(28,"refresh"),E(),C(29,"div")(30,"div")(31,"div",10)(32,"mat-card",11)(33,"div",12),z(34,"img",13),E()()(),C(35,"div",14)(36,"mat-card",15)(37,"div",16),F(38),E(),z(39,"br")(40,"br"),C(41,"div",16),F(42),E()()()()(),C(43,"div",17)(44,"h1"),F(45," Posts "),E(),C(46,"div",18),z(47,"app-post_grid",19),E()()()()}2&t&&(P(3),V("src",i.profile_pic_url,ui),P(20),hi(" ",i.fullName," "),P(11),V("src",i.profile_pic_url,ui),P(4),hi(" ",i.userName," "),P(4),hi(" User Bio : ",i.bio," "),P(5),V("keymail",i.keymail))},directives:[Vb,Lb,Vs,Fa,cM,iTe],styles:[".col-1[_ngcontent-%COMP%]{max-width:28%;float:left;height:250px;margin:10px}.col-2[_ngcontent-%COMP%]{float:left;max-width:68%;height:250px;margin:10px}img[_ngcontent-%COMP%]{border-radius:100%}.imgdiv[_ngcontent-%COMP%]{margin:calc(24% - 20px)}.matcard_col1[_ngcontent-%COMP%], .matcard_col2[_ngcontent-%COMP%]{height:250px;background-color:#e5d4fc}.example-container[_ngcontent-%COMP%]{width:100%;height:100%}.example-sidenav-content[_ngcontent-%COMP%]{height:100%}.example-sidenav[_ngcontent-%COMP%]{padding:30px}.mat-icon-left-arrow[_ngcontent-%COMP%]{background-color:#fff0;margin-left:-10vh;cursor:pointer;border:none}.mat_icon_button[_ngcontent-%COMP%]{background-color:#fff0;left:3px;position:absolute;cursor:pointer;border:none}.profile-button[_ngcontent-%COMP%]{width:100px;height:40px}div[_ngcontent-%COMP%]{background-color:#b885fa}mat-drawer[_ngcontent-%COMP%]{background-color:#b885fa}"]}),n})(),h8=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f8=new k("CdkAccordion");let sTe=0,oTe=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=et.EMPTY,this.closed=new ie,this.opened=new ie,this.destroyed=new ie,this.expandedChange=new ie,this.id="cdk-accordion-child-"+sTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=dn(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=dn(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(_(f8,12),_(Qt),_(h8))},n.\u0275dir=O({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[je([{provide:f8,useValue:void 0}])]}),n})(),aTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({}),n})();const lTe=["body"];function cTe(n,e){}const uTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dTe=["mat-expansion-panel-header","*","mat-action-row"];function hTe(n,e){1&n&&z(0,"span",2),2&n&&V("@indicatorRotate",De()._getExpandedState())}const fTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],pTe=["mat-panel-title","mat-panel-description","*"],p8=new k("MAT_ACCORDION"),m8="225ms cubic-bezier(0.4,0.0,0.2,1)",g8={indicatorRotate:Aa("indicatorRotate",[Ui("collapsed, void",Pt({transform:"rotate(0deg)"})),Ui("expanded",Pt({transform:"rotate(180deg)"})),or("expanded <=> collapsed, void => collapsed",sr(m8))]),bodyExpansion:Aa("bodyExpansion",[Ui("collapsed, void",Pt({height:"0px",visibility:"hidden"})),Ui("expanded",Pt({height:"*",visibility:"visible"})),or("expanded <=> collapsed, void => collapsed",sr(m8))])};let mTe=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(_(Jn))},n.\u0275dir=O({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),gTe=0;const _8=new k("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let y8=(()=>{class n extends oTe{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new ie,this.afterCollapse=new ie,this._inputChanges=new ne,this._headerId="mat-expansion-panel-header-"+gTe++,this._bodyAnimationDone=new ne,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(hb((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=dn(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Bi(null),ct(()=>this.expanded&&!this._portal),un(1)).subscribe(()=>{this._portal=new kd(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(_(p8,12),_(Qt),_(h8),_(In),_(Se),_(ri,8),_(_8,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&It(r,mTe,5),2&t){let s;fe(s=pe())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&jt(lTe,5),2&t){let r;fe(r=pe())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&Xe("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[je([{provide:p8,useValue:void 0}]),X,Kt],ngContentSelectors:dTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(Tn(uTe),He(0),C(1,"div",0,1),Q("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),C(3,"div",2),He(4,1),be(5,cTe,0,0,"ng-template",3),E(),He(6,2),E()),2&t&&(P(1),V("@bodyExpansion",i._getExpandedState())("id",i.id),at("aria-labelledby",i._headerId),P(4),V("cdkPortalOutlet",i._portal))},directives:[Rd],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[g8.bodyExpansion]},changeDetection:0}),n})();class _Te{}const yTe=owe(_Te);let vTe=(()=>{class n extends yTe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=et.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(ct(u=>!(!u.hideToggle&&!u.togglePosition))):hr;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Or(t.opened,t.closed,c,t._inputChanges.pipe(ct(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(ct(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Md(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(_(y8,1),_(ce),_(uc),_(Qt),_(_8,8),_(ri,8),Ja("tabindex"))},n.\u0275cmp=Te({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&Q("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(at("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Ng("height",i._getHeaderHeight()),Xe("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[X],ngContentSelectors:pTe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(Tn(fTe),C(0,"span",0),He(1),He(2,1),He(3,2),E(),be(4,hTe,1,1,"span",1)),2&t&&(P(4),V("ngIf",i._showToggle()))},directives:[wr],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[g8.indicatorRotate]},changeDetection:0}),n})(),bTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,bt,aTe,wb]]}),n})();function wTe(n,e){if(1&n&&(C(0,"div")(1,"b"),F(2),E(),C(3,"label"),F(4),E()()),2&n){const t=e.$implicit;P(2),hi("",t.username,":"),P(2),ps(t.comment)}}let CTe=(()=>{class n{constructor(t){this.userService=t,this.newComment=new ie,this.username=""}ngOnInit(){}addNewItem(t){this.newComment.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-comments"]],inputs:{comments:"comments",username:"username"},outputs:{newComment:"newComment"},decls:11,vars:1,consts:[[1,"comments-div"],[4,"ngFor","ngForOf"],["appearance","fill",1,"example-full-width"],["matInput","","maxlength","25600","id","inputComment","placeholder","Say whats on your in mind"],["comment",""],[3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"div",0),be(1,wTe,5,2,"div",1),C(2,"div")(3,"form")(4,"mat-form-field",2)(5,"mat-label"),F(6,"Comment"),E(),z(7,"input",3,4),E(),C(9,"mat-icon",5),Q("click",function(){st(r);const o=mt(8);return i.addNewItem(o.value)}),F(10,"arrow_right_alt"),E()()()()}2&t&&(P(1),V("ngForOf",i.comments))},directives:[ll,Q4,Tb,r8,Fa],styles:[".comments-div[_ngcontent-%COMP%]{height:auto;background:whitesmoke}.example-header-image[_ngcontent-%COMP%]{background-image:url(prj_logo_colour.b7d398e3b3f00db0.png);background-size:cover}.example-full-width[_ngcontent-%COMP%]{width:90%;height:50px}.bla1[_ngcontent-%COMP%]{margin-top:33.5%}"]}),n})();function ETe(n,e){if(1&n&&z(0,"img",7),2&n){const t=De();$o("src",t.post_details.url,ui),pu("alt","post_details by ",t.post_details.username,"")}}function TTe(n,e){1&n&&z(0,"video",8),2&n&&$o("src",De().post_details.url,ui)}let ITe=(()=>{class n{constructor(t){this.userService=t,this.profile_pic_url="",this.comments=[],this.app=Er(_i_firebase),this.realtime=rr(this.app)}ngOnInit(){this.fetchComments(),this.fetch_profile_pic()}ngOnChanges(){this.fetchComments()}addNewComment(t){var i=this;return m(function*(){let r=i.post_details.keymail,s=i.post_details.name.replace(".",""),o=i.userService.email.replace(".","");try{let l=qS(kt(i.realtime,"post_comments/"+r+"/"+s+"/"));""==t?alert("comment empty!!!!"):(Rs(l,{keymail:o,comment:t,username:i.userService.username}),alert("Data uploaded in realtime successfully"))}catch(a){console.error("Error adding document: ",a)}})()}fetchComments(){let t=this.post_details.keymail,i=this.post_details.name.replace(".","");xr(kt(this.realtime,"/post_comments/"+t+"/"+i),s=>{this.comments=[],s.forEach(o=>{const a=o.val();a.key=o.key,this.comments.push(a)})})}fetch_profile_pic(){x_(rf(sf(),"profile_pic/"+this.post_details.keymail+"/"+this.post_details.keymail)).then(i=>{this.profile_pic_url=i}).catch(i=>{this.profile_pic_url="/assets/wynyard/images/prj_logo_black.png"})}}return n.\u0275fac=function(t){return new(t||n)(_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-post-card"]],inputs:{post_details:"post_details"},features:[Kt],decls:25,vars:7,consts:[[1,"example-card"],["mat-card-avatar","",1,"avataricon",3,"src"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],[1,"caption"],[3,"comments","newComment"],["mat-button",""],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){1&t&&(C(0,"mat-card",0)(1,"mat-card-header"),z(2,"img",1),C(3,"mat-card-title"),F(4),E(),z(5,"mat-card-subtitle"),E(),be(6,ETe,1,2,"img",2),be(7,TTe,1,1,"video",3),C(8,"mat-card-content")(9,"b"),F(10),E(),F(11," \xa0 \xa0 "),C(12,"div",4),F(13),E(),z(14,"br"),C(15,"div")(16,"mat-expansion-panel")(17,"mat-expansion-panel-header"),F(18," Comments "),E(),C(19,"app-comments",5),Q("newComment",function(s){return i.addNewComment(s)}),E()()()(),C(20,"mat-card-actions")(21,"button",6),F(22,"LIKE"),E(),C(23,"button",6),F(24,"SHARE"),E()()()),2&t&&(P(2),V("src",i.profile_pic_url,ui),P(2),ps(i.post_details.username),P(2),V("ngIf","image"===i.post_details.fileType),P(1),V("ngIf","video"===i.post_details.fileType),P(3),ps(i.post_details.username),P(3),ps(i.post_details.caption),P(6),V("comments",i.comments))},directives:[cM,a4,vwe,r4,s4,wr,lM,n4,y8,vTe,CTe,o4,Vs],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border-radius:5px;background-color:#e4e4e4;object-fit:contain}video[_ngcontent-%COMP%]{width:500px;height:300px;object-fit:contain}mat-card-content[_ngcontent-%COMP%]{font-size:large}.avataricon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px;border-radius:30px}.caption[_ngcontent-%COMP%]{font-size:large;word-wrap:break-word;width:300px}mat-card[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:auto;background:whitesmoke}mat-expansion-panel[_ngcontent-%COMP%]{background:whitesmoke}mat-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #8f4a78}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}"]}),n})();function DTe(n,e){if(1&n&&(C(0,"div",3),z(1,"app-post-card",4),E()),2&n){const t=e.$implicit;P(1),V("post_details",t)}}let STe=(()=>{class n{constructor(t,i){this.post_service=t,this.router=i,this.metadata=[]}ngOnInit(){this.all_posts()}all_posts(){var t=this;return m(function*(){Tr.initializeApp(_i_firebase);const r=Tr.firestore();t.metadata=[],(yield r.collection("posts_metadata").get()).forEach(a=>{t.metadata.push(a.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(_(Qp),_(Rt))},n.\u0275cmp=Te({type:n,selectors:[["app-post_list"]],decls:14,vars:1,consts:[[1,"hero"],[1,"cube"],["class","innerdiv",4,"ngFor","ngForOf"],[1,"innerdiv"],[3,"post_details"]],template:function(t,i){1&t&&(C(0,"body")(1,"div",0),z(2,"div",1)(3,"div",1)(4,"div",1)(5,"div",1)(6,"div",1)(7,"div",1)(8,"div",1)(9,"div",1)(10,"div",1)(11,"div",1)(12,"div",1),be(13,DTe,2,1,"div",2),E()()),2&t&&(P(13),V("ngForOf",i.metadata))},directives:[ll,ITe],styles:[".main_scroll[_ngcontent-%COMP%]{max-height:90%;overflow-y:scroll;padding:10px}.innerdiv[_ngcontent-%COMP%]{padding:20px;float:none;justify-content:center;display:flex}.main_scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hero[_ngcontent-%COMP%]{background-color:#b885fa;position:relative;height:90%;overflow-y:scroll;overflow-x:hidden;font-family:Montserrat,sans-serif}.hero__title[_ngcontent-%COMP%]{color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:50px;z-index:1}.cube[_ngcontent-%COMP%]{position:absolute;top:80vh;left:45vw;width:10px;height:10px;border:double 1px #f88df8;border-radius:80px;transform-origin:top left;transform:scale(0) rotate(0) translate(-50%,-50%);animation:cube 12s ease-in forwards infinite}.cube[_ngcontent-%COMP%]:nth-child(2n){border-color:#47059e}.cube[_ngcontent-%COMP%]:nth-child(2){animation-delay:0s;left:25vw;top:40vh;border-color:#ff0}.cube[_ngcontent-%COMP%]:nth-child(3){animation-delay:1s;left:75vw;top:50vh}.cube[_ngcontent-%COMP%]:nth-child(4){animation-delay:3s;left:90vw;top:10vh}.cube[_ngcontent-%COMP%]:nth-child(5){animation-delay:5s;left:10vw;top:85vh}.cube[_ngcontent-%COMP%]:nth-child(6){animation-delay:7s;left:50vw;top:10vh}@keyframes cube{0%{transform:scale(0) rotate(0) translate(-50%,-50%);opacity:1}to{transform:scale(20) rotate(960deg) translate(-50%,-50%);opacity:0}}"]}),n})();function xTe(n,e){1&n&&He(0)}const v8=["*"];function MTe(n,e){}const ATe=function(n){return{animationDuration:n}},kTe=function(n,e){return{value:n,params:e}},RTe=["tabListContainer"],PTe=["tabList"],OTe=["tabListInner"],NTe=["nextPaginator"],FTe=["previousPaginator"],LTe=["tabBodyWrapper"],VTe=["tabHeader"];function BTe(n,e){}function UTe(n,e){1&n&&be(0,BTe,0,0,"ng-template",10),2&n&&V("cdkPortalOutlet",De().$implicit.templateLabel)}function HTe(n,e){1&n&&F(0),2&n&&ps(De().$implicit.textLabel)}function jTe(n,e){if(1&n){const t=En();C(0,"div",6),Q("click",function(){const r=st(t),s=r.$implicit,o=r.index,a=De(),l=mt(1);return a._handleClick(s,l,o)})("cdkFocusChange",function(r){const o=st(t).index;return De()._tabFocusChanged(r,o)}),C(1,"div",7),be(2,UTe,1,1,"ng-template",8),be(3,HTe,1,1,"ng-template",null,9,TV),E()()}if(2&n){const t=e.$implicit,i=e.index,r=mt(4),s=De();Xe("mat-tab-label-active",s.selectedIndex===i),V("id",s._getTabLabelId(i))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||s.disableRipple),at("tabIndex",s._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(i))("aria-selected",s.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),P(2),V("ngIf",t.templateLabel)("ngIfElse",r)}}function $Te(n,e){if(1&n){const t=En();C(0,"mat-tab-body",11),Q("_onCentered",function(){return st(t),De()._removeTabBodyWrapperHeight()})("_onCentering",function(r){return st(t),De()._setTabBodyWrapperHeight(r)}),E()}if(2&n){const t=e.$implicit,i=e.index,r=De();Xe("mat-tab-body-active",r.selectedIndex===i),V("id",r._getTabContentId(i))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration),at("tabindex",null!=r.contentTabIndex&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))}}const zTe=new k("MatInkBarPositioner",{providedIn:"root",factory:function GTe(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let b8=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._inkBarPositioner=r,this._animationMode=s}alignToElement(t){this.show(),this._ngZone.onStable.pipe(un(1)).subscribe(()=>{const i=this._inkBarPositioner(t),r=this._elementRef.nativeElement;r.style.left=i.left,r.style.width=i.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Z),_(zTe),_(ri,8))},n.\u0275dir=O({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,i){2&t&&Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const WTe=new k("MatTabContent"),w8=new k("MatTabLabel"),C8=new k("MAT_TAB");let qTe=(()=>{class n extends Ywe{constructor(t,i,r){super(t,i),this._closestTab=r}}return n.\u0275fac=function(t){return new(t||n)(_(Jn),_(In),_(C8,8))},n.\u0275dir=O({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[je([{provide:w8,useExisting:n}]),X]}),n})();const KTe=pb(class{}),E8=new k("MAT_TAB_GROUP");let T8=(()=>{class n extends KTe{constructor(t,i){super(),this._viewContainerRef=t,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new ne,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new kd(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(_(In),_(E8,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(1&t&&(It(r,w8,5),It(r,WTe,7,Jn)),2&t){let s;fe(s=pe())&&(i.templateLabel=s.first),fe(s=pe())&&(i._explicitContent=s.first)}},viewQuery:function(t,i){if(1&t&&jt(Jn,7),2&t){let r;fe(r=pe())&&(i._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[je([{provide:C8,useExisting:n}]),X,Kt],ngContentSelectors:v8,decls:1,vars:0,template:function(t,i){1&t&&(Tn(),be(0,xTe,1,0,"ng-template"))},encapsulation:2}),n})();const QTe={translateTab:Aa("translateTab",[Ui("center, void, left-origin-center, right-origin-center",Pt({transform:"none"})),Ui("left",Pt({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Ui("right",Pt({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),or("* => left, * => right, left => center, right => center",sr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),or("void => left-origin-center",[Pt({transform:"translate3d(-100%, 0, 0)"}),sr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),or("void => right-origin-center",[Pt({transform:"translate3d(100%, 0, 0)"}),sr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let YTe=(()=>{class n extends Rd{constructor(t,i,r,s){super(t,i,s),this._host=r,this._centeringSub=et.EMPTY,this._leavingSub=et.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Bi(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(_(zo),_(In),_(it(()=>I8)),_(Se))},n.\u0275dir=O({type:n,selectors:[["","matTabBodyHost",""]],features:[X]}),n})(),XTe=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=et.EMPTY,this._translateTabComplete=new ne,this._onCentering=new ie,this._beforeCentering=new ie,this._afterLeavingCenter=new ie,this._onCentered=new ie(!0),this.animationDuration="500ms",i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(hb((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const i=this._getLayoutDirection();return"ltr"==i&&t<=0||"rtl"==i&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(cr,8),_(Qt))},n.\u0275dir=O({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),I8=(()=>{class n extends XTe{constructor(t,i,r){super(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(cr,8),_(Qt))},n.\u0275cmp=Te({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(1&t&&jt(Rd,5),2&t){let r;fe(r=pe())&&(i._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[X],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,i){1&t&&(C(0,"div",0,1),Q("@translateTab.start",function(s){return i._onTranslateTabStarted(s)})("@translateTab.done",function(s){return i._translateTabComplete.next(s)}),be(2,MTe,0,0,"ng-template",2),E()),2&t&&V("@translateTab",rl(3,kTe,i._position,uV(1,ATe,i.animationDuration)))},directives:[YTe],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}\n'],encapsulation:2,data:{animation:[QTe.translateTab]}}),n})();const D8=new k("MAT_TABS_CONFIG"),ZTe=pb(class{});let S8=(()=>{class n extends ZTe{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(_(ce))},n.\u0275dir=O({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){2&t&&(at("aria-disabled",!!i.disabled),Xe("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[X]}),n})();const x8=xd({passive:!0});let tIe=(()=>{class n{constructor(t,i,r,s,o,a,l){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new ne,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new ne,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new ie,this.indexFocused=new ie,o.runOutsideAngular(()=>{Co(t.nativeElement,"mouseleave").pipe(Ot(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Pa(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Co(this._previousPaginator.nativeElement,"touchstart",x8).pipe(Ot(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Co(this._nextPaginator.nativeElement,"touchstart",x8).pipe(Ot(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:J("ltr"),i=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new jq(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(un(1)).subscribe(r),Or(t,i,this._items.changes,this._itemsResized()).pipe(Ot(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Ot(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?hr:this._items.changes.pipe(Bi(this._items),Ps(t=>new nt(i=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(()=>{i.next()});return t.forEach(s=>{r.observe(s.elementRef.nativeElement)}),()=>{r.disconnect()}}))),Fq(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Md(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const i=this._items?this._items.toArray()[t]:null;return!!i&&!i.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const i=this._items?this._items.toArray()[t]:null;if(!i)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=i.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,u=this.scrollDistance+r;a<c?this.scrollDistance-=c-a+60:l>u&&(this.scrollDistance+=l-u+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),mM(650,100).pipe(Ot(Or(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(Pd),_(cr,8),_(Z),_(Nn),_(ri,8))},n.\u0275dir=O({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),nIe=(()=>{class n extends tIe{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=dn(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(Pd),_(cr,8),_(Z),_(Nn),_(ri,8))},n.\u0275dir=O({type:n,inputs:{disableRipple:"disableRipple"},features:[X]}),n})(),iIe=(()=>{class n extends nIe{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(Pd),_(cr,8),_(Z),_(Nn),_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(1&t&&It(r,S8,4),2&t){let s;fe(s=pe())&&(i._items=s)}},viewQuery:function(t,i){if(1&t&&(jt(b8,7),jt(RTe,7),jt(PTe,7),jt(OTe,7),jt(NTe,5),jt(FTe,5)),2&t){let r;fe(r=pe())&&(i._inkBar=r.first),fe(r=pe())&&(i._tabListContainer=r.first),fe(r=pe())&&(i._tabList=r.first),fe(r=pe())&&(i._tabListInner=r.first),fe(r=pe())&&(i._nextPaginator=r.first),fe(r=pe())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[X],ngContentSelectors:v8,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,i){1&t&&(Tn(),C(0,"button",0,1),Q("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(s){return i._handlePaginatorPress("before",s)})("touchend",function(){return i._stopInterval()}),z(2,"div",2),E(),C(3,"div",3,4),Q("keydown",function(s){return i._handleKeydown(s)}),C(5,"div",5,6),Q("cdkObserveContent",function(){return i._onContentChanges()}),C(7,"div",7,8),He(9),E(),z(10,"mat-ink-bar"),E()(),C(11,"button",9,10),Q("mousedown",function(s){return i._handlePaginatorPress("after",s)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),z(13,"div",2),E()),2&t&&(Xe("mat-tab-header-pagination-disabled",i._disableScrollBefore),V("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),P(5),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode),P(6),Xe("mat-tab-header-pagination-disabled",i._disableScrollAfter),V("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},directives:[om,Bq,b8],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),n})(),rIe=0;class sIe{}const oIe=rm(sM(class{constructor(n){this._elementRef=n}}),"primary");let aIe=(()=>{class n extends oIe{constructor(t,i,r,s){var o;super(t),this._changeDetectorRef=i,this._animationMode=s,this._tabs=new Wo,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=et.EMPTY,this._tabLabelSubscription=et.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new ie,this.focusChange=new ie,this.animationDone=new ie,this.selectedTabChange=new ie(!0),this._groupId=rIe++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=null!==(o=null==r?void 0:r.contentTabIndex)&&void 0!==o?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=dn(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Pa(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=Pa(t,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),t&&i.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const i=this._tabs.toArray();let r;for(let s=0;s<i.length;s++)if(i[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=i[s];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Bi(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const i=new sIe;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Or(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){t.disabled||(this.selectedIndex=i.focusIndex=r)}_getTabIndex(t,i){var r;return t.disabled?null:i===(null!==(r=this._lastFocusedTabIndex)&&void 0!==r?r:this.selectedIndex)?0:-1}_tabFocusChanged(t,i){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(D8,8),_(ri,8))},n.\u0275dir=O({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[X]}),n})(),lIe=(()=>{class n extends aIe{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Qt),_(D8,8),_(ri,8))},n.\u0275cmp=Te({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(1&t&&It(r,T8,5),2&t){let s;fe(s=pe())&&(i._allTabs=s)}},viewQuery:function(t,i){if(1&t&&(jt(LTe,5),jt(VTe,5)),2&t){let r;fe(r=pe())&&(i._tabBodyWrapper=r.first),fe(r=pe())&&(i._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[je([{provide:E8,useExisting:n}]),X],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,i){1&t&&(C(0,"mat-tab-header",0,1),Q("indexFocused",function(s){return i._focusChanged(s)})("selectFocusedIndex",function(s){return i.selectedIndex=s}),be(2,jTe,5,15,"div",2),E(),C(3,"div",3,4),be(5,$Te,1,10,"mat-tab-body",5),E()),2&t&&(V("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),P(2),V("ngForOf",i._tabs),P(1),Xe("_mat-animation-noopable","NoopAnimations"===i._animationMode),P(2),V("ngForOf",i._tabs))},directives:[iIe,I8,ll,S8,om,nwe,Eu,wr,Rd],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),n})(),cIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,bt,wb,aM,eM,iwe],bt]}),n})(),A8=(()=>{class n{constructor(t){this.dialogRef=t}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(_(mm))},n.\u0275cmp=Te({type:n,selectors:[["app-ConfirmDialog"]],decls:9,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(C(0,"h1",0),F(1,"Sure ?"),E(),C(2,"div",1),F(3," You really wanna delete the chat ?\n"),E(),C(4,"div",2)(5,"button",3),Q("click",function(){return i.onDismiss()}),F(6,"No"),E(),C(7,"button",4),Q("click",function(){return i.onConfirm()}),F(8,"Yes"),E()())},directives:[Vs],styles:[""]}),n})();const uIe=["chat"],dIe=function(n,e){return{righty:n,lefty:e}},hIe=function(n,e){return{s1:n,s2:e}};function fIe(n,e){if(1&n){const t=En();C(0,"div")(1,"div",14)(2,"div",14)(3,"b"),F(4),C(5,"mat-icon",15),Q("click",function(){const s=st(t).$implicit;return De().delete_chat(s.key)}),F(6,"delete"),E()(),z(7,"br"),F(8),E(),z(9,"br"),E()()}if(2&n){const t=e.$implicit,i=De();P(1),V("ngClass",rl(4,dIe,i.username==t.username,i.username!=t.username)),P(1),V("ngClass",rl(7,hIe,i.username==t.username,i.username!=t.username)),P(2),hi("",t.username," "),P(4),hi(" ",t.chat," ")}}let pIe=(()=>{class n{constructor(t){this.dialog=t,this.username="",this.x=[],this.all_chats=[],this.app=Er(_i_firebase),this.database=rr(this.app)}ngOnInit(){xr(kt(this.database,"/Chats"),i=>{this.x=[],i.forEach(r=>{const s=r.val();s.key=r.key,this.x.push(s)})})}add_to_chat(t){this.all_chats.push(t);let r=qS(kt(this.database,"Chats/"));""==t?alert("Trying to send empty text!"):(Rs(r,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",xr(kt(this.database,"/Chats"),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(A8,{width:"250px"}).afterClosed().subscribe(r=>{r&&EW(kt(this.database,"/Chats/"+t+"/"))})}ngOnChanges(){xr(kt(this.database,"/Chats"),i=>{this.x=[],i.forEach(r=>{const s=r.val();this.x.push(s),s.key=r.key})})}}return n.\u0275fac=function(t){return new(t||n)(_(Nd))},n.\u0275cmp=Te({type:n,selectors:[["app-chat"]],viewQuery:function(t,i){if(1&t&&jt(uIe,5),2&t){let r;fe(r=pe())&&(i.chat_line=r.first)}},inputs:{username:"username"},features:[Kt],decls:19,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],[1,"example-sidenav-content"],["type","button","mat-raised-button","","color","primary",1,"chat-button",3,"disabled","click"],[3,"ngClass"],[2,"cursor","pointer",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),Q("click",function(){return st(r),mt(2).toggle()}),C(5,"mat-icon",5),F(6,"navigate_next"),E()()(),C(7,"div",6),be(8,fIe,10,10,"div",7),z(9,"br"),E(),C(10,"div",8)(11,"input",9,10),Q("keyup.enter",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),E(),C(13,"button",11),Q("click",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),C(14,"mat-icon",5),F(15,"send"),E()()()(),C(16,"div",12)(17,"button",13),Q("click",function(){return st(r),mt(2).toggle()}),F(18," Open Chats "),E()()()}2&t&&(P(8),V("ngForOf",i.x.slice().reverse()),P(9),V("disabled",""==i.username))},directives:[Vb,Lb,Vs,Fa,ll,Eu],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#f7e8a2;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#e9a2f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#edc1ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:60vh;display:flex;flex-direction:column-reverse;background-color:#e2beff;margin-left:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:80vh;background-color:#e889f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}mat-drawer[_ngcontent-%COMP%]{background-color:#000}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{border-radius:30px;cursor:pointer}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})();const mIe=["chat"],gIe=function(n,e){return{righty:n,lefty:e}},_Ie=function(n,e){return{s1:n,s2:e}};function yIe(n,e){if(1&n){const t=En();C(0,"div")(1,"div",13)(2,"div",13)(3,"b"),F(4),C(5,"mat-icon",14),Q("click",function(){const s=st(t).$implicit;return De().delete_chat(s.key)}),F(6,"delete"),E()(),z(7,"br"),F(8),E(),z(9,"br"),E()()}if(2&n){const t=e.$implicit,i=De();P(1),V("ngClass",rl(4,gIe,i.username==t.username,i.username!=t.username)),P(1),V("ngClass",rl(7,_Ie,i.username==t.username,i.username!=t.username)),P(2),hi("",t.username," "),P(4),hi(" ",t.chat," ")}}function vIe(n,e){if(1&n){const t=En();C(0,"div",15)(1,"button",16),Q("click",function(){const s=st(t).$implicit,o=De();return mt(2).toggle(),o.fetch_chats(s.email)}),F(2),E(),z(3,"br"),E()}if(2&n){const t=e.$implicit,i=De();P(1),V("disabled",""==i.username),P(1),hi(" Open Chat with ",t.username," ")}}let bIe=(()=>{class n{constructor(t,i){this.dialog=t,this.userdataserv=i,this.username="",this.keymail="",this.x=[],this.all_chats=[],this.app=Er(_i_firebase),this.database=rr(this.app),this.userlist=[],this.message_key=""}ngOnInit(){this.keymail=this.keymail.replace(".",""),this.userlist=this.userdataserv.get_all_users(this.keymail)}fetch_chats(t){let s=[this.keymail,t.replace(".","")].sort().join("_");this.message_key=s,xr(kt(this.database,"/OneToOne/"+s),a=>{this.x=[],a.forEach(l=>{const c=l.val();c.key=l.key,this.x.push(c)})}),console.log(this.x)}add_to_chat(t){this.all_chats.push(t);let r=qS(kt(this.database,"/OneToOne/"+this.message_key));""==t?alert("Trying to send empty text!"):(Rs(r,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",xr(kt(this.database,"/OneToOne/"+this.message_key),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(A8,{width:"250px"}).afterClosed().subscribe(r=>{r&&(EW(kt(this.database,"/OneToOne/"+this.message_key+"/"+t+"/")),xr(kt(this.database,"/OneToOne/"+this.message_key),a=>{this.x=[],a.forEach(l=>{const c=l.val();this.x.push(c),c.key=l.key})}))})}ngOnChanges(){xr(kt(this.database,"/OneToOne/"+this.message_key),i=>{this.x=[],i.forEach(r=>{const s=r.val();this.x.push(s),s.key=r.key})})}}return n.\u0275fac=function(t){return new(t||n)(_(Nd),_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-oneone"]],viewQuery:function(t,i){if(1&t&&jt(mIe,5),2&t){let r;fe(r=pe())&&(i.chat_line=r.first)}},inputs:{username:"username",keymail:"keymail"},features:[Kt],decls:17,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],["class","maincontent",4,"ngFor","ngForOf"],[3,"ngClass"],[2,"cursor","pointer",3,"click"],[1,"maincontent"],["type","button","mat-raised-button","","color","primary",1,"chat-button",3,"disabled","click"]],template:function(t,i){if(1&t){const r=En();C(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),Q("click",function(){return st(r),mt(2).toggle()}),C(5,"mat-icon",5),F(6,"navigate_next"),E()()(),C(7,"div",6),be(8,yIe,10,10,"div",7),z(9,"br"),E(),C(10,"div",8)(11,"input",9,10),Q("keyup.enter",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),E(),C(13,"button",11),Q("click",function(){st(r);const o=mt(12);return i.add_to_chat(o.value)}),C(14,"mat-icon",5),F(15,"send"),E()()()(),be(16,vIe,4,2,"div",12),E()}2&t&&(P(8),V("ngForOf",i.x.slice().reverse()),P(8),V("ngForOf",i.userlist))},directives:[Vb,Lb,Vs,Fa,ll,Eu],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#f7e8a2;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#e9a2f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#edc1ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:60vh;display:flex;flex-direction:column-reverse;background-color:#e2beff;margin-left:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:80vh;background-color:#e889f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}mat-drawer[_ngcontent-%COMP%]{background-color:#000}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{border-radius:30px;cursor:pointer}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})();function wIe(n,e){1&n&&(C(0,"mat-icon"),F(1,"people"),E(),F(2," Global Chat "))}function CIe(n,e){1&n&&(C(0,"mat-icon"),F(1,"person"),E(),F(2," One on One Chat "))}function EIe(n,e){if(1&n&&(C(0,"div",4,5)(2,"h1"),F(3),E(),C(4,"mat-tab-group",6)(5,"mat-tab"),be(6,wIe,3,0,"ng-template",7),z(7,"app-chat",8),E(),C(8,"mat-tab"),be(9,CIe,3,0,"ng-template",7),z(10,"app-oneone",9),E()()()),2&n){const t=De();P(3),hi("Welcome ",t.logged_in_user.username,""),P(4),V("username",t.logged_in_user.username),P(3),V("username",t.logged_in_user.username)("keymail",t.email)}}const TIe=function(n,e){return{posts_col2:n,posts_col1:e}};let k8=(()=>{class n{constructor(t,i,r){this.route=t,this.router=i,this.ud=r,this.username=this.ud.username,this.email="",this.logged_in_user={username:""},this.app=Er(_i_firebase),this.db=rr(this.app)}ngOnInit(){this.route.queryParamMap.subscribe(t=>this.email=t.get("email")),console.log("user_email:",this.ud.email),""==this.ud.email?console.log("Not Logged In"):this.fetch_user_details(this.ud.email)}fetch_user_details(t){let i=t.replace(".","");this.ud.fetch_userdata_with_keymail(i),this.logged_in_user=this.ud}ngOnChanges(){console.log("Changed")}go_to_profile(){this.router.navigate(["/profile"])}}return n.\u0275fac=function(t){return new(t||n)(_(xa),_(Rt),_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-home"]],features:[Kt],decls:5,vars:5,consts:[[1,"main-row"],[3,"ngClass"],["posts",""],["class","chat_col",4,"ngIf"],[1,"chat_col"],["chats",""],["mat-align-tabs","center"],["mat-tab-label",""],[3,"username"],[3,"username","keymail"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div",1,2),z(3,"app-post_list"),E(),be(4,EIe,11,4,"div",3),E()),2&t&&(P(1),V("ngClass",rl(2,TIe,""==i.logged_in_user.username,""!=i.logged_in_user.username)),P(3),V("ngIf",""!=i.logged_in_user.username))},directives:[Eu,STe,wr,lIe,T8,qTe,Fa,pIe,bIe],styles:['.main-row[_ngcontent-%COMP%]{width:100%}.posts_col1[_ngcontent-%COMP%]{float:left;height:100vh;width:70%}.posts_col2[_ngcontent-%COMP%]{float:left;height:100vh;width:100%}.chat_col[_ngcontent-%COMP%]{float:left;height:100vh;width:30%;background-color:#ffdaf6}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.chat_button[_ngcontent-%COMP%]{float:right}.prof_button[_ngcontent-%COMP%]{float:left}']}),n})();const IIe=function R8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},P8=new Cr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),O8=new Qo("@firebase/auth");function Ub(n,...e){O8.logLevel<=Ve.ERROR&&O8.error(`Auth (${_s}): ${n}`,...e)}function Hi(n,...e){throw ZM(n,...e)}function Us(n,...e){return ZM(n,...e)}function N8(n,e,t){const i=Object.assign(Object.assign({},IIe()),{[e]:t});return new Cr("auth","Firebase",i).create(e,{appName:n.name})}function ZM(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return P8.create(n,...e)}function L(n,e,...t){if(!n)throw ZM(e,...t)}function Hs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ub(e),new Error(e)}function Ba(n,e){n||Hs(e)}const F8=new Map;function To(n){Ba(n instanceof Function,"Expected a class definition");let e=F8.get(n);return e?(Ba(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,F8.set(n,e),e)}function bm(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function L8(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class wm{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ba(t>e,"Short delay should be less than long delay!"),this.isMobile=y0()||YB()}get(){return function xIe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function JM(){return"http:"===L8()||"https:"===L8()}()||v0()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function eA(n,e){Ba(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class V8{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const AIe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},kIe=new wm(3e4,6e4);function vn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Fn(n,e,t,i){return tA.apply(this,arguments)}function tA(){return tA=m(function*(n,e,t,i,r={}){return B8(n,r,m(function*(){let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=Kh(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),V8.fetch()(U8(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),tA.apply(this,arguments)}function B8(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=m(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},AIe),e);try{const r=new RIe(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Cm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Cm(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw Cm(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw Cm(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw N8(n,u,c);Hi(n,u)}}catch(r){if(r instanceof Ri)throw r;Hi(n,"network-request-failed")}}),nA.apply(this,arguments)}function Io(n,e,t,i){return iA.apply(this,arguments)}function iA(){return iA=m(function*(n,e,t,i,r={}){const s=yield Fn(n,e,t,i,r);return"mfaPendingCredential"in s&&Hi(n,"multi-factor-auth-required",{_serverResponse:s}),s}),iA.apply(this,arguments)}function U8(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?eA(n.config,r):`${n.config.apiScheme}://${r}`}class RIe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Us(this.auth,"network-request-failed")),kIe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cm(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Us(n,e,i);return r.customData._tokenResponse=t,r}function rA(){return rA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:delete",e)}),rA.apply(this,arguments)}function NIe(n,e){return oA.apply(this,arguments)}function oA(){return oA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:lookup",e)}),oA.apply(this,arguments)}function Em(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function aA(){return aA=m(function*(n,e=!1){const t=Me(n),i=yield t.getIdToken(e),r=Hb(i);L(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Em(lA(r.auth_time)),issuedAtTime:Em(lA(r.iat)),expirationTime:Em(lA(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),aA.apply(this,arguments)}function lA(n){return 1e3*Number(n)}function Hb(n){var e;const[t,i,r]=n.split(".");if(void 0===t||void 0===i||void 0===r)return Ub("JWT malformed, contained fewer than 3 sections"),null;try{const s=_0(i);return s?JSON.parse(s):(Ub("Failed to decode base64 JWT payload"),null)}catch(s){return Ub("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function Do(n,e){return cA.apply(this,arguments)}function cA(){return cA=m(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof Ri&&VIe(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}}),cA.apply(this,arguments)}function VIe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class BIe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield t.iteration()}),i)}iteration(){var e=this;return m(function*(){var t;try{yield e.user.getIdToken(!0)}catch(i){return void("auth/network-request-failed"===(null===(t=i)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class H8{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Em(this.lastLoginAt),this.creationTime=Em(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tm(n){return uA.apply(this,arguments)}function uA(){return uA=m(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield Do(n,NIe(t,{idToken:i}));L(null==r?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?jIe(s.providerUserInfo):[],a=HIe(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new H8(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),uA.apply(this,arguments)}function dA(){return dA=m(function*(n){const e=Me(n);yield Tm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),dA.apply(this,arguments)}function HIe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function jIe(n){return n.map(e=>{var{providerId:t}=e,i=b1(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function hA(){return hA=m(function*(n,e){const t=yield B8(n,{},m(function*(){const i=Kh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=U8(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",V8.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),hA.apply(this,arguments)}class Im{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(void 0!==e.idToken,"internal-error"),L(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function LIe(n){const e=Hb(n);return L(e,"internal-error"),L(void 0!==e.exp,"internal-error"),L(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return m(function*(){return L(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return m(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function $Ie(n,e){return hA.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Im;return i&&(L("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(L("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(L("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Im,this.toJSON())}_performRefresh(){return Hs("not implemented")}}function Ua(n,e){L("string"==typeof n||void 0===n,"internal-error",{appName:e})}class gc{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=b1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BIe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new H8(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return m(function*(){const i=yield Do(t,t.stsTokenManager.getToken(t.auth,e));return L(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function FIe(n){return aA.apply(this,arguments)}(this,e)}reload(){return function UIe(n){return dA.apply(this,arguments)}(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new gc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return m(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Tm(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return m(function*(){const t=yield e.getIdToken();return yield Do(e,function PIe(n,e){return rA.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,y=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,b=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:D,emailVerified:S,isAnonymous:N,providerData:G,stsTokenManager:ae}=t;L(D&&ae,e,"internal-error");const ft=Im.fromJSON(this.name,ae);L("string"==typeof D,e,"internal-error"),Ua(d,e.name),Ua(h,e.name),L("boolean"==typeof S,e,"internal-error"),L("boolean"==typeof N,e,"internal-error"),Ua(f,e.name),Ua(p,e.name),Ua(g,e.name),Ua(y,e.name),Ua(b,e.name),Ua(v,e.name);const en=new gc({uid:D,auth:e,email:h,emailVerified:S,displayName:d,isAnonymous:N,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:ft,createdAt:b,lastLoginAt:v});return G&&Array.isArray(G)&&(en.providerData=G.map(Ii=>Object.assign({},Ii))),y&&(en._redirectEventId=y),en}static _fromIdTokenResponse(e,t,i=!1){return m(function*(){const r=new Im;r.updateFromServerResponse(t);const s=new gc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Tm(s),s})()}}const j8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(t,i){var r=this;return m(function*(){r.storage[t]=i})()}_get(t){var i=this;return m(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return m(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function jb(n,e,t){return`firebase:${n}:${e}:${t}`}class Vd{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=jb(this.userKey,r.apiKey,s),this.fullPersistenceKey=jb("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?gc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return m(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(function*(){if(!t.length)return new Vd(To(j8),e,i);const r=(yield Promise.all(t.map(function(){var c=m(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=r[0]||To(j8);const o=jb(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=gc._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=r.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=m(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new Vd(s,e,i)):new Vd(s,e,i)})()}}function $8(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K8(e))return"Blackberry";if(Q8(e))return"Webos";if(fA(e))return"Safari";if((e.includes("chrome/")||G8(e))&&!e.includes("edge/"))return"Chrome";if(q8(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function z8(n=Xt()){return/firefox\//i.test(n)}function fA(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G8(n=Xt()){return/crios\//i.test(n)}function W8(n=Xt()){return/iemobile/i.test(n)}function q8(n=Xt()){return/android/i.test(n)}function K8(n=Xt()){return/blackberry/i.test(n)}function Q8(n=Xt()){return/webos/i.test(n)}function $b(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Y8(n=Xt()){return $b(n)||q8(n)||Q8(n)||K8(n)||/windows phone/i.test(n)||W8(n)}function X8(n,e=[]){let t;switch(n){case"Browser":t=$8(Xt());break;case"Worker":t=`${$8(Xt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_s}/${i}`}class qIe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return m(function*(){var i;if(t.auth.currentUser===e)return;const r=[];try{for(const s of t.queue)yield s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const o of r)try{o()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(i=s)||void 0===i?void 0:i.message})}})()}}class KIe{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z8(this),this.idTokenSubscription=new Z8(this),this.beforeStateQueue=new qIe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P8,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=To(t)),this._initializationPromise=this.queue(m(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield Vd.create(i,e),!i._deleted)){if(null===(r=i._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch(o){}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return m(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return L(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return m(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return m(function*(){var i;try{yield Tm(e)}catch(r){if("auth/network-request-failed"!==(null===(i=r)||void 0===i?void 0:i.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function MIe(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return m(function*(){const i=e?Me(e):null;return i&&L(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return m(function*(){if(!i._deleted)return e&&L(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(m(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(m(function*(){yield t.assertedPersistence.setPersistence(To(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return m(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return m(function*(){if(!t.redirectPersistenceManager){const i=e&&To(e)||t._popupRedirectResolver;L(i,t,"argument-error"),t.redirectPersistenceManager=yield Vd.create(t,[To(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return m(function*(){var i,r;return t._isInitialized&&(yield t.queue(m(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return m(function*(){if(e===t.currentUser)return t.queue(m(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return L(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return m(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(i["X-Firebase-Client"]=r),i})()}}function ji(n){return Me(n)}class Z8{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZB(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class t6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hs("not implemented")}_getIdTokenResponse(e){return Hs("not implemented")}_linkToIdToken(e,t){return Hs("not implemented")}_getReauthenticationResolver(e){return Hs("not implemented")}}function mA(){return mA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:update",e)}),mA.apply(this,arguments)}function _A(){return _A=m(function*(n,e){return Io(n,"POST","/v1/accounts:signInWithPassword",vn(n,e))}),_A.apply(this,arguments)}function zb(n,e){return yA.apply(this,arguments)}function yA(){return yA=m(function*(n,e){return Fn(n,"POST","/v1/accounts:sendOobCode",vn(n,e))}),yA.apply(this,arguments)}function eDe(n,e){return bA.apply(this,arguments)}function bA(){return bA=m(function*(n,e){return zb(n,e)}),bA.apply(this,arguments)}function EA(){return EA=m(function*(n,e){return Io(n,"POST","/v1/accounts:signInWithEmailLink",vn(n,e))}),EA.apply(this,arguments)}function TA(){return TA=m(function*(n,e){return Io(n,"POST","/v1/accounts:signInWithEmailLink",vn(n,e))}),TA.apply(this,arguments)}class Dm extends t6{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Dm(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Dm(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return m(function*(){switch(t.signInMethod){case"password":return function ZIe(n,e){return _A.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function iDe(n,e){return EA.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Hi(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return m(function*(){switch(i.signInMethod){case"password":return function i6(n,e){return mA.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function rDe(n,e){return TA.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:Hi(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function So(n,e){return IA.apply(this,arguments)}function IA(){return IA=m(function*(n,e){return Io(n,"POST","/v1/accounts:signInWithIdp",vn(n,e))}),IA.apply(this,arguments)}class Mm{constructor(e){var t,i,r,s,o,a;const l=Qh(Yh(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function dDe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);L(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function hDe(n){const e=Qh(Yh(n)).link,t=e?Qh(Yh(e)).deep_link_id:null,i=Qh(Yh(n)).deep_link_id;return(i?Qh(Yh(i)).link:null)||i||t||e||n}(e);try{return new Mm(t)}catch(i){return null}}}let r6=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Dm._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Mm.parseLink(i);return L(r,"argument-error"),Dm._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Ha{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fDe extends Ha{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function s6(n,e){return kA.apply(this,arguments)}function kA(){return kA=m(function*(n,e){return Io(n,"POST","/v1/accounts:signUp",vn(n,e))}),kA.apply(this,arguments)}class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return m(function*(){const s=yield gc._fromIdTokenResponse(e,i,r),o=o6(i);return new Pr({user:s,providerId:o,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return m(function*(){yield e._updateTokensIfNecessary(i,!0);const r=o6(i);return new Pr({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function o6(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Wb extends Ri{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Wb.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Wb(e,t,i,r)}}function a6(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Wb._fromErrorAndOperation(n,s,e,i):s})}function OA(n,e){return NA.apply(this,arguments)}function NA(){return NA=m(function*(n,e,t=!1){const i=yield Do(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Pr._forOperation(n,"link",i)}),NA.apply(this,arguments)}function LA(){return LA=m(function*(n,e,t=!1){var i;const{auth:r}=n,s="reauthenticate";try{const o=yield Do(n,a6(r,s,e,n),t);L(o.idToken,r,"internal-error");const a=Hb(o.idToken);L(a,r,"internal-error");const{sub:l}=a;return L(n.uid===l,r,"user-mismatch"),Pr._forOperation(n,s,o)}catch(o){throw"auth/user-not-found"===(null===(i=o)||void 0===i?void 0:i.code)&&Hi(r,"user-mismatch"),o}}),LA.apply(this,arguments)}function u6(n,e){return VA.apply(this,arguments)}function VA(){return VA=m(function*(n,e,t=!1){const i="signIn",r=yield a6(n,i,e),s=yield Pr._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s}),VA.apply(this,arguments)}function UA(){return UA=m(function*(n,e){return u6(ji(n),e)}),UA.apply(this,arguments)}function Kb(n,e,t){var i;L((null===(i=t.url)||void 0===i?void 0:i.length)>0,n,"invalid-continue-uri"),L(void 0===t.dynamicLinkDomain||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(L(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(L(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function qA(){return qA=m(function*(n,e,t){const i=Me(n),r={requestType:"PASSWORD_RESET",email:e};t&&Kb(i,r,t),yield eDe(i,r)}),qA.apply(this,arguments)}function ZA(){return ZA=m(function*(n,e,t){const i=ji(n),r=yield s6(i,{returnSecureToken:!0,email:e,password:t}),s=yield Pr._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(s.user),s}),ZA.apply(this,arguments)}const Qb="__sak";class h6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qb,"1"),this.storage.removeItem(Qb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const FDe=(()=>{class n extends h6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function PDe(){const n=Xt();return fA(n)||$b(n)}()&&function WIe(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=Y8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);!function GIe(){return function Dre(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,s=this;return m(function*(){yield r().call(s,t,i),s.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return m(function*(){const s=yield i().call(r,t);return r.localCache[t]=JSON.stringify(s),s})()}_remove(t){var i=()=>super._remove,r=this;return m(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),f6=(()=>{class n extends h6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let VDe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return m(function*(){const r=t,{eventId:s,eventType:o,data:a}=r.data,l=i.handlersMap[o];if(!(null==l?void 0:l.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=m(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function LDe(n){return Promise.all(n.map(function(){var e=m(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function fk(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class BDe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return m(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=fk("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},r.handlers.add(a),s.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function bn(){return window}function pk(){return void 0!==bn().WorkerGlobalScope&&"function"==typeof bn().importScripts}function mk(){return(mk=m(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const p6="firebaseLocalStorageDb",Yb="firebaseLocalStorage",m6="fbase_key";class km{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xb(n,e){return n.transaction([Yb],e?"readwrite":"readonly").objectStore(Yb)}function gk(){const n=indexedDB.open(p6,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Yb,{keyPath:m6})}catch(r){t(r)}}),n.addEventListener("success",m(function*(){const i=n.result;i.objectStoreNames.contains(Yb)?e(i):(i.close(),yield function GDe(){const n=indexedDB.deleteDatabase(p6);return new km(n).toPromise()}(),e(yield gk()))}))})}function g6(n,e,t){return _k.apply(this,arguments)}function _k(){return _k=m(function*(n,e,t){const i=Xb(n,!0).put({[m6]:e,value:t});return new km(i).toPromise()}),_k.apply(this,arguments)}function yk(){return yk=m(function*(n,e){const t=Xb(n,!1).get(e),i=yield new km(t).toPromise();return void 0===i?null:i.value}),yk.apply(this,arguments)}function _6(n,e){const t=Xb(n,!0).delete(e);return new km(t).toPromise()}const QDe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return m(function*(){return t.db||(t.db=yield gk()),t.db})()}_withRetries(t){var i=this;return m(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield t(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return m(function*(){return pk()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return m(function*(){t.receiver=VDe._getInstance(function $De(){return pk()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=m(function*(r,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=m(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return m(function*(){var i,r;if(t.activeServiceWorker=yield function HDe(){return mk.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new BDe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(i=s[0])||void 0===i?void 0:i.fulfilled)&&(null===(r=s[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return m(function*(){if(i.sender&&i.activeServiceWorker&&function jDe(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch(r){}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const t=yield gk();return yield g6(t,Qb,"1"),yield _6(t,Qb),!0}catch(t){}return!1})()}_withPendingWrite(t){var i=this;return m(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(s=>g6(s,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return m(function*(){const r=yield i._withRetries(s=>function WDe(n,e){return yk.apply(this,arguments)}(s,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(r=>_6(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return m(function*(){const i=yield t._withRetries(o=>{const a=Xb(o,!1).getAll();return new km(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:o,value:a}of i)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),r.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),r.push(o));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function v6(n){return`__${n}${Math.floor(1e6*Math.random())}`}function yc(n,e){return e?To(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}v6("rcb"),new wm(3e4,6e4);class xk extends t6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hSe(n){return u6(n.auth,new xk(n),n.bypassAuthState)}function fSe(n){const{auth:e,user:t}=n;return L(t,e,"internal-error"),function c6(n,e){return LA.apply(this,arguments)}(t,new xk(n),n.bypassAuthState)}function pSe(n){return Mk.apply(this,arguments)}function Mk(){return Mk=m(function*(n){const{auth:e,user:t}=n;return L(t,e,"internal-error"),OA(t,new xk(n),n.bypassAuthState)}),Mk.apply(this,arguments)}new wm(2e3,1e4);const Rm=new Map;class _Se extends class mSe{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=m(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return m(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hSe;case"linkViaPopup":case"linkViaRedirect":return pSe;case"reauthViaPopup":case"reauthViaRedirect":return fSe;default:Hi(this.auth,"internal-error")}}resolve(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return m(function*(){let i=Rm.get(t.auth._key());if(!i){try{const s=(yield function ySe(n,e){return Ok.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}Rm.set(t.auth._key(),i)}return t.bypassAuthState||Rm.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return m(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function Ok(){return Ok=m(function*(n,e){const t=C6(e),i=w6(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r}),Ok.apply(this,arguments)}function vSe(n,e){Rm.set(n._key(),e)}function w6(n){return To(n._redirectPersistence)}function C6(n){return jb("pendingRedirect",n.config.apiKey,n.name)}function E6(n,e){return Hk.apply(this,arguments)}function Hk(){return Hk=m(function*(n,e,t=!1){const i=ji(n),r=yc(i,e),o=yield new _Se(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o}),Hk.apply(this,arguments)}class TSe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function ISe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D6(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!D6(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Us(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(I6(e))}saveEventToCache(e){this.cachedEventUids.add(I6(e)),this.lastProcessedEventTime=Date.now()}}function I6(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function D6({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function DSe(n){return $k.apply(this,arguments)}function $k(){return $k=m(function*(n,e={}){return Fn(n,"GET","/v1/projects",e)}),$k.apply(this,arguments)}const SSe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xSe=/^https?/;function zk(){return zk=m(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield DSe(n);for(const t of e)try{if(ASe(t))return}catch(i){}Hi(n,"unauthorized-domain")}),zk.apply(this,arguments)}function ASe(n){const e=bm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===i}if(!xSe.test(t))return!1;if(SSe.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const kSe=new wm(3e4,6e4);function S6(){const n=bn().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Jb=null;function PSe(n){return Jb=Jb||function RSe(n){return new Promise((e,t)=>{var i,r,s;function o(){S6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S6(),t(Us(n,"network-request-failed"))},timeout:kSe.get()})}if(null===(r=null===(i=bn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=bn().gapi)||void 0===s?void 0:s.load)){const a=v6("iframefcb");return bn()[a]=()=>{gapi.load?o():t(Us(n,"network-request-failed"))},function y6(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=Us("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",function JDe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw Jb=null,e})}(n),Jb}const OSe=new wm(5e3,15e3),LSe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VSe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BSe(n){const e=n.config;L(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?eA(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:n.name,v:_s},r=VSe.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Kh(i).slice(1)}`}function Gk(){return Gk=m(function*(n){const e=yield PSe(n),t=bn().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:BSe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LSe,dontclear:!0},i=>new Promise(function(){var r=m(function*(s,o){yield i.restyle({setHideOnLeave:!1});const a=Us(n,"network-request-failed"),l=bn().setTimeout(()=>{o(a)},OSe.get());function c(){bn().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{o(a)})});return function(s,o){return r.apply(this,arguments)}}()))}),Gk.apply(this,arguments)}const HSe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class x6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function M6(n,e,t,i,r,s){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:_s,eventId:r};if(e instanceof Ha){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",w0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof fDe){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(o.scopes=l.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function YSe({config:n}){return n.emulator?eA(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${Kh(a).slice(1)}`}const Wk="webStorageSupport",ZSe=class XSe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f6,this._completeRedirectFn=E6,this._overrideRedirectResult=vSe}_openPopup(e,t,i,r){var s=this;return m(function*(){var o;Ba(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=M6(e,t,i,bm(),r);return function WSe(n,e,t,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HSe),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Xt().toLowerCase();t&&(a=G8(c)?"_blank":t),z8(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function zIe(n=Xt()){var e;return $b(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function qSe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new x6(null);const d=window.open(e||"",a,u);L(d,n,"popup-blocked");try{d.focus()}catch(h){}return new x6(d)}(e,a,fk())})()}_openRedirect(e,t,i,r){var s=this;return m(function*(){return yield s._originValidation(e),function UDe(n){bn().location.href=n}(M6(e,t,i,bm(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Ba(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return m(function*(){const i=yield function USe(n){return Gk.apply(this,arguments)}(e),r=new TSe(e);return i.register("authEvent",s=>(L(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wk,{type:Wk},r=>{var s;const o=null===(s=null==r?void 0:r[0])||void 0===s?void 0:s[Wk];void 0!==o&&t(!!o),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function MSe(n){return zk.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Y8()||fA()||$b()}};var k6="@firebase/auth";class JSe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return m(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var r;e((null===(r=i)||void 0===r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qk(n=Zo()){const e=Qr(n,"auth");return e.isInitialized()?e.getImmediate():function DIe(n,e){const t=Qr(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(v_(t.getOptions(),null!=e?e:{}))return r;Hi(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:ZSe,persistence:[QDe,FDe,f6]})}!function txe(n){on(new Zt("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((a,l)=>{L(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),L(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X8(n)},u=new KIe(a,l,c);return function SIe(n,e){const t=(null==e?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(To);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),on(new Zt("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return new JSe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(k6,"0.20.7",function exe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),$e(k6,"0.20.7","esm2017")}("Browser");let nxe=(()=>{class n{constructor(t,i){this.router=t,this.user_data_service=i,this.uname="",this.app=Er(_i_firebase),this.realdb=rr(this.app),this.auth=qk(this.app)}ngOnInit(){}signIn(t,i){var r=this;return m(function*(){yield function CDe(n,e,t){return function BA(n,e){return UA.apply(this,arguments)}(Me(n),r6.credential(e,t))}(r.auth,t,i).then(o=>{console.log(o.user),console.log("LogedIn"),r.user_data_service.email=t,r.router.navigate(["/home"],{queryParams:{email:t}})}).catch(o=>{alert("Username or Password incorrect"),console.log("There was some error logging in!")})})()}forgotPass(){var t=this;return m(function*(){let i;console.log("forgot password method called"),i=prompt("Enter your email:"),console.log("password reset email:",i),function vDe(n,e,t){return qA.apply(this,arguments)}(t.auth,i).then(()=>{console.log("password reset email2:",i),alert("Check your email for a reset password link.")}).catch(r=>{})})()}go_to_register(){this.router.navigate(["/register"]),console.log("Entered Registration Page")}}return n.\u0275fac=function(t){return new(t||n)(_(Rt),_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Email","autofocus",""],["email",""],["type","password","placeholder","Password"],["password",""],["type","button","value","Login",3,"click"],["mat-button","",1,"t-color",2,"border","0px","background-color","rgba(255, 255, 255, 0)",3,"click"],["type","button","value","Register",1,"t-color",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),F(5,"LOGIN"),E(),z(6,"input",4,5)(8,"input",6,7)(10,"br"),C(11,"input",8),Q("click",function(){st(r);const o=mt(7),a=mt(9);return i.signIn(o.value,a.value)}),E(),C(12,"button",9),Q("click",function(){return i.forgotPass()}),F(13,"Forgot Password ?"),E(),z(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),C(19,"div",3),F(20," Don't have an account? "),E(),C(21,"input",10),Q("click",function(){return i.go_to_register()}),E()()()()()}},directives:[Vs],styles:[".back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();function ixe(n,e){1&n&&(C(0,"div"),F(1," Passwords don't match "),E())}let rxe=(()=>{class n{constructor(t,i){this.router=t,this.route=i,this.pass_dont_match=!1,this.app=Er(_i_firebase),this.auth=qk(this.app)}ngOnInit(){console.log("omkarelectric892@gmail.com".replace(".",""))}register(t,i,r,s,o){if(s==o){this.pass_dont_match=!1;let a=r.replace(".","");Rs(kt(rr(),"users/"+a),{name:t,username:i,email:r}).then(()=>{console.log("Data updated in realtime database")}).catch(u=>{console.log("There was some error while adding user data in realtime database")}),function wDe(n,e,t){return ZA.apply(this,arguments)}(this.auth,r,s).then(u=>{alert("User Registered successfully"),this.router.navigate(["/login"])}).catch(u=>{})}else this.pass_dont_match=!0}go_to_login(){this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(_(Rt),_(xa))},n.\u0275cmp=Te({type:n,selectors:[["app-register"]],decls:26,vars:1,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Name"],["name",""],["type","text","placeholder","Username"],["uname",""],["type","text","placeholder","Email"],["email",""],["type","password","placeholder","Password"],["password",""],["type","password","placeholder","Confirm Password"],["con_password",""],[4,"ngIf"],["type","button","value","Register",3,"click"],[1,"t-color",2,"margin-left","23%"],["type","button","value","Login",1,"t-color",3,"click"]],template:function(t,i){if(1&t){const r=En();C(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),F(5,"Register"),E(),z(6,"input",4,5)(8,"input",6,7)(10,"input",8,9)(12,"input",10,11)(14,"input",12,13),be(16,ixe,2,0,"div",14),C(17,"input",15),Q("click",function(){st(r);const o=mt(7),a=mt(9),l=mt(11),c=mt(13),u=mt(15);return i.register(o.value,a.value,l.value,c.value,u.value)}),E(),z(18,"br")(19,"br")(20,"br"),C(21,"div",16),F(22," Already have an account? "),z(23,"br")(24,"br"),E(),C(25,"input",17),Q("click",function(){return i.go_to_login()}),E()()()()()}2&t&&(P(16),V("ngIf",i.pass_dont_match))},directives:[wr],styles:[".back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;height:22px;margin:20px 0;padding:12px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;margin-left:28%;float:center;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();class sxe{constructor(e){this.post=e}}function oxe(n,e){1&n&&z(0,"img",17),2&n&&V("src",De().url,ui)}function axe(n,e){1&n&&z(0,"video",18),2&n&&V("src",De().url,ui)}const lxe=[{path:"",component:k8},{path:"home",component:k8},{path:"login",component:nxe},{path:"register",component:rxe},{path:"profile",component:rTe},{path:"add-post",component:(()=>{class n{constructor(t,i,r,s){this.router=t,this.location=i,this.post_service=r,this.user_data=s,this.url="assets/images/prj_logo_colour.png",this.progress=0}ngOnInit(){}go_to_profile(){this.location.back()}onSelectFile(t){const i=t.target.files&&t.target.files[0];if(i){this.current_post_data=new sxe(t.target.files[0]),this.current_post_data.name=t.target.files[0].name,console.log(this.current_post_data.name),console.log(i);var r=new FileReader;r.readAsDataURL(i),i.type.indexOf("image")>-1?this.format="image":i.type.indexOf("video")>-1&&(this.format="video"),this.current_post_data.fileType=this.format,r.onload=s=>{this.url=s.target.result}}}upload_post(t){this.current_post_data.caption=t,this.current_post_data.username=this.user_data.username,this.post_service.Upload_post(this.current_post_data),this.post_service.changeEmitted$.subscribe(i=>this.progress=i)}}return n.\u0275fac=function(t){return new(t||n)(_(Rt),_(al),_(Qp),_(Fs))},n.\u0275cmp=Te({type:n,selectors:[["app-add-post"]],decls:26,vars:3,consts:[[1,"col"],[1,"row-1"],[1,"back-icon",3,"click"],["align","center",1,"new-post-text"],[1,"row-2"],[1,"preview"],[3,"src",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-raised-button","",1,"select-file-button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input-file-button",3,"change"],[3,"value"],[1,"text-caption"],["id","caption",1,"textarea-position"],["caption",""],["mat-raised-button","",1,"upload-button",3,"click"],["mat-raised-button","",1,"cancle-button"],[3,"src"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,i){if(1&t){const r=En();C(0,"div")(1,"div",0)(2,"div",1)(3,"mat-icon",2),Q("click",function(){return i.go_to_profile()}),F(4,"keyboard_arrow_left"),E(),C(5,"h2",3),F(6," New Post "),E()(),C(7,"div",4)(8,"div",5),be(9,oxe,1,1,"img",6),be(10,axe,1,1,"video",7),E(),C(11,"div")(12,"button",8)(13,"label",9),F(14," Select File "),C(15,"input",10),Q("change",function(o){return i.onSelectFile(o)}),E()()(),z(16,"meter",11),C(17,"h3",12),F(18," Caption "),E(),C(19,"textarea",13,14),F(21,"\n                "),E()(),C(22,"button",15),Q("click",function(){st(r);const o=mt(20);return i.upload_post(o.value)}),F(23," Upload "),E(),C(24,"button",16),F(25," Cancle "),E()()()()}2&t&&(P(9),V("ngIf","image"===i.format&&i.url),P(1),V("ngIf","video"===i.format&&i.url),P(6),V("value",i.progress))},directives:[Fa,wr,Vs],styles:[".row-1[_ngcontent-%COMP%]{width:100%;float:left;height:5vh;background-color:#7fffd4}.row-2[_ngcontent-%COMP%]{width:98%;float:left;height:90vh;background-color:#fff8dc;margin:2vh}.preview[_ngcontent-%COMP%]{width:46%;height:60%;float:left;margin:2%;background-color:#fff;border:3px solid brown}.select-file-button[_ngcontent-%COMP%]{width:20%;height:8%;margin:4% 2% 2%;float:left;color:azure;background-color:navy;border:2px solid brown;cursor:pointer;text-align:center}.text-caption[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:15%;font-size:x-large}.textarea-position[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:20%;width:40%;height:12em}.upload-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-87%;width:38%;background-color:#05b905;font-size:medium}.cancle-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-37%;width:38%;background-color:red;font-size:medium}.back-icon[_ngcontent-%COMP%]{margin:.2%;cursor:pointer}.new-post-text[_ngcontent-%COMP%]{margin-top:-2%}.input-file-button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}img[_ngcontent-%COMP%]{width:100%;height:100%;margin:5px;border-radius:5px;background-color:#faebd7;object-fit:contain}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}"]}),n})()},{path:"ViewPost",component:jCe}];let cxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[_x.forRoot(lxe)],_x]}),n})();const uxe=["*",[["mat-toolbar-row"]]],dxe=["*","mat-toolbar-row"],hxe=rm(class{constructor(n){this._elementRef=n}});let fxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=O({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),pxe=(()=>{class n extends hxe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(_(ce),_(Nn),_(Se))},n.\u0275cmp=Te({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&It(r,fxe,5),2&t){let s;fe(s=pe())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Xe("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[X],ngContentSelectors:dxe,decls:2,vars:0,template:function(t,i){1&t&&(Tn(uxe),He(0),He(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),mxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[bt],bt]}),n})(),gxe=(()=>{class n{constructor(t,i){this.ud=t,this.router=i}ngOnInit(){}logout(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(_(Fs),_(Rt))},n.\u0275cmp=Te({type:n,selectors:[["app-header"]],decls:21,vars:1,consts:[["routerLink","home"],["src","/assets/images/wynyard.png","height","70px",1,"icon"],[1,"example-spacer"],["mat-icon-button","",1,"example-icon",3,"matMenuTriggerFor"],["menu","matMenu"],["routerLink","/login","mat-menu-item","",1,"menubutton"],["aria-hidden","false"],["mat-menu-item","",1,"menubutton",3,"click"],["mat-menu-item","","routerLink","/profile",1,"menubutton"]],template:function(t,i){if(1&t&&(C(0,"mat-toolbar")(1,"span",0),z(2,"img",1),E(),z(3,"span",2),C(4,"button",3)(5,"mat-icon"),F(6,"menu"),E()()(),C(7,"mat-menu",null,4)(9,"button",5)(10,"mat-icon",6),F(11,"login"),E(),F(12," Login"),E(),C(13,"button",7),Q("click",function(){return i.logout()}),C(14,"mat-icon"),F(15,"exit_to_app"),E(),F(16,"Logout"),E(),C(17,"button",8)(18,"mat-icon"),F(19,"person"),E(),F(20,"Profile"),E()()),2&t){const r=mt(8);P(4),V("matMenuTriggerFor",r)}},directives:[pxe,jv,Vs,j4,Fa,V4,hm],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background:rgb(155,0,194)}.example-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}.menubutton[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgb(250,188,242) 7%,rgb(255,162,162) 100%);color:#fff}mat-icon[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgb(136,49,126) 7%,rgb(133,42,42) 99%);border-radius:30px}mat-icon[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgb(136,49,126) 7%,rgb(133,42,42) 99%);border-radius:30px}"]}),n})(),_xe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Te({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(t,i){1&t&&(C(0,"p"),F(1,"footer works!"),E())},styles:["p[_ngcontent-%COMP%]{background-color:#0ff;height:100px}"]}),n})(),yxe=(()=>{class n{constructor(){this.title="wynyard"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Te({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"maindiv"],[1,"header"],[1,"footer"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div",1),z(2,"app-header"),E(),z(3,"router-outlet"),C(4,"div",2),z(5,"app-footer"),E()())},directives:[gxe,ux,_xe],styles:[".maindiv[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.maindiv[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),n})();const P6="@firebase/installations",Kk="0.5.12",N6=`w:${Kk}`,F6="FIS_v2",xo=new Cr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function L6(n){return n instanceof Ri&&n.code.includes("request-failed")}function Qk({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function V6(n){return{token:n.token,requestStatus:2,expiresIn:Txe(n.expiresIn),creationTime:Date.now()}}function Yk(n,e){return Xk.apply(this,arguments)}function Xk(){return Xk=m(function*(n,e){const i=(yield e.json()).error;return xo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}),Xk.apply(this,arguments)}function B6({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function U6(n,{refreshToken:e}){const t=B6(n);return t.append("Authorization",function Ixe(n){return`${F6} ${n}`}(e)),t}function Zk(n){return Jk.apply(this,arguments)}function Jk(){return Jk=m(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),Jk.apply(this,arguments)}function Txe(n){return Number(n.replace("s","000"))}function Dxe(n,e){return eR.apply(this,arguments)}function eR(){return eR=m(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Qk(n),r=B6(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:F6,appId:n.appId,sdkVersion:N6})},l=yield Zk(()=>fetch(i,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:V6(c.authToken)}}throw yield Yk("Create Installation",l)}),eR.apply(this,arguments)}function H6(n){return new Promise(e=>{setTimeout(e,n)})}const xxe=/^[cdef][\w-]{21}$/;function Mxe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Axe(n){return function Sxe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return xxe.test(t)?t:""}catch(n){return""}}function Bd(n){return`${n.appName}!${n.appId}`}const Ud=new Map;function j6(n,e){const t=Bd(n);$6(t,e),function Pxe(n,e){const t=function z6(){return!vc&&"BroadcastChannel"in self&&(vc=new BroadcastChannel("[Firebase] FID Change"),vc.onmessage=n=>{$6(n.data.key,n.data.fid)}),vc}();t&&t.postMessage({key:n,fid:e}),function G6(){0===Ud.size&&vc&&(vc.close(),vc=null)}()}(t,e)}function $6(n,e){const t=Ud.get(n);if(t)for(const i of t)i(e)}let vc=null;const bc="firebase-installations-store";let nR=null;function iR(){return nR||(nR=w_("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(bc)}})),nR}function ew(n,e){return rR.apply(this,arguments)}function rR(){return rR=m(function*(n,e){const t=Bd(n),r=(yield iR()).transaction(bc,"readwrite"),s=r.objectStore(bc),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&j6(n,e.fid),e}),rR.apply(this,arguments)}function sR(n){return oR.apply(this,arguments)}function oR(){return oR=m(function*(n){const e=Bd(n),i=(yield iR()).transaction(bc,"readwrite");yield i.objectStore(bc).delete(e),yield i.done}),oR.apply(this,arguments)}function Pm(n,e){return aR.apply(this,arguments)}function aR(){return aR=m(function*(n,e){const t=Bd(n),r=(yield iR()).transaction(bc,"readwrite"),s=r.objectStore(bc),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&j6(n,a.fid),a}),aR.apply(this,arguments)}function lR(n){return cR.apply(this,arguments)}function cR(){return cR=m(function*(n){let e;const t=yield Pm(n.appConfig,i=>{const r=Fxe(i),s=Lxe(n,r);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),cR.apply(this,arguments)}function Fxe(n){return q6(n||{fid:Mxe(),registrationStatus:0})}function Lxe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(xo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Vxe(n,e){return uR.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Bxe(n)}:{installationEntry:e}}function uR(){return uR=m(function*(n,e){try{const t=yield Dxe(n,e);return ew(n.appConfig,t)}catch(t){throw L6(t)&&409===t.customData.serverCode?yield sR(n.appConfig):yield ew(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),uR.apply(this,arguments)}function Bxe(n){return dR.apply(this,arguments)}function dR(){return dR=m(function*(n){let e=yield W6(n.appConfig);for(;1===e.registrationStatus;)yield H6(100),e=yield W6(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield lR(n);return i||t}return e}),dR.apply(this,arguments)}function W6(n){return Pm(n,e=>{if(!e)throw xo.create("installation-not-found");return q6(e)})}function q6(n){return function Uxe(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Hxe(n,e){return hR.apply(this,arguments)}function hR(){return hR=m(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=jxe(n,t),r=U6(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:N6,appId:n.appId}})},l=yield Zk(()=>fetch(i,a));if(l.ok)return V6(yield l.json());throw yield Yk("Generate Auth Token",l)}),hR.apply(this,arguments)}function jxe(n,{fid:e}){return`${Qk(n)}/${e}/authTokens:generate`}function fR(n){return pR.apply(this,arguments)}function pR(){return pR=m(function*(n,e=!1){let t;const i=yield Pm(n.appConfig,s=>{if(!Q6(s))throw xo.create("not-registered");const o=s.authToken;if(!e&&Gxe(o))return s;if(1===o.requestStatus)return t=$xe(n,e),s;{if(!navigator.onLine)throw xo.create("app-offline");const a=qxe(s);return t=zxe(n,a),a}});return t?yield t:i.authToken}),pR.apply(this,arguments)}function $xe(n,e){return mR.apply(this,arguments)}function mR(){return mR=m(function*(n,e){let t=yield K6(n.appConfig);for(;1===t.authToken.requestStatus;)yield H6(100),t=yield K6(n.appConfig);const i=t.authToken;return 0===i.requestStatus?fR(n,e):i}),mR.apply(this,arguments)}function K6(n){return Pm(n,e=>{if(!Q6(e))throw xo.create("not-registered");return function Kxe(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function zxe(n,e){return gR.apply(this,arguments)}function gR(){return gR=m(function*(n,e){try{const t=yield Hxe(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield ew(n.appConfig,i),t}catch(t){if(!L6(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield ew(n.appConfig,i)}else yield sR(n.appConfig);throw t}}),gR.apply(this,arguments)}function Q6(n){return void 0!==n&&2===n.registrationStatus}function Gxe(n){return 2===n.requestStatus&&!function Wxe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function qxe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function _R(){return _R=m(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield lR(e);return i?i.catch(console.error):fR(e).catch(console.error),t.fid}),_R.apply(this,arguments)}function yR(){return yR=m(function*(n,e=!1){const t=n;return yield Xxe(t),(yield fR(t,e)).token}),yR.apply(this,arguments)}function Xxe(n){return vR.apply(this,arguments)}function vR(){return vR=m(function*(n){const{registrationPromise:e}=yield lR(n);e&&(yield e)}),vR.apply(this,arguments)}function CR(n){return xo.create("missing-app-config-values",{valueName:n})}const Y6="installations",nMe=n=>{const e=n.getProvider("app").getImmediate(),t=function eMe(n){if(!n||!n.options)throw CR("App Configuration");if(!n.name)throw CR("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw CR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Qr(e,"heartbeat"),_delete:()=>Promise.resolve()}},iMe=n=>{const t=Qr(n.getProvider("app").getImmediate(),Y6).getImmediate();return{getId:()=>function Qxe(n){return _R.apply(this,arguments)}(t),getToken:r=>function Yxe(n){return yR.apply(this,arguments)}(t,r)}};(function rMe(){on(new Zt(Y6,nMe,"PUBLIC")),on(new Zt("installations-internal",iMe,"PRIVATE"))})(),$e(P6,Kk),$e(P6,Kk,"esm2017");const ER="@firebase/remote-config",$i=new Cr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mMe{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return m(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function gMe(n=navigator){return n.languages&&n.languages[0]||n.language}class _Me{constructor(e,t,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){var t=this;return m(function*(){var i,r,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:gMe()},h={method:"POST",headers:u,body:JSON.stringify(d)},f=fetch(c,h),p=new Promise((S,N)=>{e.signal.addEventListener(()=>{const G=new Error("The operation was aborted.");G.name="AbortError",N(G)})});let g;try{yield Promise.race([f,p]),g=yield f}catch(S){let N="fetch-client-network";throw"AbortError"===(null===(i=S)||void 0===i?void 0:i.name)&&(N="fetch-timeout"),$i.create(N,{originalErrorMessage:null===(r=S)||void 0===r?void 0:r.message})}let y=g.status;const b=g.headers.get("ETag")||void 0;let v,D;if(200===g.status){let S;try{S=yield g.json()}catch(N){throw $i.create("fetch-client-parse",{originalErrorMessage:null===(s=N)||void 0===s?void 0:s.message})}v=S.entries,D=S.state}if("INSTANCE_STATE_UNSPECIFIED"===D?y=500:"NO_CHANGE"===D?y=304:("NO_TEMPLATE"===D||"EMPTY_CONFIG"===D)&&(v={}),304!==y&&200!==y)throw $i.create("fetch-status",{httpStatus:y});return{status:y,eTag:b,config:v}})()}}class bMe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return m(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return m(function*(){yield function yMe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i($i.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function vMe(n){if(!(n instanceof Ri&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+E0(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(o),r.attemptFetch(e,o)}})()}}class EMe{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nw(n,e){var t;const i=n.target.error||void 0;return $i.create(e,{originalErrorMessage:i&&(null===(t=i)||void 0===t?void 0:t.message)})}const wc="app_namespace_store";class SMe{constructor(e,t,i,r=function DMe(){return new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase_remote_config",1);i.onerror=r=>{e(nw(r,"storage-open"))},i.onsuccess=r=>{n(r.target.result)},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wc,{keyPath:"compositeKey"})}}catch(i){e($i.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return m(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var o;const l=i.transaction([wc],"readonly").objectStore(wc),c=t.createCompositeKey(e);try{const u=l.get(c);u.onerror=d=>{s(nw(d,"storage-get"))},u.onsuccess=d=>{const h=d.target.result;r(h?h.value:void 0)}}catch(u){s($i.create("storage-get",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}set(e,t){var i=this;return m(function*(){const r=yield i.openDbPromise;return new Promise((s,o)=>{var a;const c=r.transaction([wc],"readwrite").objectStore(wc),u=i.createCompositeKey(e);try{const d=c.put({compositeKey:u,value:t});d.onerror=h=>{o(nw(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o($i.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return m(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var o;const l=i.transaction([wc],"readwrite").objectStore(wc),c=t.createCompositeKey(e);try{const u=l.delete(c);u.onerror=d=>{s(nw(d,"storage-delete"))},u.onsuccess=()=>{r()}}catch(u){s($i.create("storage-delete",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class xMe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield i;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield r;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function AMe(){return xR.apply(this,arguments)}function xR(){return(xR=m(function*(){if(!Ko())return!1;try{return yield Wh()}catch(n){return!1}})).apply(this,arguments)}!function MMe(){on(new Zt("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $i.create("registration-window");if(!Ko())throw $i.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw $i.create("registration-project-id");if(!o)throw $i.create("registration-api-key");if(!a)throw $i.create("registration-app-id");const l=new SMe(a,i.name,t=t||"firebase"),c=new xMe(l),u=new Qo(ER);u.logLevel=Ve.ERROR;const d=new _Me(r,_s,t,s,o,a),h=new bMe(d,l),f=new mMe(h,l,c,u),p=new EMe(i,f,c,l,u);return function hMe(n){const e=Me(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),$e(ER,"0.3.11"),$e(ER,"0.3.11","esm2017")}();const kMe="/firebase-messaging-sw.js",RMe="/firebase-cloud-messaging-push-scope",eK="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tK="google.c.a.c_id",OMe="google.c.a.c_l",NMe="google.c.a.ts",FMe="google.c.a.e";var Hd=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(Hd||(Hd={})),Hd))();function Mo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function LMe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const MR="fcm_token_details_db",nK="fcm_token_object_Store";function BMe(n){return AR.apply(this,arguments)}function AR(){return AR=m(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(MR))return null;let e=null;return(yield w_(MR,5,{upgrade:(i=m(function*(r,s,o,a){var l;if(s<2||!r.objectStoreNames.contains(nK))return;const c=a.objectStore(nK),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Mo(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mo(d.auth),p256dh:Mo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mo(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mo(d.auth),p256dh:Mo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mo(d.vapidKey)}}}}),function(s,o,a,l){return i.apply(this,arguments)})})).close(),yield A0(MR),yield A0("fcm_vapid_details_db"),yield A0("undefined"),UMe(e)?e:null;var i}),AR.apply(this,arguments)}function UMe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Cc="firebase-messaging-store";let kR=null;function RR(){return kR||(kR=w_("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Cc)}})),kR}function iK(n){return PR.apply(this,arguments)}function PR(){return PR=m(function*(n){const e=LR(n),i=yield(yield RR()).transaction(Cc).objectStore(Cc).get(e);if(i)return i;{const r=yield BMe(n.appConfig.senderId);if(r)return yield OR(n,r),r}}),PR.apply(this,arguments)}function OR(n,e){return NR.apply(this,arguments)}function NR(){return NR=m(function*(n,e){const t=LR(n),r=(yield RR()).transaction(Cc,"readwrite");return yield r.objectStore(Cc).put(e,t),yield r.done,e}),NR.apply(this,arguments)}function $Me(n){return FR.apply(this,arguments)}function FR(){return FR=m(function*(n){const e=LR(n),i=(yield RR()).transaction(Cc,"readwrite");yield i.objectStore(Cc).delete(e),yield i.done}),FR.apply(this,arguments)}function LR({appConfig:n}){return n.appId}const qn=new Cr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function GMe(n,e){return VR.apply(this,arguments)}function VR(){return VR=m(function*(n,e){var t;const i=yield jR(n),r=sK(e),s={method:"POST",headers:i,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(HR(n.appConfig),s)).json()}catch(a){throw qn.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw qn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw qn.create("token-subscribe-no-token");return o.token}),VR.apply(this,arguments)}function WMe(n,e){return BR.apply(this,arguments)}function BR(){return BR=m(function*(n,e){var t;const i=yield jR(n),r=sK(e.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${HR(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw qn.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw qn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw qn.create("token-update-no-token");return o.token}),BR.apply(this,arguments)}function rK(n,e){return UR.apply(this,arguments)}function UR(){return UR=m(function*(n,e){var t;const r={method:"DELETE",headers:yield jR(n)};try{const o=yield(yield fetch(`${HR(n.appConfig)}/${e}`,r)).json();if(o.error)throw qn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw qn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}}),UR.apply(this,arguments)}function HR({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function jR(n){return $R.apply(this,arguments)}function $R(){return $R=m(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),$R.apply(this,arguments)}function sK({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==eK&&(r.web.applicationPubKey=i),r}function KMe(n){return zR.apply(this,arguments)}function zR(){return zR=m(function*(n){const e=yield YMe(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Mo(e.getKey("auth")),p256dh:Mo(e.getKey("p256dh"))},i=yield iK(n.firebaseDependencies);if(i){if(XMe(i.subscriptionOptions,t))return Date.now()>=i.createTime+6048e5?QMe(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield rK(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return aK(n.firebaseDependencies,t)}return aK(n.firebaseDependencies,t)}),zR.apply(this,arguments)}function oK(n){return GR.apply(this,arguments)}function GR(){return GR=m(function*(n){const e=yield iK(n.firebaseDependencies);e&&(yield rK(n.firebaseDependencies,e.token),yield $Me(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),GR.apply(this,arguments)}function QMe(n,e){return WR.apply(this,arguments)}function WR(){return WR=m(function*(n,e){try{const t=yield WMe(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield OR(n.firebaseDependencies,i),t}catch(t){throw yield oK(n),t}}),WR.apply(this,arguments)}function aK(n,e){return qR.apply(this,arguments)}function qR(){return qR=m(function*(n,e){const i={token:yield GMe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield OR(n,i),i.token}),qR.apply(this,arguments)}function YMe(n,e){return KR.apply(this,arguments)}function KR(){return KR=m(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:LMe(e)})}),KR.apply(this,arguments)}function XMe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function lK(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function ZMe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r)}(e,n),function JMe(n,e){!e.data||(n.data=e.data)}(e,n),function eAe(n,e){var t,i,r,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function tAe(n){return"object"==typeof n&&!!n&&tK in n}function cK(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function QR(n){return qn.create("missing-app-config-values",{valueName:n})}cK("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cK("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class iAe{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function nAe(n){if(!n||!n.options)throw QR("App Configuration Object");if(!n.name)throw QR("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw QR(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function uK(n){return YR.apply(this,arguments)}function YR(){return YR=m(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(kMe,{scope:RMe}),n.swRegistration.update().catch(()=>{})}catch(t){throw qn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}),YR.apply(this,arguments)}function rAe(n,e){return XR.apply(this,arguments)}function XR(){return XR=m(function*(n,e){if(!e&&!n.swRegistration&&(yield uK(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");n.swRegistration=e}}),XR.apply(this,arguments)}function sAe(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=m(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=eK)}),ZR.apply(this,arguments)}function JR(){return JR=m(function*(n,e){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield sAe(n,null==e?void 0:e.vapidKey),yield rAe(n,null==e?void 0:e.serviceWorkerRegistration),KMe(n)}),JR.apply(this,arguments)}function oAe(n,e,t){return eP.apply(this,arguments)}function eP(){return eP=m(function*(n,e,t){const i=aAe(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[tK],message_name:t[OMe],message_time:t[NMe],message_device_time:Math.floor(Date.now()/1e3)})}),eP.apply(this,arguments)}function aAe(n){switch(n){case Hd.NOTIFICATION_CLICKED:return"notification_open";case Hd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tP(){return tP=m(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Hd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(lK(t)):n.onMessageHandler.next(lK(t)));const i=t.data;tAe(i)&&"1"===i[FMe]&&(yield oAe(n,t.messageType,i))}),tP.apply(this,arguments)}const hK="@firebase/messaging",cAe=n=>{const e=new iAe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function lAe(n,e){return tP.apply(this,arguments)}(e,t)),e},uAe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function dK(n,e){return JR.apply(this,arguments)}(e,i)}};function pK(){return nP.apply(this,arguments)}function nP(){return(nP=m(function*(){try{yield Wh()}catch(n){return!1}return"undefined"!=typeof window&&Ko()&&b0()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function pAe(n=Zo()){return pK().then(e=>{if(!e)throw qn.create("unsupported-browser")},e=>{throw qn.create("indexed-db-unsupported")}),Qr(Me(n),"messaging").getImmediate()}!function dAe(){on(new Zt("messaging",cAe,"PUBLIC")),on(new Zt("messaging-internal",uAe,"PRIVATE")),$e(hK,"0.9.16"),$e(hK,"0.9.16","esm2017")}();const iw="analytics",mAe="firebase_id",yAe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mK="https://www.googletagmanager.com/gtag/js",Kn=new Qo("@firebase/analytics");function gK(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function vAe(n,e){const t=document.createElement("script");t.src=`${mK}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function wAe(n,e,t,i,r,s){return sP.apply(this,arguments)}function sP(){return sP=m(function*(n,e,t,i,r,s){const o=i[r];try{if(o)yield e[o];else{const l=(yield gK(t)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){Kn.error(a)}n("config",r,s)}),sP.apply(this,arguments)}function CAe(n,e,t,i,r){return oP.apply(this,arguments)}function oP(){return oP=m(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=yield gK(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){Kn.error(s)}}),oP.apply(this,arguments)}function IAe(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(mK))return e;return null}const ur=new Cr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_K=new class MAe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function AAe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function kAe(n){return aP.apply(this,arguments)}function aP(){return aP=m(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:AAe(i)},s=yAe.replace("{app-id}",t),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw ur.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),aP.apply(this,arguments)}function RAe(n){return lP.apply(this,arguments)}function lP(){return lP=m(function*(n,e=_K,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw ur.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw ur.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new NAe;return setTimeout(m(function*(){a.abort()}),void 0!==t?t:6e4),yK({appId:i,apiKey:r,measurementId:s},o,a,e)}),lP.apply(this,arguments)}function yK(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=m(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=_K){var s,o;const{appId:a,measurementId:l}=n;try{yield PAe(i,e)}catch(c){if(l)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield kAe(n);return r.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!OAe(u)){if(r.deleteThrottleMetadata(a),l)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?E0(t,r.intervalMillis,30):E0(t,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return r.setThrottleMetadata(a,h),Kn.debug(`Calling attemptFetch again in ${d} millis`),yK(n,h,i,r)}}),cP.apply(this,arguments)}function PAe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OAe(n){if(!(n instanceof Ri&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class NAe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let uP,gP;function dP(){return dP=m(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}}),dP.apply(this,arguments)}function vK(n){gP=n}function bK(n){uP=n}function HAe(){return _P.apply(this,arguments)}function _P(){return _P=m(function*(){var n;if(!Ko())return Kn.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Wh()}catch(e){return Kn.warn(ur.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0}),_P.apply(this,arguments)}function yP(){return yP=m(function*(n,e,t,i,r,s,o){var a;const l=RAe(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Kn.error(f)),e.push(l);const c=HAe().then(f=>{if(f)return i.getId()}),[u,d]=yield Promise.all([l,c]);IAe()||vAe(s,u.measurementId),gP&&(r("consent","default",gP),vK(void 0)),r("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[mAe]=d),r("config",u.measurementId,h),uP&&(r("set",uP),bK(void 0)),u.measurementId}),yP.apply(this,arguments)}class $Ae{constructor(e){this.app=e}_delete(){return delete Ao[this.app.options.appId],Promise.resolve()}}let Ao={},wK=[];const CK={};let TK,ko,rw="dataLayer",vP=!1;function GAe(n,e,t){!function zAe(){const n=[];if(v0()&&n.push("This is a browser extension environment."),b0()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=ur.create("invalid-analytics-context",{errorInfo:e});Kn.warn(t.message)}}();const i=n.options.appId;if(!i)throw ur.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ur.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ao[i])throw ur.create("already-exists",{id:i});if(!vP){!function bAe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(rw);const{wrappedGtag:s,gtagCore:o}=function TAe(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function EAe(n,e,t,i){function s(){return(s=m(function*(o,a,l){try{"event"===o?yield CAe(n,e,t,a,l):"config"===o?yield wAe(n,e,t,i,a,l):"consent"===o?n("consent","update",l):n("set",a)}catch(c){Kn.error(c)}})).apply(this,arguments)}return function r(o,a,l){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Ao,wK,CK,rw,"gtag");ko=s,TK=o,vP=!0}return Ao[i]=function jAe(n,e,t,i,r,s,o){return yP.apply(this,arguments)}(n,wK,CK,e,TK,rw,t),new $Ae(n)}function qAe(){return bP.apply(this,arguments)}function bP(){return(bP=m(function*(){if(v0()||!b0()||!Ko())return!1;try{return yield Wh()}catch(n){return!1}})).apply(this,arguments)}const IK="@firebase/analytics";!function QAe(){on(new Zt(iw,(e,{options:t})=>GAe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),on(new Zt("analytics-internal",function n(e){try{const t=e.getProvider(iw).getImmediate();return{logEvent:(i,r,s)=>function KAe(n,e,t,i){n=Me(n),function FAe(n,e,t,i,r){return dP.apply(this,arguments)}(ko,Ao[n.app.options.appId],e,t,i).catch(r=>Kn.error(r))}(t,i,r,s)}}catch(t){throw ur.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),$e(IK,"0.8.0"),$e(IK,"0.8.0","esm2017")}();const ZAe=new class XAe extends db{}(class YAe extends ub{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),ja=new Go("7.4.1"),wP="__angularfire_symbol__analyticsIsSupportedValue",CP="__angularfire_symbol__analyticsIsSupported",EP="__angularfire_symbol__remoteConfigIsSupportedValue",TP="__angularfire_symbol__remoteConfigIsSupported",IP="__angularfire_symbol__messagingIsSupportedValue",DP="__angularfire_symbol__messagingIsSupported";globalThis[CP]||(globalThis[CP]=qAe().then(n=>globalThis[wP]=n).catch(()=>globalThis[wP]=!1)),globalThis[DP]||(globalThis[DP]=pK().then(n=>globalThis[IP]=n).catch(()=>globalThis[IP]=!1)),globalThis[TP]||(globalThis[TP]=AMe().then(n=>globalThis[EP]=n).catch(()=>globalThis[EP]=!1));const sw={async:()=>globalThis[DP],sync:()=>{const n=globalThis[IP];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Ec(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Tc=(n,e)=>{const t=e?[e]:P0(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i};function jd(){}class SK{constructor(e,t=ZAe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class JAe{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jd,{},jd,jd)),t.pipe(On({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ic=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new SK(Zone.current)),this.insideAngular=t.run(()=>new SK(Zone.current,im)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(I(Z))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dc(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function eke(n){return Dc().ngZone.runOutsideAngular(()=>n())}function Sc(n){return Dc().ngZone.run(()=>n())}function tke(n){return Dc(),function nke(n){return function(t){return(t=t.lift(new JAe(n.ngZone))).pipe($m(n.outsideAngular),jm(n.insideAngular))}}(Dc())(n)}const ike=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Sc(()=>n.apply(void 0,i))},xc=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=Sc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jd,{},jd,jd)))),i[s]=ike(i[s],t));const r=eke(()=>n.apply(this,i));if(!e){if(r instanceof nt){const s=Dc();return r.pipe($m(s.outsideAngular),jm(s.insideAngular))}return Sc(()=>r)}return r instanceof nt?r.pipe(tke):r instanceof Promise?Sc(()=>new Promise((s,o)=>r.then(a=>Sc(()=>s(a)),a=>Sc(()=>o(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:Sc(()=>r)};class js{constructor(e){return e}}class Mc{constructor(){return P0()}}const xP=new k("angularfire2._apps"),ske={provide:js,useFactory:function rke(n){return n&&1===n.length?n[0]:new js(Zo())},deps:[[new Le,xP]]},oke={provide:Mc,deps:[[new Le,xP]]};function ake(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new js(i)}}let lke=(()=>{class n{constructor(t){$e("angularfire",ja.full,"core"),$e("angularfire",ja.full,"app"),$e("angular",iV.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(I(wu))},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[ske,oke]}),n})();function cke(n,...e){return{ngModule:lke,providers:[{provide:xP,useFactory:ake(n),multi:!0,deps:[Z,ot,Ic,...e]}]}}const uke=xc(Er,!0),xK=new Map,dke={activated:!1,tokenObservers:[]},hke={initialized:!1,enabled:!1};function Ln(n){return xK.get(n)||dke}function ns(n,e){xK.set(n,e)}function ow(){return hke}class _ke{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return m(function*(){t.stop();try{t.pending=new cl,yield function yke(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cl,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ti=new Cr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AK(n){if(!Ln(n).activated)throw Ti.create("use-before-activation",{appName:n.name})}function kP(n,e){return RP.apply(this,arguments)}function RP(){return RP=m(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l,c;try{l=yield fetch(n,a)}catch(f){throw Ti.create("fetch-network-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}if(200!==l.status)throw Ti.create("fetch-status-error",{httpStatus:l.status});try{c=yield l.json()}catch(f){throw Ti.create("fetch-parse-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=1e3*Number(u[1]),h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}),RP.apply(this,arguments)}function Cke(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Om="firebase-app-check-store";let cw=null;function RK(){return cw||(cw=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(Ti.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Om,{keyPath:"compositeKey"})}}catch(i){e(Ti.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),cw)}function PP(){return PP=m(function*(n,e){const i=(yield RK()).transaction(Om,"readwrite"),s=i.objectStore(Om).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Ti.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),PP.apply(this,arguments)}const Nm=new Qo("@firebase/app-check");function FK(n,e){return Ko()?function Dke(n,e){return function PK(n,e){return PP.apply(this,arguments)}(function NK(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Nm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LK(){return ow().enabled}function VK(){return LP.apply(this,arguments)}function LP(){return LP=m(function*(){const n=ow();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),LP.apply(this,arguments)}const Rke={error:"UNKNOWN_ERROR"};function Pke(n){return m_.encodeString(JSON.stringify(n),!1)}function uw(n){return VP.apply(this,arguments)}function VP(){return VP=m(function*(n,e=!1){const t=n.app;AK(t);const i=Ln(t);let s,r=i.token;if(!r){const l=yield i.cachedTokenPromise;l&&dw(l)&&(r=l)}if(!e&&r&&dw(r))return{token:r.token};let a,o=!1;if(LK()){i.exchangeTokenPromise||(i.exchangeTokenPromise=kP(Cke(t,yield VK()),n.heartbeatServiceProvider).then(c=>(i.exchangeTokenPromise=void 0,c)),o=!0);const l=yield i.exchangeTokenPromise;return yield FK(t,l),ns(t,Object.assign(Object.assign({},i),{token:l})),{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(l=>(i.exchangeTokenPromise=void 0,l)),o=!0),r=yield i.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Nm.warn(l.message):Nm.error(l),s=l}return r?(a={token:r.token},ns(t,Object.assign(Object.assign({},i),{token:r})),yield FK(t,r)):a=Nke(s),o&&UK(t,a),a}),VP.apply(this,arguments)}function UP(n,e){const t=Ln(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ns(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function BK(n){const{app:e}=n,t=Ln(e);let i=t.tokenRefresher;i||(i=function Oke(n){const{app:e}=n;return new _ke(m(function*(){let i;if(i=Ln(e).token?yield uw(n,!0):yield uw(n),i.error)throw i.error}),()=>!0,()=>{const t=Ln(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),ns(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function UK(n,e){const t=Ln(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function dw(n){return n.expireTimeMillis-Date.now()>0}function Nke(n){return{token:Pke(Rke),error:n}}class Fke{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ln(this.app);for(const t of e)UP(this.app,t.next);return Promise.resolve()}}const KK="app-check-internal";!function Yke(){on(new Zt("app-check",n=>function Lke(n,e){return new Fke(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(KK).initialize()})),on(new Zt(KK,n=>function Vke(n){return{getToken:e=>uw(n,e),addTokenListener:e=>function BP(n,e,t,i){const{app:r}=n,s=Ln(r),o={next:t,error:i,type:e};if(ns(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&dw(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),BK(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>BK(n))}(n,"INTERNAL",e),removeTokenListener:e=>UP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),$e("@firebase/app-check","0.5.12")}();class $d{constructor(){return Tc("app-check")}}"undefined"!=typeof window&&window;class GP{constructor(e){return e}}class Fm{constructor(){return Tc("auth")}}const WP=new k("angularfire2.auth-instances");function nRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new GP(i)}}const iRe={provide:Fm,deps:[[new Le,WP]]},rRe={provide:GP,useFactory:function tRe(n,e){const t=Ec("auth",n,e);return t&&new GP(t)},deps:[[new Le,WP],js]};let sRe=(()=>{class n{constructor(){$e("angularfire",ja.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[rRe,iRe]}),n})();function oRe(n,...e){return{ngModule:sRe,providers:[{provide:WP,useFactory:nRe(n),multi:!0,deps:[Z,ot,Ic,Mc,[new Le,$d],...e]}]}}const aRe=xc(qk,!0);class qP{constructor(e){return e}}const XK="database",KP=new k("angularfire2.database-instances");function uRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new qP(i)}}const dRe={provide:class lRe{constructor(){return Tc(XK)}},deps:[[new Le,KP]]},hRe={provide:qP,useFactory:function cRe(n,e){const t=Ec(XK,n,e);return t&&new qP(t)},deps:[[new Le,KP],js]};let fRe=(()=>{class n{constructor(){$e("angularfire",ja.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[hRe,dRe]}),n})();function pRe(n,...e){return{ngModule:fRe,providers:[{provide:KP,useFactory:uRe(n),multi:!0,deps:[Z,ot,Ic,Mc,[new Le,Fm],[new Le,$d],...e]}]}}const mRe=xc(rr,!0);class QP{constructor(e){return e}}const ZK="firestore",YP=new k("angularfire2.firestore-instances");function yRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new QP(i)}}const vRe={provide:class gRe{constructor(){return Tc(ZK)}},deps:[[new Le,YP]]},bRe={provide:QP,useFactory:function _Re(n,e){const t=Ec(ZK,n,e);return t&&new QP(t)},deps:[[new Le,YP],js]};let wRe=(()=>{class n{constructor(){$e("angularfire",ja.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[bRe,vRe]}),n})();function CRe(n,...e){return{ngModule:wRe,providers:[{provide:YP,useFactory:yRe(n),multi:!0,deps:[Z,ot,Ic,Mc,[new Le,Fm],[new Le,$d],...e]}]}}const ERe=xc(W$,!0),ZP="functions";class xRe{constructor(e,t,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){var e=this;return m(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return m(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return m(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return m(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const JP="us-central1";class ARe{constructor(e,t,i,r,s=JP,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new xRe(t,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=JP}catch(a){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const n7="@firebase/functions";function URe(n=Zo(),e=JP){return Qr(Me(n),ZP).getImmediate({identifier:e})}!function BRe(n,e){on(new Zt(ZP,(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),a=i.getProvider("messaging-internal"),l=i.getProvider("app-check-internal");return new ARe(s,o,a,l,r,n)},"PUBLIC").setMultipleInstances(!0)),$e(n7,"0.8.4",e),$e(n7,"0.8.4","esm2017")}(fetch.bind(self));class n1{constructor(e){return e}}const s7="functions",r1=new k("angularfire2.functions-instances");function $Re(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new n1(i)}}const zRe={provide:class HRe{constructor(){return Tc(s7)}},deps:[[new Le,r1]]},GRe={provide:n1,useFactory:function jRe(n,e){const t=Ec(s7,n,e);return t&&new n1(t)},deps:[[new Le,r1],js]};let WRe=(()=>{class n{constructor(){$e("angularfire",ja.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[GRe,zRe]}),n})();function qRe(n,...e){return{ngModule:WRe,providers:[{provide:r1,useFactory:$Re(n),multi:!0,deps:[Z,ot,Ic,Mc,[new Le,Fm],[new Le,$d],...e]}]}}const KRe=xc(URe,!0);class s1{constructor(e){return e}}const o7="messaging",o1=new k("angularfire2.messaging-instances");function XRe(n){return(e,t)=>{if(!sw.sync())return null;const i=e.runOutsideAngular(()=>n(t));return new s1(i)}}const ZRe={provide:class QRe{constructor(){return Tc(o7)}},deps:[[new Le,o1]]},JRe={provide:s1,useFactory:function YRe(n,e){if(!sw.sync())return null;const t=Ec(o7,n,e);return t&&new s1(t)},deps:[[new Le,o1],js]};let ePe=(()=>{class n{constructor(){$e("angularfire",ja.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[JRe,ZRe,{provide:Kg,useValue:sw.async,multi:!0}]}),n})();function tPe(n,...e){return{ngModule:ePe,providers:[{provide:o1,useFactory:XRe(n),multi:!0,deps:[Z,ot,Ic,Mc,...e]}]}}const nPe=xc(pAe,!0);class a1{constructor(e){return e}}const a7="storage",l1=new k("angularfire2.storage-instances");function sPe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new a1(i)}}const oPe={provide:class iPe{constructor(){return Tc(a7)}},deps:[[new Le,l1]]},aPe={provide:a1,useFactory:function rPe(n,e){const t=Ec(a7,n,e);return t&&new a1(t)},deps:[[new Le,l1],js]};let lPe=(()=>{class n{constructor(){$e("angularfire",ja.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({providers:[aPe,oPe]}),n})();function cPe(n,...e){return{ngModule:lPe,providers:[{provide:l1,useFactory:sPe(n),multi:!0,deps:[Z,ot,Ic,Mc,[new Le,Fm],[new Le,$d],...e]}]}}const uPe=xc(sf,!0);let l7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,cm,pm,mb,Bb,Eb,Ib,s8,bTe]]}),n})(),c1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,Bb,cm,SM,pm]]}),n})(),c7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,_x,c1,cm,c1,mb,l7,Z0e,mxe,pm,Eb,cIe]]}),n})(),dPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=he({imports:[[gs,cm,Bb,c7,Eb,pm,mb,SM,Ib,s8]]}),n})(),hPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n,bootstrap:[yxe]}),n.\u0275inj=he({providers:[],imports:[[$B,cxe,hbe,dPe,c7,c1,l7,cke(()=>uke(_i_firebase)),oRe(()=>aRe()),pRe(()=>mRe()),CRe(()=>ERe()),qRe(()=>KRe()),tPe(()=>nPe()),cPe(()=>uPe()),cm,Bb,pm,mb,Eb,SM]]}),n})();(function Kte(){nB=!1})(),lre().bootstrapModule(hPe).catch(n=>console.error(n))}},zi=>{zi(zi.s=692)}]);