"use strict";var MDe=Object.defineProperty,kDe=Object.defineProperties,RDe=Object.getOwnPropertyDescriptors,P8=Object.getOwnPropertySymbols,PDe=Object.prototype.hasOwnProperty,ODe=Object.prototype.propertyIsEnumerable,O8=(hr,Rn,Yn)=>Rn in hr?MDe(hr,Rn,{enumerable:!0,configurable:!0,writable:!0,value:Yn}):hr[Rn]=Yn,N8=(hr,Rn)=>{for(var Yn in Rn||(Rn={}))PDe.call(Rn,Yn)&&O8(hr,Yn,Rn[Yn]);if(P8)for(var Yn of P8(Rn))ODe.call(Rn,Yn)&&O8(hr,Yn,Rn[Yn]);return hr},F8=(hr,Rn)=>kDe(hr,RDe(Rn));(self.webpackChunkwynyard=self.webpackChunkwynyard||[]).push([[179],{601:(hr,Rn,Yn)=>{var cd={};function Be(n){return"function"==typeof n}function ob(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Yn.r(cd),Yn.d(cd,{FirebaseError:()=>tr,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>xa,_addComponent:()=>Mm,_addOrOverwriteComponent:()=>DB,_apps:()=>mo,_clearComponents:()=>cne,_components:()=>uh,_getProvider:()=>pi,_registerComponent:()=>Ft,_removeServiceInstance:()=>lne,deleteApp:()=>SB,getApp:()=>yo,getApps:()=>PC,initializeApp:()=>ji,onLog:()=>AB,registerVersion:()=>Se,setLogLevel:()=>xB});const ab=ob(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function jp(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class hn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Be(r))try{r()}catch(s){e=s instanceof ab?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{PR(s)}catch(o){e=null!=e?e:[],o instanceof ab?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ab(e)}}add(e){var t;if(e&&e!==this)if(this.closed)PR(e);else{if(e instanceof hn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&jp(t,e)}remove(e){const{_finalizers:t}=this;t&&jp(t,e),e instanceof hn&&e._removeParent(this)}}hn.EMPTY=(()=>{const n=new hn;return n.closed=!0,n})();const kR=hn.EMPTY;function RR(n){return n instanceof hn||n&&"closed"in n&&Be(n.remove)&&Be(n.add)&&Be(n.unsubscribe)}function PR(n){Be(n)?n():n.unsubscribe()}const aa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hp={setTimeout(n,e,...t){const{delegate:r}=Hp;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Hp;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function OR(n){Hp.setTimeout(()=>{const{onUnhandledError:e}=aa;if(!e)throw n;e(n)})}function lb(){}const L8=cb("C",void 0,void 0);function cb(n,e,t){return{kind:n,value:e,error:t}}let la=null;function $p(n){if(aa.useDeprecatedSynchronousErrorHandling){const e=!la;if(e&&(la={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=la;if(la=null,t)throw r}}else n()}class ub extends hn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,RR(e)&&e.add(this)):this.destination=z8}static create(e,t,r){return new ud(e,t,r)}next(e){this.isStopped?hb(function U8(n){return cb("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?hb(function B8(n){return cb("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hb(L8,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const j8=Function.prototype.bind;function db(n,e){return j8.call(n,e)}class H8{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zp(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zp(r)}else zp(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zp(t)}}}class ud extends ub{constructor(e,t,r){let i;if(super(),Be(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&aa.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&db(e.next,s),error:e.error&&db(e.error,s),complete:e.complete&&db(e.complete,s)}):i=e}this.destination=new H8(i)}}function zp(n){aa.useDeprecatedSynchronousErrorHandling?function V8(n){aa.useDeprecatedSynchronousErrorHandling&&la&&(la.errorThrown=!0,la.error=n)}(n):OR(n)}function hb(n,e){const{onStoppedNotification:t}=aa;t&&Hp.setTimeout(()=>t(n,e))}const z8={closed:!0,next:lb,error:function $8(n){throw n},complete:lb},fb="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xs(n){return n}let Qe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function q8(n){return n&&n instanceof ub||function W8(n){return n&&Be(n.next)&&Be(n.error)&&Be(n.complete)}(n)&&RR(n)}(t)?t:new ud(t,r,i);return $p(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=FR(r))((i,s)=>{const o=new ud({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[fb](){return this}pipe(...t){return function NR(n){return 0===n.length?Xs:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=FR(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function FR(n){var e;return null!==(e=null!=n?n:aa.Promise)&&void 0!==e?e:Promise}const G8=ob(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Oe=(()=>{class n extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new LR(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new G8}next(t){$p(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){$p(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$p(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?kR:(this.currentObservers=null,s.push(t),new hn(()=>{this.currentObservers=null,jp(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Qe;return t.source=this,t}}return n.create=(e,t)=>new LR(e,t),n})();class LR extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:kR}}function BR(n){return Be(null==n?void 0:n.lift)}function It(n){return e=>{if(BR(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function dt(n,e,t,r,i){return new K8(n,e,t,r,i)}class K8 extends ub{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function be(n,e){return It((t,r)=>{let i=0;t.subscribe(dt(r,s=>{r.next(n.call(e,s,i++))}))})}function VR(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function ca(n){return this instanceof ca?(this.v=n,this):new ca(n)}function X8(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof ca?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Z8(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function HR(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const gb=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function $R(n){return Be(null==n?void 0:n.then)}function zR(n){return Be(n[fb])}function WR(n){return Symbol.asyncIterator&&Be(null==n?void 0:n[Symbol.asyncIterator])}function qR(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const GR=function eK(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function KR(n){return Be(null==n?void 0:n[GR])}function YR(n){return X8(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ca(t.read());if(i)return yield ca(void 0);yield yield ca(r)}}finally{t.releaseLock()}})}function QR(n){return Be(null==n?void 0:n.getReader)}function Qn(n){if(n instanceof Qe)return n;if(null!=n){if(zR(n))return function tK(n){return new Qe(e=>{const t=n[fb]();if(Be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(gb(n))return function nK(n){return new Qe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if($R(n))return function rK(n){return new Qe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,OR)})}(n);if(WR(n))return XR(n);if(KR(n))return function iK(n){return new Qe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(QR(n))return function sK(n){return XR(YR(n))}(n)}throw qR(n)}function XR(n){return new Qe(e=>{(function oK(n,e){var t,r,i,s;return function Y8(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Z8(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function cs(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function jt(n,e,t=1/0){return Be(e)?jt((r,i)=>be((s,o)=>e(r,s,i,o))(Qn(n(r,i))),t):("number"==typeof e&&(t=e),It((r,i)=>function aK(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<r?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let _=!1;Qn(t(m,u++)).subscribe(dt(e,v=>{null==i||i(v),s?f(v):e.next(v)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){const v=l.shift();o?cs(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(dt(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,n,t)))}function dd(n=1/0){return jt(Xs,n)}const us=new Qe(n=>n.complete());function ZR(n){return n&&Be(n.schedule)}function mb(n){return n[n.length-1]}function JR(n){return Be(mb(n))?n.pop():void 0}function hd(n){return ZR(mb(n))?n.pop():void 0}function Wp(n,e=0){return It((t,r)=>{t.subscribe(dt(r,i=>cs(r,n,()=>r.next(i),e),()=>cs(r,n,()=>r.complete(),e),i=>cs(r,n,()=>r.error(i),e)))})}function qp(n,e=0){return It((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function eP(n,e){if(!n)throw new Error("Iterable cannot be null");return new Qe(t=>{cs(t,e,()=>{const r=n[Symbol.asyncIterator]();cs(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Cn(n,e){return e?function gK(n,e){if(null!=n){if(zR(n))return function uK(n,e){return Qn(n).pipe(qp(e),Wp(e))}(n,e);if(gb(n))return function hK(n,e){return new Qe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if($R(n))return function dK(n,e){return Qn(n).pipe(qp(e),Wp(e))}(n,e);if(WR(n))return eP(n,e);if(KR(n))return function fK(n,e){return new Qe(t=>{let r;return cs(t,e,()=>{r=n[GR](),cs(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Be(null==r?void 0:r.return)&&r.return()})}(n,e);if(QR(n))return function pK(n,e){return eP(YR(n),e)}(n,e)}throw qR(n)}(n,e):Qn(n)}function _b(...n){const e=hd(n),t=function cK(n,e){return"number"==typeof mb(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Qn(r[0]):dd(t)(Cn(r,e)):us}function tP(n={}){const{connector:e=(()=>new Oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return It((m,_)=>{c++,!d&&!u&&h();const v=l=null!=l?l:e();_.add(()=>{c--,0===c&&!d&&!u&&(a=yb(p,i))}),v.subscribe(_),!o&&c>0&&(o=new ud({next:y=>v.next(y),error:y=>{d=!0,h(),a=yb(f,t,y),v.error(y)},complete:()=>{u=!0,h(),a=yb(f,r),v.complete()}}),Qn(m).subscribe(o))})(s)}}function yb(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ud({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function We(n){for(let e in n)if(n[e]===We)return e;throw Error("Could not find renamed property on target object.")}function vb(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function bb(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const mK=We({__forward_ref__:We});function Gp(n){return n.__forward_ref__=Gp,n.toString=function(){return He(this())},n}function de(n){return nP(n)?n():n}function nP(n){return"function"==typeof n&&n.hasOwnProperty(mK)&&n.__forward_ref__===Gp}class $ extends Error{constructor(e,t){super(function wb(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function oe(n){return"string"==typeof n?n:null==n?"":String(n)}function Pn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oe(n)}function Kp(n,e){const t=e?` in ${e}`:"";throw new $(-201,`No provider for ${Pn(n)} found${t}`)}function pr(n,e){null==n&&function rt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Re(n){return{providers:n.providers||[],imports:n.imports||[]}}function Eb(n){return rP(n,Yp)||rP(n,sP)}function rP(n,e){return n.hasOwnProperty(e)?n[e]:null}function iP(n){return n&&(n.hasOwnProperty(Cb)||n.hasOwnProperty(CK))?n[Cb]:null}const Yp=We({\u0275prov:We}),Cb=We({\u0275inj:We}),sP=We({ngInjectableDef:We}),CK=We({ngInjectorDef:We});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let Ib;function Zs(n){const e=Ib;return Ib=n,e}function oP(n,e,t){const r=Eb(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ne.Optional?null:void 0!==e?e:void Kp(He(n),"Injector")}function Js(n){return{toString:n}.toString()}var Xr=(()=>((Xr=Xr||{})[Xr.OnPush=0]="OnPush",Xr[Xr.Default=1]="Default",Xr))(),Zr=(()=>{return(n=Zr||(Zr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Zr;var n})();const TK="undefined"!=typeof globalThis&&globalThis,DK="undefined"!=typeof window&&window,SK="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$e=TK||"undefined"!=typeof global&&global||DK||SK,Ql={},qe=[],Qp=We({\u0275cmp:We}),Tb=We({\u0275dir:We}),Db=We({\u0275pipe:We}),aP=We({\u0275mod:We}),hs=We({\u0275fac:We}),fd=We({__NG_ELEMENT_ID__:We});let AK=0;function ht(n){return Js(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Xr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||qe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Zr.Emulated,id:"c",styles:n.styles||qe,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=AK++,r.inputs=dP(n.inputs,t),r.outputs=dP(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(lP):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(cP):null,r})}function lP(n){return In(n)||function eo(n){return n[Tb]||null}(n)}function cP(n){return function ua(n){return n[Db]||null}(n)}const uP={};function Ne(n){return Js(()=>{const e={type:n.type,bootstrap:n.bootstrap||qe,declarations:n.declarations||qe,imports:n.imports||qe,exports:n.exports||qe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(uP[n.id]=n.type),e})}function dP(n,e){if(null==n)return Ql;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Ue=ht;function In(n){return n[Qp]||null}function Rr(n,e){const t=n[aP]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function Di(n){return Array.isArray(n)&&"object"==typeof n[1]}function ei(n){return Array.isArray(n)&&!0===n[1]}function xb(n){return 0!=(8&n.flags)}function eg(n){return 2==(2&n.flags)}function tg(n){return 1==(1&n.flags)}function ti(n){return null!==n.template}function OK(n){return 0!=(512&n[2])}function pa(n,e){return n.hasOwnProperty(hs)?n[hs]:null}class LK{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Si(){return fP}function fP(n){return n.type.prototype.ngOnChanges&&(n.setInput=UK),BK}function BK(){const n=gP(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Ql)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function UK(n,e,t,r){const i=gP(n)||function VK(n,e){return n[pP]=e}(n,{previous:Ql,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new LK(l&&l.currentValue,e,o===Ql),n[r]=e}Si.ngInherit=!0;const pP="__ngSimpleChanges__";function gP(n){return n[pP]||null}let Ob;function mt(n){return!!n.listen}const mP={createRenderer:(n,e)=>function Nb(){return void 0!==Ob?Ob:"undefined"!=typeof document?document:void 0}()};function Pt(n){for(;Array.isArray(n);)n=n[0];return n}function ng(n,e){return Pt(e[n])}function Nr(n,e){return Pt(e[n.index])}function Fb(n,e){return n.data[e]}function mr(n,e){const t=e[n];return Di(t)?t:t[0]}function _P(n){return 4==(4&n[2])}function Lb(n){return 128==(128&n[2])}function to(n,e){return null==e?null:n[e]}function yP(n){n[18]=0}function Bb(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const re={lFrame:DP(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function vP(){return re.bindingsEnabled}function S(){return re.lFrame.lView}function xe(){return re.lFrame.tView}function ni(n){return re.lFrame.contextLView=n,n[8]}function Ht(){let n=bP();for(;null!==n&&64===n.type;)n=n.parent;return n}function bP(){return re.lFrame.currentTNode}function Ai(n,e){const t=re.lFrame;t.currentTNode=n,t.isParent=e}function Ub(){return re.lFrame.isParent}function Vb(){re.lFrame.isParent=!1}function rg(){return re.isInCheckNoChangesMode}function ig(n){re.isInCheckNoChangesMode=n}function nc(){return re.lFrame.bindingIndex++}function r5(n,e){const t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,jb(e)}function jb(n){re.lFrame.currentDirectiveIndex=n}function Hb(n){const e=re.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function CP(){return re.lFrame.currentQueryIndex}function $b(n){re.lFrame.currentQueryIndex=n}function o5(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function IP(n,e,t){if(t&ne.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ne.Host||(i=o5(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=re.lFrame=TP();return r.currentTNode=e,r.lView=n,!0}function sg(n){const e=TP(),t=n[1];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function TP(){const n=re.lFrame,e=null===n?null:n.child;return null===e?DP(n):e}function DP(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function SP(){const n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const AP=SP;function og(){const n=SP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Nn(){return re.lFrame.selectedIndex}function no(n){re.lFrame.selectedIndex=n}function _t(){const n=re.lFrame;return Fb(n.tView,n.selectedIndex)}function ag(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function lg(n,e,t){xP(n,e,3,t)}function cg(n,e,t,r){(3&n[2])===t&&xP(n,e,t,r)}function zb(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function xP(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(g5(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function g5(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class yd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ug(n,e,t){const r=mt(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];qb(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function MP(n){return 3===n||4===n||6===n}function qb(n){return 64===n.charCodeAt(0)}function dg(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||kP(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function kP(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function RP(n){return-1!==n}function rc(n){return 32767&n}function ic(n,e){let t=function b5(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Gb=!0;function hg(n){const e=Gb;return Gb=n,e}let w5=0;function bd(n,e){const t=Yb(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Kb(r.data,n),Kb(e,null),Kb(r.blueprint,null));const i=fg(n,e),s=n.injectorIndex;if(RP(i)){const o=rc(i),a=ic(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Kb(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Yb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function fg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function pg(n,e,t){!function E5(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(fd)&&(r=t[fd]),null==r&&(r=t[fd]=w5++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function NP(n,e,t){if(t&ne.Optional)return n;Kp(e,"NodeInjector")}function FP(n,e,t,r){if(t&ne.Optional&&void 0===r&&(r=null),0==(t&(ne.Self|ne.Host))){const i=n[9],s=Zs(void 0);try{return i?i.get(e,r,t&ne.Optional):oP(e,r,t&ne.Optional)}finally{Zs(s)}}return NP(r,e,t)}function LP(n,e,t,r=ne.Default,i){if(null!==n){const s=function D5(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(fd)?n[fd]:void 0;return"number"==typeof e?e>=0?255&e:I5:e}(t);if("function"==typeof s){if(!IP(e,n,r))return r&ne.Host?NP(i,t,r):FP(e,t,r,i);try{const o=s(r);if(null!=o||r&ne.Optional)return o;Kp(t)}finally{AP()}}else if("number"==typeof s){let o=null,a=Yb(n,e),l=-1,c=r&ne.Host?e[16][6]:null;for((-1===a||r&ne.SkipSelf)&&(l=-1===a?fg(n,e):e[a+8],-1!==l&&VP(r,!1)?(o=e[1],a=rc(l),e=ic(l,e)):a=-1);-1!==a;){const u=e[1];if(UP(s,a,u.data)){const d=T5(a,e,t,o,r,c);if(d!==BP)return d}l=e[a+8],-1!==l&&VP(r,e[1].data[a+8]===c)&&UP(s,a,e)?(o=u,a=rc(l),e=ic(l,e)):a=-1}}}return FP(e,t,r,i)}const BP={};function I5(){return new sc(Ht(),S())}function T5(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=gg(a,o,t,null==r?eg(a)&&Gb:r!=o&&0!=(3&a.type),i&ne.Host&&s===a);return null!==u?wd(e,o,u,a):BP}function gg(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=o[l];if(f&&ti(f)&&f.type===t)return l}return null}function wd(n,e,t,r){let i=n[t];const s=e.data;if(function m5(n){return n instanceof yd}(i)){const o=i;o.resolving&&function _K(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new $(-200,`Circular dependency in DI detected for ${n}${t}`)}(Pn(s[t]));const a=hg(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Zs(o.injectImpl):null;IP(n,r,ne.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function p5(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=fP(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Zs(l),hg(a),o.resolving=!1,AP()}}return i}function UP(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function VP(n,e){return!(n&ne.Self||n&ne.Host&&e)}class sc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return LP(this._tNode,this._lView,e,r,t)}}function Qb(n){return nP(n)?()=>{const e=Qb(de(n));return e&&e()}:pa(n)}function oc(n){return function C5(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(MP(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Ht(),n)}const lc="__parameters__";function uc(n,e,t){return Js(()=>{const r=function Xb(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(lc)?l[lc]:Object.defineProperty(l,lc,{value:[]})[lc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class B{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const A5=new B("AnalyzeForEntryComponents");function Fr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Fr(r,e)):e!==n&&e.push(r)}return e}function xi(n,e){n.forEach(t=>Array.isArray(t)?xi(t,e):e(t))}function $P(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function mg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Id(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function _r(n,e,t){let r=dc(n,e);return r>=0?n[1|r]=t:(r=~r,function k5(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Jb(n,e){const t=dc(n,e);if(t>=0)return n[1|t]}function dc(n,e){return function qP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Td={},tw="__NG_DI_FLAG__",yg="ngTempTokenPath",B5=/\n/gm,KP="__source",V5=We({provide:String,useValue:We});let Dd;function YP(n){const e=Dd;return Dd=n,e}function j5(n,e=ne.Default){if(void 0===Dd)throw new $(203,"");return null===Dd?oP(n,void 0,e):Dd.get(n,e&ne.Optional?null:void 0,e)}function C(n,e=ne.Default){return(function IK(){return Ib}()||j5)(de(n),e)}const vg=C;function nw(n){const e=[];for(let t=0;t<n.length;t++){const r=de(n[t]);if(Array.isArray(r)){if(0===r.length)throw new $(900,"");let i,s=ne.Default;for(let o=0;o<r.length;o++){const a=r[o],l=H5(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(C(i,s))}else e.push(C(r))}return e}function Sd(n,e){return n[tw]=e,n.prototype[tw]=e,n}function H5(n){return n[tw]}const bg=Sd(uc("Inject",n=>({token:n})),-1),Ce=Sd(uc("Optional"),8),hc=Sd(uc("SkipSelf"),4);let Eg;function pc(n){var e;return(null===(e=function iw(){if(void 0===Eg&&(Eg=null,$e.trustedTypes))try{Eg=$e.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Eg}())||void 0===e?void 0:e.createHTML(n))||n}class ga{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class t6 extends ga{getTypeName(){return"HTML"}}class n6 extends ga{getTypeName(){return"Style"}}class r6 extends ga{getTypeName(){return"Script"}}class i6 extends ga{getTypeName(){return"URL"}}class s6 extends ga{getTypeName(){return"ResourceURL"}}function yr(n){return n instanceof ga?n.changingThisBreaksApplicationSecurity:n}function Mi(n,e){const t=iO(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function iO(n){return n instanceof ga&&n.getTypeName()||null}class d6{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(pc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class h6{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=pc(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=pc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const p6=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g6=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xd(n){return(n=String(n)).match(p6)||n.match(g6)?n:"unsafe:"+n}function oO(n){return(n=String(n)).split(",").map(e=>xd(e.trim())).join(", ")}function ki(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Md(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const aO=ki("area,br,col,hr,img,wbr"),lO=ki("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cO=ki("rp,rt"),ow=Md(aO,Md(lO,ki("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Md(cO,ki("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Md(cO,lO)),aw=ki("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lw=ki("srcset"),uO=Md(aw,lw,ki("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ki("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),m6=ki("script,style,template");class _6{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ow.hasOwnProperty(t))return this.sanitizedSomething=!0,!m6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!uO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;aw[a]&&(l=xd(l)),lw[a]&&(l=oO(l)),this.buf.push(" ",o,'="',dO(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ow.hasOwnProperty(t)&&!aO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dO(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const y6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v6=/([^\#-~ |!])/g;function dO(n){return n.replace(/&/g,"&amp;").replace(y6,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(v6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ig;function hO(n,e){let t=null;try{Ig=Ig||function sO(n){const e=new h6(n);return function f6(){try{return!!(new window.DOMParser).parseFromString(pc(""),"text/html")}catch(n){return!1}}()?new d6(e):e}(n);let r=e?String(e):"";t=Ig.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Ig.getInertBodyElement(r)}while(r!==s);return pc((new _6).sanitizeChildren(cw(t)||t))}finally{if(t){const r=cw(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function cw(n){return"content"in n&&function b6(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Le=(()=>((Le=Le||{})[Le.NONE=0]="NONE",Le[Le.HTML=1]="HTML",Le[Le.STYLE=2]="STYLE",Le[Le.SCRIPT=3]="SCRIPT",Le[Le.URL=4]="URL",Le[Le.RESOURCE_URL=5]="RESOURCE_URL",Le))();function ma(n){const e=function kd(){const n=S();return n&&n[12]}();return e?e.sanitize(Le.URL,n)||"":Mi(n,"URL")?yr(n):xd(oe(n))}const gO="__ngContext__";function Dn(n,e){n[gO]=e}function dw(n){const e=function Rd(n){return n[gO]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function fw(n){return n.ngOriginalError}function L6(n,...e){n.error(...e)}class io{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function F6(n){return n&&n.ngErrorLogger||L6}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fw(e);for(;t&&fw(t);)t=fw(t);return t||null}}const G6=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($e))();function Ri(n){return n instanceof Function?n():n}var vr=(()=>((vr=vr||{})[vr.Important=1]="Important",vr[vr.DashCase=2]="DashCase",vr))();function gw(n,e){return undefined(n,e)}function Pd(n){const e=n[3];return ei(e)?e[3]:e}function mw(n){return IO(n[13])}function _w(n){return IO(n[4])}function IO(n){for(;null!==n&&!ei(n);)n=n[4];return n}function mc(n,e,t,r,i){if(null!=r){let s,o=!1;ei(r)?s=r:Di(r)&&(o=!0,r=r[0]);const a=Pt(r);0===n&&null!==t?null==i?MO(e,t,a):_a(e,t,a,i||null,!0):1===n&&null!==t?_a(e,t,a,i||null,!0):2===n?function LO(n,e,t){const r=Tg(n,e);r&&function a7(n,e,t,r){mt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function u7(n,e,t,r,i){const s=t[7];s!==Pt(t)&&mc(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];Od(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function vw(n,e,t){if(mt(n))return n.createElement(e,t);{const r=null!==t?function zK(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function DO(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bb(i,-1)),t.splice(r,1)}function bw(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&DO(i,r),e>0&&(n[t-1][4]=r[4]);const s=mg(n,10+e);!function J6(n,e){Od(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function SO(n,e){if(!(256&e[2])){const t=e[11];mt(t)&&t.destroyNode&&Od(n,e,t,3,null,null),function n7(n){let e=n[13];if(!e)return ww(n[1],n);for(;e;){let t=null;if(Di(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Di(e)&&ww(e[1],e),e=e[3];null===e&&(e=n),Di(e)&&ww(e[1],e),t=e&&e[4]}e=t}}(e)}}function ww(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function o7(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof yd)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function s7(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Pt(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&mt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ei(e[3])){t!==e[3]&&DO(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function AO(n,e,t){return function xO(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Zr.None||i===Zr.Emulated)return null}return Nr(r,t)}(n,e.parent,t)}function _a(n,e,t,r,i){mt(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function MO(n,e,t){mt(n)?n.appendChild(e,t):e.appendChild(t)}function kO(n,e,t,r,i){null!==r?_a(n,e,t,r,i):MO(n,e,t)}function Tg(n,e){return mt(n)?n.parentNode(e):e.parentNode}function RO(n,e,t){return OO(n,e,t)}let OO=function PO(n,e,t){return 40&n.type?Nr(n,t):null};function Dg(n,e,t,r){const i=AO(n,r,e),s=e[11],a=RO(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)kO(s,i,t[l],a,!1);else kO(s,i,t,a,!1)}function Sg(n,e){if(null!==e){const t=e.type;if(3&t)return Nr(e,n);if(4&t)return Cw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Sg(n,r);{const i=n[e.index];return ei(i)?Cw(-1,i):Pt(i)}}if(32&t)return gw(e,n)()||Pt(n[e.index]);{const r=FO(n,e);return null!==r?Array.isArray(r)?r[0]:Sg(Pd(n[16]),r):Sg(n,e.next)}}return null}function FO(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Cw(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Sg(r,i)}return e[7]}function Iw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Dn(Pt(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Iw(n,e,t.child,r,i,s,!1),mc(e,n,i,a,s);else if(32&l){const c=gw(t,r);let u;for(;u=c();)mc(e,n,i,u,s);mc(e,n,i,a,s)}else 16&l?BO(n,e,r,t,i,s):mc(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Od(n,e,t,r,i,s){Iw(t,r,n.firstChild,e,i,s,!1)}function BO(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)mc(e,n,i,l[c],s);else Iw(n,e,l,o[3],i,s,!0)}function UO(n,e,t){mt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Tw(n,e,t){mt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function VO(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const jO="ng-template";function h7(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==VO(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function HO(n){return 4===n.type&&n.value!==jO}function f7(n,e,t){return e===(4!==n.type||t?n.value:jO)}function p7(n,e,t){let r=4;const i=n.attrs||[],s=function _7(n){for(let e=0;e<n.length;e++)if(MP(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!f7(n,l,t)||""===l&&1===e.length){if(ri(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!h7(n.attrs,c,t)){if(ri(r))return!1;o=!0}continue}const d=g7(8&r?"class":l,i,HO(n),t);if(-1===d){if(ri(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==VO(f,c,0)||2&r&&c!==h){if(ri(r))return!1;o=!0}}}}else{if(!o&&!ri(r)&&!ri(l))return!1;if(o&&ri(l))continue;o=!1,r=l|1&r}}return ri(r)||o}function ri(n){return 0==(1&n)}function g7(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function y7(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function $O(n,e,t=!1){for(let r=0;r<e.length;r++)if(p7(n,e[r],t))return!0;return!1}function v7(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function zO(n,e){return n?":not("+e.trim()+")":e}function b7(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ri(o)&&(e+=zO(s,i),i=""),r=o,s=s||!ri(r);t++}return""!==i&&(e+=zO(s,i)),e}const ae={};function yt(n){WO(xe(),S(),Nn()+n,rg())}function WO(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&lg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&cg(e,s,0,t)}no(t)}function Ag(n,e){return n<<17|e<<2}function ii(n){return n>>17&32767}function Dw(n){return 2|n}function gs(n){return(131068&n)>>2}function Sw(n,e){return-131069&n|e<<2}function Aw(n){return 1|n}function nN(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];$b(i),o.contentQueries(2,e[s],s)}}}function Nd(n,e,t,r,i,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,yP(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function _c(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Lw(n,e,t,r,i){const s=bP(),o=Ub(),l=n.data[e]=function B7(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function n5(){return re.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function _d(){const n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ai(s,!0),s}function yc(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Fd(n,e,t){sg(e);try{const r=n.viewQuery;null!==r&&qw(1,r,t);const i=n.template;null!==i&&rN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nN(n,e),n.staticViewQueries&&qw(2,n.viewQuery,t);const s=n.components;null!==s&&function N7(n,e){for(let t=0;t<e.length;t++)nY(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,og()}}function vc(n,e,t,r){const i=e[2];if(256==(256&i))return;sg(e);const s=rg();try{yP(e),function wP(n){return re.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&rN(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&lg(e,c,null)}else{const c=n.preOrderHooks;null!==c&&cg(e,c,0,null),zb(e,0)}if(function eY(n){for(let e=mw(n);null!==e;e=_w(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&Bb(s,1),i[2]|=1024}}}(e),function J7(n){for(let e=mw(n);null!==e;e=_w(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Lb(r)&&vc(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&nN(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&lg(e,c)}else{const c=n.contentHooks;null!==c&&cg(e,c,1),zb(e,1)}!function P7(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)no(~i);else{const s=i,o=t[++r],a=t[++r];r5(o,s),a(2,e[s])}}}finally{no(-1)}}(n,e);const a=n.components;null!==a&&function O7(n,e){for(let t=0;t<e.length;t++)tY(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&qw(2,l,r),!s)if(o){const c=n.viewCheckHooks;null!==c&&lg(e,c)}else{const c=n.viewHooks;null!==c&&cg(e,c,2),zb(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bb(e[3],-1))}finally{og()}}function F7(n,e,t,r){const i=e[10],s=!rg(),o=_P(e);try{s&&!o&&i.begin&&i.begin(),o&&Fd(n,e,r),vc(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function rN(n,e,t,r,i){const s=Nn(),o=2&r;try{no(-1),o&&e.length>20&&WO(n,e,20,rg()),t(r,i)}finally{no(s)}}function Bw(n,e,t){!vP()||(function W7(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||bd(t,e),Dn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=ti(l);c&&Q7(e,t,l);const u=wd(e,n,a,t);Dn(u,e),null!==o&&X7(0,a-i,u,l,0,o),c&&(mr(t.index,e)[8]=u)}}(n,e,t,Nr(t,e)),128==(128&t.flags)&&function q7(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function s5(){return re.lFrame.currentDirectiveIndex}();try{no(o);for(let l=r;l<i;l++){const c=n.data[l],u=e[l];jb(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&hN(c,u)}}finally{no(-1),jb(a)}}(n,e,t))}function Uw(n,e,t=Nr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function sN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=kg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function kg(n,e,t,r,i,s,o,a,l,c){const u=20+r,d=u+i,h=function L7(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ae);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function lN(n,e,t,r){const i=yN(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&vN(n).push(r,i.length-1))}function cN(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function br(n,e,t,r,i,s,o,a){const l=Nr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(EN(n,t,u,r,i),eg(e)&&function j7(n,e){const t=mr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function V7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,mt(s)?s.setProperty(l,r,i):qb(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Vw(n,e,t,r){let i=!1;if(vP()){const s=function G7(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];$O(t,o.selectors,!1)&&(i||(i=[]),pg(bd(t,e),n,o.type),ti(o)?(fN(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,pN(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=yc(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=dg(t.mergedAttrs,d.hostAttrs),gN(n,t,e,c,d),Y7(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function U7(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===s||HO(e)?null:Z7(d,s);o.push(h),a=cN(d,c,a),l=cN(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function K7(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new $(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=dg(t.mergedAttrs,t.attrs),i}function dN(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function z7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function hN(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function fN(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function Y7(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ti(e)&&(t[""]=n)}}function pN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function gN(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=pa(i.type)),o=new yd(s,ti(i),null);n.blueprint[r]=o,t[r]=o,dN(n,e,0,r,yc(n,t,i.hostVars,ae),i)}function Q7(n,e,t){const r=Nr(e,n),i=sN(t),s=n[10],o=Rg(n,Nd(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function Pi(n,e,t,r,i,s){const o=Nr(n,e);!function jw(n,e,t,r,i,s,o){if(null==s)mt(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?oe(s):o(s,r||"",i);mt(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function X7(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function Z7(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function mN(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function tY(n,e){const t=mr(e,n);if(Lb(t)){const r=t[1];80&t[2]?vc(r,t,r.template,t[8]):t[5]>0&&Hw(t)}}function Hw(n){for(let r=mw(n);null!==r;r=_w(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];vc(o,s,o.template,s[8])}else s[5]>0&&Hw(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=mr(t[r],n);Lb(i)&&i[5]>0&&Hw(i)}}function nY(n,e){const t=mr(e,n),r=t[1];(function rY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Fd(r,t,t[8])}function Rg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function $w(n){for(;n;){n[2]|=64;const e=Pd(n);if(OK(n)&&!e)return n;n=e}return null}function Ww(n,e,t){const r=e[10];r.begin&&r.begin();try{vc(n,e,n.template,t)}catch(i){throw wN(e,i),i}finally{r.end&&r.end()}}function _N(n){!function zw(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=dw(t),i=r[1];F7(i,r,i.template,t)}}(n[8])}function qw(n,e,t){$b(0),e(n,t)}const aY=(()=>Promise.resolve(null))();function yN(n){return n[7]||(n[7]=[])}function vN(n){return n.cleanup||(n.cleanup=[])}function bN(n,e,t){return(null===n||ti(n))&&(t=function GK(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function wN(n,e){const t=n[9],r=t?t.get(io,null):null;r&&r.handleError(e)}function EN(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function ms(n,e,t){const r=ng(e,n);!function TO(n,e,t){mt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Pg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=bb(i,a):2==s&&(r=bb(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const Gw=new B("INJECTOR",-1);class CN{get(e,t=Td){if(t===Td){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}const Kw=new B("Set Injector scope."),Ld={},uY={};let Yw;function IN(){return void 0===Yw&&(Yw=new CN),Yw}function TN(n,e=null,t=null,r){const i=DN(n,e,t,r);return i._resolveInjectorDefTypes(),i}function DN(n,e=null,t=null,r){return new dY(n,t,e||IN(),r)}class dY{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&xi(t,a=>this.processProvider(a,e,t)),xi([e],a=>this.processInjectorType(a,[],s)),this.records.set(Gw,bc(void 0,this));const o=this.records.get(Kw);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:He(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Td,r=ne.Default){this.assertNotDestroyed();const i=YP(this),s=Zs(void 0);try{if(!(r&ne.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function vY(n){return"function"==typeof n||"object"==typeof n&&n instanceof B}(e)&&Eb(e);a=l&&this.injectableDefInScope(l)?bc(Qw(e),Ld):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&ne.Self?IN():this.parent).get(e,t=r&ne.Optional&&t===Td?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[yg]=o[yg]||[]).unshift(He(e)),i)throw o;return function $5(n,e,t,r){const i=n[yg];throw e[KP]&&i.unshift(e[KP]),n.message=function z5(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):He(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(B5,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[yg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Zs(s),YP(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(He(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processInjectorType(e,t,r){if(!(e=de(e)))return!1;let i=iP(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=iP(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{xi(i.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];xi(f,p=>this.processProvider(p,h,f||qe))}}this.injectorDefTypes.add(o);const l=pa(o)||(()=>new o);this.records.set(o,bc(l,Ld));const c=i.providers;if(null!=c&&!a){const u=e;xi(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=wc(e=de(e))?e:de(e&&e.provide);const s=function fY(n,e,t){return AN(n)?bc(void 0,n.useValue):bc(SN(n),Ld)}(e);if(wc(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=bc(void 0,Ld,!0),o.factory=()=>nw(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Ld&&(t.value=uY,t.value=t.factory()),"object"==typeof t.value&&t.value&&function yY(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=de(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Qw(n){const e=Eb(n),t=null!==e?e.factory:pa(n);if(null!==t)return t;if(n instanceof B)throw new $(204,!1);if(n instanceof Function)return function hY(n){const e=n.length;if(e>0)throw Id(e,"?"),new $(204,!1);const t=function wK(n){const e=n&&(n[Yp]||n[sP]);if(e){const t=function EK(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new $(204,!1)}function SN(n,e,t){let r;if(wc(n)){const i=de(n);return pa(i)||Qw(i)}if(AN(n))r=()=>de(n.useValue);else if(function gY(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...nw(n.deps||[]));else if(function pY(n){return!(!n||!n.useExisting)}(n))r=()=>C(de(n.useExisting));else{const i=de(n&&(n.useClass||n.provide));if(!function _Y(n){return!!n.deps}(n))return pa(i)||Qw(i);r=()=>new i(...nw(n.deps))}return r}function bc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AN(n){return null!==n&&"object"==typeof n&&V5 in n}function wc(n){return"function"==typeof n}let Ge=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return TN({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return TN({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Td,n.NULL=new CN,n.\u0275prov=z({token:n,providedIn:"any",factory:()=>C(Gw)}),n.__NG_ELEMENT_ID__=-1,n})();function SY(n,e){ag(dw(n)[1],Ht())}function ao(n){let e=function VN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ti(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Jw(n.inputs),o.declaredInputs=Jw(n.declaredInputs),o.outputs=Jw(n.outputs);const a=i.hostBindings;a&&kY(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&xY(n,l),c&&MY(n,c),vb(n.inputs,i.inputs),vb(n.declaredInputs,i.declaredInputs),vb(n.outputs,i.outputs),ti(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ao&&(t=!1)}}e=Object.getPrototypeOf(e)}!function AY(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dg(i.hostAttrs,t=dg(t,i.hostAttrs))}}(r)}function Jw(n){return n===Ql?{}:n===qe?[]:n}function xY(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function MY(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function kY(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let Og=null;function Ec(){if(!Og){const n=$e.Symbol;if(n&&n.iterator)Og=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Og=r)}}}return Og}function Bd(n){return!!eE(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ec()in n)}function eE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Sn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function lo(n,e,t,r){const i=S();return Sn(i,nc(),e)&&(xe(),Pi(_t(),i,n,e,t,r)),lo}function Ic(n,e,t,r){return Sn(n,nc(),t)?e+oe(t)+r:ae}function oi(n,e,t,r,i,s,o,a){const l=S(),c=xe(),u=n+20,d=c.firstCreatePass?function BY(n,e,t,r,i,s,o,a,l){const c=e.consts,u=_c(e,n,4,o||null,to(c,a));Vw(e,t,u,to(c,l)),ag(e,u);const d=u.tViews=kg(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Ai(d,!1);const h=l[11].createComment("");Dg(c,l,h,d),Dn(h,l),Rg(l,l[u]=mN(h,l,h,d)),tg(d)&&Bw(c,l,d),null!=o&&Uw(l,d,a)}function Jn(n){return function tc(n,e){return n[e]}(function t5(){return re.lFrame.contextLView}(),20+n)}function I(n,e=ne.Default){const t=S();return null===t?C(n,e):LP(Ht(),t,de(n),e)}function Lg(){throw new Error("invalid")}function zt(n,e,t){const r=S();return Sn(r,nc(),e)&&br(xe(),_t(),r,n,e,r[11],t,!1),zt}function sE(n,e,t,r,i){const o=i?"class":"style";EN(n,t,e.inputs[o],o,r)}function U(n,e,t,r){const i=S(),s=xe(),o=20+n,a=i[11],l=i[o]=vw(a,e,function f5(){return re.lFrame.currentNamespace}()),c=s.firstCreatePass?function sQ(n,e,t,r,i,s,o){const a=e.consts,c=_c(e,n,2,i,to(a,s));return Vw(e,t,c,to(a,o)),null!==c.attrs&&Pg(c,c.attrs,!1),null!==c.mergedAttrs&&Pg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];Ai(c,!0);const u=c.mergedAttrs;null!==u&&ug(a,l,u);const d=c.classes;null!==d&&Tw(a,l,d);const h=c.styles;return null!==h&&UO(a,l,h),64!=(64&c.flags)&&Dg(s,i,l,c),0===function QK(){return re.lFrame.elementDepthCount}()&&Dn(l,i),function XK(){re.lFrame.elementDepthCount++}(),tg(c)&&(Bw(s,i,c),function iN(n,e,t){if(xb(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,i)),null!==r&&Uw(i,c),U}function L(){let n=Ht();Ub()?Vb():(n=n.parent,Ai(n,!1));const e=n;!function ZK(){re.lFrame.elementDepthCount--}();const t=xe();return t.firstCreatePass&&(ag(t,n),xb(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function y5(n){return 0!=(16&n.flags)}(e)&&sE(t,e,S(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function v5(n){return 0!=(32&n.flags)}(e)&&sE(t,e,S(),e.stylesWithoutHost,!1),L}function Ve(n,e,t,r){return U(n,e,t,r),L(),Ve}function co(){return S()}function Bg(n){return!!n&&"function"==typeof n.then}const c1=function l1(n){return!!n&&"function"==typeof n.subscribe};function Ze(n,e,t,r){const i=S(),s=xe(),o=Ht();return u1(s,i,i[11],o,n,e,!!t,r),Ze}function Ug(n,e){const t=Ht(),r=S(),i=xe();return u1(i,r,bN(Hb(i.data),t,r),t,n,e,!1),Ug}function u1(n,e,t,r,i,s,o,a){const l=tg(r),u=n.firstCreatePass&&vN(n),d=e[8],h=yN(e);let f=!0;if(3&r.type||a){const _=Nr(r,e),v=a?a(_):_,y=h.length,E=a?T=>a(Pt(T[r.index])):r.index;if(mt(t)){let T=null;if(!a&&l&&(T=function aQ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,f=!1;else{s=lE(r,e,d,s,!1);const k=t.listen(v,i,s);h.push(s,k),u&&u.push(i,E,y,y+1)}}else s=lE(r,e,d,s,!0),v.addEventListener(i,s,o),h.push(s),u&&u.push(i,E,y,o)}else s=lE(r,e,d,s,!1);const p=r.outputs;let m;if(f&&null!==p&&(m=p[i])){const _=m.length;if(_)for(let v=0;v<_;v+=2){const V=e[m[v]][m[v+1]].subscribe(s),ee=h.length;h.push(s,V),u&&u.push(i,r.index,ee,-(ee+1))}}}function d1(n,e,t,r){try{return!1!==t(r)}catch(i){return wN(n,i),!1}}function lE(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?mr(n.index,e):e;0==(32&e[2])&&$w(a);let l=d1(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=d1(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function _s(n=1){return function a5(n){return(re.lFrame.contextLView=function l5(n,e){for(;n>0;)e=e[15],n--;return e}(n,re.lFrame.contextLView))[8]}(n)}function lQ(n,e){let t=null;const r=function m7(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?$O(n,s,!0):v7(r,s))return i}else t=i}return t}function uo(n){const e=S()[16][6];if(!e.projection){const r=e.projection=Id(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?lQ(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function wr(n,e=0,t){const r=S(),i=xe(),s=_c(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Vb(),64!=(64&s.flags)&&function c7(n,e,t){BO(e[11],0,e,t,AO(n,t,e),RO(t.parent||e[6],t,e))}(i,r,s)}function Vg(n,e,t){return jg(n,"",e,"",t),Vg}function jg(n,e,t,r,i){const s=S(),o=Ic(s,e,t,r);return o!==ae&&br(xe(),_t(),s,n,o,s[11],i,!1),jg}function b1(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?ii(s):gs(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];dQ(n[a],e)&&(l=!0,n[a+1]=r?Aw(u):Dw(u)),a=r?ii(u):gs(u)}l&&(n[t+1]=r?Dw(s):Aw(s))}function dQ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&dc(n,e)>=0}function cE(n,e,t){return li(n,e,t,!1),cE}function ai(n,e){return li(n,e,null,!0),ai}function li(n,e,t,r){const i=S(),s=xe(),o=function ps(n){const e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function A1(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Nn()],o=function S1(n,e){return e>=n.expandoStartIndex}(n,t);(function R1(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function bQ(n,e,t,r){const i=Hb(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Vd(t=uE(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=uE(i,n,e,t,r),null===s){let l=function wQ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==gs(r))return n[ii(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=uE(null,n,e,l[1],r),l=Vd(l,e.attrs,r),function EQ(n,e,t,r){n[ii(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function CQ(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Vd(r,n[s].hostAttrs,t);return Vd(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function cQ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ii(o),l=gs(o);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||dc(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=ii(n[a+1]);n[r+1]=Ag(h,a),0!==h&&(n[h+1]=Sw(n[h+1],r)),n[a+1]=function C7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Ag(a,0),0!==a&&(n[a+1]=Sw(n[a+1],r)),a=r;else n[r+1]=Ag(l,0),0===a?a=r:n[l+1]=Sw(n[l+1],r),l=r;c&&(n[r+1]=Dw(n[r+1])),b1(n,u,r,!0),b1(n,u,r,!1),function uQ(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&dc(s,e)>=0&&(t[r+1]=Aw(t[r+1]))}(e,u,n,r,s),o=Ag(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ae&&Sn(i,o,e)&&function M1(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Hg(function KO(n){return 1==(1&n)}(c)?k1(l,e,t,i,gs(c),o):void 0)||(Hg(s)||function GO(n){return 2==(2&n)}(c)&&(s=k1(l,null,t,i,a,o)),function d7(n,e,t,r,i){const s=mt(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:vr.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=vr.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,ng(Nn(),t),i,s))}(s,s.data[Nn()],i,i[11],n,i[o+1]=function DQ(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(yr(n)))),n}(e,t),r,o)}function uE(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Vd(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Vd(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_r(n,o,!!t||e[++s]))}return void 0===n?null:n}function k1(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===ae&&(h=d?qe:void 0);let f=d?Jb(h,r):u===r?h:void 0;if(c&&!Hg(f)&&(f=Jb(l,r)),Hg(f)&&(a=f,o))return a;const p=n[i+1];i=o?ii(p):gs(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Jb(l,r))}return a}function Hg(n){return void 0!==n}function G(n,e=""){const t=S(),r=xe(),i=n+20,s=r.firstCreatePass?_c(r,i,1,e,null):r.data[i],o=t[i]=function yw(n,e){return mt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Dg(r,t,o,s),Ai(s,!1)}function dE(n){return ys("",n,""),dE}function ys(n,e,t){const r=S(),i=Ic(r,n,e,t);return i!==ae&&ms(r,Nn(),i),ys}function $g(n,e,t){const r=S();return Sn(r,nc(),e)&&br(xe(),_t(),r,n,e,r[11],t,!0),$g}function zg(n,e,t){const r=S();if(Sn(r,nc(),e)){const s=xe(),o=_t();br(s,o,r,n,e,bN(Hb(s.data),o,r),t,!0)}return zg}const Wg="en-US";let Z1=Wg;function pE(n,e,t,r,i){if(n=de(n),Array.isArray(n))for(let s=0;s<n.length;s++)pE(n[s],e,t,r,i);else{const s=xe(),o=S();let a=wc(n)?n:de(n.provide),l=SN(n);const c=Ht(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(wc(n)||!n.multi){const f=new yd(l,i,I),p=mE(a,e,i?u:u+h,d);-1===p?(pg(bd(c,o),s,a),gE(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=mE(a,e,u+h,d),p=mE(a,e,u,u+h),m=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!m){pg(bd(c,o),s,a);const v=function WX(n,e,t,r,i){const s=new yd(n,t,I);return s.multi=[],s.index=e,s.componentProviders=0,EF(s,i,r&&!t),s}(i?zX:$X,t.length,i,r,l);!i&&_&&(t[p].providerFactory=v),gE(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(v),o.push(v)}else gE(s,n,f>-1?f:p,EF(t[i?p:f],l,!i&&r));!i&&r&&_&&t[p].componentProviders++}}}function gE(n,e,t,r){const i=wc(e),s=function mY(n){return!!n.useClass}(e);if(i||s){const l=(s?de(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function EF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $X(n,e,t,r){return _E(this.multi,[])}function zX(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=wd(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),_E(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],_E(i,s);return s}function _E(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function yE(n,e=[]){return t=>{t.providersResolver=(r,i)=>function HX(n,e,t){const r=xe();if(r.firstCreatePass){const i=ti(n);pE(t,r.data,r.blueprint,i,!0),pE(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class CF{}class KX{resolveComponentFactory(e){throw function GX(n){const e=Error(`No component factory found for ${He(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ba=(()=>{class n{}return n.NULL=new KX,n})();function YX(){return Fc(Ht(),S())}function Fc(n,e){return new Dt(Nr(n,e))}let Dt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=YX,n})();function QX(n){return n instanceof Dt?n.nativeElement:n}class Wd{}let Qg=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ZX(){const n=S(),t=mr(Ht().index,n);return function XX(n){return n[11]}(Di(t)?t:n)}(),n})(),JX=(()=>{class n{}return n.\u0275prov=z({token:n,providedIn:"root",factory:()=>null}),n})();class wa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const TF=new wa("13.2.7"),vE={};function Xg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Pt(s)),ei(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Xg(l[1],l,c,r)}const o=t.type;if(8&o)Xg(n,e,t.child,r);else if(32&o){const a=gw(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=FO(e,t);if(Array.isArray(a))r.push(...a);else{const l=Pd(e[16]);Xg(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class qd{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Xg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ei(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(bw(e,r),mg(t,r))}this._attachedToViewContainer=!1}SO(this._lView[1],this._lView)}onDestroy(e){lN(this._lView[1],this._lView,null,e)}markForCheck(){$w(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ww(this._lView[1],this._lView,this.context)}checkNoChanges(){!function sY(n,e,t){ig(!0);try{Ww(n,e,t)}finally{ig(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new $(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function t7(n,e){Od(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,"");this._appRef=e}}class e9 extends qd{constructor(e){super(e),this._view=e}detectChanges(){_N(this._view)}checkNoChanges(){!function oY(n){ig(!0);try{_N(n)}finally{ig(!1)}}(this._view)}get context(){return null}}class DF extends ba{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=In(e);return new bE(t,this.ngModule)}}function SF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class bE extends CF{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function w7(n){return n.map(b7).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return SF(this.componentDef.inputs)}get outputs(){return SF(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function n9(n,e){return{get:(t,r,i)=>{const s=n.get(t,vE,i);return s!==vE||r===vE?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(Wd,mP),a=s.get(JX,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=r?function aN(n,e,t){if(mt(n))return n.selectRootElement(e,t===Zr.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):vw(o.createRenderer(null,this.componentDef),c,function t9(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function UN(n,e){return{components:[],scheduler:n||G6,clean:aY,playerHandler:e||null,flags:0}}(),f=kg(0,null,null,1,0,null,null,null,null,null),p=Nd(null,f,h,d,null,null,o,l,a,s);let m,_;sg(p);try{const v=function LN(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=_c(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Pg(l,c,!0),null!==n&&(ug(i,n,c),null!==l.classes&&Tw(i,n,l.classes),null!==l.styles&&UO(i,n,l.styles)));const u=r.createRenderer(n,e),d=Nd(t,sN(e),null,e.onPush?64:16,t[20],l,r,u,s||null,null);return o.firstCreatePass&&(pg(bd(l,t),o,e.type),fN(o,l),pN(l,t.length,1)),Rg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(r)ug(l,u,["ng-version",TF.full]);else{const{attrs:y,classes:E}=function E7(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ri(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&ug(l,u,y),E&&E.length>0&&Tw(l,u,E.join(" "))}if(_=Fb(f,20),void 0!==t){const y=_.projection=[];for(let E=0;E<this.ngContentSelectors.length;E++){const T=t[E];y.push(null!=T?Array.from(T):null)}}m=function BN(n,e,t,r,i){const s=t[1],o=function $7(n,e,t){const r=Ht();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),gN(n,r,e,yc(n,e,1,null),t));const i=wd(e,n,r.directiveStart,r);Dn(i,e);const s=Nr(r,e);return s&&Dn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Ht();e.contentQueries(1,o,l.directiveStart)}const a=Ht();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(no(a.index),dN(t[1],a,0,a.directiveStart,a.directiveEnd,e),hN(e,o)),o}(v,this.componentDef,p,h,[SY]),Fd(f,p,null)}finally{og()}return new i9(this.componentType,m,Fc(_,p),p,_)}}class i9 extends class qX{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new e9(i),this.componentType=e}get injector(){return new sc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class vs{}class AF{}const Lc=new Map;class kF extends vs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new DF(this);const r=Rr(e);this._bootstrapComponents=Ri(r.bootstrap),this._r3Injector=DN(e,t,[{provide:vs,useValue:this},{provide:ba,useValue:this.componentFactoryResolver}],He(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Ge.THROW_IF_NOT_FOUND,r=ne.Default){return e===Ge||e===vs||e===Gw?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class wE extends AF{constructor(e){super(),this.moduleType=e,null!==Rr(e)&&function o9(n){const e=new Set;!function t(r){const i=Rr(r,!0),s=i.id;null!==s&&(function xF(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${He(e)} vs ${He(e.name)}`)}(s,Lc.get(s),r),Lc.set(s,r));const o=Ri(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new kF(this.moduleType,e)}}function EE(n,e,t,r,i){return function PF(n,e,t,r,i,s,o){const a=e+t;return function ya(n,e,t,r){const i=Sn(n,e,t);return Sn(n,e+1,r)||i}(n,a,i,s)?function Oi(n,e,t){return n[e]=t}(n,a+2,o?r.call(o,i,s):r(i,s)):function Gd(n,e){const t=n[e];return t===ae?void 0:t}(n,a+2)}(S(),function On(){const n=re.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r,i)}function CE(n){return e=>{setTimeout(n,void 0,e)}}const St=class C9 extends Oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=CE(l),a&&(a=CE(a)),c&&(c=CE(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof hn&&e.add(u),u}};function I9(){return this._results[Ec()]()}class Zg{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ec(),r=Zg.prototype;r[t]||(r[t]=I9)}get changes(){return this._changes||(this._changes=new St)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Fr(e);(this._changesDetected=!function x5(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Li=(()=>{class n{}return n.__NG_ELEMENT_ID__=S9,n})();const T9=Li,D9=class extends T9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Nd(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),Fd(t,r,e),new qd(r)}};function S9(){return Jg(Ht(),S())}function Jg(n,e){return 4&n.type?new D9(e,n,Fc(n,e)):null}let Br=(()=>{class n{}return n.__NG_ELEMENT_ID__=A9,n})();function A9(){return UF(Ht(),S())}const x9=Br,LF=class extends x9{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fc(this._hostTNode,this._hostLView)}get injector(){return new sc(this._hostTNode,this._hostLView)}get parentInjector(){const e=fg(this._hostTNode,this._hostLView);if(RP(e)){const t=ic(e,this._hostLView),r=rc(e);return new sc(t[1].data[r+8],t)}return new sc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=BF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function Cd(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new bE(In(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(vs,null);h&&(s=h)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function YK(n){return ei(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new LF(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function r7(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],$P(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function i7(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Cw(s,o),l=r[11],c=Tg(l,o[7]);return null!==c&&function e7(n,e,t,r,i,s){r[0]=i,r[6]=e,Od(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),$P(IE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=BF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=bw(this._lContainer,t);r&&(mg(IE(this._lContainer),t),SO(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=bw(this._lContainer,t);return r&&null!=mg(IE(this._lContainer),t)?new qd(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function BF(n){return n[8]}function IE(n){return n[8]||(n[8]=[])}function UF(n,e){let t;const r=e[n.index];if(ei(r))t=r;else{let i;if(8&n.type)i=Pt(r);else{const s=e[11];i=s.createComment("");const o=Nr(n,e);_a(s,Tg(s,o),i,function l7(n,e){return mt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=mN(r,e,i,n),Rg(e,t)}return new LF(t,n,e)}class TE{constructor(e){this.queryList=e,this.matches=null}clone(){return new TE(this.queryList)}setDirty(){this.queryList.setDirty()}}class DE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new DE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==zF(e,t).matches&&this.queries[t].setDirty()}}class VF{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class SE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new SE(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class AE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new AE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,R9(t,s)),this.matchTNodeWithReadOption(e,t,gg(t,e,s,!1,!1))}else r===Li?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,gg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Dt||i===Br||i===Li&&4&t.type)this.addMatch(t.index,-2);else{const s=gg(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function R9(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function O9(n,e,t,r){return-1===t?function P9(n,e){return 11&n.type?Fc(n,e):4&n.type?Jg(n,e):null}(e,n):-2===t?function N9(n,e,t){return t===Dt?Fc(e,n):t===Li?Jg(e,n):t===Br?UF(e,n):void 0}(n,e,r):wd(n,n[1],t,e)}function jF(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:O9(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function xE(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=jF(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&xE(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];xE(f[1],f,c,r)}}}}}return r}function Bi(n){const e=S(),t=xe(),r=CP();$b(r+1);const i=zF(t,r);if(n.dirty&&_P(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?xE(t,e,r,[]):jF(t,e,i,r);n.reset(s,QX),n.notifyOnChanges()}return!0}return!1}function Bc(n,e,t){const r=xe();r.firstCreatePass&&($F(r,new VF(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),HF(r,S(),e)}function Yd(n,e,t,r){const i=xe();if(i.firstCreatePass){const s=Ht();$F(i,new VF(e,t,r),s.index),function L9(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}HF(i,S(),t)}function Ui(){return function F9(n,e){return n[19].queries[e].queryList}(S(),CP())}function HF(n,e,t){const r=new Zg(4==(4&t));lN(n,e,r,r.destroy),null===e[19]&&(e[19]=new DE),e[19].queries.push(new TE(r))}function $F(n,e,t){null===n.queries&&(n.queries=new SE),n.queries.track(new AE(e,t))}function zF(n,e){return n.queries.getByIndex(e)}function nm(...n){}const rm=new B("Application Initializer");let NE=(()=>{class n{constructor(t){this.appInits=t,this.resolve=nm,this.reject=nm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Bg(s))t.push(s);else if(c1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(C(rm,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xd=new B("AppId",{providedIn:"root",factory:function aL(){return`${FE()}${FE()}${FE()}`}});function FE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lL=new B("Platform Initializer"),Vc=new B("Platform ID"),cL=new B("appBootstrapListener");let uL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const bs=new B("LocaleId",{providedIn:"root",factory:()=>vg(bs,ne.Optional|ne.SkipSelf)||function tZ(){return"undefined"!=typeof $localize&&$localize.locale||Wg}()});class rZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let dL=(()=>{class n{compileModuleSync(t){return new wE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ri(Rr(t).declarations).reduce((o,a)=>{const l=In(a);return l&&o.push(new bE(l)),o},[]);return new rZ(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sZ=(()=>Promise.resolve(0))();function LE(n){"undefined"==typeof Zone?sZ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ce{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function oZ(){let n=$e.requestAnimationFrame,e=$e.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function cZ(n){const e=()=>{!function lZ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call($e,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,UE(n),n.isCheckStableRunning=!0,BE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),UE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return hL(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),fL(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return hL(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),fL(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,UE(n),BE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ce.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ce.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,aZ,nm,nm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const aZ={};function BE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function UE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function hL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fL(n){n._nesting--,BE(n)}class uZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let VE=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ce.assertNotInAngularZone(),LE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())LE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),pL=(()=>{class n{constructor(){this._applications=new Map,jE.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return jE.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class dZ{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let ui,jE=new dZ;const gL=new B("AllowMultipleToken");class mL{constructor(e,t){this.name=e,this.token=t}}function _L(n,e,t=[]){const r=`Platform: ${e}`,i=new B(r);return(s=[])=>{let o=yL();if(!o||o.injector.get(gL,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:Kw,useValue:"platform"});!function gZ(n){if(ui&&!ui.destroyed&&!ui.injector.get(gL,!1))throw new $(400,"");ui=n.get(vL);const e=n.get(lL,null);e&&e.forEach(t=>t())}(Ge.create({providers:a,name:r}))}return function mZ(n){const e=yL();if(!e)throw new $(401,"");return e}()}}function yL(){return ui&&!ui.destroyed?ui:null}let vL=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function _Z(n,e){let t;return t="noop"===n?new uZ:("zone.js"===n?void 0:n)||new ce({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:ce,useValue:a}];return a.run(()=>{const c=Ge.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(io,null);if(!d)throw new $(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{HE(this._modules,u),h.unsubscribe()})}),function yZ(n,e,t){try{const r=t();return Bg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(NE);return h.runInitializers(),h.donePromise.then(()=>(function XQ(n){pr(n,"Expected localeId to be defined"),"string"==typeof n&&(Z1=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(bs,Wg)||Wg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=bL({},r);return function fZ(n,e,t){const r=new wE(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(im);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new $(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(C(Ge))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function bL(n,e){return Array.isArray(e)?e.reduce(bL,n):Object.assign(Object.assign({},n),e)}let im=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Qe(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Qe(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),LE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=_b(a,l.pipe(tP()))}bootstrap(t,r){if(!this._initStatus.done)throw new $(405,"");let i;i=t instanceof CF?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function pZ(n){return n.isBoundToModule}(i)?void 0:this._injector.get(vs),a=i.create(Ge.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(VE,null),u=c&&a.injector.get(pL);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),HE(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new $(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;HE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cL,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(Ge),C(io),C(ba),C(NE))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let EL=!0,jc=(()=>{class n{}return n.__NG_ELEMENT_ID__=wZ,n})();function wZ(n){return function EZ(n,e,t){if(eg(n)&&!t){const r=mr(n.index,e);return new qd(r,r)}return 47&n.type?new qd(e[16],e):null}(Ht(),S(),16==(16&n))}class SL{constructor(){}supports(e){return Bd(e)}create(e){return new AZ(e)}}const SZ=(n,e)=>e;class AZ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||SZ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<xL(r,i,s)?t:r,a=xL(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Bd(e))throw new $(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function LY(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Ec()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new xZ(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new AL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class xZ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MZ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class AL{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new MZ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xL(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class ML{constructor(){}supports(e){return e instanceof Map||eE(e)}create(){return new kZ}}class kZ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||eE(e)))throw new $(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new RZ(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class RZ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kL(){return new am([new SL])}let am=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kL()),deps:[[n,new hc,new Ce]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new $(901,"")}}return n.\u0275prov=z({token:n,providedIn:"root",factory:kL}),n})();function RL(){return new Zd([new ML])}let Zd=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||RL()),deps:[[n,new hc,new Ce]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new $(901,"")}}return n.\u0275prov=z({token:n,providedIn:"root",factory:RL}),n})();const NZ=_L(null,"core",[{provide:Vc,useValue:"unknown"},{provide:vL,deps:[Ge]},{provide:pL,deps:[]},{provide:uL,deps:[]}]);let FZ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(C(im))},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})(),lm=null;function ho(){return lm}const we=new B("DocumentToken");let Ca=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(){return function VZ(){return C(PL)}()},providedIn:"platform"}),n})();const jZ=new B("Location Initialized");let PL=(()=>{class n extends Ca{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ho().getBaseHref(this._doc)}onPopState(t){const r=ho().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ho().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){OL()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){OL()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:function(){return function HZ(){return new PL(C(we))}()},providedIn:"platform"}),n})();function OL(){return!!window.history.pushState}function GE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function NL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ws(n){return n&&"?"!==n[0]?"?"+n:n}let Hc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(){return function $Z(n){const e=C(we).location;return new FL(C(Ca),e&&e.origin||"")}()},providedIn:"root"}),n})();const KE=new B("appBaseHref");let FL=(()=>{class n extends Hc{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return GE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ws(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ws(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ws(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(C(Ca),C(KE,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),zZ=(()=>{class n extends Hc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=GE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ws(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ws(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(C(Ca),C(KE,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),Ia=(()=>{class n{constructor(t,r){this._subject=new St,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=NL(LL(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ws(r))}normalize(t){return n.stripTrailingSlash(function qZ(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,LL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ws(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ws(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ws,n.joinWithSlash=GE,n.stripTrailingSlash=NL,n.\u0275fac=function(t){return new(t||n)(C(Hc),C(Ca))},n.\u0275prov=z({token:n,factory:function(){return function WZ(){return new Ia(C(Hc),C(Ca))}()},providedIn:"root"}),n})();function LL(n){return n.replace(/\/index.html$/,"")}let qL=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Bd(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${He(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(I(am),I(Zd),I(Dt),I(Qg))},n.\u0275dir=Ue({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class kJ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iC=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new kJ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),GL(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{GL(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(I(Br),I(Li),I(am))},n.\u0275dir=Ue({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function GL(n,e){n.context.$implicit=e.item}let th=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new RJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(I(Br),I(Li))},n.\u0275dir=Ue({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class RJ{constructor(){this.$implicit=null,this.ngIf=null}}function KL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}let Ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})();const XL="browser";let cee=(()=>{class n{}return n.\u0275prov=z({token:n,providedIn:"root",factory:()=>new uee(C(we),window)}),n})();class uee{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function dee(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ZL(this.window.history)||ZL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ZL(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cC extends class fee extends class UZ{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function BZ(n){lm||(lm=n)}(new cC)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pee(){return nh=nh||document.querySelector("base"),nh?nh.getAttribute("href"):null}();return null==t?null:function gee(n){ym=ym||document.createElement("a"),ym.setAttribute("href",n);const e=ym.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xJ(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ym,nh=null;const JL=new B("TRANSITION_ID"),_ee=[{provide:rm,useFactory:function mee(n,e,t){return()=>{t.get(NE).donePromise.then(()=>{const r=ho(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[JL,we,Ge],multi:!0}];class uC{static init(){!function hZ(n){jE=n}(new uC)}addToWindow(e){$e.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements(),$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(r=>{const i=$e.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?ho().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let yee=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const vm=new B("EventManagerPlugins");let bm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(C(vm),C(ce))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class eB{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=ho().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let tB=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),rh=(()=>{class n extends tB{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(nB),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(nB))}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function nB(n){ho().remove(n)}const dC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hC=/%COMP%/g;function wm(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wm(n,i,t):(i=i.replace(hC,n),t.push(i))}return t}function sB(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Em=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fC(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Zr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Iee(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Zr.ShadowDom:return new Tee(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=wm(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(C(bm),C(rh),C(Xd))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class fC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=dC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(vr.DashCase|vr.Important)?e.style.setProperty(t,r,i&vr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&vr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,sB(r)):this.eventManager.addEventListener(e,t,sB(r))}}class Iee extends fC{constructor(e,t,r,i){super(e),this.component=r;const s=wm(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function wee(n){return"_ngcontent-%COMP%".replace(hC,n)}(i+"-"+r.id),this.hostAttr=function Eee(n){return"_nghost-%COMP%".replace(hC,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Tee extends fC{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=wm(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Dee=(()=>{class n extends eB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const aB=["alt","control","meta","shift"],Aee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lB={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mee=(()=>{class n extends eB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ho().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(aB.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function kee(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&lB.hasOwnProperty(e)&&(e=lB[e]))}return Aee[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),aB.forEach(s=>{s!=i&&xee[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const Nee=_L(NZ,"browser",[{provide:Vc,useValue:XL},{provide:lL,useValue:function Ree(){cC.makeCurrent(),uC.init()},multi:!0},{provide:we,useFactory:function Oee(){return function WK(n){Ob=n}(document),document},deps:[]}]),Fee=[{provide:Kw,useValue:"root"},{provide:io,useFactory:function Pee(){return new io},deps:[]},{provide:vm,useClass:Dee,multi:!0,deps:[we,ce,Vc]},{provide:vm,useClass:Mee,multi:!0,deps:[we]},{provide:Em,useClass:Em,deps:[bm,rh,Xd]},{provide:Wd,useExisting:Em},{provide:tB,useExisting:rh},{provide:rh,useClass:rh,deps:[we]},{provide:VE,useClass:VE,deps:[ce]},{provide:bm,useClass:bm,deps:[vm,ce]},{provide:class hee{},useClass:yee,deps:[]}];let cB=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Xd,useValue:t.appId},{provide:JL,useExisting:Xd},_ee]}}}return n.\u0275fac=function(t){return new(t||n)(C(n,12))},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:Fee,imports:[Ta,FZ]}),n})();"undefined"!=typeof window&&window;let gC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:function(t){let r=null;return r=t?new(t||n):C(hB),r},providedIn:"root"}),n})(),hB=(()=>{class n extends gC{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Le.NONE:return r;case Le.HTML:return Mi(r,"HTML")?yr(r):hO(this._doc,String(r)).toString();case Le.STYLE:return Mi(r,"Style")?yr(r):r;case Le.SCRIPT:if(Mi(r,"Script"))return yr(r);throw new Error("unsafe value used in a script context");case Le.URL:return iO(r),Mi(r,"URL")?yr(r):xd(String(r));case Le.RESOURCE_URL:if(Mi(r,"ResourceURL"))return yr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function o6(n){return new t6(n)}(t)}bypassSecurityTrustStyle(t){return function a6(n){return new n6(n)}(t)}bypassSecurityTrustScript(t){return function l6(n){return new r6(n)}(t)}bypassSecurityTrustUrl(t){return function c6(n){return new i6(n)}(t)}bypassSecurityTrustResourceUrl(t){return function u6(n){return new s6(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:function(t){let r=null;return r=t?new t:function qee(n){return new hB(n.get(we))}(C(Ge)),r},providedIn:"root"}),n})();function fB(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){fB(s,r,i,o,a,"next",l)}function a(l){fB(s,r,i,o,a,"throw",l)}o(void 0)})}}const M=function(n,e){if(!n)throw $c(e)},$c=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},pB=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Cm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw Error();r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gB=function(n){const e=pB(n);return Cm.encodeByteArray(e,!0)},Im=function(n){return gB(n).replace(/\./g,"")},_C=function(n){try{return Cm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ih(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Yee(t)||(n[t]=ih(n[t],e[t]));return n}function Yee(n){return"__proto__"!==n}class Da{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function yC(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function vC(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function mB(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function po(){return"object"==typeof indexedDB}function sh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function bC(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class tr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jr.prototype.create)}}class jr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function nte(n,e){return n.replace(rte,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new tr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const rte=/\{\$([^}]+)}/g;function oh(n){return JSON.parse(n)}function Gt(n){return JSON.stringify(n)}const Tm=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=oh(_C(s[0])||""),t=oh(_C(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:r,signature:i}};function fi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function zc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function wC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dm(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Sm(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(_B(s)&&_B(o)){if(!Sm(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function _B(n){return null!==n&&"object"==typeof n}function ah(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ch(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class ote{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function yB(n,e){const t=new ate(n,e);return t.subscribe.bind(t)}class ate{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function lte(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=EC),void 0===i.error&&(i.error=EC),void 0===i.complete&&(i.complete=EC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EC(){}function Wc(n,e){return`${n} failed: ${e} argument `}const Am=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function CC(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function pe(n){return n&&n._delegate?n._delegate:n}class Mt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sa="[DEFAULT]";class gte{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Da;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function _te(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return g(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Sa?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yte{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gte(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const IC=[];var Ie=(()=>{return(n=Ie||(Ie={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Ie;var n})();const vB={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},vte=Ie.INFO,bte={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},wte=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=bte[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class go{constructor(e){this.name=e,this._logLevel=vte,this._logHandler=wte,this._userLogHandler=null,IC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?vB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}let bB,wB;const EB=new WeakMap,TC=new WeakMap,CB=new WeakMap,DC=new WeakMap,SC=new WeakMap;let AC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return TC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||CB.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function kte(n){return"function"==typeof n?function Mte(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Dte(){return wB||(wB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(xC(this),e),Is(EB.get(this))}:function(...e){return Is(n.apply(xC(this),e))}:function(e,...t){const r=n.call(xC(this),e,...t);return CB.set(r,e.sort?e.sort():[e]),Is(r)}}(n):(n instanceof IDBTransaction&&function Ate(n){if(TC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});TC.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Tte(){return bB||(bB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,AC):n)}function Is(n){if(n instanceof IDBRequest)return function Ste(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Is(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&EB.set(t,n)}).catch(()=>{}),SC.set(e,n),e}(n);if(DC.has(n))return DC.get(n);const e=kte(n);return e!==n&&(DC.set(n,e),SC.set(e,n)),e}const xC=n=>SC.get(n);function xm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Is(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Is(o.result),l.oldVersion,l.newVersion,Is(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function MC(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Is(t).then(()=>{})}const Rte=["get","getKey","getAll","getAllKeys","count"],Pte=["put","add","delete","clear"],kC=new Map;function IB(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(kC.get(e))return kC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Pte.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Rte.includes(t))return;const s=function(){var o=g(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return kC.set(e,s),s}!function xte(n){AC=n(AC)}(n=>F8(N8({},n),{get:(e,t,r)=>IB(e,t)||n.get(e,t,r),has:(e,t)=>!!IB(e,t)||n.has(e,t)}));class Ote{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Nte(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const RC="@firebase/app",Aa=new go("@firebase/app"),xa="[DEFAULT]",ane={[RC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mo=new Map,uh=new Map;function Mm(n,e){try{n.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function DB(n,e){n.container.addOrOverwriteComponent(e)}function Ft(n){const e=n.name;if(uh.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;uh.set(e,n);for(const t of mo.values())Mm(t,n);return!0}function pi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lne(n,e,t=xa){pi(n,e).clearInstance(t)}function cne(){uh.clear()}const _o=new jr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dne{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}const Vi="9.10.0";function ji(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:xa,automaticDataCollectionEnabled:!1},e),r=t.name;if("string"!=typeof r||!r)throw _o.create("bad-app-name",{appName:String(r)});const i=mo.get(r);if(i){if(Sm(n,i.options)&&Sm(t,i.config))return i;throw _o.create("duplicate-app",{appName:r})}const s=new yte(r);for(const a of uh.values())s.addComponent(a);const o=new dne(n,t,s);return mo.set(r,o),o}function yo(n=xa){const e=mo.get(n);if(!e)throw _o.create("no-app",{appName:n});return e}function PC(){return Array.from(mo.values())}function SB(n){return OC.apply(this,arguments)}function OC(){return(OC=g(function*(n){const e=n.name;mo.has(e)&&(mo.delete(e),yield Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)})).apply(this,arguments)}function Se(n,e,t){var r;let i=null!==(r=ane[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Aa.warn(a.join(" "))}Ft(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function AB(n,e){if(null!==n&&"function"!=typeof n)throw _o.create("invalid-log-argument");!function Cte(n,e){for(const t of IC){let r=null;e&&e.level&&(r=vB[e.level]),t.userLogHandler=null===n?null:(i,s,...o)=>{const a=o.map(l=>{if(null==l)return null;if("string"==typeof l)return l;if("number"==typeof l||"boolean"==typeof l)return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch(c){return null}}).filter(l=>l).join(" ");s>=(null!=r?r:i.logLevel)&&n({level:Ie[s].toLowerCase(),message:a,args:o,type:i.name})}}}(n,e)}function xB(n){!function Ete(n){IC.forEach(e=>{e.setLogLevel(n)})}(n)}const dh="firebase-heartbeat-store";let NC=null;function MB(){return NC||(NC=xm("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(dh)}}).catch(n=>{throw _o.create("idb-open",{originalErrorMessage:n.message})})),NC}function FC(){return(FC=g(function*(n){var e;try{return(yield MB()).transaction(dh).objectStore(dh).get(RB(n))}catch(t){if(t instanceof tr)Aa.warn(t.message);else{const r=_o.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Aa.warn(r.message)}}})).apply(this,arguments)}function kB(n,e){return LC.apply(this,arguments)}function LC(){return(LC=g(function*(n,e){var t;try{const i=(yield MB()).transaction(dh,"readwrite");return yield i.objectStore(dh).put(e,RB(n)),i.done}catch(r){if(r instanceof tr)Aa.warn(r.message);else{const i=_o.create("idb-set",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message});Aa.warn(i.message)}}})).apply(this,arguments)}function RB(n){return`${n.name}!${n.options.appId}`}class _ne{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vne(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return g(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=PB();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return g(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=PB(),{heartbeatsToSend:r,unsentEntries:i}=function yne(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OB(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),OB(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Im(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function PB(){return(new Date).toISOString().substring(0,10)}class vne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!po()&&sh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return g(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function pne(n){return FC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return kB(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return kB(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function OB(n){return Im(JSON.stringify({version:2,heartbeats:n})).length}!function bne(n){Ft(new Mt("platform-logger",e=>new Ote(e),"PRIVATE")),Ft(new Mt("heartbeat",e=>new _ne(e),"PRIVATE")),Se(RC,"0.7.33",n),Se(RC,"0.7.33","esm2017"),Se("fire-js","")}("");const NB="@firebase/database";let BC="";class Ene{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:oh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Cne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LB=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ene(e)}}catch(e){}return new Cne},Ma=LB("localStorage"),UC=LB("sessionStorage"),qc=new go("@firebase/database"),BB=function(){let n=1;return function(){return n++}}(),UB=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,M(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new ote;t.update(e);const r=t.digest();return Cm.encodeByteArray(r)},hh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=hh.apply(null,r):e+="object"==typeof r?Gt(r):r,e+=" "}return e};let ka=null,VB=!0;const en=function(...n){if(!0===VB&&(VB=!1,null===ka&&!0===UC.get("logging_enabled")&&function(n,e){M(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(qc.logLevel=Ie.VERBOSE,ka=qc.log.bind(qc),e&&UC.set("logging_enabled",!0)):"function"==typeof n?ka=n:(ka=null,UC.remove("logging_enabled"))}(!0)),ka){const e=hh.apply(null,n);ka(e)}},fh=function(n){return function(...e){en(n,...e)}},VC=function(...n){const e="FIREBASE INTERNAL ERROR: "+hh(...n);qc.error(e)},Hi=function(...n){const e=`FIREBASE FATAL ERROR: ${hh(...n)}`;throw qc.error(e),new Error(e)},An=function(...n){const e="FIREBASE WARNING: "+hh(...n);qc.warn(e)},km=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ts="[MIN_NAME]",$i="[MAX_NAME]",Ra=function(n,e){if(n===e)return 0;if(n===Ts||e===$i)return-1;if(e===Ts||n===$i)return 1;{const t=Rm(n),r=Rm(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Dne=function(n,e){return n===e?0:n<e?-1:1},ph=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Gt(e))},jC=function(n){if("object"!=typeof n||null===n)return Gt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Gt(e[r]),t+=":",t+=jC(n[e[r]]);return t+="}",t},HB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function tn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const $B=function(n){M(!km(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Mne=new RegExp("^-?(0*)\\d{1,10}$"),Rm=function(n){if(Mne.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Gc=function(n){try{n()}catch(e){setTimeout(()=>{throw An("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gh=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Rne{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){An(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pne{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(en("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',An(e)}}let mh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const YB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ZB="websocket",JB="long_polling";class zC{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ma.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ma.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function e2(n,e,t){let r;if(M("string"==typeof e,"typeof type must == string"),M("object"==typeof t,"typeof params must == object"),e===ZB)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==JB)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function One(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return tn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Nne{constructor(){this.counters_={}}incrementCounter(e,t=1){fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function Kee(n){return ih(void 0,n)}(this.counters_)}}const WC={},qC={};function GC(n){const e=n.toString();return WC[e]||(WC[e]=new Nne),WC[e]}class Lne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vo{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fh(e),this.stats_=GC(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),e2(t,JB,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new KC((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&YB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vo.forceAllow_=!0}static forceDisallow(){vo.forceDisallow_=!0}static isAvailable(){return!(!vo.forceAllow_&&(vo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=gB(t),i=HB(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Gt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class KC{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=BB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=KC.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){en("frame writing exception"),a.stack&&en(a.stack),en(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||en("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{en("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Om=null;"undefined"!=typeof MozWebSocket?Om=MozWebSocket:"undefined"!=typeof WebSocket&&(Om=WebSocket);let Kc=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fh(this.connId),this.stats_=GC(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&YB.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),e2(t,ZB,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ma.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Om(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Om&&!n.forceDisallow_}static previouslyFailed(){return Ma.isInMemoryStorage||!0===Ma.get("previous_websocket_failure")}markConnectionHealthy(){Ma.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=oh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(M(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Gt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=HB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),l2=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vo,Kc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Kc&&Kc.isAvailable();let i=r&&!Kc.previouslyFailed();if(t.webSocketOnly&&(r||An("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kc];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class g2{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fh("c:"+this.id+":"),this.transportManager_=new l2(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ph("t",e),r=ph("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ph("t",e),r=ph("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ph("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?VC("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VC("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&An("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ma.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class m2{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class _2{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){M(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Nm extends _2{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!yC()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nm}getInitialEvent(e){return M("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class je{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fe(){return new je("")}function ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function bo(n){return n.pieces_.length-n.pieceNum_}function Ke(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new je(n.pieces_,e)}function QC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _h(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function b2(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new je(e,0)}function ot(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof je)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new je(t,0)}function me(n){return n.pieceNum_>=n.pieces_.length}function Un(n,e){const t=ge(n),r=ge(e);if(null===t)return e;if(t===r)return Un(Ke(n),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XC(n,e){if(bo(n)!==bo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Hr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(bo(n)>bo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ore{constructor(e,t){this.errorPrefix_=t,this.parts_=_h(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Am(this.parts_[r]);w2(this)}}function w2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pa(n))}function Pa(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ZC extends _2{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ZC}getInitialEvent(e){return M("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yh=1e3;let Lm,Oa=(()=>{class n extends m2{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=fh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZC.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Nm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Gt(o)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Da,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&fi(t,"w")){const i=zc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();An(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Tm(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Tm(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Gt(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):VC("Unrecognized action received from server: "+Gt(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return g(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){M(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?en("getToken() completed but was canceled"):(en("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new g2(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,m=>{An(m+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&An(f),u())}}})()}interrupt(t){en("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){en("Resuming connection for reason: "+t),delete this.interruptReasons_[t],wC(this.interruptReasons_)&&(this.reconnectDelay_=yh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>jC(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new je(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){en("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){en("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+BC.replace(/\./g,"-")]=1,yC()?t["framework.cordova"]=1:mB()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Nm.getInstance().currentlyOnline();return wC(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ye{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ye(e,t)}}class Fm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ye(Ts,e),i=new ye(Ts,t);return 0!==this.compare(r,i)}minPost(){return ye.MIN}}class I2 extends Fm{static get __EMPTY_NODE(){return Lm}static set __EMPTY_NODE(e){Lm=e}compare(e,t){return Ra(e.name,t.name)}isDefinedOn(e){throw $c("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ye.MIN}maxPost(){return new ye($i,Lm)}makePost(e,t){return M("string"==typeof e,"KeyIndex indexValue must always be a string."),new ye(e,Lm)}toString(){return".key"}}const zi=new I2;class Bm{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let e0,gi=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:nr.EMPTY_NODE,this.right=null!=o?o:nr.EMPTY_NODE}copy(t,r,i,s,o){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return nr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return nr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class nr{constructor(e,t=nr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new nr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gi.BLACK,null,null))}remove(e){return new nr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Bm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Bm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Bm(this.root_,null,this.comparator_,!0,e)}}function pre(n,e){return Ra(n.name,e.name)}function JC(n,e){return Ra(n,e)}nr.EMPTY_NODE=new class fre{copy(e,t,r,i,s){return this}insert(e,t,r){return new gi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const T2=function(n){return"number"==typeof n?"number:"+$B(n):"string:"+n},D2=function(n){if(n.isLeafNode()){const e=n.val();M("string"==typeof e||"number"==typeof e||"object"==typeof e&&fi(e,".sv"),"Priority must be a string or number.")}else M(n===e0||n.isEmpty(),"priority of unexpected type.");M(n===e0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let S2,A2,x2,Yc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,M(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),D2(this.priorityNode_)}static set __childrenNodeConstructor(t){S2=t}static get __childrenNodeConstructor(){return S2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return me(t)?this:".priority"===ge(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ge(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(M(".priority"!==i||1===bo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+T2(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?$B(this.value_):this.value_,this.lazyHash_=UB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(M(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return M(s>=0,"Unknown leaf type: "+r),M(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const et=new class yre extends Fm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ra(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye($i,new Yc("[PRIORITY-POST]",x2))}makePost(e,t){const r=A2(e);return new ye(t,new Yc("[PRIORITY-POST]",r))}toString(){return".priority"}},vre=Math.log(2);class bre{constructor(e){this.count=parseInt(Math.log(e+1)/vre,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Um=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new gi(h,d.node,gi.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return d=n[f],h=t?t(d):d,new gi(h,d.node,gi.BLACK,p,m)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,m){const _=d-p,v=d;d-=p;const y=i(_+1,v),E=n[_],T=t?t(E):E;f(new gi(T,E.node,m,null,y))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));m?h(_,gi.BLACK):(h(_,gi.BLACK),h(_,gi.RED))}return u}(new bre(n.length));return new nr(r||e,a)};let t0;const Qc={};class Ds{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return M(Qc&&et,"ChildrenNode.ts has not been loaded"),t0=t0||new Ds({".priority":Qc},{".priority":et}),t0}get(e){const t=zc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof nr?t:null}hasIndex(e){return fi(this.indexSet_,e.toString())}addIndex(e,t){M(e!==zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(ye.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Um(r,e.getCompare()):Qc;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ds(u,c)}addToIndexes(e,t){const r=Dm(this.indexes_,(i,s)=>{const o=zc(this.indexSet_,s);if(M(o,"Missing index implementation for "+s),i===Qc){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(ye.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Um(a,o.getCompare())}return Qc}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new ye(e.name,a))),l.insert(e,e.node)}});return new Ds(r,this.indexSet_)}removeFromIndexes(e,t){const r=Dm(this.indexes_,i=>{if(i===Qc)return i;{const s=t.get(e.name);return s?i.remove(new ye(e.name,s)):i}});return new Ds(r,this.indexSet_)}}let vh,le=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&D2(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vh||(vh=new n(new nr(JC),null,Ds.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vh}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?vh:r}}getChild(t){const r=ge(t);return null===r?this:this.getImmediateChild(r).getChild(Ke(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(M(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ye(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?vh:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=ge(t);if(null===i)return r;{M(".priority"!==ge(t)||1===bo(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ke(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(et,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+T2(this.getPriority().val())+":"),this.forEachChild(et,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":UB(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ye(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ye(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ye(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ye.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ye.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bh?-1:0}withIndex(t){if(t===zi||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===zi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(et),s=r.getIterator(et);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===zi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const bh=new class wre extends le{constructor(){super(new nr(JC),le.EMPTY_NODE,Ds.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return le.EMPTY_NODE}isEmpty(){return!1}};function pt(n,e=null){if(null===n)return le.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),M(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Yc(n,pt(e));if(n instanceof Array){let t=le.EMPTY_NODE;return tn(n,(r,i)=>{if(fi(n,r)&&"."!==r.substring(0,1)){const s=pt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(pt(e))}{const t=[];let r=!1;if(tn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=pt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new ye(o,l)))}}),0===t.length)return le.EMPTY_NODE;const s=Um(t,pre,o=>o.name,JC);if(r){const o=Um(t,et.getCompare());return new le(s,pt(e),new Ds({".priority":o},{".priority":et}))}return new le(s,pt(e),Ds.Default)}}Object.defineProperties(ye,{MIN:{value:new ye(Ts,le.EMPTY_NODE)},MAX:{value:new ye($i,bh)}}),I2.__EMPTY_NODE=le.EMPTY_NODE,Yc.__childrenNodeConstructor=le,function gre(n){e0=n}(bh),function _re(n){x2=n}(bh),function mre(n){A2=n}(pt);class n0 extends Fm{constructor(e){super(),this.indexPath_=e,M(!me(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ra(e.name,t.name):s}makePost(e,t){const r=pt(e),i=le.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(t,i)}maxPost(){const e=le.EMPTY_NODE.updateChild(this.indexPath_,bh);return new ye($i,e)}toString(){return _h(this.indexPath_,0).join("/")}}const r0=new class Cre extends Fm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ra(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,t){const r=pt(e);return new ye(t,r)}toString(){return".value"}},Xc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ire=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Xc.charAt(t%64),t=Math.floor(t/64);M(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Xc.charAt(e[i]);return M(20===o.length,"nextPushId: Length should be 20."),o}}();function O2(n){return{type:"value",snapshotNode:n}}function Zc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Eh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class o0{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(wh(t,a)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Zc(t,r)):o.trackChildChange(Eh(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(et,(i,s)=>{t.hasChild(i)||r.trackChildChange(wh(i,s))}),t.isLeafNode()||t.forEachChild(et,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Eh(i,s,o))}else r.trackChildChange(Zc(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?le.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ch{constructor(e){this.indexedFilter_=new o0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ch.getStartPost_(e),this.endPost_=Ch.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,o){return this.matches(new ye(t,r))||(r=le.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=le.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(le.EMPTY_NODE);const s=this;return t.forEachChild(et,(o,a)=>{s.matches(new ye(o,a))||(i=i.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Dre{constructor(e){this.rangedFilter_=new Ch(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new ye(t,r))||(r=le.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=le.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;i=i.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(i=t.withIndex(this.index_),i=i.updatePriority(le.EMPTY_NODE),this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,o)<=0?c++:i=i.updateImmediateChild(d.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;M(a.numChildren()===this.limit_,"");const l=new ye(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(Eh(t,r,d)),a.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(wh(t,d));const m=a.updateImmediateChild(t,le.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(Zc(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(wh(c.name,c.node)),s.trackChildChange(Zc(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,le.EMPTY_NODE)):e}}class a0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ts}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$i}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===et}copy(){const e=new a0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function N2(n){const e={};if(n.isDefault())return e;let t;return n.index_===et?t="$priority":n.index_===r0?t="$value":n.index_===zi?t="$key":(M(n.index_ instanceof n0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Gt(t),n.startSet_&&(e.startAt=Gt(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+Gt(n.indexStartName_))),n.endSet_&&(e.endAt=Gt(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+Gt(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function F2(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==et&&(e.i=n.index_.toString()),e}class jm extends m2{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jm.getListenId_(e,r),a={};this.listens_[o]=a;const l=N2(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),zc(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,t){const r=jm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=N2(e._queryParams),r=e._path.toString(),i=new Da;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ah(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=oh(a.responseText)}catch(c){An("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&An("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Rre{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hm(){return{value:null,children:new Map}}function Jc(n,e,t){if(me(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ge(e);n.children.has(r)||n.children.set(r,Hm()),Jc(n.children.get(r),e=Ke(e),t)}}function d0(n,e,t){null!==n.value?t(e,n.value):function Pre(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{d0(i,new je(e.toString()+"/"+r),t)})}class Ore{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&tn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Lre{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ore(e);const r=1e4+2e4*Math.random();gh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;tn(e,(i,s)=>{s>0&&fi(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),gh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $r=(()=>{return(n=$r||($r={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$r;var n})();function p0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class $m{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$r.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(me(this.path)){if(null!=this.affectedTree.value)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new je(e));return new $m(Fe(),t,this.revert)}}return M(ge(this.path)===e,"operationForChild called for unrelated child."),new $m(Ke(this.path),this.affectedTree,this.revert)}}class Ih{constructor(e,t){this.source=e,this.path=t,this.type=$r.LISTEN_COMPLETE}operationForChild(e){return me(this.path)?new Ih(this.source,Fe()):new Ih(this.source,Ke(this.path))}}class Na{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$r.OVERWRITE}operationForChild(e){return me(this.path)?new Na(this.source,Fe(),this.snap.getImmediateChild(e)):new Na(this.source,Ke(this.path),this.snap)}}class eu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$r.MERGE}operationForChild(e){if(me(this.path)){const t=this.children.subtree(new je(e));return t.isEmpty()?null:t.value?new Na(this.source,Fe(),t.value):new eu(this.source,Fe(),t)}return M(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new eu(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;const t=ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Bre{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Th(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function jre(n,e,t){if(null==e.childName||null==t.childName)throw $c("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),i=new ye(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Vre(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function zm(n,e){return{eventCache:n,serverCache:e}}function Dh(n,e,t,r){return zm(new wo(e,t,r),n.serverCache)}function B2(n,e,t,r){return zm(n.eventCache,new wo(e,t,r))}function Wm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let g0;class tt{constructor(e,t=(()=>(g0||(g0=new nr(Dne)),g0))()){this.value=e,this.children=t}static fromObject(e){let t=new tt(null);return tn(e,(r,i)=>{t=t.set(new je(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Fe(),value:this.value};if(me(e))return null;{const r=ge(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Ke(e),t);return null!=s?{path:ot(new je(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{const t=ge(e),r=this.children.get(t);return null!==r?r.subtree(Ke(e)):new tt(null)}}set(e,t){if(me(e))return new tt(t,this.children);{const r=ge(e),s=(this.children.get(r)||new tt(null)).set(Ke(e),t),o=this.children.insert(r,s);return new tt(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const t=ge(e),r=this.children.get(t);if(r){const i=r.remove(Ke(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new tt(null):new tt(this.value,s)}return this}}get(e){if(me(e))return this.value;{const t=ge(e),r=this.children.get(t);return r?r.get(Ke(e)):null}}setTree(e,t){if(me(e))return t;{const r=ge(e),s=(this.children.get(r)||new tt(null)).setTree(Ke(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new tt(this.value,o)}}fold(e){return this.fold_(Fe(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ot(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Fe(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(me(e))return null;{const s=ge(e),o=this.children.get(s);return o?o.findOnPath_(Ke(e),ot(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fe(),t)}foreachOnPath_(e,t,r){if(me(e))return this;{this.value&&r(t,this.value);const i=ge(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),ot(t,i),r):new tt(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ot(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class mi{constructor(e){this.writeTree_=e}static empty(){return new mi(new tt(null))}}function Sh(n,e,t){if(me(e))return new mi(new tt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Un(i,e);return s=s.updateChild(o,t),new mi(n.writeTree_.set(i,s))}{const i=new tt(t),s=n.writeTree_.setTree(e,i);return new mi(s)}}}function m0(n,e,t){let r=n;return tn(t,(i,s)=>{r=Sh(r,ot(e,i),s)}),r}function U2(n,e){if(me(e))return mi.empty();{const t=n.writeTree_.setTree(e,new tt(null));return new mi(t)}}function _0(n,e){return null!=La(n,e)}function La(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Un(t.path,e)):null}function V2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(et,(r,i)=>{e.push(new ye(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ye(r,i.value))}),e}function Eo(n,e){if(me(e))return n;{const t=La(n,e);return new mi(null!=t?new tt(t):n.writeTree_.subtree(e))}}function y0(n){return n.writeTree_.isEmpty()}function tu(n,e){return j2(Fe(),n.writeTree_,e)}function j2(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(M(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=j2(ot(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ot(n,".priority"),r)),t}}function qm(n,e){return q2(e,n)}function Gre(n,e){if(n.snap)return Hr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Hr(ot(n.path,t),e))return!0;return!1}function Yre(n){return n.visible}function H2(n,e,t){let r=mi.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Hr(t,o)?(a=Un(t,o),r=Sh(r,a,s.snap)):Hr(o,t)&&(a=Un(o,t),r=Sh(r,Fe(),s.snap.getChild(a)));else{if(!s.children)throw $c("WriteRecord should have .snap or .children");if(Hr(t,o))a=Un(t,o),r=m0(r,a,s.children);else if(Hr(o,t))if(a=Un(o,t),me(a))r=m0(r,Fe(),s.children);else{const l=zc(s.children,ge(a));if(l){const c=l.getChild(Ke(a));r=Sh(r,Fe(),c)}}}}}return r}function $2(n,e,t,r,i){if(r||i){const s=Eo(n.visibleWrites,e);return!i&&y0(s)?t:i||null!=t||_0(s,Fe())?tu(H2(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Hr(c.path,e)||Hr(e,c.path))},e),t||le.EMPTY_NODE):null}{const s=La(n.visibleWrites,e);if(null!=s)return s;{const o=Eo(n.visibleWrites,e);return y0(o)?t:null!=t||_0(o,Fe())?tu(o,t||le.EMPTY_NODE):null}}}function Gm(n,e,t,r){return $2(n.writeTree,n.treePath,e,t,r)}function v0(n,e){return function Qre(n,e,t){let r=le.EMPTY_NODE;const i=La(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(et,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Eo(n.visibleWrites,e);return t.forEachChild(et,(o,a)=>{const l=tu(Eo(s,new je(o)),a);r=r.updateImmediateChild(o,l)}),V2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return V2(Eo(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function z2(n,e,t,r){return function Xre(n,e,t,r,i){M(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ot(e,t);if(_0(n.visibleWrites,s))return null;{const o=Eo(n.visibleWrites,s);return y0(o)?i.getChild(t):tu(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Km(n,e){return function Jre(n,e){return La(n.visibleWrites,e)}(n.writeTree,ot(n.treePath,e))}function b0(n,e,t){return function Zre(n,e,t,r){const i=ot(e,t),s=La(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?tu(Eo(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function W2(n,e){return q2(ot(n.treePath,e),n.writeTree)}function q2(n,e){return{treePath:n,writeTree:e}}class rie{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;M("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),M(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Eh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,wh(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Zc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw $c("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Eh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const G2=new class iie{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class w0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new wo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return b0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fa(this.viewCache_),s=function nie(n,e,t,r,i,s){return function eie(n,e,t,r,i,s,o){let a;const l=Eo(n.visibleWrites,e),c=La(l,Fe());if(null!=c)a=c;else{if(null==t)return[];a=tu(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function K2(n,e,t,r,i,s){const o=e.eventCache;if(null!=Km(r,t))return e;{let a,l;if(me(t))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Fa(e),d=v0(r,c instanceof le?c:le.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Gm(r,Fa(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ge(t);if(".priority"===c){M(1===bo(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=z2(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=Ke(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=z2(r,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=b0(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return Dh(e,a,o.isFullyInitialized()||me(t),n.filter.filtersNodes())}}function Ym(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(me(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ge(t);if(!l.isCompleteForPath(t)&&bo(t)>1)return e;const p=Ke(t),_=l.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?u.updatePriority(l.getNode(),_):u.updateChild(l.getNode(),f,_,p,G2,null)}const d=B2(e,c,l.isFullyInitialized()||me(t),u.filtersNodes());return K2(n,d,t,i,new w0(i,d,s),a)}function E0(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new w0(i,e,s);if(me(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Dh(e,c,!0,n.filter.filtersNodes());else{const d=ge(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Dh(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Ke(t),f=a.getNode().getImmediateChild(d);let p;if(me(h))p=r;else{const m=u.getCompleteChild(d);p=null!=m?".priority"===QC(h)&&m.getChild(b2(h)).isEmpty()?m:m.updateChild(h,r):le.EMPTY_NODE}l=f.equals(p)?e:Dh(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Y2(n,e){return n.eventCache.isCompleteForChild(e)}function Q2(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function C0(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=me(t)?r:new tt(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=Q2(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ym(n,l,new je(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const m=Q2(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ym(n,l,new je(d),m,i,s,o,a)}}),l}class fie{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new o0(r.getIndex()),s=function Sre(n){return n.loadsAllData()?new o0(n.getIndex()):n.hasLimit()?new Dre(n):new Ch(n)}(r);this.processor_=function sie(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(le.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),u=new wo(l,o.isFullyInitialized(),i.filtersNodes()),d=new wo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=zm(d,u),this.eventGenerator_=new Bre(this.query_)}get query(){return this.query_}}function mie(n,e){const t=Fa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!me(e)&&!t.getImmediateChild(ge(e)).isEmpty())?t.getChild(e):null}function X2(n){return 0===n.eventRegistrations_.length}function Z2(n,e,t){const r=[];if(t){M(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function J2(n,e,t,r){e.type===$r.MERGE&&null!==e.source.queryId&&(M(Fa(n.viewCache_),"We should always have a full cache before handling merges"),M(Wm(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function aie(n,e,t,r,i){const s=new rie;let o,a;if(t.type===$r.OVERWRITE){const c=t;c.source.fromUser?o=E0(n,e,c.path,c.snap,r,i,s):(M(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!me(c.path),o=Ym(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===$r.MERGE){const c=t;c.source.fromUser?o=function cie(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=ot(t,l);Y2(e,ge(u))&&(a=E0(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=ot(t,l);Y2(e,ge(u))||(a=E0(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(M(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=C0(n,e,c.path,c.children,r,i,a,s))}else if(t.type===$r.ACK_USER_WRITE){const c=t;o=c.revert?function hie(n,e,t,r,i,s){let o;if(null!=Km(r,t))return e;{const a=new w0(r,e,i),l=e.eventCache.getNode();let c;if(me(t)||".priority"===ge(t)){let u;if(e.serverCache.isFullyInitialized())u=Gm(r,Fa(e));else{const d=e.serverCache.getNode();M(d instanceof le,"serverChildren would be complete if leaf node"),u=v0(r,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=ge(t);let d=b0(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,Ke(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,le.EMPTY_NODE,Ke(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Gm(r,Fa(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Km(r,Fe()),Dh(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function uie(n,e,t,r,i,s,o){if(null!=Km(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(me(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Ym(n,e,t,l.getNode().getChild(t),i,s,a,o);if(me(t)){let c=new tt(null);return l.getNode().forEachChild(zi,(u,d)=>{c=c.set(new je(u),d)}),C0(n,e,t,c,i,s,a,o)}return e}{let c=new tt(null);return r.foreach((u,d)=>{const h=ot(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),C0(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==$r.LISTEN_COMPLETE)throw $c("Unknown operation type: "+t.type);o=function die(n,e,t,r,i){const s=e.serverCache;return K2(n,B2(e,s.getNode(),s.isFullyInitialized()||me(t),s.isFiltered()),t,r,G2,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function lie(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Wm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(O2(Wm(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function oie(n,e){M(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),M(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,eU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function eU(n,e,t,r){return function Ure(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Tre(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Th(n,i,"child_removed",e,r,t),Th(n,i,"child_added",e,r,t),Th(n,i,"child_moved",s,r,t),Th(n,i,"child_changed",e,r,t),Th(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Qm,Zm;class tU{constructor(){this.views=new Map}}function I0(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return M(null!=s,"SyncTree gave us an op for an invalid query."),J2(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(J2(o,e,t,r));return s}}function nU(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=Gm(t,i?r:null),l=!1;a?l=!0:r instanceof le?(a=v0(t,r),l=!1):(a=le.EMPTY_NODE,l=!1);const c=zm(new wo(a,l,!1),new wo(r,i,!1));return new fie(e,c)}return o}function rU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Co(n,e){let t=null;for(const r of n.views.values())t=t||mie(r,e);return t}function iU(n,e){return e._queryParams.loadsAllData()?Xm(n):n.views.get(e._queryIdentifier)}function sU(n,e){return null!=iU(n,e)}function Io(n){return null!=Xm(n)}function Xm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Die=1;class oU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=function tie(){return{visibleWrites:mi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function T0(n,e,t,r,i){return function $re(n,e,t,r,i){M(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?nu(n,new Na({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function To(n,e,t=!1){const r=function Wre(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function qre(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);M(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Gre(a,r.path)?i=!1:Hr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Kre(n){n.visibleWrites=H2(n.allWrites,Yre,Fe()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=U2(n.visibleWrites,r.path):tn(r.children,l=>{n.visibleWrites=U2(n.visibleWrites,ot(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new tt(null);return null!=r.snap?s=s.set(Fe(),!0):tn(r.children,o=>{s=s.set(new je(o),!0)}),nu(n,new $m(r.path,s,t))}return[]}function Ah(n,e,t){return nu(n,new Na({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Jm(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||sU(o,e))){const l=function Cie(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Io(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(Z2(c,t,r)),X2(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(Z2(l,t,r)),X2(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Io(n)&&s.push(new(function bie(){return M(Qm,"Reference.ts has not been loaded"),Qm}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function wie(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>Io(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function Pie(n){return n.fold((e,t,r)=>{if(t&&Io(t))return[Xm(t)];{let i=[];return t&&(i=rU(t)),tn(r,(s,o)=>{i=i.concat(o)}),i}})}(h);for(let p=0;p<f.length;++p){const m=f[p],_=m.query,v=uU(n,m);n.listenProvider_.startListening(Mh(_),xh(n,_),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(Mh(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(t_(h));n.listenProvider_.stopListening(Mh(h),f)}))}!function Oie(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=t_(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function aU(n,e,t,r){const i=S0(n,r);if(null!=i){const s=A0(i),o=s.path,a=s.queryId,l=Un(o,e);return x0(n,o,new Na(p0(a),l,t))}return[]}function D0(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=Un(h,i);s=s||Co(f,p),o=o||Io(f)});let l,a=n.syncPointTree_.get(i);a?(o=o||Io(a),s=s||Co(a,Fe())):(a=new tU,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=le.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,p)=>{const m=Co(p,Fe());m&&(s=s.updateImmediateChild(f,m))}));const c=sU(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=t_(e);M(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function Nie(){return Die++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function Eie(n,e,t,r,i,s){const o=nU(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function _ie(n,e){n.eventRegistrations_.push(e)}(o,t),function yie(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(et,(s,o)=>{r.push(Zc(s,o))}),t.isFullyInitialized()&&r.push(O2(t.getNode())),eU(n,r,t.getNode(),e)}(o,t)}(a,e,t,qm(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const h=iU(a,e);d=d.concat(function Fie(n,e,t){const r=e._path,i=xh(n,e),s=uU(n,t),o=n.listenProvider_.startListening(Mh(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)M(!Io(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!me(c)&&u&&Io(u))return[Xm(u).query];{let h=[];return u&&(h=h.concat(rU(u).map(f=>f.query))),tn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Mh(u),xh(n,u))}}return o}(n,e,h))}return d}function e_(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Co(a,Un(o,e));if(c)return c});return $2(i,e,s,t,!0)}function nu(n,e){return lU(e,n.syncPointTree_,null,qm(n.pendingWriteTree_,Fe()))}function lU(n,e,t,r){if(me(n.path))return cU(n,e,t,r);{const i=e.get(Fe());null==t&&null!=i&&(t=Co(i,Fe()));let s=[];const o=ge(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=W2(r,o);s=s.concat(lU(a,l,c,u))}return i&&(s=s.concat(I0(i,n,r,t))),s}}function cU(n,e,t,r){const i=e.get(Fe());null==t&&null!=i&&(t=Co(i,Fe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=W2(r,o),u=n.operationForChild(o);u&&(s=s.concat(cU(u,a,l,c)))}),i&&(s=s.concat(I0(i,n,r,t))),s}function uU(n,e){const t=e.query,r=xh(n,t);return{hashFn:()=>(function pie(n){return n.viewCache_.serverCache.getNode()}(e)||le.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Mie(n,e,t){const r=S0(n,t);if(r){const i=A0(r),s=i.path,o=i.queryId,a=Un(s,e);return x0(n,s,new Ih(p0(o),a))}return[]}(n,t._path,r):function xie(n,e){return nu(n,new Ih({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function xne(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Jm(n,t,null,s)}}}}function xh(n,e){const t=t_(e);return n.queryToTagMap.get(t)}function t_(n){return n._path.toString()+"$"+n._queryIdentifier}function S0(n,e){return n.tagToQueryMap.get(e)}function A0(n){const e=n.indexOf("$");return M(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new je(n.substr(0,e))}}function x0(n,e,t){const r=n.syncPointTree_.get(e);return M(r,"Missing sync point for query tag that we're tracking"),I0(r,t,qm(n.pendingWriteTree_,e),null)}function Mh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Tie(){return M(Zm,"Reference.ts has not been loaded"),Zm}())(n._repo,n._path):n}class M0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new M0(t)}node(){return this.node_}}class k0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ot(this.path_,e);return new k0(this.syncTree_,t)}node(){return e_(this.syncTree_,this.path_)}}const dU=function(n,e,t){return n&&"object"==typeof n?(M(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Bie(n[".sv"],e,t):"object"==typeof n[".sv"]?Uie(n[".sv"],e):void M(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Bie=function(n,e,t){if("timestamp"===n)return t.timestamp;M(!1,"Unexpected server value: "+n)},Uie=function(n,e,t){n.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&M(!1,"Unexpected increment value: "+r);const i=e.node();if(M(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},R0=function(n,e,t){return P0(n,new M0(e),t)};function P0(n,e,t){const r=n.getPriority().val(),i=dU(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=dU(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Yc(a,pt(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Yc(i))),o.forEachChild(et,(a,l)=>{const c=P0(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class O0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function n_(n,e){let t=e instanceof je?e:new je(e),r=n,i=ge(t);for(;null!==i;){const s=zc(r.node.children,i)||{children:{},childCount:0};r=new O0(i,r,s),t=Ke(t),i=ge(t)}return r}function Ba(n){return n.node.value}function N0(n,e){n.node.value=e,F0(n)}function fU(n){return n.node.childCount>0}function r_(n,e){tn(n.node.children,(t,r)=>{e(new O0(t,n,r))})}function pU(n,e,t,r){t&&!r&&e(n),r_(n,i=>{pU(i,e,!0,r)}),t&&r&&e(n)}function kh(n){return new je(null===n.parent?n.name:kh(n.parent)+"/"+n.name)}function F0(n){null!==n.parent&&function Hie(n,e,t){const r=function Vie(n){return void 0===Ba(n)&&!fU(n)}(t),i=fi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,F0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,F0(n))}(n.parent,n.name,n)}const $ie=/[\[\].#$\/\u0000-\u001F\u007F]/,zie=/[\[\].#$\u0000-\u001F\u007F]/,L0=10485760,i_=function(n){return"string"==typeof n&&0!==n.length&&!$ie.test(n)},gU=function(n){return"string"==typeof n&&0!==n.length&&!zie.test(n)},Wi=function(n,e,t,r){r&&void 0===e||Ph(Wc(n,"value"),e,t)},Ph=function(n,e,t){const r=t instanceof je?new ore(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pa(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pa(r)+" with contents = "+e.toString());if(km(e))throw new Error(n+"contains "+e.toString()+" "+Pa(r));if("string"==typeof e&&e.length>L0/3&&Am(e)>L0)throw new Error(n+"contains a string greater than "+L0+" utf8 bytes "+Pa(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(tn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!i_(o)))throw new Error(n+" contains an invalid key ("+o+") "+Pa(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function are(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Am(e),w2(n)})(r,o),Ph(n,a,r),function lre(n){const e=n.parts_.pop();n.byteLength_-=Am(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Pa(r)+" in addition to actual children.")}},U0=function(n,e,t,r){if(!(r&&void 0===t||gU(t)))throw new Error(Wc(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qi=function(n,e){if(".info"===ge(e))throw new Error(n+" failed = Can't modify data under /.info/")};class Kie{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function s_(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!XC(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function yU(n,e,t){s_(n,t),vU(n,r=>XC(r,e))}function Er(n,e,t){s_(n,t),vU(n,r=>Hr(r,e)||Hr(e,r))}function vU(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Yie(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Yie(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ka&&en("event: "+t.toString()),Gc(r)}}}class Xie{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kie,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hm(),this.transactionQueueTree_=new O0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function wU(n){const t=n.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Nh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:wU(n)})}function EU(n,e,t,r,i){n.dataUpdateCount++;const s=new je(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=Dm(t,c=>pt(c));o=function kie(n,e,t,r){const i=S0(n,r);if(i){const s=A0(i),o=s.path,a=s.queryId,l=Un(o,e),c=tt.fromObject(t);return x0(n,o,new eu(p0(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=pt(t);o=aU(n.serverSyncTree_,s,l,i)}else if(r){const l=Dm(t,c=>pt(c));o=function Aie(n,e,t){const r=tt.fromObject(t);return nu(n,new eu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=pt(t);o=Ah(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=iu(n,s)),Er(n.eventQueue_,a,o)}function CU(n,e){V0(n,"connected",e),!1===e&&function nse(n){ru(n,"onDisconnectEvents");const e=Nh(n),t=Hm();d0(n.onDisconnect_,Fe(),(i,s)=>{const o=function(n,e,t,r){return P0(e,new k0(t,n),r)}(i,s,n.serverSyncTree_,e);Jc(t,i,o)});let r=[];d0(t,Fe(),(i,s)=>{r=r.concat(Ah(n.serverSyncTree_,i,s));const o=z0(n,i);iu(n,o)}),n.onDisconnect_=Hm(),Er(n.eventQueue_,Fe(),r)}(n)}function V0(n,e,t){const r=new je("/.info/"+e),i=pt(t);n.infoData_.updateSnapshot(r,i);const s=Ah(n.infoSyncTree_,r,i);Er(n.eventQueue_,r,s)}function o_(n){return n.nextWriteId_++}function j0(n,e,t,r,i){ru(n,"set",{path:e.toString(),value:t,priority:r});const s=Nh(n),o=pt(t,r),a=e_(n.serverSyncTree_,e),l=R0(o,a,s),c=o_(n),u=T0(n.serverSyncTree_,e,l,c,!0);s_(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||An("set at "+e+" failed: "+h);const m=To(n.serverSyncTree_,c,!p);Er(n.eventQueue_,e,m),function Do(n,e,t,r){e&&Gc(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}(0,i,h,f)});const d=z0(n,e);iu(n,d),Er(n.eventQueue_,d,[])}function H0(n,e,t){let r;r=".info"===ge(e._path)?Jm(n.infoSyncTree_,e,t):Jm(n.serverSyncTree_,e,t),yU(n.eventQueue_,e._path,r)}function ru(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),en(t,...e)}function $0(n,e,t){return e_(n.serverSyncTree_,e,t)||le.EMPTY_NODE}function a_(n,e=n.transactionQueueTree_){if(e||l_(n,e),Ba(e)){const t=SU(n,e);M(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function cse(n,e,t){const r=t.map(c=>c.currentWriteId),i=$0(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];M(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Un(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{ru(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(To(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();l_(n,n_(n.transactionQueueTree_,e)),a_(n,n.transactionQueueTree_),Er(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Gc(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{An("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}iu(n,e)}},o)}(n,kh(e),t)}else fU(e)&&r_(e,t=>{a_(n,t)})}function iu(n,e){const t=DU(n,e),r=kh(t);return function use(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Un(t,l.path);let d,u=!1;if(M(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(To(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",i=i.concat(To(n.serverSyncTree_,l.currentWriteId,!0));else{const h=$0(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Ph("transaction failed: Data returned ",f,l.path);let p=pt(f);"object"==typeof f&&null!=f&&fi(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=l.currentWriteId,v=Nh(n),y=R0(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=o_(n),o.splice(o.indexOf(_),1),i=i.concat(T0(n.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(To(n.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(To(n.serverSyncTree_,l.currentWriteId,!0))}Er(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}l_(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Gc(r[a]);a_(n,n.transactionQueueTree_)}(n,SU(n,t),r),r}function DU(n,e){let t,r=n.transactionQueueTree_;for(t=ge(e);null!==t&&void 0===Ba(r);)r=n_(r,t),t=ge(e=Ke(e));return r}function SU(n,e){const t=[];return AU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function AU(n,e,t){const r=Ba(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);r_(e,i=>{AU(n,i,t)})}function l_(n,e){const t=Ba(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,N0(e,t.length>0?t:void 0)}r_(e,r=>{l_(n,r)})}function z0(n,e){const t=kh(DU(n,e)),r=n_(n.transactionQueueTree_,e);return function jie(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{W0(n,i)}),W0(n,r),pU(r,i=>{W0(n,i)}),t}function W0(n,e){const t=Ba(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(M(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(M(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(To(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?N0(e,void 0):t.length=s+1,Er(n.eventQueue_,kh(e),i);for(let o=0;o<r.length;o++)Gc(r[o])}}const q0=function(n,e){const t=fse(n),r=t.namespace;return"firebase.com"===t.domain&&Hi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&An("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zC(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new je(t.pathString)}},fse=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function dse(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(u,d)));const h=function hse(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):An(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class xU{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gt(this.snapshot.exportVal())}}class MU{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class G0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Cr{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:QC(this._path)}get ref(){return new _i(this._repo,this._path)}get _queryIdentifier(){const e=F2(this._queryParams),t=jC(e);return"{}"===t?"default":t}get _queryObject(){return F2(this._queryParams)}isEqual(e){if(!((e=pe(e))instanceof Cr))return!1;const t=this._repo===e._repo,r=XC(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ire(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class _i extends Cr{constructor(e,t){super(e,t,new a0,!1)}get parent(){const e=b2(this._path);return null===e?null:new _i(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ua{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new je(e),r=su(this.ref,e);return new Ua(this._node.getChild(t),r,et)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ua(i,su(this.ref,r),et)))}hasChild(e){const t=new je(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ss(n,e){return(n=pe(n))._checkNotDeleted("ref"),void 0!==e?su(n._root,e):n._root}function su(n,e){return null===ge((n=pe(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),U0("child","path",t,!1)):U0("child","path",e,!1),new _i(n._repo,ot(n._path,e));var t}function d_(n,e){n=pe(n),qi("set",n._path),Wi("set",e,n._path,!1);const t=new Da;return j0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function _se(n){n=pe(n);const e=new G0(()=>{}),t=new Fh(e);return function ese(n,e,t){const r=function Rie(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Un(c,t);r=r||Co(u,d)});let i=n.syncPointTree_.get(t);i?r=r||Co(i,Fe()):(i=new tU,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new wo(r,!0,!1):null;return function gie(n){return Wm(n.viewCache_)}(nU(i,e,qm(n.pendingWriteTree_,e._path),s?o.getNode():le.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=pt(i).withIndex(e._queryParams.getIndex());let o;if(D0(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Ah(n.serverSyncTree_,e._path,s);else{const a=xh(n.serverSyncTree_,e);o=aU(n.serverSyncTree_,e._path,s,a)}return Er(n.eventQueue_,e._path,o),Jm(n.serverSyncTree_,e,t,null,!0),s},i=>(ru(n,"get for query "+Gt(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ua(r,new _i(n._repo,n._path),n._queryParams.getIndex()))}class Fh{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new xU("value",this,new Ua(e.snapshotNode,new _i(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MU(this,e,t):null}matches(e){return e instanceof Fh&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class h_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MU(this,e,t):null}createEvent(e,t){M(null!=e.childName,"Child events should have a childName.");const r=su(new _i(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new xU(e.type,this,new Ua(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof h_&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function f_(n,e,t,r){return function Lh(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,d)=>{H0(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new G0(t,s||void 0),a="value"===e?new Fh(o):new h_(e,o);return function ose(n,e,t){let r;r=".info"===ge(e._path)?D0(n.infoSyncTree_,e,t):D0(n.serverSyncTree_,e,t),yU(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>H0(n._repo,n,a)}(n,"value",e,t,r)}(function vie(n){M(!Qm,"__referenceConstructor has already been defined"),Qm=n})(_i),function Iie(n){M(!Zm,"__referenceConstructor has already been defined"),Zm=n}(_i);const K0={};function xse(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),en("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=q0(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=q0(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new mh(mh.OWNER):new Pne(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!i_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gU(n)}(t))throw new Error(Wc(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),me(o.path)||Hi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function kse(n,e,t,r){let i=K0[e.name];i||(i={},K0[e.name]=i);let s=i[n.toURLString()];return s&&Hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xie(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new Rne(n.name,t));return new Pse(d,n)}class Pse{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Zie(n,e,t){if(n.stats_=GC(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jm(n.repoInfo_,(r,i,s,o)=>{EU(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>CU(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Oa(n.repoInfo_,e,(r,i,s,o)=>{EU(n,r,i,s,o)},r=>{CU(n,r)},r=>{!function Jie(n,e){tn(e,(t,r)=>{V0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Fne(n,e){const t=n.toString();return qC[t]||(qC[t]=e()),qC[t]}(n.repoInfo_,()=>new Lre(n.stats_,n.server_)),n.infoData_=new Rre,n.infoSyncTree_=new oU({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Ah(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),V0(n,"connected",!1),n.serverSyncTree_=new oU({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Er(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _i(this._repo,Fe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Mse(n,e){const t=K0[e];(!t||t[n.key]!==n)&&Hi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function TU(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Hi("Cannot call "+e+" on a deleted database.")}}function Va(n=yo(),e){return pi(n,"database").getImmediate({identifier:e})}Oa.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Oa.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ose(n){(function wne(n){BC=n})(Vi),Ft(new Mt("database",(e,{instanceIdentifier:t})=>xse(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Se(NB,"0.13.6",n),Se(NB,"0.13.6","esm2017")}(),Se("firebase","9.10.0","app");const yi_firebase={projectId:"site-wynyard",appId:"1:788072440341:web:961357f1f92a55f4eba41c",storageBucket:"site-wynyard.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyDV7W5Hv2CnumoHfr3Tdtq_Xf1Kp8Rsls4",authDomain:"site-wynyard.firebaseapp.com",messagingSenderId:"788072440341"};function Ao(n){return null!=n&&"false"!=`${n}`}function NU(n){return Array.isArray(n)?n:[n]}function Lt(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ou(n){return n instanceof Dt?n.nativeElement:n}function Y(...n){return Cn(n,hd(n))}const{isArray:Vse}=Array;function Y0(n){return be(e=>function jse(n,e){return Vse(e)?n(...e):n(e)}(n,e))}const Hse=["addListener","removeListener"],$se=["addEventListener","removeEventListener"],zse=["on","off"];function Bh(n,e,t,r){if(Be(t)&&(r=t,t=void 0),r)return Bh(n,e,t).pipe(Y0(r));const[i,s]=function Gse(n){return Be(n.addEventListener)&&Be(n.removeEventListener)}(n)?$se.map(o=>a=>n[o](e,a,t)):function Wse(n){return Be(n.addListener)&&Be(n.removeListener)}(n)?Hse.map(FU(n,e)):function qse(n){return Be(n.on)&&Be(n.off)}(n)?zse.map(FU(n,e)):[];if(!i&&gb(n))return jt(o=>Bh(o,e,t))(Qn(n));if(!i)throw new TypeError("Invalid event target");return new Qe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function FU(n,e){return t=>r=>n[t](e,r)}class Kse extends hn{constructor(e,t){super()}schedule(e,t=0){return this}}const p_={setInterval(n,e,...t){const{delegate:r}=p_;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=p_;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class g_ extends Kse{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return p_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;p_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,jp(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Uh={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Uh;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new hn(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Uh;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Uh;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},LU={now:()=>(LU.delegate||Date).now(),delegate:void 0};class Vh{constructor(e,t=Vh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Vh.now=LU.now;class m_ extends Vh{constructor(e,t=Vh.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class Qse extends m_{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Yse extends g_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Uh.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Uh.cancelAnimationFrame(t),e._scheduled=void 0)}});let Q0,Zse=1;const __={};function BU(n){return n in __&&(delete __[n],!0)}const Jse={setImmediate(n){const e=Zse++;return __[e]=!0,Q0||(Q0=Promise.resolve()),Q0.then(()=>BU(e)&&n()),e},clearImmediate(n){BU(n)}},{setImmediate:eoe,clearImmediate:toe}=Jse,y_={setImmediate(...n){const{delegate:e}=y_;return((null==e?void 0:e.setImmediate)||eoe)(...n)},clearImmediate(n){const{delegate:e}=y_;return((null==e?void 0:e.clearImmediate)||toe)(n)},delegate:void 0},v_=(new class roe extends m_{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class noe extends g_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=y_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(y_.clearImmediate(t),e._scheduled=void 0)}}),new m_(g_)),soe=v_;function UU(n,e=v_){return function ooe(n){return It((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(dt(t,c=>{r=!0,i=c,s||Qn(n(c)).subscribe(s=dt(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function loe(n=0,e,t=soe){let r=-1;return null!=e&&(ZR(e)?t=e:r=e),new Qe(i=>{let s=function aoe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}function Kt(n,e){return It((t,r)=>{let i=0;t.subscribe(dt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function zr(n){return It((e,t)=>{Qn(n).subscribe(dt(t,()=>t.complete(),lb)),!t.closed&&e.subscribe(t)})}let X0;try{X0="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){X0=!1}let jh,w_,ja,Z0,vi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function lee(n){return n===XL}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X0)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(C(Vc))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b_(n){return function coe(){if(null==jh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jh=!0}))}finally{jh=jh||!1}return jh}()?n:!!n.capture}function jU(){if(null==ja){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ja=!1,ja;if("scrollBehavior"in document.documentElement.style)ja=!0;else{const n=Element.prototype.scrollTo;ja=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ja}function Hh(){if("object"!=typeof document||!document)return 0;if(null==w_){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),w_=0,0===n.scrollLeft&&(n.scrollLeft=1,w_=0===n.scrollLeft?1:2),n.remove()}return w_}function J0(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ha(n){return n.composedPath?n.composedPath()[0]:n.target}function eI(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const hoe=new B("cdk-dir-doc",{providedIn:"root",factory:function foe(){return vg(we)}}),poe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $h=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new St,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function goe(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?poe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(C(hoe,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})(),tI=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Oe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Qe(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(UU(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Y()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Kt(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=ou(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Bh(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(vi),C(we,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nI=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new Oe,this._elementScrolled=new Qe(o=>this.ngZone.runOutsideAngular(()=>Bh(this.elementRef.nativeElement,"scroll").pipe(zr(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Hh()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Hh()?t.left=t.right:1==Hh()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;jU()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&2==Hh()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Hh()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(tI),I(ce),I($h,8))},n.\u0275dir=Ue({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),rI=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Oe,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(UU(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(C(vi),C(ce),C(we,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[zh,Wh],zh,Wh]}),n})();class iI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class sI extends iI{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class $U extends iI{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yoe extends iI{constructor(e){super(),this.element=e instanceof Dt?e.nativeElement:e}}class oI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof sI?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof $U?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yoe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class voe extends oI{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ge.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let zU=(()=>{class n extends oI{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new St,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(I(ba),I(Br),I(we))},n.\u0275dir=Ue({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ao]}),n})(),WU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})();function bi(n){return n<=0?()=>us:It((e,t)=>{let r=0;e.subscribe(dt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}const qU=jU();class boe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Lt(-this._previousScrollPosition.left),e.style.top=Lt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),qU&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),qU&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class woe{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GU{enable(){}disable(){}attach(){}}function aI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function KU(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Eoe{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();aI(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Coe=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new GU,this.close=o=>new woe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new boe(this._viewportRuler,this._document),this.reposition=o=>new Eoe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(C(tI),C(rI),C(ce),C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YU{constructor(e){if(this.scrollStrategy=new GU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Ioe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class Toe{constructor(e,t,r,i,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Oe,this._attachments=new Oe,this._detachments=new Oe,this._locationChanges=hn.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Oe,this._outsidePointerEvents=new Oe,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(bi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Lt(this._config.width),e.height=Lt(this._config.height),e.minWidth=Lt(this._config.minWidth),e.minHeight=Lt(this._config.minHeight),e.maxWidth=Lt(this._config.maxWidth),e.maxHeight=Lt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=NU(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(zr(_b(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let lI=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||eI()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),eI()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(C(we),C(vi))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QU="cdk-overlay-connected-position-bounding-box",Doe=/([A-Za-z%]+)$/;class Soe{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Oe,this._resizeSubscription=hn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(QU),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$a(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(QU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=ZU(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-r.height,p=this._subtractOverflows(s.width,0-o,o+s.width-r.width),m=this._subtractOverflows(s.height,h,f),_=p*m;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=XU(this._overlayRef.getConfig().minHeight),a=XU(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=i)&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=ZU(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Ioe(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const f=Math.min(r.bottom-e.y+r.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const f=Math.min(r.right-e.x+r.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Lt(r.height),i.top=Lt(r.top),i.bottom=Lt(r.bottom),i.width=Lt(r.width),i.left=Lt(r.left),i.right=Lt(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Lt(s)),o&&(i.maxWidth=Lt(o))}this._lastBoundingBoxSize=r,$a(this._boundingBox.style,i)}_resetBoundingBoxStyles(){$a(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$a(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();$a(r,this._getExactOverlayY(t,e,u)),$a(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Lt(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Lt(o.maxWidth):s&&(r.maxWidth="")),$a(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Lt(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Lt(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:KU(e,r),isOriginOutsideView:aI(e,r),isOverlayClipped:KU(t,r),isOverlayOutsideView:aI(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&NU(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Dt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function $a(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function XU(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Doe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function ZU(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const JU="cdk-global-overlay-wrapper";class Aoe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(JU),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(JU),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let xoe=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new Aoe}flexibleConnectedTo(t){return new Soe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(C(rI),C(we),C(vi),C(lI))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eV=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Moe=(()=>{class n extends eV{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(C(we),C(ce,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),koe=(()=>{class n extends eV{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ha(s)},this._clickListener=s=>{const o=Ha(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(C(we),C(vi),C(ce,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Roe=0,qh=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new YU(t);return o.direction=o.direction||this._directionality.value,new Toe(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Roe++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(im)),new voe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(C(Coe),C(lI),C(ba),C(xoe),C(Moe),C(Ge),C(ce),C(we),C($h),C(Ia),C(koe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const Noe={provide:new B("cdk-connected-overlay-scroll-strategy"),deps:[qh],useFactory:function Ooe(n){return()=>n.scrollStrategies.reposition()}};let tV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[qh,Noe],imports:[[zh,WU,HU],HU]}),n})();class Wr extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function iV(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function sV(n,e=Xs){return n=null!=n?n:Hoe,It((t,r)=>{let i,s=!0;t.subscribe(dt(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Hoe(n,e){return n===e}let cI=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function qoe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Woe(n){try{return n.frameElement}catch(e){return null}}(function eae(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===cV(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=cV(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Zoe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Joe(n){return!function Koe(n){return function Qoe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Goe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Yoe(n){return function Xoe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||lV(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(C(vi))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function cV(n){if(!lV(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class tae{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(bi(1)).subscribe(e)}}let uV=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new tae(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(C(cI),C(ce),C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dV(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function hV(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const nae=new B("cdk-input-modality-detector-options"),rae={ignoreKeys:[18,17,224,91,16]},lu=b_({passive:!0,capture:!0});let iae=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Wr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ha(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dV(o)?"keyboard":"mouse"),this._mostRecentTarget=Ha(o))},this._onTouchstart=o=>{hV(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ha(o))},this._options=Object.assign(Object.assign({},rae),s),this.modalityDetected=this._modality.pipe(function joe(n){return Kt((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(sV()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,lu),i.addEventListener("mousedown",this._onMousedown,lu),i.addEventListener("touchstart",this._onTouchstart,lu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,lu),document.removeEventListener("mousedown",this._onMousedown,lu),document.removeEventListener("touchstart",this._onTouchstart,lu))}}return n.\u0275fac=function(t){return new(t||n)(C(vi),C(ce),C(we),C(nae,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oae=new B("cdk-focus-monitor-default-options"),E_=b_({passive:!0,capture:!0});let uI=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Oe,this._rootNodeFocusAndBlurListener=a=>{const l=Ha(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,r=!1){const i=ou(t);if(!this._platform.isBrowser||1!==i.nodeType)return Y(null);const s=function doe(n){if(function uoe(){if(null==Z0){const n="undefined"!=typeof document?document.head:null;Z0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Z0}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new Oe,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=ou(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=ou(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Ha(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,E_),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,E_)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(zr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,E_),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,E_),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(vi),C(iae),C(we,8),C(oae,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pV="cdk-high-contrast-black-on-white",gV="cdk-high-contrast-white-on-black",dI="cdk-high-contrast-active";let aae=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(dI),t.remove(pV),t.remove(gV),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(dI),t.add(pV)):2===r&&(t.add(dI),t.add(gV))}}}return n.\u0275fac=function(t){return new(t||n)(C(vi),C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mV{}const As="*";function C_(n,e){return{type:7,name:n,definitions:e,options:{}}}function za(n,e=null){return{type:4,styles:e,timings:n}}function _V(n,e=null){return{type:3,steps:n,options:e}}function yV(n,e=null){return{type:2,steps:n,options:e}}function Ir(n){return{type:6,styles:n,offset:null}}function cu(n,e,t){return{type:0,name:n,styles:e,options:t}}function Wa(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function vV(n=null){return{type:9,options:n}}function bV(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function wV(n){Promise.resolve(null).then(n)}class Gh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?wV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Te=!1;function CV(n){return new $(3e3,Te)}function Hae(){return"undefined"!=typeof window&&void 0!==window.document}function fI(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function xo(n){switch(n.length){case 0:return new Gh;case 1:return n[0];default:return new EV(n)}}function IV(n,e,t,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,_=u[p];if("offset"!==p)switch(m=e.normalizePropertyName(m,o),_){case"!":_=i[p];break;case As:_=s[p];break;default:_=e.normalizeStyleValue(p,m,_,o)}f[m]=_}),h||a.push(f),c=f,l=d}),o.length)throw function kae(n){return new $(3502,Te)}();return a}function pI(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&gI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&gI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&gI(t,"destroy",n)))}}function gI(n,e,t){const r=t.totalTime,s=mI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function mI(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Tr(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function TV(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let _I=(n,e)=>!1,DV=(n,e,t)=>[],SV=null;function yI(n){const e=n.parentNode||n.host;return e===SV?null:e}(fI()||"undefined"!=typeof Element)&&(Hae()?(SV=(()=>document.documentElement)(),_I=(n,e)=>{for(;e;){if(e===n)return!0;e=yI(e)}return!1}):_I=(n,e)=>n.contains(e),DV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let qa=null,AV=!1;function xV(n){qa||(qa=function zae(){return"undefined"!=typeof document?document.body:null}()||{},AV=!!qa.style&&"WebkitAppearance"in qa.style);let e=!0;return qa.style&&!function $ae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qa.style,!e&&AV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in qa.style)),e}const MV=_I,kV=DV;let RV=(()=>{class n{validateStyleProperty(t){return xV(t)}matchesElement(t,r){return!1}containsElement(t,r){return MV(t,r)}getParentElement(t){return yI(t)}query(t,r,i){return kV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Gh(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),vI=(()=>{class n{}return n.NOOP=new RV,n})();const bI="ng-enter",T_="ng-leave",D_="ng-trigger",S_=".ng-trigger",OV="ng-animating",wI=".ng-animating";function Ga(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EI(parseFloat(e[1]),e[2])}function EI(n,e){return"s"===e?1e3*n:n}function A_(n,e,t){return n.hasOwnProperty("duration")?n:function Gae(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(CV()),{duration:0,delay:0,easing:""};i=EI(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=EI(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function cae(){return new $(3100,Te)}()),a=!0),s<0&&(e.push(function uae(){return new $(3101,Te)}()),a=!0),a&&e.splice(l,0,CV())}return{duration:i,delay:s,easing:o}}(n,e,t)}function uu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Mo(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else uu(n,t);return t}function FV(n,e,t){return t?e+":"+t+";":""}function LV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=FV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=FV(0,Qae(t),n.style[t]));n.setAttribute("style",e)}function Gi(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=II(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),fI()&&LV(n))}function Ka(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=II(t);n.style[r]=""}),fI()&&LV(n))}function Kh(n){return Array.isArray(n)?1==n.length?n[0]:yV(n):n}const CI=new RegExp("{{\\s*(.+?)\\s*}}","g");function BV(n){let e=[];if("string"==typeof n){let t;for(;t=CI.exec(n);)e.push(t[1]);CI.lastIndex=0}return e}function x_(n,e,t){const r=n.toString(),i=r.replace(CI,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function hae(n){return new $(3003,Te)}()),a=""),a.toString()});return i==r?n:i}function M_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Yae=/-+([a-z0-9])/g;function II(n){return n.replace(Yae,(...e)=>e[1].toUpperCase())}function Qae(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Dr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fae(n){return new $(3004,Te)}()}}function UV(n,e){return window.getComputedStyle(n)[e]}function nle(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function rle(n,e,t){if(":"==n[0]){const l=function ile(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Sae(n){return new $(3016,Te)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Dae(n){return new $(3015,Te)}()),e;const i=r[1],s=r[2],o=r[3];e.push(VV(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(VV(o,i))}(r,t,e)):t.push(n),t}const O_=new Set(["true","1"]),N_=new Set(["false","0"]);function VV(n,e){const t=O_.has(n)||N_.has(n),r=O_.has(e)||N_.has(e);return(i,s)=>{let o="*"==n||n==i,a="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?O_.has(n):N_.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?O_.has(e):N_.has(e)),o&&a}}const sle=new RegExp("s*:selfs*,?","g");function TI(n,e,t,r){return new ole(n).build(e,t,r)}class ole{constructor(e){this._driver=e}build(e,t,r){const i=new cle(t);this._resetContextStyleTimingState(i);const s=Dr(this,Kh(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function gae(){return new $(3006,Te)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function mae(){return new $(3007,Te)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{if(F_(a)){const l=a;Object.keys(l).forEach(c=>{BV(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(M_(s.values()),t.errors.push(function _ae(n,e){return new $(3008,Te)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Dr(this,Kh(e.animation),t);return{type:1,matchers:nle(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ya(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Dr(this,r,t)),options:Ya(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Dr(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Ya(e.options)}}visitAnimate(e,t){const r=function dle(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return DI(A_(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=DI(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||A_(r,e),DI(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ir({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Ir(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==As?r.push(o):t.errors.push(function yae(n){return new $(3002,Te)}()):r.push(o)}):r.push(e.styles);let i=!1,s=null;return r.forEach(o=>{if(F_(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!i)for(let c in a)if(a[c].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(t.errors.push(function vae(n,e,t,r,i){return new $(3010,Te)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:i}),t.options&&function Kae(n,e,t){const r=e.params||{},i=BV(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function dae(n){return new $(3001,Te)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bae(){return new $(3011,Te)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(v=>{const y=this._makeStyleAst(v,t);let E=null!=y.offset?y.offset:function ule(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(F_(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(F_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(y.styles),T=0;return null!=E&&(s++,T=y.offset=E),l=l||T<0||T>1,a=a||T<c,c=T,o.push(T),y});l&&t.errors.push(function wae(){return new $(3012,Te)}()),a&&t.errors.push(function Eae(){return new $(3200,Te)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Cae(){return new $(3202,Te)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,_=m.duration;return u.forEach((v,y)=>{const E=h>0?y==f?1:h*y:o[y],T=E*_;t.currentTime=p+m.delay+T,m.duration=T,this._validateStyleAst(v,t),v.offset=E,r.styles.push(v)}),r}visitReference(e,t){return{type:8,animation:Dr(this,Kh(e.animation),t),options:Ya(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ya(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ya(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function ale(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(sle,"")),n=n.replace(/@\*/g,S_).replace(/@\w+/g,t=>S_+"-"+t.substr(1)).replace(/:animating/g,wI),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Tr(t.collectedStyles,t.currentQuerySelector,{});const a=Dr(this,Kh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ya(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Iae(){return new $(3013,Te)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:A_(e.timings,t.errors,!0);return{type:12,animation:Dr(this,Kh(e.animation),t),timings:r,options:null}}}class cle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function F_(n){return!Array.isArray(n)&&"object"==typeof n}function Ya(n){return n?(n=uu(n)).params&&(n.params=function lle(n){return n?uu(n):null}(n.params)):n={},n}function DI(n,e,t){return{duration:n,delay:e,easing:t}}function SI(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class L_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ple=new RegExp(":enter","g"),mle=new RegExp(":leave","g");function AI(n,e,t,r,i,s={},o={},a,l,c=[]){return(new _le).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class _le{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new L_;const d=new xI(e,t,c,i,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Dr(this,r,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===t){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[SI(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Ga(r.duration):null,a=null!=r.delay?Ga(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Dr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=B_);const o=Ga(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Dr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ga(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Dr(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return A_(t.params?x_(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ga(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=B_);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Dr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Dr(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const B_={};class xI{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=B_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new U_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ga(r.duration)),null!=r.delay&&(i.delay=Ga(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=x_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new xI(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=B_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new yle(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(ple,"."+this._enterClassName)).replace(mle,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function Tae(n){return new $(3014,Te)}()),a}}class U_{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new U_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||As,this._currentKeyframe[t]=As}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},o=function vle(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=As})):Mo(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=x_(o[a],s,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:As),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=Mo(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==As&&t.add(u)}),r||(c.offset=l/this.duration),i.push(c)});const s=e.size?M_(e.values()):[],o=t.size?M_(t.values()):[];if(r){const a=i[0],l=uu(a);a.offset=0,l.offset=1,i=[a,l]}return SI(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class yle extends U_{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=Mo(e[0],!1);l.offset=0,s.push(l);const c=Mo(e[0],!1);c.offset=$V(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Mo(e[d],!1);h.offset=$V((t+h.offset*r)/o),s.push(h)}r=o,t=0,i="",e=s}return SI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function $V(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class MI{}class ble extends MI{normalizePropertyName(e,t){return II(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(wle[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function pae(n,e){return new $(3005,Te)}())}return o+s}}const wle=(()=>function Ele(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zV(n,e,t,r,i,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const kI={};class WV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Cle(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],o=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):o}build(e,t,r,i,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||kI,p=this.buildStyles(r,a&&a.params||kI,d),m=l&&l.params||kI,_=this.buildStyles(i,m,d),v=new Set,y=new Map,E=new Map,T="void"===i,k={params:Object.assign(Object.assign({},h),m)},V=u?[]:AI(e,t,this.ast.animation,s,o,p,_,k,c,d);let ee=0;if(V.forEach(Rt=>{ee=Math.max(Rt.duration+Rt.delay,ee)}),d.length)return zV(t,this._triggerName,r,i,T,p,_,[],[],y,E,ee,d);V.forEach(Rt=>{const Gn=Rt.element,od=Tr(y,Gn,{});Rt.preStyleProps.forEach(Ti=>od[Ti]=!0);const Qs=Tr(E,Gn,{});Rt.postStyleProps.forEach(Ti=>Qs[Ti]=!0),Gn!==t&&v.add(Gn)});const Ye=M_(v.values());return zV(t,this._triggerName,r,i,T,p,_,V,Ye,y,E,ee)}}class Ile{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=uu(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=x_(l,i,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),r[c]=l})}}),r}}class Dle{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new Ile(i.style,i.options&&i.options.params||{},r)}),qV(this.states,"true","1"),qV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new WV(e,i,this.states))}),this.fallbackTransition=function Sle(n,e,t){return new WV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function qV(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Ale=new L_;class xle{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=TI(this._driver,t,r,[]);if(r.length)throw function Rae(n){return new $(3503,Te)}();this._animations[e]=s}_buildPlayer(e,t,r){const i=e.element,s=IV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let o;const a=new Map;if(s?(o=AI(this._driver,t,s,bI,T_,{},{},r,Ale,i),o.forEach(u=>{const d=Tr(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(i.push(function Pae(){return new $(3300,Te)}()),o=[]),i.length)throw function Oae(n){return new $(3504,Te)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,As)})});const c=xo(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Nae(n){return new $(3301,Te)}();return t}listen(e,t,r,i){const s=mI(t,"","","");return pI(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const GV="ng-animate-queued",RI="ng-animate-disabled",Ole=[],KV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nle={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qr="__ng_removed";class PI{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Ule(n){return null!=n?n:null}(r?e.value:e),r){const s=uu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Yh="void",OI=new PI(Yh);class Fle{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function Fae(n,e){return new $(3302,Te)}();if(null==r||0==r.length)throw function Lae(n){return new $(3303,Te)}();if(!function Vle(n){return"start"==n||"done"==n}(r))throw function Bae(n,e){return new $(3400,Te)}();const s=Tr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Tr(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Gr(e,D_),Gr(e,D_+"-"+t),a[t]=OI),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Uae(n){return new $(3401,Te)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new NI(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Gr(e,D_),Gr(e,D_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new PI(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=OI),c.value!==Yh&&l.value===c.value){if(!function $le(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],_=s.matchStyles(l.value,l.params,m),v=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Ka(e,_),Gi(e,v)})}return}const h=Tr(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Gr(e,GV),o.onStart(()=>{du(e,GV)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const _=this._engine.playersByElement.get(e);if(_){let v=_.indexOf(o);v>=0&&_.splice(v,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,S_,!0);r.forEach(i=>{if(i[qr])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,Yh,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&xo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers[o].fallbackTransition,c=r[o]||OI,u=new PI(Yh),d=new NI(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[qr];(!s||s===KV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Gr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=mI(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,pI(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Lle{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Fle(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,t)){r.splice(a+1,0,e),o=!0;break}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,i){if(V_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!V_(t))return;const s=t[qr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gr(e,RI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),du(e,RI))}removeNode(e,t,r,i){if(V_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[qr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return V_(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,S_,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return xo(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[qr];if(r&&r.setForRemoval){if(e[qr]=KV,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(RI))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Gr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?xo(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Vae(n){return new $(3402,Te)}()}_flushAnimations(e,t){const r=new L_,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(j=>{u.add(j);const q=this.driver.query(j,".ng-animate-queued",!0);for(let te=0;te<q.length;te++)u.add(q[te])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=XV(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((j,q)=>{const te=bI+m++;p.set(q,te),j.forEach(Pe=>Gr(Pe,te))});const _=[],v=new Set,y=new Set;for(let j=0;j<this.collectedLeaveElements.length;j++){const q=this.collectedLeaveElements[j],te=q[qr];te&&te.setForRemoval&&(_.push(q),v.add(q),te.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(Pe=>v.add(Pe)):y.add(q))}const E=new Map,T=XV(h,Array.from(v));T.forEach((j,q)=>{const te=T_+m++;E.set(q,te),j.forEach(Pe=>Gr(Pe,te))}),e.push(()=>{f.forEach((j,q)=>{const te=p.get(q);j.forEach(Pe=>du(Pe,te))}),T.forEach((j,q)=>{const te=E.get(q);j.forEach(Pe=>du(Pe,te))}),_.forEach(j=>{this.processLeaveNode(j)})});const k=[],V=[];for(let j=this._namespaceList.length-1;j>=0;j--)this._namespaceList[j].drainQueuedTransitions(t).forEach(te=>{const Pe=te.player,dn=te.element;if(k.push(Pe),this.collectedEnterElements.length){const Kn=dn[qr];if(Kn&&Kn.setForMove){if(Kn.previousTriggersValues&&Kn.previousTriggersValues.has(te.triggerName)){const Kl=Kn.previousTriggersValues.get(te.triggerName),oa=this.statesByElement.get(te.element);oa&&oa[te.triggerName]&&(oa[te.triggerName].value=Kl)}return void Pe.destroy()}}const ls=!d||!this.driver.containsElement(d,dn),kr=E.get(dn),sa=p.get(dn),gt=this._buildInstruction(te,r,sa,kr,ls);if(gt.errors&&gt.errors.length)return void V.push(gt);if(ls)return Pe.onStart(()=>Ka(dn,gt.fromStyles)),Pe.onDestroy(()=>Gi(dn,gt.toStyles)),void i.push(Pe);if(te.isFallbackTransition)return Pe.onStart(()=>Ka(dn,gt.fromStyles)),Pe.onDestroy(()=>Gi(dn,gt.toStyles)),void i.push(Pe);const R8=[];gt.timelines.forEach(Kn=>{Kn.stretchStartingKeyframe=!0,this.disabledNodes.has(Kn.element)||R8.push(Kn)}),gt.timelines=R8,r.append(dn,gt.timelines),o.push({instruction:gt,player:Pe,element:dn}),gt.queriedElements.forEach(Kn=>Tr(a,Kn,[]).push(Pe)),gt.preStyleProps.forEach((Kn,Kl)=>{const oa=Object.keys(Kn);if(oa.length){let Yl=l.get(Kl);Yl||l.set(Kl,Yl=new Set),oa.forEach(MR=>Yl.add(MR))}}),gt.postStyleProps.forEach((Kn,Kl)=>{const oa=Object.keys(Kn);let Yl=c.get(Kl);Yl||c.set(Kl,Yl=new Set),oa.forEach(MR=>Yl.add(MR))})});if(V.length){const j=[];V.forEach(q=>{j.push(function jae(n,e){return new $(3505,Te)}())}),k.forEach(q=>q.destroy()),this.reportError(j)}const ee=new Map,Ye=new Map;o.forEach(j=>{const q=j.element;r.has(q)&&(Ye.set(q,q),this._beforeAnimationBuild(j.player.namespaceId,j.instruction,ee))}),i.forEach(j=>{const q=j.element;this._getPreviousPlayers(q,!1,j.namespaceId,j.triggerName,null).forEach(Pe=>{Tr(ee,q,[]).push(Pe),Pe.destroy()})});const Rt=_.filter(j=>JV(j,l,c)),Gn=new Map;QV(Gn,this.driver,y,c,As).forEach(j=>{JV(j,l,c)&&Rt.push(j)});const Qs=new Map;f.forEach((j,q)=>{QV(Qs,this.driver,new Set(j),l,"!")}),Rt.forEach(j=>{const q=Gn.get(j),te=Qs.get(j);Gn.set(j,Object.assign(Object.assign({},q),te))});const Ti=[],ad=[],ld={};o.forEach(j=>{const{element:q,player:te,instruction:Pe}=j;if(r.has(q)){if(u.has(q))return te.onDestroy(()=>Gi(q,Pe.toStyles)),te.disabled=!0,te.overrideTotalTime(Pe.totalTime),void i.push(te);let dn=ld;if(Ye.size>1){let kr=q;const sa=[];for(;kr=kr.parentNode;){const gt=Ye.get(kr);if(gt){dn=gt;break}sa.push(kr)}sa.forEach(gt=>Ye.set(gt,dn))}const ls=this._buildAnimation(te.namespaceId,Pe,ee,s,Qs,Gn);if(te.setRealPlayer(ls),dn===ld)Ti.push(te);else{const kr=this.playersByElement.get(dn);kr&&kr.length&&(te.parentPlayer=xo(kr)),i.push(te)}}else Ka(q,Pe.fromStyles),te.onDestroy(()=>Gi(q,Pe.toStyles)),ad.push(te),u.has(q)&&i.push(te)}),ad.forEach(j=>{const q=s.get(j.element);if(q&&q.length){const te=xo(q);j.setRealPlayer(te)}}),i.forEach(j=>{j.parentPlayer?j.syncPlayerEvents(j.parentPlayer):j.destroy()});for(let j=0;j<_.length;j++){const q=_[j],te=q[qr];if(du(q,T_),te&&te.hasAnimation)continue;let Pe=[];if(a.size){let ls=a.get(q);ls&&ls.length&&Pe.push(...ls);let kr=this.driver.query(q,wI,!0);for(let sa=0;sa<kr.length;sa++){let gt=a.get(kr[sa]);gt&&gt.length&&Pe.push(...gt)}}const dn=Pe.filter(ls=>!ls.destroyed);dn.length?jle(this,q,dn):this.processLeaveNode(q)}return _.length=0,Ti.forEach(j=>{this.players.push(j),j.onDone(()=>{j.destroy();const q=this.players.indexOf(j);this.players.splice(q,1)}),j.play()}),Ti}elementContainsData(e,t){let r=!1;const i=t[qr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Yh;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Tr(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Ka(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const _=m[qr];if(_&&_.removedBeforeQueried)return new Gh(p.duration,p.delay);const v=m!==l,y=function Hle(n){const e=[];return ZV(n,e),e}((r.get(m)||Ole).map(ee=>ee.getRealPlayer())).filter(ee=>!!ee.element&&ee.element===m),E=s.get(m),T=o.get(m),k=IV(0,this._normalizer,0,p.keyframes,E,T),V=this._buildPlayer(p,k,y);if(p.subTimeline&&i&&d.add(m),v){const ee=new NI(e,a,m);ee.setRealPlayer(V),c.push(ee)}return V});c.forEach(p=>{Tr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Ble(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Gr(p,OV));const f=xo(h);return f.onDestroy(()=>{u.forEach(p=>du(p,OV)),Gi(l,t.toStyles)}),d.forEach(p=>{Tr(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gh(e.duration,e.delay)}}class NI{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>pI(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Tr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function V_(n){return n&&1===n.nodeType}function YV(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function QV(n,e,t,r,i){const s=[];t.forEach(l=>s.push(YV(l)));const o=[];r.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,i);(!h||0==h.length)&&(c[qr]=Nle,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>YV(l,s[a++])),o}function XV(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Gr(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function du(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function jle(n,e,t){xo(t).onDone(()=>n.processLeaveNode(e))}function ZV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EV?ZV(r.players,e):e.push(r)}}function JV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class j_{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Lle(e,t,r),this._timelineEngine=new xle(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=TI(this._driver,s,l,[]);if(l.length)throw function Mae(n,e){return new $(3404,Te)}();a=function Tle(n,e,t){return new Dle(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=TV(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=TV(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Wle=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Gi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gi(this._element,this._initialStyles),this._endStyles&&(Gi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ka(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ka(this._element,this._endStyles),this._endStyles=null),Gi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function FI(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];qle(i)&&(e=e||{},e[i]=n[i])}return e}function qle(n){return"display"===n||"position"===n}class ej{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:UV(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Gle{validateStyleProperty(e){return xV(e)}matchesElement(e,t){return!1}containsElement(e,t){return MV(e,t)}getParentElement(e){return yI(e)}query(e,t,r){return kV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof ej);(function Xae(n,e){return 0===n||0===e})(r,i)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function Zae(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var i=1;i<e.length;i++){let a=e[i];o.forEach(function(l){a[l]=UV(n,l)})}}return e}(e,t=t.map(h=>Mo(h,!1)),c);const d=function zle(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=FI(e[0]),e.length>1&&(r=FI(e[e.length-1]))):e&&(t=FI(e)),t||r?new Wle(n,t,r):null}(e,t);return new ej(e,t,l,d)}}let Kle=(()=>{class n extends mV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Zr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?yV(t):t;return tj(this._renderer,null,r,"register",[i]),new Yle(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(C(Wd),C(we))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class Yle extends class lae{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Qle(this._id,e,t||{},this._renderer)}}class Qle{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function tj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const nj="@.disabled";let Xle=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new rj("",s,this.engine),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(l),new Zle(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(C(Wd),C(j_),C(ce))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();class rj{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==nj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Zle extends rj{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==nj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Jle(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function ece(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let tce=(()=>{class n extends j_{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(C(we),C(vI),C(MI))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const Qa=new B("AnimationModuleType"),ij=[{provide:mV,useClass:Kle},{provide:MI,useFactory:function nce(){return new ble}},{provide:j_,useClass:tce},{provide:Wd,useFactory:function rce(n,e,t){return new Xle(n,e,t)},deps:[Em,j_,ce]}],sj=[{provide:vI,useFactory:()=>new Gle},{provide:Qa,useValue:"BrowserAnimations"},...ij],ice=[{provide:vI,useClass:RV},{provide:Qa,useValue:"NoopAnimations"},...ij];let sce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?ice:sj}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:sj,imports:[cB]}),n})();const ace=new B("mat-sanity-checks",{providedIn:"root",factory:function oce(){return!0}});let rr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!eI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(C(aae),C(ace,8),C(we))},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[zh],zh]}),n})();function lce(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ao(e)}}}function aj(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function cce(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ao(e)}}}class dce{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const lj={enterDuration:225,exitDuration:150},LI=b_({passive:!0}),cj=["mousedown","touchstart"],uj=["mouseup","mouseleave","touchend","touchcancel"];class fce{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ou(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},lj),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function gce(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function pce(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new dce(this,u,r);return d.state=0,this._activeRipples.add(d),r.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!r.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},lj),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ou(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(cj))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(uj),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=dV(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!hV(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,LI)})})}_removeTriggerEvents(){this._triggerElement&&(cj.forEach(e=>{this._triggerElement.removeEventListener(e,this,LI)}),this._pointerUpEventsRegistered&&uj.forEach(e=>{this._triggerElement.removeEventListener(e,this,LI)}))}}const mce=new B("mat-ripple-global-options");let dj=(()=>{class n{constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new fce(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(ce),I(vi),I(mce,8),I(Qa,8))},n.\u0275dir=Ue({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&ai("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),hj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[rr],rr]}),n})();function BI(n){return new Qe(e=>{Qn(n()).subscribe(e)})}function UI(...n){return function _ce(){return dd(1)}()(Cn(n,hd(n)))}function $_(...n){const e=hd(n);return It((t,r)=>{(e?UI(n,t,e):UI(n,t)).subscribe(r)})}function yce(n,e){}class VI{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const vce={dialogContainer:C_("dialogContainer",[cu("void, exit",Ir({opacity:0,transform:"scale(0.7)"})),cu("enter",Ir({transform:"none"})),Wa("* => enter",_V([za("150ms cubic-bezier(0, 0, 0.2, 1)",Ir({transform:"none",opacity:1})),bV("@*",vV(),{optional:!0})])),Wa("* => void, * => exit",_V([za("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Ir({opacity:0})),bV("@*",vV(),{optional:!0})]))])};let bce=(()=>{class n extends oI{constructor(t,r,i,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new St,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=J0())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=J0(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=J0();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(uV),I(jc),I(we,8),I(VI),I(cI),I(ce),I(uI))},n.\u0275dir=Ue({type:n,viewQuery:function(t,r){if(1&t&&Bc(zU,7),2&t){let i;Bi(i=Ui())&&(r._portalOutlet=i.first)}},features:[ao]}),n})(),wce=(()=>{class n extends bce{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=function jP(n){return Js(()=>{const e=n.prototype.constructor,t=e[hs]||Qb(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[hs]||Qb(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(r||n)}}(),n.\u0275cmp=ht({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&Ug("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&($g("id",r._id),lo("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),zg("@dialogContainer",r._state))},features:[ao],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&oi(0,yce,0,0,"ng-template",0)},directives:[zU],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[vce.dialogContainer]}}),n})(),Ece=0;class Xh{constructor(e,t,r="mat-dialog-"+Ece++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Oe,this._afterClosed=new Oe,this._beforeClosed=new Oe,this._state=0,t._id=r,t._animationStateChanged.pipe(Kt(i=>"opened"===i.state),bi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Kt(i=>"closed"===i.state),bi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Kt(i=>27===i.keyCode&&!this.disableClose&&!iV(i))).subscribe(i=>{i.preventDefault(),jI(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():jI(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Kt(t=>"closing"===t.state),bi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function jI(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const Cce=new B("MatDialogData"),Ice=new B("mat-dialog-default-options"),fj=new B("mat-dialog-scroll-strategy"),Dce={provide:fj,deps:[qh],useFactory:function Tce(n){return()=>n.scrollStrategies.block()}};let Sce=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Oe,this._afterOpenedAtThisLevel=new Oe,this._ariaHiddenElements=new Map,this.afterAllClosed=BI(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe($_(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function Ace(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new VI),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),o=this._attachDialogContent(t,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new YU({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const s=Ge.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:VI,useValue:r}]}),o=new sI(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,r,i,s){const o=new this._dialogRefConstructor(i,r,s.id);if(t instanceof Li)r.attachTemplatePortal(new $U(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,r),l=r.attachComponentPortal(new sI(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,r,i){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!s||!s.get($h,null,ne.Optional))&&o.push({provide:$h,useValue:{value:t.direction,change:Y()}}),Ge.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){Lg()},n.\u0275dir=Ue({type:n}),n})(),Zh=(()=>{class n extends Sce{constructor(t,r,i,s,o,a,l,c){super(t,r,s,a,l,o,Xh,wce,Cce,c)}}return n.\u0275fac=function(t){return new(t||n)(C(qh),C(Ge),C(Ia,8),C(Ice,8),C(fj),C(n,12),C(lI),C(Qa,8))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),xce=0,Mce=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=pj(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){jI(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(I(Xh,8),I(Dt),I(Zh))},n.\u0275dir=Ue({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&Ze("click",function(s){return r._onButtonClick(s)}),2&t&&lo("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Si]}),n})(),kce=(()=>{class n{constructor(t,r,i){this._dialogRef=t,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+xce++}ngOnInit(){this._dialogRef||(this._dialogRef=pj(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(I(Xh,8),I(Dt),I(Zh))},n.\u0275dir=Ue({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&$g("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Rce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),Pce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function pj(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let HI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[Zh,Dce],imports:[[tV,WU,rr],rr]}),n})();const Oce=["mat-button",""],Nce=["*"],Lce=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Bce=aj(lce(cce(class{constructor(n){this._elementRef=n}})));let z_=(()=>{class n extends Bce{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Lce)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(uI),I(Qa,8))},n.\u0275cmp=ht({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&Bc(dj,5),2&t){let i;Bi(i=Ui())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(lo("disabled",r.disabled||null),ai("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ao],attrs:Oce,ngContentSelectors:Nce,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(uo(),U(0,"span",0),wr(1),L(),Ve(2,"span",1)(3,"span",2)),2&t&&(yt(2),ai("mat-button-ripple-round",r.isRoundButton||r.isIconButton),zt("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[dj],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),$I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[hj,rr],rr]}),n})(),Uce=(()=>{class n{constructor(t){this.dialogRef=t,this.app=ji(yi_firebase)}ngOnInit(){}edit_user_details(t,r,i){Ss(Va(this.app),"/users")}}return n.\u0275fac=function(t){return new(t||n)(I(Xh))},n.\u0275cmp=ht({type:n,selectors:[["app-EditProfileDialog"]],decls:17,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fullName",""],["username",""],["bio",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,r){1&t&&(U(0,"h1",0),G(1,"User Details"),L(),U(2,"div",1),G(3," Full Name: "),Ve(4,"input",null,2),G(6," Username: "),Ve(7,"input",null,3),G(9," User Bio: "),Ve(10,"textarea",null,4),L(),U(12,"div",5)(13,"button",6),G(14,"Cancle"),L(),U(15,"button",7),G(16,"Save"),L()())},directives:[kce,Rce,Pce,z_,Mce],styles:[""]}),n})();const{isArray:Vce}=Array,{getPrototypeOf:jce,prototype:Hce,keys:$ce}=Object;function gj(n){if(1===n.length){const e=n[0];if(Vce(e))return{args:e,keys:null};if(function zce(n){return n&&"object"==typeof n&&jce(n)===Hce}(e)){const t=$ce(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function _j(n,e,t){n?cs(t,n,e):e()}function Jh(n,e){const t=Be(n)?n:()=>n,r=i=>i.error(t());return new Qe(e?i=>e.schedule(r,0,i):r)}const W_=ob(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function yj(){return It((n,e)=>{let t=null;n._refCount++;const r=dt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Gce extends Qe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,BR(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hn;const t=this.getSubject();e.add(this.source.subscribe(dt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hn.EMPTY)}return e}refCount(){return yj()(this)}}function Xa(n,e){return It((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(dt(r,l=>{null==i||i.unsubscribe();let c=0;const u=s++;Qn(n(l,u)).subscribe(i=dt(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Kce(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(dt(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function vj(n,e){return It(Kce(n,e,arguments.length>=2,!0))}function xs(n){return It((e,t)=>{let s,r=null,i=!1;r=e.subscribe(dt(t,void 0,void 0,o=>{s=Qn(n(o,xs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function hu(n,e){return Be(e)?jt(n,e,1):jt(n,1)}function zI(n){return n<=0?()=>us:It((e,t)=>{let r=[];e.subscribe(dt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bj(n=Yce){return It((e,t)=>{let r=!1;e.subscribe(dt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Yce(){return new W_}function wj(n){return It((e,t)=>{let r=!1;e.subscribe(dt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kt((i,s)=>n(i,s,r)):Xs,bi(1),t?wj(e):bj(()=>new W_))}function fn(n,e,t){const r=Be(n)||e||t?{next:n,error:e,complete:t}:n;return r?It((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(dt(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Xs}function Ej(n){return It((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Ms{constructor(e,t){this.id=e,this.url=t}}class WI extends Ms{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ef extends Ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cj extends Ms{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xce extends Ms{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zce extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jce extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eue extends Ms{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tue extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nue extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ij{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tj{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rue{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iue{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sue{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oue{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ve="primary";class aue{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pu(n){return new aue(n)}const Sj="ngNavigationCancelingError";function qI(n){const e=Error("NavigationCancelingError: "+n);return e[Sj]=!0,e}function cue(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ki(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Aj(n[i],e[i]))return!1;return!0}function Aj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function xj(n){return Array.prototype.concat.apply([],n)}function Mj(n){return n.length>0?n[n.length-1]:null}function pn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Yi(n){return c1(n)?n:Bg(n)?Cn(Promise.resolve(n)):Y(n)}const hue={exact:function Pj(n,e,t){if(!Ja(n.segments,e.segments)||!q_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Pj(n.children[r],e.children[r],t))return!1;return!0},subset:Oj},kj={exact:function fue(n,e){return Ki(n,e)},subset:function pue(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Aj(n[t],e[t]))},ignored:()=>!0};function Rj(n,e,t){return hue[t.paths](n.root,e.root,t.matrixParams)&&kj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Oj(n,e,t){return Nj(n,e,e.segments,t)}function Nj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ja(i,t)||e.hasChildren()||!q_(i,t,r))}if(n.segments.length===t.length){if(!Ja(n.segments,t)||!q_(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Oj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ja(n.segments,i)&&q_(n.segments,i,r)&&n.children[ve])&&Nj(n.children[ve],e,s,r)}}function q_(n,e,t){return e.every((r,i)=>kj[t](n[i].parameters,r.parameters))}class Za{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pu(this.queryParams)),this._queryParamMap}toString(){return _ue.serialize(this)}}class De{constructor(e,t){this.segments=e,this.children=t,this.parent=null,pn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return G_(this)}}class tf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pu(this.parameters)),this._parameterMap}toString(){return Vj(this)}}function Ja(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Fj{}class Lj{parse(e){const t=new Due(e);return new Za(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nf(e.root,!0)}`,r=function bue(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${K_(t)}=${K_(i)}`).join("&"):`${K_(t)}=${K_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function yue(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _ue=new Lj;function G_(n){return n.segments.map(e=>Vj(e)).join("/")}function nf(n,e){if(!n.hasChildren())return G_(n);if(e){const t=n.children[ve]?nf(n.children[ve],!1):"",r=[];return pn(n.children,(i,s)=>{s!==ve&&r.push(`${s}:${nf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mue(n,e){let t=[];return pn(n.children,(r,i)=>{i===ve&&(t=t.concat(e(r,i)))}),pn(n.children,(r,i)=>{i!==ve&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ve?[nf(n.children[ve],!1)]:[`${i}:${nf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ve]?`${G_(n)}/${t[0]}`:`${G_(n)}/(${t.join("//")})`}}function Bj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function K_(n){return Bj(n).replace(/%3B/gi,";")}function GI(n){return Bj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Y_(n){return decodeURIComponent(n)}function Uj(n){return Y_(n.replace(/\+/g,"%20"))}function Vj(n){return`${GI(n.path)}${function vue(n){return Object.keys(n).map(e=>`;${GI(e)}=${GI(n[e])}`).join("")}(n.parameters)}`}const wue=/^[^\/()?;=#]+/;function Q_(n){const e=n.match(wue);return e?e[0]:""}const Eue=/^[^=?&#]+/,Iue=/^[^&#]+/;class Due{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new De(e,t)),r}parseSegment(){const e=Q_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new tf(Y_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Q_(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Q_(this.remaining);i&&(r=i,this.capture(r))}e[Y_(t)]=Y_(r)}parseQueryParam(e){const t=function Cue(n){const e=n.match(Eue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Tue(n){const e=n.match(Iue);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Uj(t),s=Uj(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Q_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ve);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ve]:new De([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class jj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=KI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=KI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=YI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return YI(e,this._root).map(t=>t.value)}}function KI(n,e){if(n===e.value)return e;for(const t of e.children){const r=KI(n,t);if(r)return r}return null}function YI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=YI(n,t);if(r.length)return r.unshift(e),r}return[]}class ks{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hj extends jj{constructor(e,t){super(e),this.snapshot=t,QI(this,e)}toString(){return this.snapshot.toString()}}function $j(n,e){const t=function Sue(n,e){const o=new X_([],{},{},"",{},ve,e,null,n.root,-1,{});return new Wj("",new ks(o,[]))}(n,e),r=new Wr([new tf("",{})]),i=new Wr({}),s=new Wr({}),o=new Wr({}),a=new Wr(""),l=new ko(r,i,o,a,s,ve,e,t.root);return l.snapshot=t.root,new Hj(new ks(l,[]),t)}class ko{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>pu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>pu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Aue(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class X_{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wj extends jj{constructor(e,t){super(t),this.url=e,QI(this,t)}toString(){return qj(this._root)}}function QI(n,e){e.value._routerState=n,e.children.forEach(t=>QI(n,t))}function qj(n){const e=n.children.length>0?` { ${n.children.map(qj).join(", ")} } `:"";return`${n.value}${e}`}function XI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ki(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ki(e.params,t.params)||n.params.next(t.params),function uue(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ki(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ki(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ZI(n,e){const t=Ki(n.params,e.params)&&function gue(n,e){return Ja(n,e)&&n.every((t,r)=>Ki(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ZI(n.parent,e.parent))}function rf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Mue(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rf(n,r,i);return rf(n,r)})}(n,e,t);return new ks(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>rf(n,a)),o}}const r=function kue(n){return new ko(new Wr(n.url),new Wr(n.params),new Wr(n.queryParams),new Wr(n.fragment),new Wr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>rf(n,s));return new ks(r,i)}}function Z_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sf(n){return"object"==typeof n&&null!=n&&n.outlets}function JI(n,e,t,r,i){let s={};if(r&&pn(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new Za(t,s,i);const o=Gj(n,e,t);return new Za(o,s,i)}function Gj(n,e,t){const r={};return pn(n.children,(i,s)=>{r[s]=i===e?t:Gj(i,e,t)}),new De(n.segments,r)}class Kj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Z_(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(sf);if(i&&i!==Mj(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Yj(n,e,t){if(n||(n=new De([],{})),0===n.segments.length&&n.hasChildren())return J_(n,e,t);const r=function Lue(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(sf(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Xj(l,c,o))return s;r+=2}else{if(!Xj(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new De(n.segments.slice(0,r.pathIndex),{});return s.children[ve]=new De(n.segments.slice(r.pathIndex),n.children),J_(s,0,i)}return r.match&&0===i.length?new De(n.segments,{}):r.match&&!n.hasChildren()?tT(n,e,t):r.match?J_(n,0,i):tT(n,e,t)}function J_(n,e,t){if(0===t.length)return new De(n.segments,{});{const r=function Fue(n){return sf(n[0])?n[0].outlets:{[ve]:n}}(t),i={};return pn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Yj(n.children[o],e,s))}),pn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new De(n.segments,i)}}function tT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(sf(s)){const l=Bue(s.outlets);return new De(r,l)}if(0===i&&Z_(t[0])){r.push(new tf(n.segments[e].path,Qj(t[0]))),i++;continue}const o=sf(s)?s.outlets[ve]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Z_(a)?(r.push(new tf(o,Qj(a))),i+=2):(r.push(new tf(o,{})),i++)}return new De(r,{})}function Bue(n){const e={};return pn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=tT(new De([],{}),0,t))}),e}function Qj(n){const e={};return pn(n,(t,r)=>e[r]=`${t}`),e}function Xj(n,e,t){return n==t.path&&Ki(e,t.parameters)}class Vue{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=gu(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),pn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=gu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=gu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=gu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new oue(s.value.snapshot))}),e.children.length&&this.forwardEvent(new iue(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(XI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),XI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function jue(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class nT{constructor(e,t){this.routes=e,this.module=t}}function Ro(n){return"function"==typeof n}function el(n){return n instanceof Za}const af=Symbol("INITIAL_VALUE");function lf(){return Xa(n=>function Wce(...n){const e=hd(n),t=JR(n),{args:r,keys:i}=gj(n);if(0===r.length)return Cn([],e);const s=new Qe(function qce(n,e,t=Xs){return r=>{_j(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)_j(e,()=>{const c=Cn(n[l],e);let u=!1;c.subscribe(dt(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>mj(i,o):Xs));return t?s.pipe(Y0(t)):s}(n.map(e=>e.pipe(bi(1),$_(af)))).pipe(vj((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==af?i:(s===af&&(r=!0),r||!1!==s&&o!==t.length-1&&!el(s)?i:s),e)},af),Kt(e=>e!==af),be(e=>el(e)?e:!0===e),bi(1)))}class Gue{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cf,this.attachRef=null}}class cf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Gue,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let rT=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.name=s||ve,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Kue(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(I(cf),I(Br),I(ba),oc("name"),I(jc))},n.\u0275dir=Ue({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Kue{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ko?this.route:e===cf?this.childContexts:this.parent.get(e,t)}}let Zj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ht({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Ve(0,"router-outlet")},directives:[rT],encapsulation:2}),n})();function Jj(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Yue(r,Que(e,r))}}function Yue(n,e){n.children&&Jj(n.children,e)}function Que(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function iT(n){const e=n.children&&n.children.map(iT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=Zj),t}function Kr(n){return n.outlet||ve}function eH(n,e){const t=n.filter(r=>Kr(r)===e);return t.push(...n.filter(r=>Kr(r)!==e)),t}const tH={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ey(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},tH):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||cue)(t,n,e);if(!s)return Object.assign({},tH);const o={};pn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function ty(n,e,t,r,i="corrected"){if(t.length>0&&function Jue(n,e,t){return t.some(r=>ny(n,e,r)&&Kr(r)!==ve)}(n,t,r)){const o=new De(e,function Zue(n,e,t,r){const i={};i[ve]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Kr(s)!==ve){const o=new De([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Kr(s)]=o}return i}(n,e,r,new De(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function ede(n,e,t){return t.some(r=>ny(n,e,r))}(n,t,r)){const o=new De(n.segments,function Xue(n,e,t,r,i,s){const o={};for(const a of r)if(ny(n,t,a)&&!i[Kr(a)]){const l=new De([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Kr(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new De(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ny(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nH(n,e,t,r){return!!(Kr(n)===r||r!==ve&&ny(e,t,n))&&("**"===n.path||ey(e,n,t).matched)}function rH(n,e,t){return 0===e.length&&!n.children[t]}class ry{constructor(e){this.segmentGroup=e||null}}class iH{constructor(e){this.urlTree=e}}function uf(n){return Jh(new ry(n))}function sH(n){return Jh(new iH(n))}class ide{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(vs)}apply(){const e=ty(this.urlTree.root,[],[],this.config).segmentGroup,t=new De(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ve).pipe(be(s=>this.createUrlTree(sT(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xs(s=>{if(s instanceof iH)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ry?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ve).pipe(be(i=>this.createUrlTree(sT(i),e.queryParams,e.fragment))).pipe(xs(i=>{throw i instanceof ry?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new De([],{[ve]:e}):e;return new Za(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(be(s=>new De([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Cn(i).pipe(hu(s=>{const o=r.children[s],a=eH(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(be(l=>({segment:l,outlet:s})))}),vj((s,o)=>(s[o.outlet]=o.segment,s),{}),function Qce(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kt((i,s)=>n(i,s,r)):Xs,zI(1),t?wj(e):bj(()=>new W_))}())}expandSegment(e,t,r,i,s,o){return Cn(r).pipe(hu(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(xs(c=>{if(c instanceof ry)return Y(null);throw c}))),fu(a=>!!a),xs((a,l)=>{if(a instanceof W_||"EmptyError"===a.name)return rH(t,i,s)?Y(new De([],{})):uf(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return nH(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):uf(t):uf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sH(s):this.lineralizeSegments(r,s).pipe(jt(o=>{const a=new De(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=ey(t,i,s);if(!a)return uf(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?sH(d):this.lineralizeSegments(i,d).pipe(jt(h=>this.expandSegment(e,t,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Y(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(be(d=>(r._loadedConfig=d,new De(i,{})))):Y(new De(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=ey(t,r,i);return o?this.getChildConfig(e,r,i).pipe(jt(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=ty(t,a,l,h),m=new De(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(be(E=>new De(a,E)));if(0===h.length&&0===p.length)return Y(new De(a,{}));const _=Kr(r)===s;return this.expandSegment(d,m,h,p,_?ve:s,!0).pipe(be(y=>new De(a.concat(y.segments),y.children)))})):uf(t)}getChildConfig(e,t,r){return t.children?Y(new nT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Y(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(jt(i=>i?this.configLoader.load(e.injector,t).pipe(be(s=>(t._loadedConfig=s,s))):function nde(n){return Jh(qI(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Y(new nT([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Y(i.map(o=>{const a=e.get(o);let l;if(function $ue(n){return n&&Ro(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!Ro(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return Yi(l)})).pipe(lf(),fn(o=>{if(!el(o))return;const a=qI(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),be(o=>!0===o)):Y(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Y(r);if(i.numberOfChildren>1||!i.children[ve])return Jh(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[ve]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Za(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return pn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return pn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new De(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function sT(n){const e={};for(const r of Object.keys(n.children)){const s=sT(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function sde(n){if(1===n.numberOfChildren&&n.children[ve]){const e=n.children[ve];return new De(n.segments.concat(e.segments),e.children)}return n}(new De(n.segments,e))}class oH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class iy{constructor(e,t){this.component=e,this.route=t}}function ade(n,e,t){const r=n._root;return df(r,e?e._root:null,t,[r.value])}function sy(n,e,t){const r=function cde(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function df(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=gu(e);return n.children.forEach(o=>{(function ude(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function dde(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ja(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ja(n.url,e.url)||!Ki(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZI(n,e)||!Ki(n.queryParams,e.queryParams);default:return!ZI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new oH(r)):(s.data=o.data,s._resolvedData=o._resolvedData),df(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new iy(a.outlet.component,o))}else o&&hf(e,a,i),i.canActivateChecks.push(new oH(r)),df(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),pn(s,(o,a)=>hf(o,t.getContext(a),i)),i}function hf(n,e,t){const r=gu(n),i=n.value;pn(r,(s,o)=>{hf(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new iy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class bde{}function aH(n){return new Qe(e=>e.error(n))}class Ede{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=ty(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ve);if(null===t)return null;const r=new X_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ve,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ks(r,t),s=new Wj(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=zj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=eH(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=lH(r);return function Cde(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return rH(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!nH(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?Mj(r).parameters:{};s=new X_(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dH(e),Kr(e),e.component,e,cH(t),uH(t)+r.length,hH(e))}else{const f=ey(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new X_(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dH(e),Kr(e),e.component,e,cH(t),uH(t)+o.length,hH(e))}const l=function Ide(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=ty(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new ks(s,f)]}if(0===l.length&&0===u.length)return[new ks(s,[])];const d=Kr(e)===i,h=this.processSegment(l,c,u,d?ve:i);return null===h?null:[new ks(s,h)]}}function Tde(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lH(n){const e=[],t=new Set;for(const r of n){if(!Tde(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=lH(r.children);e.push(new ks(r.value,i))}return e.filter(r=>!t.has(r))}function cH(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function uH(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dH(n){return n.data||{}}function hH(n){return n.resolve||{}}function fH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function oT(n){return Xa(e=>{const t=n(e);return t?Cn(t).pipe(be(()=>e)):Y(e)})}class Pde extends class Rde{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const aT=new B("ROUTES");class pH{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(be(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new nT(xj(o.injector.get(aT,void 0,ne.Self|ne.Optional)).map(iT),o)}),xs(s=>{throw t._loader$=void 0,s}));return t._loader$=new Gce(i,()=>new Oe).pipe(yj()),t._loader$}loadModuleFactory(e){return Yi(e()).pipe(jt(t=>t instanceof AF?Y(t):Cn(this.compiler.compileModuleAsync(t))))}}class Nde{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Fde(n){throw n}function Lde(n,e,t){return e.parse("/")}function gH(n,e){return Y(null)}const Bde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ude={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yt=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oe,this.errorHandler=Fde,this.malformedUriErrorHandler=Lde,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gH,afterPreactivation:gH},this.urlHandlingStrategy=new Nde,this.routeReuseStrategy=new Pde,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(vs),this.console=o.get(uL);const d=o.get(ce);this.isNgZoneEnabled=d instanceof ce&&ce.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function due(){return new Za(new De([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pH(o,a,h=>this.triggerEvent(new Ij(h)),h=>this.triggerEvent(new Tj(h))),this.routerState=$j(this.currentUrlTree,this.rootComponentType),this.transitions=new Wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Kt(i=>0!==i.id),be(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Xa(i=>{let s=!1,o=!1;return Y(i).pipe(fn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xa(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return mH(a.source)&&(this.browserUrlTree=a.extractedUrl),Y(a).pipe(Xa(d=>{const h=this.transitions.getValue();return r.next(new WI(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?us:Promise.resolve(d)}),function ode(n,e,t,r){return Xa(i=>function rde(n,e,t,r,i){return new ide(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(be(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),fn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function Dde(n,e,t,r,i){return jt(s=>function wde(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new Ede(n,e,t,r,i,s).recognize();return null===o?aH(new bde):Y(o)}catch(o){return aH(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(be(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),fn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Zce(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:_}=a,v=new WI(h,this.serializeUrl(f),p,m);r.next(v);const y=$j(f,this.rootComponentType).snapshot;return Y(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),us}),oT(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),fn(a=>{const l=new Jce(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),be(a=>Object.assign(Object.assign({},a),{guards:ade(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function hde(n,e){return jt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Y(Object.assign(Object.assign({},t),{guardsResult:!0})):function fde(n,e,t,r){return Cn(n).pipe(jt(i=>function vde(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Y(s.map(a=>{const l=sy(a,e,i);let c;if(function que(n){return n&&Ro(n.canDeactivate)}(l))c=Yi(l.canDeactivate(n,e,t,r));else{if(!Ro(l))throw new Error("Invalid CanDeactivate guard");c=Yi(l(n,e,t,r))}return c.pipe(fu())})).pipe(lf()):Y(!0)}(i.component,i.route,t,e,r)),fu(i=>!0!==i,!0))}(o,r,i,n).pipe(jt(a=>a&&function Hue(n){return"boolean"==typeof n}(a)?function pde(n,e,t,r){return Cn(e).pipe(hu(i=>UI(function mde(n,e){return null!==n&&e&&e(new rue(n)),Y(!0)}(i.route.parent,r),function gde(n,e){return null!==n&&e&&e(new sue(n)),Y(!0)}(i.route,r),function yde(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function lde(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>BI(()=>Y(o.guards.map(l=>{const c=sy(l,o.node,t);let u;if(function Wue(n){return n&&Ro(n.canActivateChild)}(c))u=Yi(c.canActivateChild(r,n));else{if(!Ro(c))throw new Error("Invalid CanActivateChild guard");u=Yi(c(r,n))}return u.pipe(fu())})).pipe(lf())));return Y(s).pipe(lf())}(n,i.path,t),function _de(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Y(!0);const i=r.map(s=>BI(()=>{const o=sy(s,e,t);let a;if(function zue(n){return n&&Ro(n.canActivate)}(o))a=Yi(o.canActivate(e,n));else{if(!Ro(o))throw new Error("Invalid CanActivate guard");a=Yi(o(e,n))}return a.pipe(fu())}));return Y(i).pipe(lf())}(n,i.route,t))),fu(i=>!0!==i,!0))}(r,s,n,e):Y(a)),be(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),fn(a=>{if(el(a.guardsResult)){const c=qI(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new eue(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Kt(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),oT(a=>{if(a.guards.canActivateChecks.length)return Y(a).pipe(fn(l=>{const c=new tue(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Xa(l=>{let c=!1;return Y(l).pipe(function Sde(n,e){return jt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let s=0;return Cn(i).pipe(hu(o=>function Ade(n,e,t,r){return function xde(n,e,t,r){const i=fH(n);if(0===i.length)return Y({});const s={};return Cn(i).pipe(jt(o=>function Mde(n,e,t,r){const i=sy(n,e,r);return Yi(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(fn(a=>{s[o]=a}))),zI(1),jt(()=>fH(s).length===i.length?Y(s):us))}(n._resolve,n,e,r).pipe(be(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),zj(n,t).resolve),null)))}(o.route,r,n,e)),fn(()=>s++),zI(1),jt(o=>s===i.length?Y(t):us))})}(this.paramsInheritanceStrategy,this.ngModule.injector),fn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),fn(l=>{const c=new nue(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),oT(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),be(a=>{const l=function xue(n,e,t){const r=rf(n,e._root,t?t._root:void 0);return new Hj(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),fn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>be(r=>(new Vue(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),fn({next(){s=!0},complete(){s=!0}}),Ej(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),xs(a=>{if(o=!0,function lue(n){return n&&n[Sj]}(a)){const l=el(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new Cj(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mH(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new Xce(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return us}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Jj(t),this.config=t.map(iT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function Rue(n,e,t,r,i){if(0===t.length)return JI(e.root,e.root,e.root,r,i);const s=function Pue(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Kj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return pn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Kj(t,e,r)}(t);if(s.toRoot())return JI(e.root,e.root,new De([],{}),r,i);const o=function Oue(n,e,t){if(n.isAbsolute)return new eT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new eT(s,s===e.root,0)}const r=Z_(n.commands[0])?0:1;return function Nue(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new eT(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?J_(o.segmentGroup,o.index,s.commands):Yj(o.segmentGroup,o.index,s.commands);return JI(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=el(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Vde(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Bde):!1===r?Object.assign({},Ude):r,el(t))return Rj(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Rj(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ef(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,m)=>{c=p,u=m});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),f=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Cj(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Lg()},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function mH(n){return"imperative"!==n}let oy=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Oe,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:mu(this.skipLocationChange),replaceUrl:mu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(I(Yt),I(ko),oc("tabindex"),I(Qg),I(Dt))},n.\u0275dir=Ue({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&Ze("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Si]}),n})();function mu(n){return""===n||!!n}class _H{}class yH{preload(e,t){return Y(null)}}let vH=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new pH(i,r,l=>t.triggerEvent(new Ij(l)),l=>t.triggerEvent(new Tj(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Kt(t=>t instanceof ef),hu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(vs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return Cn(i).pipe(dd(),be(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Y(r._loadedConfig):this.loader.load(t.injector,r)).pipe(jt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(C(Yt),C(dL),C(Ge),C(_H))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})(),cT=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof WI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ef&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Dj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Lg()},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const tl=new B("ROUTER_CONFIGURATION"),bH=new B("ROUTER_FORROOT_GUARD"),zde=[Ia,{provide:Fj,useClass:Lj},{provide:Yt,useFactory:function Yde(n,e,t,r,i,s,o={},a,l){const c=new Yt(null,n,e,t,r,i,xj(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Qde(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[Fj,cf,Ia,Ge,dL,aT,tl,[class Ode{},new Ce],[class kde{},new Ce]]},cf,{provide:ko,useFactory:function Xde(n){return n.routerState.root},deps:[Yt]},vH,yH,class $de{preload(e,t){return t().pipe(xs(()=>Y(null)))}},{provide:tl,useValue:{enableTracing:!1}}];function Wde(){return new mL("Router",Yt)}let uT=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[zde,wH(t),{provide:bH,useFactory:Kde,deps:[[Yt,new Ce,new hc]]},{provide:tl,useValue:r||{}},{provide:Hc,useFactory:Gde,deps:[Ca,[new bg(KE),new Ce],tl]},{provide:cT,useFactory:qde,deps:[Yt,cee,tl]},{provide:_H,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:yH},{provide:mL,multi:!0,useFactory:Wde},[dT,{provide:rm,multi:!0,useFactory:Zde,deps:[dT]},{provide:EH,useFactory:Jde,deps:[dT]},{provide:cL,multi:!0,useExisting:EH}]]}}static forChild(t){return{ngModule:n,providers:[wH(t)]}}}return n.\u0275fac=function(t){return new(t||n)(C(bH,8),C(Yt,8))},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({}),n})();function qde(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new cT(n,e,t)}function Gde(n,e,t={}){return t.useHash?new zZ(n,e):new FL(n,e)}function Kde(n){return"guarded"}function wH(n){return[{provide:A5,multi:!0,useValue:n},{provide:aT,multi:!0,useValue:n}]}let dT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oe}appInitializer(){return this.injector.get(jZ,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(Yt),o=this.injector.get(tl);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Y(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(tl),i=this.injector.get(vH),s=this.injector.get(cT),o=this.injector.get(Yt),a=this.injector.get(im);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(C(Ge))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();function Zde(n){return n.appInitializer.bind(n)}function Jde(n){return n.bootstrapListener.bind(n)}const EH=new B("Router Initializer");let _u=(()=>{class n{constructor(){this.email="",this.app=ji(yi_firebase)}fetch_userdata_with_keymail(t){let s;return _se(Ss(Va(this.app),"/users/"+t)).then(o=>{o.exists()&&(s=o.val(),console.log("data:",s),this.email=s.email,this.name=s.name,this.username=s.username)}),s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CH(n){return be(()=>n)}const IH=["*"],nhe=["content"];function rhe(n,e){if(1&n){const t=co();U(0,"div",2),Ze("click",function(){return ni(t),_s()._onBackdropClicked()}),L()}2&n&&ai("mat-drawer-shown",_s()._isShowingBackdrop())}function ihe(n,e){1&n&&(U(0,"mat-drawer-content"),wr(1,2),L())}const she=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],ohe=["mat-drawer","mat-drawer-content","*"],ahe={transformDrawer:C_("transform",[cu("open, open-instant",Ir({transform:"none",visibility:"visible"})),cu("void",Ir({"box-shadow":"none",visibility:"hidden"})),Wa("void => open-instant",za("0ms")),Wa("void <=> open, open-instant => void",za("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},lhe=new B("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function che(){return!1}}),TH=new B("MAT_DRAWER_CONTAINER");let hT=(()=>{class n extends nI{constructor(t,r,i,s,o){super(i,s,o),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(I(jc),I(Gp(()=>pT)),I(Dt),I(tI),I(ce))},n.\u0275cmp=ht({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&cE("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[yE([{provide:nI,useExisting:n}]),ao],ngContentSelectors:IH,decls:1,vars:0,template:function(t,r){1&t&&(uo(),wr(0))},encapsulation:2,changeDetection:0}),n})(),fT=(()=>{class n{constructor(t,r,i,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Oe,this._animationEnd=new Oe,this._animationState="void",this.openedChange=new St(!0),this._openedStream=this.openedChange.pipe(Kt(u=>u),be(()=>{})),this.openedStart=this._animationStarted.pipe(Kt(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),CH(void 0)),this._closedStream=this.openedChange.pipe(Kt(u=>!u),be(()=>{})),this.closedStart=this._animationStarted.pipe(Kt(u=>u.fromState!==u.toState&&"void"===u.toState),CH(void 0)),this._destroyed=new Oe,this.onPositionChanged=new St,this._modeChanged=new Oe,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Bh(this._elementRef.nativeElement,"keydown").pipe(Kt(u=>27===u.keyCode&&!this.disableClose&&!iV(u)),zr(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(sV((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Ao(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Ao(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Ao(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(bi(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(uV),I(uI),I(vi),I(ce),I(cI),I(we,8),I(TH,8))},n.\u0275cmp=ht({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&Bc(nhe,5),2&t){let i;Bi(i=Ui())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&Ug("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(lo("align",null),zg("@transform",r._animationState),ai("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:IH,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(uo(),U(0,"div",0,1),wr(2),L())},directives:[nI],encapsulation:2,data:{animation:[ahe.transformDrawer]},changeDetection:0}),n})(),pT=(()=>{class n{constructor(t,r,i,s,o,a=!1,l){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Zg,this.backdropClick=new St,this._destroyed=new Oe,this._doCheckSubject=new Oe,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Oe,t&&t.change.pipe(zr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(zr(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Ao(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Ao(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe($_(this._allDrawers),zr(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe($_(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(function the(n,e=v_){return It((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(dt(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(10),zr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Kt(r=>r.fromState!==r.toState),zr(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(zr(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(zr(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(bi(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(zr(_b(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(I($h,8),I(Dt),I(ce),I(jc),I(rI),I(lhe),I(Qa,8))},n.\u0275cmp=ht({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(Yd(i,hT,5),Yd(i,fT,5)),2&t){let s;Bi(s=Ui())&&(r._content=s.first),Bi(s=Ui())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&Bc(hT,5),2&t){let i;Bi(i=Ui())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&ai("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[yE([{provide:TH,useExisting:n}])],ngContentSelectors:ohe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(uo(she),oi(0,rhe,1,2,"div",0),wr(1),wr(2,1),oi(3,ihe,2,0,"mat-drawer-content",1)),2&t&&(zt("ngIf",r.hasBackdrop),yt(3),zt("ngIf",!r._content))},directives:[hT,th],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),ay=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[Ta,rr,Wh],Wh,rr]}),n})();class dhe{}class Po{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Po?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Po;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Po?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class hhe{encodeKey(e){return DH(e)}encodeValue(e){return DH(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const phe=/%(\d[a-f0-9])/gi,ghe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function DH(n){return encodeURIComponent(n).replace(phe,(e,t)=>{var r;return null!==(r=ghe[t])&&void 0!==r?r:e})}function SH(n){return`${n}`}class Oo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hhe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fhe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Oo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(SH(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(SH(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mhe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AH(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function xH(n){return"undefined"!=typeof Blob&&n instanceof Blob}function MH(n){return"undefined"!=typeof FormData&&n instanceof FormData}class ff{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _he(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Po),this.context||(this.context=new mhe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Oo,this.urlWithParams=t}serializeBody(){return null===this.body?null:AH(this.body)||xH(this.body)||MH(this.body)||function yhe(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MH(this.body)?null:xH(this.body)?this.body.type||null:AH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new ff(r,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var gn=(()=>((gn=gn||{})[gn.Sent=0]="Sent",gn[gn.UploadProgress=1]="UploadProgress",gn[gn.ResponseHeader=2]="ResponseHeader",gn[gn.DownloadProgress=3]="DownloadProgress",gn[gn.Response=4]="Response",gn[gn.User=5]="User",gn))();class gT extends class vhe{constructor(e,t=200,r="OK"){this.headers=e.headers||new Po,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=gn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function mT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let RH=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ff)s=t;else{let l,c;l=i.headers instanceof Po?i.headers:new Po(i.headers),i.params&&(c=i.params instanceof Oo?i.params:new Oo({fromObject:i.params})),s=new ff(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Y(s).pipe(hu(l=>this.handler.handle(l)));if(t instanceof ff||"events"===i.observe)return o;const a=o.pipe(Kt(l=>l instanceof gT));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Oo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,mT(i,r))}post(t,r,i={}){return this.request("POST",t,mT(i,r))}put(t,r,i={}){return this.request("PUT",t,mT(i,r))}}return n.\u0275fac=function(t){return new(t||n)(C(dhe))},n.\u0275prov=z({token:n,factory:n.\u0275fac}),n})();const whe=["*"];let ly;function pf(n){var e;return(null===(e=function Ehe(){if(void 0===ly&&(ly=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(ly=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ly}())||void 0===e?void 0:e.createHTML(n))||n}function PH(n){return Error(`Unable to find icon with the name "${n}"`)}function OH(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function NH(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class nl{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let cy=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new nl(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(Le.HTML,i);if(!o)throw NH(i);const a=pf(o);return this._addSvgIconConfig(t,r,new nl("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new nl(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(Le.HTML,r);if(!s)throw NH(r);const o=pf(s);return this._addSvgIconSetConfig(t,new nl("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Le.RESOURCE_URL,t);if(!r)throw OH(t);const i=this._cachedIconsByUrl.get(r);return i?Y(uy(i)):this._loadSvgIconFromConfig(new nl(t,null)).pipe(fn(s=>this._cachedIconsByUrl.set(r,s)),be(s=>uy(s)))}getNamedSvgIcon(t,r=""){const i=FH(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Jh(PH(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Y(uy(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(be(r=>uy(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Y(i):function uhe(...n){const e=JR(n),{args:t,keys:r}=gj(n),i=new Qe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Qn(t[u]).subscribe(dt(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?mj(r,a):a),s.complete())}))}});return e?i.pipe(Y0(e)):i}(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(xs(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Le.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Y(null)})))).pipe(be(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw PH(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(fn(r=>t.svgText=r),be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Y(null):this._fetchIcon(t).pipe(fn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(pf("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(pf("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function Che(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(Le.RESOURCE_URL,i);if(!a)throw OH(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(be(u=>pf(u)),Ej(()=>this._inProgressUrlFetches.delete(a)),tP());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(FH(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return The(s)?new nl(s.url,null,s.options):new nl(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(C(RH,8),C(gC),C(we,8),C(io))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uy(n){return n.cloneNode(!0)}function FH(n,e){return n+":"+e}function The(n){return!(!n.url||!n.options)}const Dhe=aj(class{constructor(n){this._elementRef=n}}),She=new B("mat-icon-location",{providedIn:"root",factory:function Ahe(){const n=vg(we),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),LH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xhe=LH.map(n=>`[${n}]`).join(", "),Mhe=/^url\(['"]?#(.*?)['"]?\)$/;let _T=(()=>{class n extends Dhe{constructor(t,r,i,s,o){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=hn.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Ao(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(xhe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)LH.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(Mhe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(bi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(I(Dt),I(cy),oc("aria-hidden"),I(She),I(io))},n.\u0275cmp=ht({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(lo("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),ai("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ao],ngContentSelectors:whe,decls:1,vars:0,template:function(t,r){1&t&&(uo(),wr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[rr],rr]}),n})();const khe=["*",[["mat-card-footer"]]],Rhe=["*","mat-card-footer"],Phe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Ohe=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let Nhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),Fhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),Lhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),Bhe=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&ai("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),Uhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ue({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),BH=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(I(Qa,8))},n.\u0275cmp=ht({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&ai("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:Rhe,decls:2,vars:0,template:function(t,r){1&t&&(uo(khe),wr(0),wr(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),Vhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ht({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:Ohe,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(uo(Phe),wr(0),U(1,"div",0),wr(2,1),L(),wr(3,2))},encapsulation:2,changeDetection:0}),n})(),yT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[rr],rr]}),n})(),jhe=(()=>{class n{constructor(t,r,i,s){this.dialog=t,this.router=r,this.user_data_fetch=i,this.location=s,this.showFiller=!1}ngOnInit(){this.fullName=this.user_data_fetch.name,this.userName=this.user_data_fetch.username}openDialog(){this.dialog.open(Uce,{width:"250px"})}go_to_Add_Post(){this.router.navigate(["/add-post"])}go_back(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(I(Zh),I(Yt),I(_u),I(Ia))},n.\u0275cmp=ht({type:n,selectors:[["app-profile"]],decls:43,vars:2,consts:[[1,"example-container"],["mode","side",1,"example-sidenav",2,"background-color","bisque"],["drawer",""],["src","/assets/images/prj_logo_colour.png","alt","Profile Picture","height","100px","width","100px"],["mat-raised-button","",1,"profile-button",3,"click"],["mat-raised-button","",1,"profile-button"],[2,"text-align","center"],[1,"mat_icon_left-arrow",3,"click"],[1,"mat_icon_button",3,"click"],[1,"col-1"],[1,"matcard_col1"],[1,"imgdiv"],["src","/assets/images/prj_logo_black.png","alt","Profile Picture","height","200px","width","200px"],["align","center",1,"col-2"],[1,"matcard_col2"],["align","center"]],template:function(t,r){if(1&t){const i=co();U(0,"mat-drawer-container",0)(1,"mat-drawer",1,2),Ve(3,"img",3)(4,"br")(5,"br"),U(6,"button",4),Ze("click",function(){return r.openDialog()}),G(7,"Edit Profile"),L(),Ve(8,"br")(9,"br"),U(10,"button",4),Ze("click",function(){return r.go_to_Add_Post()}),G(11,"Add Post"),L(),Ve(12,"br")(13,"br"),U(14,"button",5),G(15,"Settings"),L(),Ve(16,"br")(17,"br"),L(),U(18,"div")(19,"div",6)(20,"mat-icon",7),Ze("click",function(){return r.go_back()}),G(21,"keyboard_arrow_left"),L(),U(22,"mat-icon",8),Ze("click",function(){return ni(i),Jn(2).toggle()}),G(23,"more_vert"),L(),G(24),Ve(25,"hr"),L(),U(26,"div")(27,"div")(28,"div",9)(29,"mat-card",10)(30,"div",11),Ve(31,"img",12),L()()(),U(32,"div",13)(33,"mat-card",14)(34,"div"),G(35),L(),Ve(36,"br")(37,"br"),U(38,"div"),G(39," User Bio "),L()()()()(),U(40,"div",15)(41,"h3"),G(42," Posts "),L()()()()}2&t&&(yt(24),ys(" ",r.fullName," "),yt(11),ys(" ",r.userName," "))},directives:[pT,fT,z_,_T,BH],styles:[".col-1[_ngcontent-%COMP%]{max-width:28%;float:left;height:250px;margin:10px}.col-2[_ngcontent-%COMP%]{float:left;max-width:68%;height:250px;margin:10px}img[_ngcontent-%COMP%]{border-radius:100%}.imgdiv[_ngcontent-%COMP%]{margin:calc(24% - 20px)}.matcard_col1[_ngcontent-%COMP%], .matcard_col2[_ngcontent-%COMP%]{height:250px;background-color:bisque}.example-container[_ngcontent-%COMP%]{width:100%;height:100%}.example-sidenav-content[_ngcontent-%COMP%]{height:100%}.example-sidenav[_ngcontent-%COMP%]{padding:30px}.mat-icon-left-arrow[_ngcontent-%COMP%]{background-color:#fff0;left:.1px;position:absolute;cursor:pointer;border:none}.mat_icon_button[_ngcontent-%COMP%]{background-color:#fff0;left:3px;position:absolute;cursor:pointer;border:none}.profile-button[_ngcontent-%COMP%]{width:100px;height:40px}"]}),n})();class Hhe{constructor(e,t){this._delegate=e,this.firebase=t,Mm(e,new Mt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),SB(this._delegate)))}_getService(e,t=xa){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=xa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Mm(this._delegate,e)}_addOrOverwriteComponent(e){DB(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const UH=new jr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Whe=function VH(){const n=function zhe(n){const e={},t={__esModule:!0,initializeApp:function s(c,u={}){const d=ji(c,u);if(fi(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h},app:i,registerVersion:Se,setLogLevel:xB,onLog:AB,apps:null,SDK_VERSION:Vi,INTERNAL:{registerComponent:function a(c){const u=c.name,d=u.replace("-compat","");if(Ft(c)&&"PUBLIC"===c.type){const h=(f=i())=>{if("function"!=typeof f[d])throw UH.create("invalid-app-argument",{appName:u});return f[d]()};void 0!==c.serviceProps&&ih(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return"PUBLIC"===c.type?t[d]:null},removeApp:function r(c){delete e[c]},useAsService:function l(c,u){return"serverAuth"===u?null:u},modularAPIs:cd}};function i(c){if(!fi(e,c=c||xa))throw UH.create("no-app",{appName:c});return e[c]}return t.default=t,Object.defineProperty(t,"apps",{get:function o(){return Object.keys(e).map(c=>e[c])}}),i.App=n,t}(Hhe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:VH,extendNamespace:function e(t){ih(n,t)},createSubscribe:yB,ErrorFactory:jr,deepExtend:ih}),n}(),jH=new go("@firebase/app-compat");if(function Zee(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){jH.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&jH.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yu=Whe;!function Khe(n){Se("@firebase/app-compat","0.1.34",n)}(),yu.registerVersion("firebase","9.10.0","app-compat");var W,Xhe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rs={},vT=vT||{},ie=Xhe||self;function dy(){}function hy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bT="closure_uid_"+(1e9*Math.random()>>>0),Jhe=0;function efe(n,e,t){return n.call.apply(n.bind,arguments)}function tfe(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xn(n,e,t){return(xn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?efe:tfe).apply(null,arguments)}function fy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function No(){this.s=this.s,this.o=this.o}var rfe={};No.prototype.s=!1,No.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Zhe(n){return Object.prototype.hasOwnProperty.call(n,bT)&&n[bT]||(n[bT]=++Jhe)}(this);delete rfe[n]}},No.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wT(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $H(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(hy(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Mn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mn.prototype.h=function(){this.defaultPrevented=!0};var ife=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ie.addEventListener("test",dy,e),ie.removeEventListener("test",dy,e)}catch(t){}return n}();function py(n){return/^[\s\xa0]*$/.test(n)}var zH=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ET(n,e){return n<e?-1:n>e?1:0}function gy(){var n=ie.navigator;return n&&(n=n.userAgent)?n:""}function Qi(n){return-1!=gy().indexOf(n)}function CT(n){return CT[" "](n),n}CT[" "]=dy;var my,n,ofe=Qi("Opera"),vu=Qi("Trident")||Qi("MSIE"),WH=Qi("Edge"),IT=WH||vu,qH=Qi("Gecko")&&!(-1!=gy().toLowerCase().indexOf("webkit")&&!Qi("Edge"))&&!(Qi("Trident")||Qi("MSIE"))&&!Qi("Edge"),afe=-1!=gy().toLowerCase().indexOf("webkit")&&!Qi("Edge");function GH(){var n=ie.document;return n?n.documentMode:void 0}e:{var TT="",DT=(n=gy(),qH?/rv:([^\);]+)(\)|;)/.exec(n):WH?/Edge\/([\d\.]+)/.exec(n):vu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):afe?/WebKit\/(\S+)/.exec(n):ofe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(DT&&(TT=DT?DT[1]:""),vu){var ST=GH();if(null!=ST&&ST>parseFloat(TT)){my=String(ST);break e}}my=TT}var lfe={};var ufe=ie.document&&vu&&(GH()||parseInt(my,10))||void 0;function _f(n,e){if(Mn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qH){e:{try{CT(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dfe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_f.X.h.call(this)}}mn(_f,Mn);var dfe={2:"touch",3:"pen",4:"mouse"};_f.prototype.h=function(){_f.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),hfe=0;function ffe(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++hfe,this.ba=this.ea=!1}function _y(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function YH(n){const e={};for(const t in n)e[t]=n[t];return e}const QH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XH(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<QH.length;s++)t=QH[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function yy(n){this.src=n,this.g={},this.h=0}function MT(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=HH(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(_y(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kT(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}yy.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=kT(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new ffe(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var RT="closure_lm_"+(1e6*Math.random()|0),PT={};function ZH(n,e,t,r,i){if(r&&r.once)return e$(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZH(n,e[s],t,r,i);return null}return t=LT(t),n&&n[yf]?n.N(e,t,mf(r)?!!r.capture:!!r,i):JH(n,e,t,!1,r,i)}function JH(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=mf(i)?!!i.capture:!!i,a=NT(n);if(a||(n[RT]=a=new yy(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function pfe(){const e=gfe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ife||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(n$(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function e$(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)e$(n,e[s],t,r,i);return null}return t=LT(t),n&&n[yf]?n.O(e,t,mf(r)?!!r.capture:!!r,i):JH(n,e,t,!0,r,i)}function t$(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)t$(n,e[s],t,r,i);else r=mf(r)?!!r.capture:!!r,t=LT(t),n&&n[yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kT(s=n.g[e],t,r,i))&&(_y(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=NT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kT(e,t,r,i)),(t=-1<n?e[n]:null)&&OT(t))}function OT(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[yf])MT(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(n$(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NT(e))?(MT(t,n),0==t.h&&(t.src=null,e[RT]=null)):_y(n)}}}function n$(n){return n in PT?PT[n]:PT[n]="on"+n}function gfe(n,e){if(n.ba)n=!0;else{e=new _f(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&OT(n),n=t.call(r,e)}return n}function NT(n){return(n=n[RT])instanceof yy?n:null}var FT="__closure_events_fn_"+(1e9*Math.random()>>>0);function LT(n){return"function"==typeof n?n:(n[FT]||(n[FT]=function(e){return n.handleEvent(e)}),n[FT])}function nn(){No.call(this),this.i=new yy(this),this.P=this,this.I=null}function _n(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mn(e,n);else if(e instanceof Mn)e.target=e.target||n;else{var i=e;XH(e=new Mn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=vy(o,r,!0,e)&&i}if(i=vy(o=e.g=n,r,!0,e)&&i,i=vy(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=vy(o=e.g=t[s],r,!1,e)&&i}function vy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&MT(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}mn(nn,No),nn.prototype[yf]=!0,nn.prototype.removeEventListener=function(n,e,t,r){t$(this,n,e,t,r)},nn.prototype.M=function(){if(nn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_y(t[r]);delete n.g[e],n.h--}}this.I=null},nn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},nn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var BT=ie.JSON.stringify;function mfe(){var n=s$;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var UT,r$=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new yfe,n=>n.reset());class yfe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vfe(n){ie.setTimeout(()=>{throw n},0)}function i$(n,e){UT||function bfe(){var n=ie.Promise.resolve(void 0);UT=function(){n.then(wfe)}}(),VT||(UT(),VT=!0),s$.add(n,e)}var VT=!1,s$=new class _fe{constructor(){this.h=this.g=null}add(e,t){const r=r$.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function wfe(){for(var n;n=mfe();){try{n.h.call(n.g)}catch(t){vfe(t)}var e=r$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}VT=!1}function by(n,e){nn.call(this),this.h=n||1,this.g=e||ie,this.j=xn(this.kb,this),this.l=Date.now()}function jT(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function HT(n,e,t){if("function"==typeof n)t&&(n=xn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xn(n.handleEvent,n)}return 2147483647<Number(e)?-1:ie.setTimeout(n,e||0)}function o$(n){n.g=HT(()=>{n.g=null,n.i&&(n.i=!1,o$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mn(by,nn),(W=by.prototype).ca=!1,W.R=null,W.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),_n(this,"tick"),this.ca&&(jT(this),this.start()))}},W.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){by.X.M.call(this),jT(this),delete this.g};class Efe extends No{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:o$(this)}M(){super.M(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vf(n){No.call(this),this.h=n,this.g={}}mn(vf,No);var a$=[];function l$(n,e,t,r){Array.isArray(t)||(t&&(a$[0]=t.toString()),t=a$);for(var i=0;i<t.length;i++){var s=ZH(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function c$(n){xT(n.g,function(e,t){this.g.hasOwnProperty(t)&&OT(e)},n),n.g={}}function wy(){this.g=!0}function bu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dfe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return BT(t)}catch(a){return e}}(n,t)+(r?" "+r:"")})}vf.prototype.M=function(){vf.X.M.call(this),c$(this)},vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wy.prototype.Aa=function(){this.g=!1},wy.prototype.info=function(){};var rl={},u$=null;function Ey(){return u$=u$||new nn}function d$(n){Mn.call(this,rl.Oa,n)}function bf(n){const e=Ey();_n(e,new d$(e,n))}function h$(n,e){Mn.call(this,rl.STAT_EVENT,n),this.stat=e}function Vn(n){const e=Ey();_n(e,new h$(e,n))}function f$(n,e){Mn.call(this,rl.Pa,n),this.size=e}function wf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){n()},e)}rl.Oa="serverreachability",mn(d$,Mn),rl.STAT_EVENT="statevent",mn(h$,Mn),rl.Pa="timingevent",mn(f$,Mn);var Cy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},p$={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $T(){}function m$(){}$T.prototype.h=null;var qT,Ef={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function zT(){Mn.call(this,"d")}function WT(){Mn.call(this,"c")}function Iy(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vf(this),this.O=Sfe,this.T=new by(n=IT?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _$}function _$(){this.i=null,this.g="",this.h=!1}mn(zT,Mn),mn(WT,Mn),mn(Iy,$T),Iy.prototype.g=function(){return new XMLHttpRequest},Iy.prototype.i=function(){return{}},qT=new Iy;var Sfe=45e3,GT={},Ty={};function KT(n,e,t){n.K=1,n.v=xy(Ps(e)),n.s=t,n.P=!0,y$(n,null)}function y$(n,e){n.F=Date.now(),If(n),n.A=Ps(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),A$(t.i,"t",r),n.C=0,t=n.l.H,n.h=new _$,n.g=Z$(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Efe(xn(n.Ka,n,n.g),n.N)),l$(n.S,n.g,"readystatechange",n.hb),e=n.H?YH(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),bf(1),function Cfe(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function v$(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function b$(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Afe(n,t),i==Ty){4==e&&(n.o=4,Vn(14),r=!1),bu(n.j,n.m,null,"[Incomplete Response]");break}if(i==GT){n.o=4,Vn(15),bu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bu(n.j,n.m,i,null),YT(n,i)}v$(n)&&i!=Ty&&i!=GT&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),rD(e),e.K=!0,Vn(11))):(bu(n.j,n.m,t,"[Invalid Chunked Response]"),il(n),Tf(n))}function Afe(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ty:(t=Number(e.substring(t,r)),isNaN(t)?GT:(r+=1)+t>e.length?Ty:(e=e.substr(r,t),n.C=r+t,e))}function If(n){n.V=Date.now()+n.O,w$(n,n.O)}function w$(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wf(xn(n.fb,n),e)}function Dy(n){n.B&&(ie.clearTimeout(n.B),n.B=null)}function Tf(n){0==n.l.G||n.I||K$(n.l,n)}function il(n){Dy(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,jT(n.T),c$(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function YT(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||QT(t.h,n)))if(!n.J&&QT(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=wf(xn(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ny(t),Py(t)}nD(t),Vn(18)}if(1>=k$(t.h)&&t.ja){try{t.ja()}catch(c){}t.ja=void 0}}else ol(t,11)}else if((n.J||t.g==n)&&Ny(t),!py(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.T=c[0],c=c[1],2==t.G)if("c"==c[0]){t.I=c[1],t.ka=c[2];const u=c[3];null!=u&&(t.ma=u,t.j.info("VER="+t.ma));const d=c[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.J=r=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(XT(s,s.h),s.h=null))}if(r.D){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.za=m,at(r.F,r.D,m))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=X$(r,r.H?r.ka:null,r.V),o.J){R$(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(Dy(a),If(a)),r.g=o}else q$(r);0<t.i.length&&Oy(t)}else"stop"!=c[0]&&"close"!=c[0]||ol(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ol(t,7):tD(t):"noop"!=c[0]&&t.l&&t.l.wa(c),t.A=0)}bf(4)}catch(c){}}function E$(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Mfe(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(hy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function xfe(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(hy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(W=Cf.prototype).setTimeout=function(n){this.O=n},W.hb=function(n){n=n.target;const e=this.L;e&&3==Os(n)?e.l():this.Ka(n)},W.Ka=function(n){try{if(n==this.g)e:{const u=Os(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(3!=u||IT||this.g&&(this.h.h||this.g.fa()||V$(this.g)))){this.I||4!=u||7==e||bf(8==e||0>=d?3:2),Dy(this);var t=this.g.aa();this.Y=t;t:if(v$(this)){var r=V$(this.g);n="";var i=r.length,s=4==Os(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){il(this),Tf(this);var o="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function Ife(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!py(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,Vn(12),il(this),Tf(this);break e}bu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,YT(this,t)}this.P?(b$(this,u,o),IT&&this.i&&3==u&&(l$(this.S,this.T,"tick",this.gb),this.T.start())):(bu(this.j,this.m,o,null),YT(this,o)),4==u&&il(this),this.i&&!this.I&&(4==u?K$(this.l,this):(this.i=!1,If(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Vn(12)):(this.o=0,Vn(13)),il(this),Tf(this)}}}catch(u){}},W.gb=function(){if(this.g){var n=Os(this.g),e=this.g.fa();this.C<e.length&&(Dy(this),b$(this,n,e),this.i&&4!=n&&If(this))}},W.cancel=function(){this.I=!0,il(this)},W.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Tfe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bf(3),Vn(17)),il(this),this.o=2,Tf(this)):w$(this,this.V-n)};var C$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof sl){this.h=void 0!==e?e:n.h,Sy(this,n.j),this.s=n.s,this.g=n.g,Ay(this,n.m),this.l=n.l,e=n.i;var t=new Af;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),I$(this,t),this.o=n.o}else n&&(t=String(n).match(C$))?(this.h=!!e,Sy(this,t[1]||"",!0),this.s=Df(t[2]||""),this.g=Df(t[3]||"",!0),Ay(this,t[4]),this.l=Df(t[5]||"",!0),I$(this,t[6]||"",!0),this.o=Df(t[7]||"")):(this.h=!!e,this.i=new Af(null,this.h))}function Ps(n){return new sl(n)}function Sy(n,e,t){n.j=t?Df(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ay(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function I$(n,e,t){e instanceof Af?(n.i=e,function Lfe(n,e){e&&!n.j&&(Fo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(D$(this,r),A$(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Sf(e,Nfe)),n.i=new Af(e,n.h))}function at(n,e,t){n.i.set(e,t)}function xy(n){return at(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Df(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Rfe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Rfe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sf(e,T$,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sf(e,T$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sf(t,"/"==t.charAt(0)?Ofe:Pfe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sf(t,Ffe)),n.join("")};var T$=/[#\/\?@]/g,Pfe=/[#\?:]/g,Ofe=/[#\?]/g,Nfe=/[#\?@]/g,Ffe=/#/g;function Af(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fo(n){n.g||(n.g=new Map,n.h=0,n.i&&function kfe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function D$(n,e){Fo(n),e=wu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function S$(n,e){return Fo(n),e=wu(n,e),n.g.has(e)}function A$(n,e,t){D$(n,e),0<t.length&&(n.i=null,n.g.set(wu(n,e),wT(t)),n.h+=t.length)}function wu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function x$(n){this.l=n||Ufe,n=ie.PerformanceNavigationTiming?0<(n=ie.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ie.g&&ie.g.Ga&&ie.g.Ga()&&ie.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Af.prototype).add=function(n,e){Fo(this),this.i=null,n=wu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},W.forEach=function(n,e){Fo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},W.oa=function(){Fo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},W.W=function(n){Fo(this);let e=[];if("string"==typeof n)S$(this,n)&&(e=e.concat(this.g.get(wu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},W.set=function(n,e){return Fo(this),this.i=null,S$(this,n=wu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},W.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Ufe=10;function M$(n){return!!n.h||!!n.g&&n.g.size>=n.j}function k$(n){return n.h?1:n.g?n.g.size:0}function QT(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function XT(n,e){n.g?n.g.add(e):n.h=e}function R$(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function P$(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wT(n.i)}function ZT(){}function Vfe(){this.g=new ZT}function jfe(n,e,t){const r=t||"";try{E$(n,function(i,s){let o=i;mf(i)&&(o=BT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function My(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function xf(n){this.l=n.$b||null,this.j=n.ib||!1}function ky(n,e){nn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=JT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}x$.prototype.cancel=function(){if(this.i=P$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ZT.prototype.stringify=function(n){return ie.JSON.stringify(n,void 0)},ZT.prototype.parse=function(n){return ie.JSON.parse(n,void 0)},mn(xf,$T),xf.prototype.g=function(){return new ky(this.l,this.j)},xf.prototype.i=function(n){return function(){return n}}({}),mn(ky,nn);var JT=0;function O$(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Mf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kf(n)}function kf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(W=ky.prototype).open=function(n,e){if(this.readyState!=JT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kf(this)},W.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ie).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mf(this)),this.readyState=JT},W.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kf(this)),this.g&&(this.readyState=3,kf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==ie.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;O$(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},W.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mf(this):kf(this),3==this.readyState&&O$(this)}},W.Ua=function(n){this.g&&(this.response=this.responseText=n,Mf(this))},W.Ta=function(n){this.g&&(this.response=n,Mf(this))},W.ga=function(){this.g&&Mf(this)},W.setRequestHeader=function(n,e){this.v.append(n,e)},W.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ky.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $fe=ie.JSON.parse;function Bt(n){nn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=N$,this.K=this.L=!1}mn(Bt,nn);var N$="",zfe=/^https?$/i,Wfe=["POST","PUT"];function F$(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,L$(n),Ry(n)}function L$(n){n.D||(n.D=!0,_n(n,"complete"),_n(n,"error"))}function B$(n){if(n.h&&void 0!==vT&&(!n.C[1]||4!=Os(n)||2!=n.aa()))if(n.v&&4==Os(n))HT(n.Ha,0,n);else if(_n(n,"readystatechange"),4==Os(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(C$)[1]||null;if(!i&&ie.self&&ie.self.location){var s=ie.self.location.protocol;i=s.substr(0,s.length-1)}r=!zfe.test(i?i.toLowerCase():"")}t=r}if(t)_n(n,"complete"),_n(n,"success");else{n.m=6;try{var o=2<Os(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.aa()+"]",L$(n)}}finally{Ry(n)}}}function Ry(n,e){if(n.g){U$(n);const t=n.g,r=n.C[0]?dy:null;n.g=null,n.C=null,e||_n(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function U$(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ie.clearTimeout(n.A),n.A=null)}function Os(n){return n.g?n.g.readyState:0}function V$(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case N$:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function j$(n){let e="";return xT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function eD(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=j$(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):at(n,e,t))}function Rf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function H$(n){this.Ca=0,this.i=[],this.j=new wy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Rf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Rf("baseRetryDelayMs",5e3,n),this.ab=Rf("retryDelaySeedMs",1e4,n),this.Za=Rf("forwardChannelMaxRetries",2,n),this.ta=Rf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new x$(n&&n.concurrentRequestLimit),this.Fa=new Vfe,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function tD(n){if($$(n),3==n.G){var e=n.U++,t=Ps(n.F);at(t,"SID",n.I),at(t,"RID",e),at(t,"TYPE","terminate"),Pf(n,t),(e=new Cf(n,n.j,e,void 0)).K=2,e.v=xy(Ps(t)),t=!1,ie.navigator&&ie.navigator.sendBeacon&&(t=ie.navigator.sendBeacon(e.v.toString(),"")),!t&&ie.Image&&((new Image).src=e.v,t=!0),t||(e.g=Z$(e.l,null),e.g.da(e.v)),e.F=Date.now(),If(e)}Q$(n)}function Py(n){n.g&&(rD(n),n.g.cancel(),n.g=null)}function $$(n){Py(n),n.u&&(ie.clearTimeout(n.u),n.u=null),Ny(n),n.h.cancel(),n.m&&("number"==typeof n.m&&ie.clearTimeout(n.m),n.m=null)}function Oy(n){M$(n.h)||n.m||(n.m=!0,i$(n.Ja,n),n.C=0)}function z$(n,e){var t;t=e?e.m:n.U++;const r=Ps(n.F);at(r,"SID",n.I),at(r,"RID",t),at(r,"AID",n.T),Pf(n,r),n.o&&n.s&&eD(r,n.o,n.s),t=new Cf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=W$(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),XT(n.h,t),KT(t,r,e)}function Pf(n,e){n.ia&&xT(n.ia,function(t,r){at(e,r,t)}),n.l&&E$({},function(t,r){at(e,r,t)})}function W$(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xn(n.l.Qa,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{jfe(u,o,"req"+c+"_")}catch(d){r&&r(u)}}if(a){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function q$(n){n.g||n.u||(n.Z=1,i$(n.Ia,n),n.A=0)}function nD(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=wf(xn(n.Ia,n),Y$(n,n.A)),n.A++,0))}function rD(n){null!=n.B&&(ie.clearTimeout(n.B),n.B=null)}function G$(n){n.g=new Cf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ps(n.sa);at(e,"RID","rpc"),at(e,"SID",n.I),at(e,"CI",n.L?"0":"1"),at(e,"AID",n.T),at(e,"TYPE","xmlhttp"),Pf(n,e),n.o&&n.s&&eD(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=xy(Ps(e)),t.s=null,t.P=!0,y$(t,n)}function Ny(n){null!=n.v&&(ie.clearTimeout(n.v),n.v=null)}function K$(n,e){var t=null;if(n.g==e){Ny(n),rD(n),n.g=null;var r=2}else{if(!QT(n.h,e))return;t=e.D,R$(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_n(r=Ey(),new f$(r,t,e,i)),Oy(n)}else q$(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Gfe(n,e){return!(k$(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=wf(xn(n.Ja,n,e),Y$(n,n.C)),n.C++,0)))}(n,e)||2==r&&nD(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function Y$(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function ol(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xn(n.jb,n);t||(t=new sl("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||Sy(t,"https"),xy(t)),function Hfe(n,e){const t=new wy;if(ie.Image){const r=new Image;r.onload=fy(My,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fy(My,t,r,"TestLoadImage: error",!1,e),r.onabort=fy(My,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fy(My,t,r,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vn(2);n.G=0,n.l&&n.l.va(e),Q$(n),$$(n)}function Q$(n){if(n.G=0,n.la=[],n.l){const e=P$(n.h);(0!=e.length||0!=n.i.length)&&($H(n.la,e),$H(n.la,n.i),n.h.i.length=0,wT(n.i),n.i.length=0),n.l.ua()}}function X$(n,e,t){var r=t instanceof sl?Ps(t):new sl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ay(r,r.m);else{var i=ie.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new sl(null,void 0);r&&Sy(s,r),e&&(s.g=e),i&&Ay(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&at(r,t,e),at(r,"VER",n.ma),Pf(n,r),r}function Z$(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bt(t&&n.Da&&!n.ra?new xf({ib:!0}):n.ra)).L=n.H,e}function J$(){}function Fy(){if(vu&&!(10<=Number(ufe)))throw Error("Environmental error: no available transport.")}function Sr(n,e){nn.call(this),this.g=new H$(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!py(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!py(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Eu(this)}function ez(n){zT.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tz(){WT.call(this),this.status=1}function Eu(n){this.g=n}(W=Bt.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qT.g(),this.C=function g$(n){return n.h||(n.h=n.i())}(this.u?this.u:qT),this.g.onreadystatechange=xn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void F$(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ie.FormData&&n instanceof ie.FormData,!(0<=HH(Wfe,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{U$(this),0<this.B&&((this.K=function qfe(n){return vu&&function cfe(){return function sfe(n){var e=lfe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=zH(String(my)).split("."),t=zH("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=ET(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||ET(0==i[2].length,0==s[2].length)||ET(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xn(this.qa,this)):this.A=HT(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){F$(this,s)}},W.qa=function(){void 0!==vT&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_n(this,"timeout"),this.abort(8))},W.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_n(this,"complete"),_n(this,"abort"),Ry(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ry(this,!0)),Bt.X.M.call(this)},W.Ha=function(){this.s||(this.F||this.v||this.l?B$(this):this.eb())},W.eb=function(){B$(this)},W.aa=function(){try{return 2<Os(this)?this.g.status:-1}catch(n){return-1}},W.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},W.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$fe(e)}},W.Ea=function(){return this.m},W.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=H$.prototype).ma=8,W.G=1,W.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Cf(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=YH(s),XH(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=W$(this,i,e),at(t=Ps(this.F),"RID",n),at(t,"CVER",22),this.D&&at(t,"X-HTTP-Session-Id",this.D),Pf(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(j$(s)))+"&"+e:this.o&&eD(t,this.o,s)),XT(this.h,i),this.Xa&&at(t,"TYPE","init"),this.O?(at(t,"$req",e),at(t,"SID","null"),i.Z=!0,KT(i,t,null)):KT(i,t,e),this.G=2}}else 3==this.G&&(n?z$(this,n):0==this.i.length||M$(this.h)||z$(this))},W.Ia=function(){if(this.u=null,G$(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=wf(xn(this.cb,this),n)}},W.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vn(10),Py(this),G$(this))},W.bb=function(){null!=this.v&&(this.v=null,Py(this),nD(this),Vn(19))},W.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Vn(2)):(this.j.info("Failed to ping google.com"),Vn(1))},(W=J$.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Qa=function(){},Fy.prototype.g=function(n,e){return new Sr(n,e)},mn(Sr,nn),Sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=X$(n,null,n.V),Oy(n)},Sr.prototype.close=function(){tD(this.g)},Sr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=BT(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Oy(e)},Sr.prototype.M=function(){this.g.l=null,delete this.j,tD(this.g),delete this.g,Sr.X.M.call(this)},mn(ez,zT),mn(tz,WT),mn(Eu,J$),Eu.prototype.xa=function(){_n(this.g,"a")},Eu.prototype.wa=function(n){_n(this.g,new ez(n))},Eu.prototype.va=function(n){_n(this.g,new tz(n))},Eu.prototype.ua=function(){_n(this.g,"b")},Fy.prototype.createWebChannel=Fy.prototype.g,Sr.prototype.send=Sr.prototype.u,Sr.prototype.open=Sr.prototype.m,Sr.prototype.close=Sr.prototype.close,Cy.NO_ERROR=0,Cy.TIMEOUT=8,Cy.HTTP_ERROR=6,p$.COMPLETE="complete",m$.EventType=Ef,Ef.OPEN="a",Ef.CLOSE="b",Ef.ERROR="c",Ef.MESSAGE="d",nn.prototype.listen=nn.prototype.N,Bt.prototype.listenOnce=Bt.prototype.O,Bt.prototype.getLastError=Bt.prototype.Na,Bt.prototype.getLastErrorCode=Bt.prototype.Ea,Bt.prototype.getStatus=Bt.prototype.aa,Bt.prototype.getResponseJson=Bt.prototype.Ra,Bt.prototype.getResponseText=Bt.prototype.fa,Bt.prototype.send=Bt.prototype.da;var Kfe=Rs.createWebChannelTransport=function(){return new Fy},Yfe=Rs.getStatEventTarget=function(){return Ey()},iD=Rs.ErrorCode=Cy,Qfe=Rs.EventType=p$,Xfe=Rs.Event=rl,nz=Rs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Zfe=Rs.FetchXmlHttpFactory=xf,Ly=Rs.WebChannel=m$,Jfe=Rs.XhrIo=Bt;const rz="@firebase/firestore";class rn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");let Cu="9.10.0";const Lo=new go("@firebase/firestore");function sD(){return Lo.logLevel}function x(n,...e){if(Lo.logLevel<=Ie.DEBUG){const t=e.map(oD);Lo.debug(`Firestore (${Cu}): ${n}`,...t)}}function kt(n,...e){if(Lo.logLevel<=Ie.ERROR){const t=e.map(oD);Lo.error(`Firestore (${Cu}): ${n}`,...t)}}function al(n,...e){if(Lo.logLevel<=Ie.WARN){const t=e.map(oD);Lo.warn(`Firestore (${Cu}): ${n}`,...t)}}function oD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function H(n="Unexpected state"){const e=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: `+n;throw kt(e),new Error(e)}function J(n,e){n||H()}function O(n,e){return n}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class iz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class npe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class rpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ipe{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(g(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J("string"==typeof r.accessToken),new iz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return J(null===e||"string"==typeof e),new rn(e)}}class spe{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(J(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ope{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new spe(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ape{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J("string"==typeof t.token),this.A=t.token,new sz(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lpe(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class oz{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=lpe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function se(n,e){return n<e?-1:n>e?1:0}function Iu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function az(n){return n+"\0"}class lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new lt(0,0))}static max(){return new Q(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Of{constructor(e,t,r){void 0===t?t=0:t>e.length&&H(),void 0===r?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Of.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Of?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Me extends Of{construct(e,t,r){return new Me(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Me(t)}static emptyPath(){return new Me([])}}const cpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Of{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return cpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new D(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new D(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class P{constructor(e){this.path=e}static fromPath(e){return new P(Me.fromString(e))}static fromName(e){return new P(Me.fromString(e).popFirst(5))}static empty(){return new P(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Me.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new P(new Me(e.slice()))}}class By{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aD(n){return n.fields.find(e=>2===e.kind)}function ll(n){return n.fields.filter(e=>2!==e.kind)}By.UNKNOWN_ID=-1;class Uy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nf(0,Ar.min())}}function lz(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(1e9===r?new lt(t+1,0):new lt(t,r));return new Ar(i,P.empty(),e)}function cz(n){return new Ar(n.readTime,n.key,-1)}class Ar{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ar(Q.min(),P.empty(),-1)}static max(){return new Ar(Q.max(),P.empty(),-1)}}function lD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=P.comparator(n.documentKey,e.documentKey),0!==t?t:se(n.largestBatchId,e.largestBatchId))}const uz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bo(n){return cD.apply(this,arguments)}function cD(){return cD=g(function*(n){if(n.code!==w.FAILED_PRECONDITION||n.message!==uz)throw n;x("LocalStore","Unexpectedly lost primary lease")}),cD.apply(this,arguments)}class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new b((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof b?t:b.resolve(t)}catch(t){return b.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):b.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):b.reject(t)}static resolve(e){return new b((t,r)=>{t(e)})}static reject(e){return new b((t,r)=>{r(e)})}static waitFor(e){return new b((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=b.resolve(!1);for(const r of e)t=t.next(i=>i?b.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new b((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new b((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Vy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new sn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ff(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=uD(r.target.error);this.P.reject(new Ff(e,i))}}static open(e,t,r,i){try{return new Vy(t,e.transaction(i,r))}catch(s){throw new Ff(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(x("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fpe(t)}}class wi{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===wi.D(xt())&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return x("SimpleDb","Removing database:",e),cl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!po())return!1;if(wi.N())return!0;const e=xt(),t=wi.D(e),r=0<t&&t<10,i=wi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return g(function*(){return t.db||(x("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new D(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new D(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Ff(e,a))},s.onupgradeneeded=o=>{x("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{x("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return g(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.F(e);const l=Vy.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),b.reject(u))).toPromise();return c.catch(()=>{}),yield l.v,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(x("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hpe{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return cl(this.U.delete())}}class Ff extends D{constructor(e,t){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uo(n){return"IndexedDbTransactionError"===n.name}class fpe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(x("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cl(r)}add(e){return x("SimpleDb","ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),x("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return x("SimpleDb","DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return x("SimpleDb","COUNT",this.store.name),cl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new b((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new b((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,t){x("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new b((r,i)=>{t.onerror=s=>{const o=uD(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,t){const r=[];return new b((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new hpe(a),c=t(a.primaryKey,a.value,l);if(c instanceof b){const u=c.catch(d=>(l.done(),b.reject(d)));r.push(u)}l.isDone?i():null===l.G?a.continue():a.continue(l.G)}}).next(()=>b.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(n){return new b((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=uD(r.target.error);t(i)}})}let hz=!1;function uD(n){const e=wi.D(xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hz||(hz=!0,setTimeout(()=>{throw r},0)),r}}return n}class ppe{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;x("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,g(function*(){t.task=null;try{x("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Uo(r)?x("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Bo(r)}yield t.nt(6e4)}))}}class gpe{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return g(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return b.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return x("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(x("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=cz(s);lD(o,r)>0&&(r=o)}),new Ar(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ir{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function fz(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ir.at=-1;class wt{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jy(this.root,e,this.comparator,!1)}getReverseIterator(){return new jy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jy(this.root,e,this.comparator,!0)}}class jy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:yn.RED,this.left=null!=i?i:yn.EMPTY,this.right=null!=s?s:yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new yn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1,yn.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(n,e,t,r,i){return this}insert(n,e,t){return new yn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ze{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gz(this.data.getIterator())}getIteratorFrom(e){return new gz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ze(this.comparator);return t.data=e,t}}class gz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tu(n){return n.hasNext()?n.getNext():void 0}class xr{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new xr([])}unionWith(e){let t=new ze(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Iu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qt(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const _pe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(n){if(J(!!n),"string"==typeof n){let e=0;const t=_pe.exec(n);if(J(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function dl(n){return"string"==typeof n?Qt.fromBase64String(n):Qt.fromUint8Array(n)}function dD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mz(n){const e=n.mapValue.fields.__previous_value__;return dD(e)?mz(e):e}function Lf(n){const e=Vo(n.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}class ype{constructor(e,t,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}function Bf(n){return null==n}function Uf(n){return 0===n&&1/n==-1/0}function _z(n){return"number"==typeof n&&Number.isInteger(n)&&!Uf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ho={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hy={nullValue:"NULL_VALUE"};function hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dD(n)?4:wz(n)?9007199254740991:10:H()}function Xi(n,e){if(n===e)return!0;const t=hl(n);if(t!==hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lf(n).isEqual(Lf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Vo(r.timestampValue),o=Vo(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,dl(n.bytesValue).isEqual(dl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Et(r.geoPointValue.latitude)===Et(i.geoPointValue.latitude)&&Et(r.geoPointValue.longitude)===Et(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Et(r.integerValue)===Et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Et(r.doubleValue),o=Et(i.doubleValue);return s===o?Uf(s)===Uf(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Iu(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(fz(s)!==fz(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Xi(s[a],o[a])))return!1;return!0}(n,e);default:return H()}var i}function Vf(n,e){return void 0!==(n.values||[]).find(t=>Xi(t,e))}function $o(n,e){if(n===e)return 0;const t=hl(n),r=hl(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Et(i.integerValue||i.doubleValue),a=Et(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return yz(n.timestampValue,e.timestampValue);case 4:return yz(Lf(n),Lf(e));case 5:return se(n.stringValue,e.stringValue);case 6:return function(i,s){const o=dl(i),a=dl(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=se(o[l],a[l]);if(0!==c)return c}return se(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=se(Et(i.latitude),Et(s.latitude));return 0!==o?o:se(Et(i.longitude),Et(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=$o(o[l],a[l]);if(c)return c}return se(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ho.mapValue&&s===Ho.mapValue)return 0;if(i===Ho.mapValue)return 1;if(s===Ho.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=se(a[u],c[u]);if(0!==d)return d;const h=$o(o[a[u]],l[c[u]]);if(0!==h)return h}return se(a.length,c.length)}(n.mapValue,e.mapValue);default:throw H()}}function yz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return se(n,e);const t=Vo(n),r=Vo(e),i=se(t.seconds,r.seconds);return 0!==i?i:se(t.nanos,r.nanos)}function Du(n){return hD(n)}function hD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Vo(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?dl(n.bytesValue).toBase64():"referenceValue"in n?P.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=hD(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${hD(r.fields[a])}`;return s+"}"}(n.mapValue):H();var e}function fl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fD(n){return!!n&&"integerValue"in n}function jf(n){return!!n&&"arrayValue"in n}function vz(n){return!!n&&"nullValue"in n}function bz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $y(n){return!!n&&"mapValue"in n}function Hf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vpe(n){return"nullValue"in n?Hy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fl(jo.empty(),P.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:H()}function bpe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fl(jo.empty(),P.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ho:H()}function Ez(n,e){const t=$o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cz(n,e){const t=$o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$y(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hf(t)}setAll(e){let t=bt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Hf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());$y(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$y(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ul(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vn(Hf(this.value))}}function Iz(n){const e=[];return ul(n.fields,(t,r)=>{const i=new bt([t]);if($y(r)){const s=Iz(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xr(e)}class nt{constructor(e,t,r,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new nt(e,0,Q.min(),Q.min(),vn.empty(),0)}static newFoundDocument(e,t,r){return new nt(e,1,t,Q.min(),r,0)}static newNoDocument(e,t){return new nt(e,2,t,Q.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new nt(e,3,t,Q.min(),vn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wpe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function Tz(n,e=null,t=[],r=[],i=null,s=null,o=null){return new wpe(n,e,t,r,i,s,o)}function pl(n){const e=O(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Du(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Du(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Du(r)).join(",")),e.ht=t}return e.ht}function $f(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Mpe(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Xi(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mz(n.startAt,e.startAt)&&Mz(n.endAt,e.endAt)}function zy(n){return P.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Wy(n,e){return n.filters.filter(t=>t instanceof bn&&t.field.isEqual(e))}function Dz(n,e,t){let r=Hy,i=!0;for(const s of Wy(n,e)){let o=Hy,a=!0;switch(s.op){case"<":case"<=":o=vpe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Hy}Ez({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Ez({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Sz(n,e,t){let r=Ho,i=!0;for(const s of Wy(n,e)){let o=Ho,a=!0;switch(s.op){case">=":case">":o=bpe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ho}Cz({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Cz({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class bn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Cpe(e,t,r):"array-contains"===t?new Dpe(e,r):"in"===t?new Spe(e,r):"not-in"===t?new Ape(e,r):"array-contains-any"===t?new xpe(e,r):new bn(e,t,r)}static lt(e,t,r){return"in"===t?new Ipe(e,r):new Tpe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft($o(t,this.value)):null!==t&&hl(this.value)===hl(t)&&this.ft($o(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Cpe extends bn{constructor(e,t,r){super(e,t,r),this.key=P.fromName(r.referenceValue)}matches(e){const t=P.comparator(e.key,this.key);return this.ft(t)}}class Ipe extends bn{constructor(e,t){super(e,"in",t),this.keys=Az(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tpe extends bn{constructor(e,t){super(e,"not-in",t),this.keys=Az(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Az(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>P.fromName(r.referenceValue))}class Dpe extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&Vf(t.arrayValue,this.value)}}class Spe extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vf(this.value.arrayValue,t)}}class Ape extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vf(this.value.arrayValue,t)}}class xpe extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vf(this.value.arrayValue,r))}}class zo{constructor(e,t){this.position=e,this.inclusive=t}}class Su{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mpe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?P.comparator(P.fromName(o.referenceValue),t.key):$o(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Mz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}class Ns{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function kz(n,e,t,r,i,s,o,a){return new Ns(n,e,t,r,i,s,o,a)}function Au(n){return new Ns(n)}function Rz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gD(n){for(const e of n.filters)if(e.dt())return e.field;return null}function mD(n){return null!==n.collectionGroup}function xu(n){const e=O(n);if(null===e._t){e._t=[];const t=gD(e),r=pD(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Su(t)),e._t.push(new Su(bt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Su(bt.keyField(),s))}}}return e._t}function sr(n){const e=O(n);if(!e.wt)if("F"===e.limitType)e.wt=Tz(e.path,e.collectionGroup,xu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of xu(e))t.push(new Su(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new zo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zo(e.startAt.position,e.startAt.inclusive):null;e.wt=Tz(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function qy(n,e,t){return new Ns(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return $f(sr(n),sr(e))&&n.limitType===e.limitType}function Pz(n){return`${pl(sr(n))}|lt:${n.limitType}`}function _D(n){return`Query(target=${function Epe(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Du(r.value)}`;var r}).join(", ")}]`),Bf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Du(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Du(t)).join(",")),`Target(${e})`}(sr(n))}; limitType=${n.limitType})`}function yD(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):P.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=xz(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,xu(t),r)||t.endAt&&!function(i,s,o){const a=xz(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,xu(t),r)));var t,r}function Oz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nz(n){return(e,t)=>{let r=!1;for(const i of xu(n)){const s=kpe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function kpe(n,e,t){const r=n.field.isKeyField()?P.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return null!==a&&null!==l?$o(a,l):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}function Fz(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function Lz(n){return{integerValue:""+n}}function Bz(n,e){return _z(e)?Lz(e):Fz(n,e)}class Gy{constructor(){this._=void 0}}function Rpe(n,e,t){return n instanceof Mu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof gl?Vz(n,e):n instanceof ml?jz(n,e):function(r,i){const s=Uz(r,i),o=Hz(s)+Hz(r.yt);return fD(s)&&fD(r.yt)?Lz(o):Fz(r.It,o)}(n,e)}function Ppe(n,e,t){return n instanceof gl?Vz(n,e):n instanceof ml?jz(n,e):t}function Uz(n,e){return n instanceof ku?fD(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Mu extends Gy{}class gl extends Gy{constructor(e){super(),this.elements=e}}function Vz(n,e){const t=$z(e);for(const r of n.elements)t.some(i=>Xi(i,r))||t.push(r);return{arrayValue:{values:t}}}class ml extends Gy{constructor(e){super(),this.elements=e}}function jz(n,e){let t=$z(e);for(const r of n.elements)t=t.filter(i=>!Xi(i,r));return{arrayValue:{values:t}}}class ku extends Gy{constructor(e,t){super(),this.It=e,this.yt=t}}function Hz(n){return Et(n.integerValue||n.doubleValue)}function $z(n){return jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wf{constructor(e,t){this.field=e,this.transform=t}}class Npe{constructor(e,t){this.version=e,this.transformResults=t}}class ct{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ct}static exists(e){return new ct(void 0,e)}static updateTime(e){return new ct(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ky(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yy{}function zz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pu(n.key,ct.none()):new Ru(n.key,n.data,ct.none());{const t=n.data,r=vn.empty();let i=new ze(bt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Fs(n.key,r,new xr(i.toArray()),ct.none())}}function Fpe(n,e,t){n instanceof Ru?function(r,i,s){const o=r.value.clone(),a=Gz(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Fs?function(r,i,s){if(!Ky(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Gz(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(qz(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qf(n,e,t,r){return n instanceof Ru?function(i,s,o,a){if(!Ky(i.precondition,s))return o;const l=i.value.clone(),c=Kz(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fs?function(i,s,o,a){if(!Ky(i.precondition,s))return o;const l=Kz(i.fieldTransforms,a,s),c=s.data;return c.setAll(qz(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(n,e,t,r):(o=t,Ky(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Lpe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Uz(r.transform,i||null);null!=s&&(null===t&&(t=vn.empty()),t.set(r.field,s))}return t||null}function Wz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Iu(t,r,(i,s)=>function Ope(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof gl&&r instanceof gl||t instanceof ml&&r instanceof ml?Iu(t.elements,r.elements,Xi):t instanceof ku&&r instanceof ku?Xi(t.yt,r.yt):t instanceof Mu&&r instanceof Mu);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ru extends Yy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fs extends Yy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gz(n,e,t){const r=new Map;J(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ppe(o,a,t[i]))}return r}function Kz(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Rpe(s,o,e))}return r}class Pu extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vD extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bpe{constructor(e){this.count=e}}var Ut,ke;function Yz(n){switch(n){default:return H();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Qz(n){if(void 0===n)return kt("GRPC error has no .code"),w.UNKNOWN;switch(n){case Ut.OK:return w.OK;case Ut.CANCELLED:return w.CANCELLED;case Ut.UNKNOWN:return w.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return w.INTERNAL;case Ut.UNAVAILABLE:return w.UNAVAILABLE;case Ut.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Ut.NOT_FOUND:return w.NOT_FOUND;case Ut.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Ut.ABORTED:return w.ABORTED;case Ut.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Ut.DATA_LOSS:return w.DATA_LOSS;default:return H()}}(ke=Ut||(Ut={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pz(this.inner)}size(){return this.innerSize}}const Upe=new wt(P.comparator);function or(){return Upe}const Xz=new wt(P.comparator);function Gf(...n){let e=Xz;for(const t of n)e=e.insert(t.key,t);return e}function Zz(n){let e=Xz;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zi(){return Kf()}function Jz(){return Kf()}function Kf(){return new Wo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vpe=new wt(P.comparator),jpe=new ze(P.comparator);function ue(...n){let e=jpe;for(const t of n)e=e.add(t);return e}const Hpe=new ze(se);function Qy(){return Hpe}class Yf{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Yf(Q.min(),r,Qy(),or(),ue())}}class Qf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qf(Qt.EMPTY_BYTE_STRING,t,ue(),ue(),ue())}}class Xy{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class eW{constructor(e,t){this.targetId=e,this.At=t}}class tW{constructor(e,t,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nW{constructor(){this.Rt=0,this.bt=iW(),this.Pt=Qt.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=ue(),t=ue(),r=ue();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new Qf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=iW()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class $pe{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=or(),this.qt=rW(),this.Kt=new ze(se)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(zy(s))if(0===r){const o=new P(s.path);this.jt(t,o,nt.newNoDocument(o,Q.min()))}else J(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&zy(a.target)){const l=new P(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,nt.newNoDocument(l,e))}s.Dt&&(t.set(o,s.xt()),s.Nt())}});let r=ue();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||2===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Yf(e,t,this.Kt,this.Ut,r);return this.Ut=or(),this.qt=rW(),this.Kt=new ze(se),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new nW,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ze(se),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||x("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nW),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rW(){return new wt(P.comparator)}function iW(){return new wt(P.comparator)}const zpe={asc:"ASCENDING",desc:"DESCENDING"},Wpe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qpe{constructor(e,t){this.databaseId=e,this.gt=t}}function Xf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sW(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Gpe(n,e){return Xf(n,e.toTimestamp())}function on(n){return J(!!n),Q.fromTimestamp(function(e){const t=Vo(e);return new lt(t.seconds,t.nanos)}(n))}function bD(n,e){return(t=n,new Me(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oW(n){const e=Me.fromString(n);return J(gW(e)),e}function Zf(n,e){return bD(n.databaseId,e.path)}function Ji(n,e){const t=oW(e);if(t.get(1)!==n.databaseId.projectId)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new P(lW(t))}function wD(n,e){return bD(n.databaseId,e)}function aW(n){const e=oW(n);return 4===e.length?Me.emptyPath():lW(e)}function Jf(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lW(n){return J(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cW(n,e,t){return{name:Zf(n,e),fields:t.value.mapValue.fields}}function uW(n,e,t){const r=Ji(n,e.name),i=on(e.updateTime),s=new vn({mapValue:{fields:e.fields}}),o=nt.newFoundDocument(r,i,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function ep(n,e){let t;if(e instanceof Ru)t={update:cW(n,e.key,e.value)};else if(e instanceof Pu)t={delete:Zf(n,e.key)};else if(e instanceof Fs)t={update:cW(n,e.key,e.data),updateMask:nge(e.fieldMask)};else{if(!(e instanceof vD))return H();t={verify:Zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Mu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ml)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ku)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Gpe(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:H()),t;var i}function ED(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ct.updateTime(on(i.updateTime)):void 0!==i.exists?ct.exists(i.exists):ct.none():ct.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;"setToServerValue"in o?(J("REQUEST_TIME"===o.setToServerValue),a=new Mu):"appendMissingElements"in o?a=new gl(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new ml(o.removeAllFromArray.values||[]):"increment"in o?a=new ku(s,o.increment):H();const l=bt.fromServerFormat(o.fieldPath);return new Wf(l,a)}(n,i)):[];var i;if(e.update){const i=Ji(n,e.update.name),s=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new xr((e.updateMask.fieldPaths||[]).map(c=>bt.fromServerFormat(c)));return new Fs(i,s,o,t,r)}return new Ru(i,s,t,r)}if(e.delete){const i=Ji(n,e.delete);return new Pu(i,t)}if(e.verify){const i=Ji(n,e.verify);return new vD(i,t)}return H()}function dW(n,e){return{documents:[wD(n,e.path)]}}function hW(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0===l.length)return;const c=l.map(u=>function(d){if("=="===d.op){if(bz(d.value))return{unaryFilter:{field:Ou(d.field),op:"IS_NAN"}};if(vz(d.value))return{unaryFilter:{field:Ou(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(bz(d.value))return{unaryFilter:{field:Ou(d.field),op:"IS_NOT_NAN"}};if(vz(d.value))return{unaryFilter:{field:Ou(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(d.field),op:Jpe(d.op),value:d.value}}}(u));return 1===c.length?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:Ou((u=c).field),direction:Zpe(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(c=e.limit,n.gt||Bf(c)?c:{value:c});var c,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function fW(n){let e=aW(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){J(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=pW(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new Su(Nu((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,Bf(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new zo((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new zo(u.values||[],!u.before)}(t.endAt)),kz(e,i,o,s,a,"F",l,c)}function pW(n){return n?void 0!==n.unaryFilter?[tge(n)]:void 0!==n.fieldFilter?[ege(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>pW(e)).reduce((e,t)=>e.concat(t)):H():[]}function Zpe(n){return zpe[n]}function Jpe(n){return Wpe[n]}function Ou(n){return{fieldPath:n.canonicalString()}}function Nu(n){return bt.fromServerFormat(n.fieldPath)}function ege(n){return bn.create(Nu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}function tge(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nu(n.unaryFilter.field);return bn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nu(n.unaryFilter.field);return bn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nu(n.unaryFilter.field);return bn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nu(n.unaryFilter.field);return bn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return H()}}function nge(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gW(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function jn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mW(e)),e=rge(n.get(t),e);return mW(e)}function rge(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function mW(n){return n+"\x01\x01"}function es(n){const e=n.length;if(J(e>=2),2===e)return J("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Me.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&H(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:H()}s=o+2}return new Me(r)}const _W=["userId","batchId"];function Zy(n,e){return[n,jn(e)]}function yW(n,e,t){return[n,jn(e),t]}const ige={},sge=["prefixPath","collectionGroup","readTime","documentId"],oge=["prefixPath","collectionGroup","documentId"],age=["collectionGroup","readTime","prefixPath","documentId"],lge=["canonicalId","targetId"],cge=["targetId","path"],uge=["path","targetId"],dge=["collectionId","parent"],hge=["indexId","uid"],fge=["uid","sequenceNumber"],pge=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gge=["indexId","uid","orderedDocumentKey"],mge=["userId","collectionPath","documentId"],_ge=["userId","collectionPath","largestBatchId"],yge=["userId","collectionGroup","largestBatchId"],vW=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vge=[...vW,"documentOverlays"],bW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wW=bW,bge=[...wW,"indexConfiguration","indexState","indexEntries"];class CD extends dz{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function an(n,e){const t=O(n);return wi.O(t.ie,e)}class ID{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Fpe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Jz();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=zz(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Iu(this.mutations,e.mutations,(t,r)=>Wz(t,r))&&Iu(this.baseMutations,e.baseMutations,(t,r)=>Wz(t,r))}}class TD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length);let i=Vpe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new TD(e,t,r,i)}}class DD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qo{constructor(e,t,r,i,s=Q.min(),o=Q.min(),a=Qt.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class EW{constructor(e){this.re=e}}function CW(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zf(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Xf(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_l(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:t.path.toArray(),version:_l(e.version)}}var i,s;return r}function Jy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _l(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yl(n){const e=new lt(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function vl(n,e){const t=(e.baseMutations||[]).map(s=>ED(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>ED(n.re,s)),i=lt.fromMillis(e.localWriteTimeMs);return new ID(e.batchId,i,t,r)}function tp(n){const e=yl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?yl(n.lastLimboFreeSnapshotVersion):Q.min();let r;var i;return void 0!==n.query.documents?(J(1===(i=n.query).documents.length),r=sr(Au(aW(i.documents[0])))):r=sr(fW(n.query)),new qo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Qt.fromBase64String(n.resumeToken))}function IW(n,e){const t=_l(e.snapshotVersion),r=_l(e.lastLimboFreeSnapshotVersion);let i;i=zy(e.target)?dW(n.re,e.target):hW(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function SD(n){const e=fW({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qy(e,e.limit,"L"):e}function AD(n,e){return new DD(e.largestBatchId,ED(n.re,e.overlayMutation))}function TW(n,e){const t=e.path.lastSegment();return[n,jn(e.path.popLast()),t]}function DW(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:_l(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ege{getBundleMetadata(e,t){return SW(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:yl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return SW(e).put({bundleId:(r=t).id,createTime:_l(on(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AW(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:SD(i.bundledQuery),readTime:yl(i.readTime)};var i})}saveNamedQuery(e,t){return AW(e).put({name:(r=t).name,readTime:_l(on(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SW(n){return an(n,"bundles")}function AW(n){return an(n,"namedQueries")}class ev{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ev(e,t.uid||"")}getOverlay(e,t){return np(e).get(TW(this.userId,t)).next(r=>r?AD(this.It,r):null)}getOverlays(e,t){const r=Zi();return b.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new DD(t,o);i.push(this.ue(e,a))}),b.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(jn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(np(e).Y("collectionPathOverlayIndex",a))}),b.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Zi(),s=jn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return np(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=AD(this.It,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Zi();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return np(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=AD(this.It,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(e,t){return np(e).put(function(r,i,s){const[o,a,l]=TW(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ep(r.re,s.mutation)}}(this.It,this.userId,t))}}function np(n){return an(n,"documentOverlays")}class bl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Uf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(dl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?wz(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):H()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),P.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Cge(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xW(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=Cge(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}bl.Te=new bl;class Ige{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=xW(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=xW(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Tge{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Dge{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class rp{constructor(){this.Be=new Ige,this.Le=new Tge(this.Be),this.Ue=new Dge(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class wl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wl(this.indexId,this.documentKey,this.arrayValue,r)}}function El(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MW(n.arrayValue,e.arrayValue),0!==t?t:(t=MW(n.directionalValue,e.directionalValue),0!==t?t:P.comparator(n.documentKey,e.documentKey)))}function MW(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Sge{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=aD(e);if(void 0!==t&&!this.ze(t))return!1;const r=ll(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const o=r[i];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Age{constructor(){this.Ye=new xD}addToCollectionParentIndex(e,t){return this.Ye.add(t),b.resolve()}getCollectionParents(e,t){return b.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return b.resolve()}deleteFieldIndex(e,t){return b.resolve()}getDocumentsMatchingTarget(e,t){return b.resolve(null)}getIndexType(e,t){return b.resolve(0)}getFieldIndexes(e,t){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,t){return b.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,t){return b.resolve(Ar.min())}updateCollectionGroup(e,t,r){return b.resolve()}updateIndexEntries(e,t){return b.resolve()}}class xD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ze(Me.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Me.comparator)).toArray()}}const tv=new Uint8Array(0);class xge{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new xD,this.Ze=new Wo(r=>pl(r),(r,i)=>$f(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:jn(i)};return kW(e).put(s)}return b.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[az(t),""],!1,!0);return kW(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(es(o.parent))}return r})}addFieldIndex(e,t){const r=nv(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=sp(e);return s.next(a=>{o.put(DW(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=nv(e),i=sp(e),s=ip(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ip(e);let i=!0;const s=new Map;return b.forEach(this.tn(t),o=>this.en(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ue();const a=[];return b.forEach(s,(l,c)=>{var u;x("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`} to execute ${pl(t)}`);const d=function(E,T){const k=aD(T);if(void 0===k)return null;for(const V of Wy(E,k.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(E,T){const k=new Map;for(const V of ll(T))for(const ee of Wy(E,V.fieldPath))switch(ee.op){case"==":case"in":k.set(V.fieldPath.canonicalString(),ee.value);break;case"not-in":case"!=":return k.set(V.fieldPath.canonicalString(),ee.value),Array.from(k.values())}return null}(c,l),f=function(E,T){const k=[];let V=!0;for(const ee of ll(T)){const Ye=0===ee.kind?Dz(E,ee.fieldPath,E.startAt):Sz(E,ee.fieldPath,E.startAt);k.push(Ye.value),V&&(V=Ye.inclusive)}return new zo(k,V)}(c,l),p=function(E,T){const k=[];let V=!0;for(const ee of ll(T)){const Ye=0===ee.kind?Sz(E,ee.fieldPath,E.endAt):Dz(E,ee.fieldPath,E.endAt);k.push(Ye.value),V&&(V=Ye.inclusive)}return new zo(k,V)}(c,l),m=this.nn(l,c,f),_=this.nn(l,c,p),v=this.sn(l,c,h),y=this.rn(l.indexId,d,m,f.inclusive,_,p.inclusive,v);return b.forEach(y,E=>r.J(E,t.limit).next(T=>{T.forEach(k=>{const V=P.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return b.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const h=t?this.on(t[d/c]):tv,f=this.un(e,h,r[d%c],i),p=this.cn(e,h,s[d%c],o),m=a.map(_=>this.un(e,h,_,!0));u.push(...this.createRange(f,p,m))}return u}un(e,t,r,i){const s=new wl(e,P.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new wl(e,P.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new Sge(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;return b.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(o){let a=new ze(bt.comparator),l=!1;for(const c of o.filters){const u=c;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const c of o.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new rp;for(const i of ll(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.qe(i.kind);bl.Te.ce(s,o)}return r.$e()}on(e){const t=new rp;return bl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new rp;return bl.Te.ce(fl(this.databaseId,t),r.qe(function(i){const s=ll(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new rp);let s=0;for(const o of ll(e)){const a=r[s++];for(const l of i)if(this.ln(t,o.fieldPath)&&jf(a))i=this.fn(i,o,a);else{const c=l.qe(o.kind);bl.Te.ce(a,c)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new rp;l.seed(a.$e()),bl.Te.ce(o,l.qe(t.kind)),s.push(l)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof bn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=nv(e),i=sp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return b.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new Nf(u.sequenceNumber,new Ar(yl(u.readTime),new P(es(u.documentKey)),u.largestBatchId)):Nf.empty(),h=c.fields.map(([f,p])=>new Uy(bt.fromServerFormat(f),p));return new By(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:se(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=nv(e),s=sp(e);return this._n(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>b.forEach(a,l=>s.put(DW(l.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return b.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?b.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),b.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.mn(s,l);return c.isEqual(u)?b.resolve():this.gn(e,s,l,c,u)}))))})}yn(e,t,r,i){return ip(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return ip(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ip(e);let s=new ze(El);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(o,a)=>{s=s.add(new wl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(e,t){let r=new ze(El);const i=this.an(t,e);if(null==i)return r;const s=aD(t);if(null!=s){const o=e.data.field(s.fieldPath);if(jf(o))for(const a of o.arrayValue.values||[])r=r.add(new wl(t.indexId,e.key,this.on(a),i))}else r=r.add(new wl(t.indexId,e.key,tv,i));return r}gn(e,t,r,i,s){x("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=Tu(h),m=Tu(f);for(;p||m;){let _=!1,v=!1;if(p&&m){const y=c(p,m);y<0?v=!0:y>0&&(_=!0)}else null!=p?v=!0:_=!0;_?(u(m),m=Tu(f)):v?(d(p),p=Tu(h)):(p=Tu(h),m=Tu(f))}}(i,s,El,a=>{o.push(this.yn(e,t,r,a))},a=>{o.push(this.pn(e,t,r,a))}),b.waitFor(o)}_n(e){let t=1;return sp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>El(o,a)).filter((o,a,l)=>!a||0!==El(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=El(o,e),l=El(o,t);if(0===a)i[0]=e.Ke();else if(a>0&&l<0)i.push(o),i.push(o.Ke());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,tv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,tv,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RW)}getMinOffset(e,t){return b.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||H())).next(RW)}}function kW(n){return an(n,"collectionParents")}function ip(n){return an(n,"indexEntries")}function nv(n){return an(n,"indexConfiguration")}function sp(n){return an(n,"indexState")}function RW(n){J(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ar(e.readTime,e.documentKey,t)}const PW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ar{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OW(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Z({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{J(1===a)}));const c=[];for(const u of t.mutations){const d=yW(e,u.key.path,t.batchId);s.push(i.delete(d)),c.push(u.key)}return b.waitFor(s).next(()=>c)}function rv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw H();e=n.noDocument}return JSON.stringify(e).length}ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(41943040,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);class iv{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){J(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new iv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Go(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Fu(e),o=Go(e);return o.add({}).next(a=>{J("number"==typeof a);const l=new ID(a,t,r,i),c=function(h,f,p){const m=p.baseMutations.map(v=>ep(h.re,v)),_=p.mutations.map(v=>ep(h.re,v));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:m,mutations:_}}(this.It,this.userId,l),u=[];let d=new ze((h,f)=>se(h.canonicalString(),f.canonicalString()));for(const h of i){const f=yW(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,ige))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),b.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Go(e).get(t).next(r=>r?(J(r.userId===this.userId),vl(this.It,r)):null)}Tn(e,t){return this.In[t]?b.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Go(e).Z({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(J(a.batchId>=r),s=vl(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Go(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Go(e).W("userMutationsIndex",t).next(r=>r.map(i=>vl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Fu(e).Z({range:i},(o,a,l)=>{const[c,u,d]=o,h=es(u);if(c===this.userId&&t.path.isEqual(h))return Go(e).get(d).next(f=>{if(!f)throw H();J(f.userId===this.userId),s.push(vl(this.It,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(se);const i=[];return t.forEach(s=>{const o=Zy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Fu(e).Z({range:a},(c,u,d)=>{const[h,f,p]=c,m=es(f);h===this.userId&&s.path.isEqual(m)?r=r.add(p):d.done()});i.push(l)}),b.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Zy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ze(se);return Fu(e).Z({range:o},(l,c,u)=>{const[d,h,f]=l,p=es(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.En(e,a))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Go(e).get(s).next(o=>{if(null===o)throw H();J(o.userId===this.userId),r.push(vl(this.It,o))}))}),b.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OW(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),b.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return b.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Fu(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=es(s[1]);i.push(l)}else a.done()}).next(()=>{J(0===i.length)})})}containsKey(e,t){return NW(e,this.userId,t)}Rn(e){return FW(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function NW(n,e,t){const r=Zy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Fu(n).Z({range:s,X:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Go(n){return an(n,"mutations")}function Fu(n){return an(n,"documentMutations")}function FW(n){return an(n,"mutationQueues")}class Cl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Cl(0)}static vn(){return new Cl(-1)}}class Mge{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Cl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Q.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Lu(e).Z((o,a)=>{const l=tp(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>b.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Lu(e).Z((r,i)=>{const s=tp(i);t(s)})}Vn(e){return LW(e).get("targetGlobalKey").next(t=>(J(null!==t),t))}Sn(e,t){return LW(e).put("targetGlobalKey",t)}Dn(e,t){return Lu(e).put(IW(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=pl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Lu(e).Z({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=tp(a);$f(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ko(e);return t.forEach(o=>{const a=jn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),b.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ko(e);return b.forEach(t,s=>{const o=jn(s.path);return b.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ko(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ko(e);let s=ue();return i.Z({range:r,X:!0},(o,a,l)=>{const c=es(o[1]),u=new P(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=jn(t.path),i=IDBKeyRange.bound([r],[az(r)],!1,!0);let s=0;return Ko(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}se(e,t){return Lu(e).get(t).next(r=>r?tp(r):null)}}function Lu(n){return an(n,"targets")}function LW(n){return an(n,"targetGlobal")}function Ko(n){return an(n,"targetDocuments")}function BW([n,e],[t,r]){const i=se(n,t);return 0===i?se(e,r):i}class kge{constructor(e){this.xn=e,this.buffer=new ze(BW),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BW(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rge{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;x("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,g(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Uo(r)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bo(r)}yield t.Fn(3e5)}))}}class Pge{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return b.resolve(ir.at);const r=new kge(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(PW)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PW):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),sD()<=Ie.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class Oge{constructor(e,t){this.db=e,this.garbageCollector=new Pge(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return sv(e,r)}removeReference(e,t,r){return sv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sv(e,t)}Gn(e,t){return function(r,i){let s=!1;return FW(r).tt(o=>NW(r,o,i).next(a=>(a&&(s=!0),b.resolve(!a)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=t){const l=this.Gn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Q.min()),Ko(e).delete([0,jn(o.path)])))});i.push(l)}}).next(()=>b.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sv(e,t)}Kn(e,t){const r=Ko(e);let i,s=ir.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==ir.at&&t(new P(es(i)),s),s=c,i=l):s=ir.at}).next(()=>{s!==ir.at&&t(new P(es(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sv(n,e){return Ko(n).put((r=n.currentSequenceNumber,{targetId:0,path:jn(e.path),sequenceNumber:r}));var r}class UW{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?b.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nge{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Il(e).put(r)}removeEntry(e,t,r){return Il(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Jy(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Il(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(op(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Il(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(op(t))},(i,s)=>{r={document:this.jn(t,s),size:rv(s)}}).next(()=>r)}getEntries(e,t){let r=or();return this.zn(e,t,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,t){let r=or(),i=new wt(P.comparator);return this.zn(e,t,(s,o)=>{const a=this.jn(s,o);r=r.insert(s,a),i=i.insert(s,rv(o))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return b.resolve();let i=new ze($W);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(op(i.first()),op(i.last())),o=i.getIterator();let a=o.getNext();return Il(e).Z({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=P.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&$W(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(op(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Il(e).W(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=or();for(const l of o){const c=this.jn(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,t,r,i){let s=or();const o=HW(t,r),a=HW(t,Ar.max());return Il(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.jn(P.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new Fge(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jW(e).get("remoteDocumentGlobalKey").next(t=>(J(!!t),t))}Qn(e,t){return jW(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function wge(n,e){let t;if(e.document)t=uW(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=P.fromSegments(e.noDocument.path),i=yl(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=P.fromSegments(e.unknownDocument.path),i=yl(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new lt(r[0],r[1]);return Q.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Q.min()))return r}return nt.newInvalidDocument(e)}}function VW(n){return new Nge(n)}class Fge extends UW{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Wo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ze((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=CW(this.Yn.It,o);i=i.add(s.path.popLast()),r+=rv(l)-a.size,t.push(this.Yn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=CW(this.Yn.It,o.convertToNoDocument(Q.min()));t.push(this.Yn.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),b.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jW(n){return an(n,"remoteDocumentGlobal")}function Il(n){return an(n,"remoteDocumentsV14")}function op(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HW(n,e){const t=e.documentKey.path.toArray();return[n,Jy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $W(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=se(t[s],r[s]),i)return i;return i=se(t.length,r.length),i||(i=se(t[t.length-2],r[r.length-2]),i||se(t[t.length-1],r[r.length-1]))}class Lge{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zW{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&qf(r.mutation,i,xr.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){const i=Zi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Gf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Zi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=or();const o=Kf(),a=Kf();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof Fs)?s=s.insert(c.key,c):void 0!==u&&(o.set(c.key,u.mutation.getFieldMask()),qf(u.mutation,c,u.mutation.getFieldMask(),lt.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new Lge(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Kf();let i=new wt((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||xr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||ue()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Jz();u.forEach(h=>{if(!s.has(h)){const f=zz(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return b.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return P.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):b.resolve(Zi());let a=-1,l=s;return o.next(c=>b.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?b.resolve():this.getBaseDocument(e,u,d).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ue())).next(u=>({batchId:a,changes:Zz(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new P(t)).next(r=>{let i=Gf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Gf();return this.indexManager.getCollectionParents(e,i).next(o=>b.forEach(o,a=>{const l=(c=t,u=a.child(i),new Ns(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((a,l)=>{const c=l.getKey();null===i.get(c)&&(i=i.insert(c,nt.newInvalidDocument(c)))});let o=Gf();return i.forEach((a,l)=>{const c=s.get(a);void 0!==c&&qf(c.mutation,l,xr.empty(),lt.now()),yD(t,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):b.resolve(nt.newInvalidDocument(t))}}class Bge{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return b.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:on(r.createTime)}),b.resolve()}getNamedQuery(e,t){return b.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:SD(r.bundledQuery),readTime:on(r.readTime)}),b.resolve();var r}}class Uge{constructor(){this.overlays=new wt(P.comparator),this.es=new Map}getOverlay(e,t){return b.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zi();return b.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),b.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),b.resolve()}getOverlaysForCollection(e,t,r){const i=Zi(),s=t.length+1,o=new P(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return b.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Zi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Zi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return b.resolve(a)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DD(t,r));let s=this.es.get(t);void 0===s&&(s=ue(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class MD{constructor(){this.ns=new ze(ln.ss),this.rs=new ze(ln.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ln(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ln(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new P(new Me([])),r=new ln(t,e),i=new ln(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new P(new Me([])),r=new ln(t,e),i=new ln(t,e+1);let s=ue();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ln(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ln{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return P.comparator(e.key,t.key)||se(e._s,t._s)}static os(e,t){return se(e._s,t._s)||P.comparator(e.key,t.key)}}class Vge{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ze(ln.ss)}checkEmpty(e){return b.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const o=new ID(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new ln(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(e,t){return b.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ln(t,0),i=new ln(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(se);return t.forEach(i=>{const s=new ln(i,0),o=new ln(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),b.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;P.isDocumentKey(s)||(s=s.child(""));const o=new ln(new P(s),0);let a=new ze(se);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l._s)),!0)},o),b.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){J(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return b.forEach(t.mutations,i=>{const s=new ln(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ln(t,0),i=this.gs.firstAfterOrEqual(r);return b.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return b.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jge{constructor(e){this.Es=e,this.docs=new wt(P.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return b.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=or();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),b.resolve(r)}getAllFromCollection(e,t,r){let i=or();const s=new P(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||lD(cz(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return b.resolve(i)}getAllFromCollectionGroup(e,t,r,i){H()}As(e,t){return b.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hge(this)}getSize(e){return b.resolve(this.size)}}class Hge extends UW{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),b.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class $ge{constructor(e){this.persistence=e,this.Rs=new Wo(t=>pl(t),$f),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.bs=0,this.Ps=new MD,this.targetCount=0,this.vs=Cl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),b.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,b.resolve()}updateTargetData(e,t){return this.Dn(t),b.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),b.waitFor(s).next(()=>i)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return b.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),b.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),b.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),b.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return b.resolve(r)}containsKey(e,t){return b.resolve(this.Ps.containsKey(t))}}class WW{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ir(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new $ge(this),this.indexManager=new Age,this.remoteDocumentCache=new jge(r=>this.referenceDelegate.xs(r)),this.It=new EW(t),this.Ns=new Bge(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uge,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Vge(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);const i=new zge(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Ms(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,t){return b.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class zge extends dz{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.Fs=new MD,this.$s=null}static Bs(e){return new ov(e)}get Ls(){if(this.$s)return this.$s;throw H()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),b.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),b.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),b.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Ls,r=>{const i=P.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return b.or([()=>b.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Wge{constructor(e){this.It=e}$(e,t,r,i){const s=new Vy("createOrUpgrade",t);var a;r<1&&i>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_W,{unique:!0}),a.createObjectStore("documentMutations"),qW(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=b.resolve();return r<3&&i>=3&&(0!==r&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),qW(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_W,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return b.waitFor(d)})}(e,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.qs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:mge});l.createIndex("collectionPathOverlayIndex",_ge,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",yge,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:sge});l.createIndex("documentKeyIndex",oge),l.createIndex("collectionGroupIndex",age)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:hge}).createIndex("sequenceNumberIndex",fge,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:pge}).createIndex("documentKeyIndex",gge,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=rv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>b.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>b.forEach(a,l=>{J(l.userId===s.userId);const c=vl(this.It,l);return OW(e,s.userId,c).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const l=new Me(o),c=[0,jn(l)];s.push(t.get(c).next(u=>u?b.resolve():t.put({targetId:0,path:jn(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>b.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:dge});const r=t.store("collectionParents"),i=new xD,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:jn(l)})}};return t.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Me(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,a,l],c)=>{const u=es(a);return s(u.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=tp(i),o=IW(this.It,s);return t.put(o)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(c=o,c.document?new P(Me.fromString(c.document.name).popFirst(5)):c.noDocument?P.fromSegments(c.noDocument.path):c.unknownDocument?P.fromSegments(c.unknownDocument.path):H()).path.toArray();var c;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>b.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=VW(this.It),s=new WW(ov.Bs,this.It.re);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:ue();vl(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),b.forEach(a,(l,c)=>{const u=new rn(c),d=ev.oe(this.It,u),h=s.getIndexManager(u),f=iv.oe(u,this.It,h,s.referenceDelegate);return new zW(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new CD(t,ir.at),l).next()})})}}function qW(n){n.createObjectStore("targetDocuments",{keyPath:cge}).createIndex("documentTargetsIndex",uge,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lge,{unique:!0}),n.createObjectStore("targetGlobal")}const kD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RD{constructor(e,t,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=h=>Promise.resolve(),!RD.C())throw new D(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Oge(this,i),this.ii=t+"main",this.It=new EW(l),this.ri=new wi(this.ii,this.Xs,new Wge(this.It)),this.Cs=new Mge(this.referenceDelegate,this.It),this.remoteDocumentCache=VW(this.It),this.Ns=new Ege,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(w.FAILED_PRECONDITION,kD);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ir(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=g(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=g(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(g(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>av(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Uo(e))return x("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return ap(e).get("owner").next(t=>b.resolve(this.mi(t)))}gi(e){return av(e).delete(this.clientId)}yi(){var e=this;return g(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=an(r,"clientMetadata");return i.W().next(s=>{const o=e.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return b.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?b.resolve(!0):ap(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new D(w.FAILED_PRECONDITION,kD);return!1}}return!(!this.networkEnabled||!this.inForeground)||av(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&x("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return g(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CD(t,ir.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>av(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return iv.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xge(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ev.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){x("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?bge:14===o?wW:13===o?bW:12===o?vge:11===o?vW:void H();var o;let a;return this.ri.runTransaction(e,i,s,l=>(a=new CD(l,this.Ss?this.Ss.next():ir.at),"readwrite-primary"===t?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new D(w.FAILED_PRECONDITION,uz);return r(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return ap(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new D(w.FAILED_PRECONDITION,kD)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ap(e).put("owner",t)}static C(){return wi.C()}_i(e){const t=ap(e);return t.get("owner").next(r=>this.mi(r)?(x("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):b.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(kt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function ete(){return!function Xee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return x("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){kt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ap(n){return an(n,"owner")}function av(n){return an(n,"clientMetadata")}function PD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class OD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=ue(),i=ue();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new OD(e,t.fromCache,r,i)}}class GW{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Mi(e,t,i,r)).next(s=>s||this.Oi(e,t))}ki(e,t){if(Rz(t))return b.resolve(null);let r=sr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=qy(t,null,"F"),r=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,qy(t,null,"F")):this.Bi(e,c,t,l)}))})))}Mi(e,t,r,i){return Rz(t)||i.isEqual(Q.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Oi(e,t):(sD()<=Ie.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_D(t)),this.Bi(e,o,t,lz(i,-1)))})}Fi(e,t){let r=new ze(Nz(e));return t.forEach((i,s)=>{yD(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,t){return sD()<=Ie.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",_D(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ar.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class qge{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new wt(se),this.qi=new Wo(s=>pl(s),$f),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zW(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KW(n,e,t,r){return new qge(n,e,t,r)}function YW(n,e){return ND.apply(this,arguments)}function ND(){return ND=g(function*(n,e){const t=O(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ue();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}),ND.apply(this,arguments)}function Gge(n,e){const t=O(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=b.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);J(null!==m),p.version.compareTo(m)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ue();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function QW(n){const e=O(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Kge(n,e){const t=O(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(t.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,m,_;e.targetMismatches.has(d)?f=f.withResumeToken(Qt.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),m=f,_=u,(0===(p=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(t.Cs.updateTargetData(s,f))});let l=or(),c=ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(XW(s,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!r.isEqual(Q.min())){const u=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return b.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ui=i,s))}function XW(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=or();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:i}})}function Yge(n,e){const t=O(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bu(n,e){const t=O(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,b.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new qo(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Uu(n,e,t){return FD.apply(this,arguments)}function FD(){return FD=g(function*(n,e,t){const r=O(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Uo(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),FD.apply(this,arguments)}function lv(n,e,t){const r=O(n);let i=Q.min(),s=ue();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=O(a),d=u.qi.get(c);return void 0!==d?b.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,c)}(r,o,sr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:ue())).next(a=>(eq(r,Oz(e),a),{documents:a,Hi:s})))}function ZW(n,e){const t=O(n),r=O(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(o=>o?o.target:null))}function JW(n,e){const t=O(n),r=t.Ki.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,lz(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eq(t,e,i),i))}function eq(n,e,t){let r=Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function LD(){return LD=g(function*(n,e,t,r){const i=O(n);let s=ue(),o=or();for(const c of t){const u=e.Ji(c.metadata.name);c.document&&(s=s.add(u));const d=e.Yi(c);d.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(u,d)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),l=yield Bu(i,(c=r,sr(Au(Me.fromString(`__bundle__/docs/${c}`)))));var c;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>XW(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Cs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Cs.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Wi,u.zi)).next(()=>u.Wi)))}),LD.apply(this,arguments)}function Xge(n,e){return BD.apply(this,arguments)}function BD(){return BD=g(function*(n,e,t=ue()){const r=yield Bu(n,sr(SD(e.bundledQuery))),i=O(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=on(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const a=r.withResumeToken(Qt.EMPTY_BYTE_STRING,o);return i.Ui=i.Ui.insert(a.targetId,a),i.Cs.updateTargetData(s,a).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),BD.apply(this,arguments)}function tq(n,e){return`firestore_clients_${n}_${e}`}function nq(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function UD(n,e){return`firestore_targets_${n}_${e}`}class cv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new D(i.error.code,i.error.message))),o?new cv(e,t,i.state,s):(kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new D(r.error.code,r.error.message))),s?new lp(e,r.state,i):(kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Qy();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=_z(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new uv(e,s):(kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class VD{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new VD(t.clientId,t.onlineState):(kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jD{constructor(){this.activeTargetIds=Qy()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HD{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new wt(se),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=tq(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jD),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return g(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(tq(e.persistenceKey,i));if(s){const o=uv.Zi(i,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(UD(this.persistenceKey,e));if(r){const i=lp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UD(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return x("SharedClientState","READ",e,t),t}setItem(e,t){x("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){x("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(x("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(g(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let o=ir.at;if(null!=s)try{const a=JSON.parse(s);J("number"==typeof a),o=a}catch(a){kt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(r.newValue);i!==ir.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Or(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new cv(this.currentUser,e,t,r),s=nq(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=nq(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=UD(this.persistenceKey,e),s=new lp(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return uv.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return cv.Zi(new rn(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return lp.Zi(i,t)}yr(e){return VD.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return g(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);x("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Qy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class rq{constructor(){this.Lr=new jD,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zge{qr(e){}shutdown(){}}class iq{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Jge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class eme{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class tme extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const o=this.ao(e,t);x("RestConnection","Sending: ",o,r);const a={};return this.ho(a,i,s),this.lo(e,o,a,r).then(l=>(x("RestConnection","Received: ",l),l),l=>{throw al("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}fo(e,t,r,i,s,o){return this.co(e,t,r,i,s)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,t){return`${this.oo}/v1/${t}:${Jge[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((s,o)=>{const a=new Jfe;a.listenOnce(Qfe.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case iD.NO_ERROR:const c=a.getResponseJson();x("Connection","XHR received:",JSON.stringify(c)),s(c);break;case iD.TIMEOUT:x("Connection",'RPC "'+e+'" timed out'),o(new D(w.DEADLINE_EXCEEDED,"Request time out"));break;case iD.HTTP_ERROR:const u=a.getStatus();if(x("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(p)>=0?p:w.UNKNOWN}(d.status);o(new D(h,d.message))}else o(new D(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(w.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{x("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(t,"POST",l,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Kfe(),o=Yfe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Zfe({})),this.ho(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;const l=i.join("");x("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new eme({Hr:p=>{d?x("Connection","Not sending because WebChannel is closed:",p):(u||(x("Connection","Opening WebChannel transport."),c.open(),u=!0),x("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,m,_)=>{p.listen(m,v=>{try{_(v)}catch(y){setTimeout(()=>{throw y},0)}})};return f(c,Ly.EventType.OPEN,()=>{d||x("Connection","WebChannel transport opened.")}),f(c,Ly.EventType.CLOSE,()=>{d||(d=!0,x("Connection","WebChannel transport closed"),h.io())}),f(c,Ly.EventType.ERROR,p=>{d||(d=!0,al("Connection","WebChannel transport errored:",p),h.io(new D(w.UNAVAILABLE,"The operation could not be completed")))}),f(c,Ly.EventType.MESSAGE,p=>{var m;if(!d){const _=p.data[0];J(!!_);const v=_,y=v.error||(null===(m=v[0])||void 0===m?void 0:m.error);if(y){x("Connection","WebChannel received error:",y);const E=y.status;let T=function(V){const ee=Ut[V];if(void 0!==ee)return Qz(ee)}(E),k=y.message;void 0===T&&(T=w.INTERNAL,k="Unknown error status: "+E+" with message "+y.message),d=!0,h.io(new D(T,k)),c.close()}else x("Connection","WebChannel received:",_),h.ro(_)}}),f(o,Xfe.STAT_EVENT,p=>{p.stat===nz.PROXY?x("Connection","Detected buffering proxy"):p.stat===nz.NOPROXY&&x("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function sq(){return"undefined"!=typeof window?window:null}function dv(){return"undefined"!=typeof document?document:null}function cp(n){return new qpe(n,!0)}class $D{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oq{constructor(e,t,r,i,s,o,a,l){this.Hs=e,this.Po=r,this.vo=i,this.Vo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $D(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return g(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return g(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return g(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===w.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new D(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao(g(function*(){e.state=0,e.start()}))}Qo(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nme extends oq{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.It=s}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Ype(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:H(),i=e.targetChange.targetIds||[],s=function(l,c){return l.gt?(J(void 0===c||"string"==typeof c),Qt.fromBase64String(c||"")):(J(void 0===c||c instanceof Uint8Array),Qt.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?w.UNKNOWN:Qz(l.code);return new D(c,l.message||"")}(o);t=new tW(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ji(n,r.document.name),s=on(r.document.updateTime),o=new vn({mapValue:{fields:r.document.fields}}),a=nt.newFoundDocument(i,s,o);t=new Xy(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=Ji(n,r.document),s=r.readTime?on(r.readTime):Q.min(),o=nt.newNoDocument(i,s);t=new Xy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ji(n,r.document);t=new Xy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return H();{const r=e.filter,s=new Bpe(r.count||0);t=new eW(r.targetId,s)}}var l;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Q.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?on(s.readTime):Q.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Jf(this.It),t.addTarget=function(i,s){let o;const a=s.target;return o=zy(a)?{documents:dW(i,a)}:{query:hW(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=sW(i,s.resumeToken):s.snapshotVersion.compareTo(Q.min())>0&&(o.readTime=Xf(i,s.snapshotVersion.toTimestamp())),o}(this.It,e);const r=function Xpe(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Jf(this.It),t.removeTarget=e,this.Bo(t)}}class rme extends oq{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Qpe(n,e){return n&&n.length>0?(J(void 0!==e),n.map(t=>function(r,i){let s=on(r.updateTime?r.updateTime:i);return s.isEqual(Q.min())&&(s=on(i)),new Npe(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.Zo(r,t)}return J(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Jf(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ep(this.It,r))};this.Bo(t)}}class ime extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.Vo.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(w.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.Vo.fo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(w.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class sme{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kt(t),this.ou=!1):x("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ome{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{r.enqueueAndForget(g(function*(){var l;Yo(o)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(l=g(function*(c){const u=O(c);u._u.add(4),yield Vu(u),u.gu.set("Unknown"),u._u.delete(4),yield up(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.gu=new sme(r,i)}}function up(n){return zD.apply(this,arguments)}function zD(){return zD=g(function*(n){if(Yo(n))for(const e of n.wu)yield e(!0)}),zD.apply(this,arguments)}function Vu(n){return WD.apply(this,arguments)}function WD(){return WD=g(function*(n){for(const e of n.wu)yield e(!1)}),WD.apply(this,arguments)}function hv(n,e){const t=O(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),KD(t)?GD(t):Hu(t).ko()&&qD(t,e))}function dp(n,e){const t=O(n),r=Hu(t);t.du.delete(e),r.ko()&&aq(t,e),0===t.du.size&&(r.ko()?r.Fo():Yo(t)&&t.gu.set("Unknown"))}function qD(n,e){n.yu.Ot(e.targetId),Hu(n).zo(e)}function aq(n,e){n.yu.Ot(e),Hu(n).Ho(e)}function GD(n){n.yu=new $pe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Hu(n).start(),n.gu.uu()}function KD(n){return Yo(n)&&!Hu(n).No()&&n.du.size>0}function Yo(n){return 0===O(n)._u.size}function lq(n){n.yu=void 0}function ame(n){return YD.apply(this,arguments)}function YD(){return YD=g(function*(n){n.du.forEach((e,t)=>{qD(n,e)})}),YD.apply(this,arguments)}function lme(n,e){return QD.apply(this,arguments)}function QD(){return QD=g(function*(n,e){lq(n),KD(n)?(n.gu.hu(e),GD(n)):n.gu.set("Unknown")}),QD.apply(this,arguments)}function cme(n,e,t){return XD.apply(this,arguments)}function XD(){return XD=g(function*(n,e,t){if(n.gu.set("Online"),e instanceof tW&&2===e.state&&e.cause)try{yield(r=g(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fv(n,r)}else if(e instanceof Xy?n.yu.Gt(e):e instanceof eW?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Q.min()))try{const r=yield QW(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(l);c&&i.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.du.get(a);if(!l)return;i.du.set(a,l.withResumeToken(Qt.EMPTY_BYTE_STRING,l.snapshotVersion)),aq(i,a);const c=new qo(l.target,a,1,l.sequenceNumber);qD(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){x("RemoteStore","Failed to raise snapshot:",r),yield fv(n,r)}var r}),XD.apply(this,arguments)}function fv(n,e,t){return ZD.apply(this,arguments)}function ZD(){return ZD=g(function*(n,e,t){if(!Uo(e))throw e;n._u.add(1),yield Vu(n),n.gu.set("Offline"),t||(t=()=>QW(n.localStore)),n.asyncQueue.enqueueRetryable(g(function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield up(n)}))}),ZD.apply(this,arguments)}function cq(n,e){return e().catch(t=>fv(n,t,e))}function ju(n){return JD.apply(this,arguments)}function JD(){return JD=g(function*(n){const e=O(n),t=Qo(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;ume(e);)try{const i=yield Yge(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,dme(e,i)}catch(i){yield fv(e,i)}uq(e)&&dq(e)}),JD.apply(this,arguments)}function ume(n){return Yo(n)&&n.fu.length<10}function dme(n,e){n.fu.push(e);const t=Qo(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function uq(n){return Yo(n)&&!Qo(n).No()&&n.fu.length>0}function dq(n){Qo(n).start()}function hme(n){return eS.apply(this,arguments)}function eS(){return eS=g(function*(n){Qo(n).eu()}),eS.apply(this,arguments)}function fme(n){return tS.apply(this,arguments)}function tS(){return tS=g(function*(n){const e=Qo(n);for(const t of n.fu)e.Xo(t.mutations)}),tS.apply(this,arguments)}function pme(n,e,t){return nS.apply(this,arguments)}function nS(){return nS=g(function*(n,e,t){const r=n.fu.shift(),i=TD.from(r,e,t);yield cq(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ju(n)}),nS.apply(this,arguments)}function gme(n,e){return rS.apply(this,arguments)}function rS(){return rS=g(function*(n,e){var t;e&&Qo(n).Yo&&(yield(t=g(function*(r,i){if(Yz(s=i.code)&&s!==w.ABORTED){const o=r.fu.shift();Qo(r).Oo(),yield cq(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ju(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),uq(n)&&dq(n)}),rS.apply(this,arguments)}function hq(n,e){return iS.apply(this,arguments)}function iS(){return iS=g(function*(n,e){const t=O(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=Yo(t);t._u.add(3),yield Vu(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield up(t)}),iS.apply(this,arguments)}function sS(n,e){return oS.apply(this,arguments)}function oS(){return oS=g(function*(n,e){const t=O(n);e?(t._u.delete(2),yield up(t)):e||(t._u.add(2),yield Vu(t),t.gu.set("Unknown"))}),oS.apply(this,arguments)}function Hu(n){return n.pu||(n.pu=function(e,t,r){const i=O(e);return i.su(),new nme(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:ame.bind(null,n),Zr:lme.bind(null,n),Wo:cme.bind(null,n)}),n.wu.push(function(){var e=g(function*(t){t?(n.pu.Oo(),KD(n)?GD(n):n.gu.set("Unknown")):(yield n.pu.stop(),lq(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Qo(n){return n.Iu||(n.Iu=function(e,t,r){const i=O(e);return i.su(),new rme(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:hme.bind(null,n),Zr:gme.bind(null,n),tu:fme.bind(null,n),Zo:pme.bind(null,n)}),n.wu.push(function(){var e=g(function*(t){t?(n.Iu.Oo(),yield ju(n)):(yield n.Iu.stop(),n.fu.length>0&&(x("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class aS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new aS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $u(n,e){if(kt("AsyncQueue",`${e}: ${n}`),Uo(n))return new D(w.UNAVAILABLE,`${e}: ${n}`);throw n}class zu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||P.comparator(t.key,r.key):(t,r)=>P.comparator(t.key,r.key),this.keyedMap=Gf(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new zu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class fq{constructor(){this.Tu=new wt(P.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):H():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wu{constructor(e,t,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Wu(e,t,zu.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mme{constructor(){this.Au=void 0,this.listeners=[]}}class _me{constructor(){this.queries=new Wo(e=>Pz(e),zf),this.onlineState="Unknown",this.Ru=new Set}}function lS(n,e){return cS.apply(this,arguments)}function cS(){return cS=g(function*(n,e){const t=O(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new mme),i)try{s.Au=yield t.onListen(r)}catch(o){const a=$u(o,`Initialization of query '${_D(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&hS(t)}),cS.apply(this,arguments)}function uS(n,e){return dS.apply(this,arguments)}function dS(){return dS=g(function*(n,e){const t=O(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dS.apply(this,arguments)}function yme(n,e){const t=O(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&hS(t)}function vme(n,e,t){const r=O(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function hS(n){n.Ru.forEach(e=>{e.next()})}class fS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class bme{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class pq{constructor(e){this.It=e}Ji(e){return Ji(this.It,e)}Yi(e){return e.metadata.exists?uW(this.It,e.document,!1):nt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return on(e)}}class wme{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gq(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Me.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new pq(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ue()).add(s);t.set(o,a)}}return t}complete(){var e=this;return g(function*(){const t=yield function Qge(n,e,t,r){return LD.apply(this,arguments)}(e.localStore,new pq(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield Xge(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function gq(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mq{constructor(e){this.key=e}}class _q{constructor(e){this.key=e}}class yq{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=ue(),this.mutatedKeys=ue(),this.Ku=Nz(e),this.Gu=new zu(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new fq,i=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=yD(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),_=!0):this.zu(h,f)||(r.track({type:2,doc:f}),_=!0,(l&&this.Ku(f,l)>0||c&&this.Ku(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Gu:o,Wu:r,$i:a,mutatedKeys:s}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(d)-f(h)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(r);const o=t?this.Ju():[],a=0===this.qu.size&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,0!==s.length||l?{snapshot:new Wu(this.query,e.Gu,i,s,e.mutatedKeys,0===a,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new fq,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=ue(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new _q(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new mq(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=ue();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Wu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Eme{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cme{constructor(e){this.key=e,this.ec=!1}}class Ime{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Wo(a=>Pz(a),zf),this.ic=new Map,this.rc=new Set,this.oc=new wt(P.comparator),this.uc=new Map,this.cc=new MD,this.ac={},this.hc=new Map,this.lc=Cl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Tme(n,e){return pS.apply(this,arguments)}function pS(){return pS=g(function*(n,e){const t=LS(n);let r,i;const s=t.sc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const o=yield Bu(t.localStore,sr(e));t.isPrimaryClient&&hv(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield gS(t,e,r,"current"===a)}return i}),pS.apply(this,arguments)}function gS(n,e,t,r){return mS.apply(this,arguments)}function mS(){return mS=g(function*(n,e,t,r){n.dc=(u,d,h)=>{return(f=g(function*(p,m,_,v){let y=m.view.ju(_);y.$i&&(y=yield lv(p.localStore,m.query,!1).then(({documents:k})=>m.view.ju(k,y)));const E=v&&v.targetChanges.get(m.targetId),T=m.view.applyChanges(y,p.isPrimaryClient,E);return DS(p,m.targetId,T.Yu),T.snapshot}),function(p,m,_,v){return f.apply(this,arguments)})(n,u,d,h);var f};const i=yield lv(n.localStore,e,!0),s=new yq(e,i.Hi),o=s.ju(i.documents),a=Qf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),l=s.applyChanges(o,n.isPrimaryClient,a);DS(n,t,l.Yu);const c=new Eme(e,t,s);return n.sc.set(e,c),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),l.snapshot}),mS.apply(this,arguments)}function Dme(n,e){return _S.apply(this,arguments)}function _S(){return _S=g(function*(n,e){const t=O(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(s=>!zf(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Uu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dp(t.remoteStore,r.targetId),qu(t,r.targetId)}).catch(Bo))):(qu(t,r.targetId),yield Uu(t.localStore,r.targetId,!0))}),_S.apply(this,arguments)}function yS(){return yS=g(function*(n,e,t){const r=BS(n);try{const i=yield function(s,o){const a=O(s),l=lt.now(),c=o.reduce((h,f)=>h.add(f.key),ue());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=or(),p=ue();return a.Gi.getEntries(h,c).next(m=>{f=m,f.forEach((_,v)=>{v.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(m=>{u=m;const _=[];for(const v of o){const y=Lpe(v,u.get(v.key).overlayedDocument);null!=y&&_.push(new Fs(v.key,y,Iz(y.value.mapValue),ct.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,_,o)}).next(m=>{d=m;const _=m.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,m.batchId,_)})}).then(()=>({batchId:d.batchId,changes:Zz(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.ac[s.currentUser.toKey()];l||(l=new wt(se)),l=l.insert(o,a),s.ac[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ls(r,i.changes),yield ju(r.remoteStore)}catch(i){const s=$u(i,"Failed to persist write");t.reject(s)}}),yS.apply(this,arguments)}function vq(n,e){return vS.apply(this,arguments)}function vS(){return vS=g(function*(n,e){const t=O(n);try{const r=yield Kge(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.uc.get(s);o&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ec=!0:i.modifiedDocuments.size>0?J(o.ec):i.removedDocuments.size>0&&(J(o.ec),o.ec=!1))}),yield Ls(t,r,e)}catch(r){yield Bo(r)}}),vS.apply(this,arguments)}function bq(n,e,t){const r=O(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=O(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&hS(a)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ame(n,e,t){return bS.apply(this,arguments)}function bS(){return bS=g(function*(n,e,t){const r=O(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),s=i&&i.key;if(s){let o=new wt(P.comparator);o=o.insert(s,nt.newNoDocument(s,Q.min()));const a=ue().add(s),l=new Yf(Q.min(),new Map,new ze(se),o,a);yield vq(r,l),r.oc=r.oc.remove(s),r.uc.delete(e),SS(r)}else yield Uu(r.localStore,e,!1).then(()=>qu(r,e,t)).catch(Bo)}),bS.apply(this,arguments)}function xme(n,e){return wS.apply(this,arguments)}function wS(){return wS=g(function*(n,e){const t=O(n),r=e.batch.batchId;try{const i=yield Gge(t.localStore,e);TS(t,r,null),IS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ls(t,i)}catch(i){yield Bo(i)}}),wS.apply(this,arguments)}function Mme(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=g(function*(n,e,t){const r=O(n);try{const i=yield function(s,o){const a=O(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(J(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);TS(r,e,t),IS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ls(r,i)}catch(i){yield Bo(i)}}),ES.apply(this,arguments)}function CS(){return CS=g(function*(n,e){const t=O(n);Yo(t.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=O(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=$u(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),CS.apply(this,arguments)}function IS(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function TS(n,e,t){const r=O(n);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function qu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||wq(n,r)})}function wq(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(dp(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),SS(n))}function DS(n,e,t){for(const r of t)r instanceof mq?(n.cc.addReference(r.key,e),Rme(n,r)):r instanceof _q?(x("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||wq(n,r.key)):H()}function Rme(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(x("SyncEngine","New document in limbo: "+t),n.rc.add(r),SS(n))}function SS(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new P(Me.fromString(e)),r=n.lc.next();n.uc.set(r,new Cme(t)),n.oc=n.oc.insert(t,r),hv(n.remoteStore,new qo(sr(Au(t.path)),r,2,ir.at))}}function Ls(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=g(function*(n,e,t){const r=O(n),i=[],s=[],o=[];var a;r.sc.isEmpty()||(r.sc.forEach((a,l)=>{o.push(r.dc(l,e,t).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),i.push(c);const u=OD.Ci(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),r.nc.Wo(i),yield(a=g(function*(l,c){const u=O(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>b.forEach(c,h=>b.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>b.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Uo(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ui.get(h),m=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ui=u.Ui.insert(h,m)}}}),function(l,c){return a.apply(this,arguments)})(r.localStore,s))}),AS.apply(this,arguments)}function Pme(n,e){return xS.apply(this,arguments)}function xS(){return xS=g(function*(n,e){const t=O(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const r=yield YW(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(o=>{o.forEach(a=>{a.reject(new D(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ls(t,r.ji)}var i}),xS.apply(this,arguments)}function Ome(n,e){const t=O(n),r=t.uc.get(e);if(r&&r.ec)return ue().add(r.key);{let i=ue();const s=t.ic.get(e);if(!s)return i;for(const o of s){const a=t.sc.get(o);i=i.unionWith(a.view.Qu)}return i}}function Nme(n,e){return MS.apply(this,arguments)}function MS(){return MS=g(function*(n,e){const t=O(n),r=yield lv(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&DS(t,e.targetId,i.Yu),i}),MS.apply(this,arguments)}function Fme(n,e){return kS.apply(this,arguments)}function kS(){return kS=g(function*(n,e){const t=O(n);return JW(t.localStore,e).then(r=>Ls(t,r))}),kS.apply(this,arguments)}function Lme(n,e,t,r){return RS.apply(this,arguments)}function RS(){return RS=g(function*(n,e,t,r){const i=O(n),s=yield function(o,a){const l=O(o),c=O(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):b.resolve(null)))}(i.localStore,e);var a;null!==s?("pending"===t?yield ju(i.remoteStore):"acknowledged"===t||"rejected"===t?(TS(i,e,r||null),IS(i,e),a=e,O(O(i.localStore).mutationQueue).An(a)):H(),yield Ls(i,s)):x("SyncEngine","Cannot apply mutation batch with id: "+e)}),RS.apply(this,arguments)}function PS(){return PS=g(function*(n,e){const t=O(n);if(LS(t),BS(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Eq(t,r.toArray());t.fc=!0,yield sS(t.remoteStore,!0);for(const s of i)hv(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(qu(t,o),Uu(t.localStore,o,!0))),dp(t.remoteStore,o)}),yield i,yield Eq(t,r),function(s){const o=O(s);o.uc.forEach((a,l)=>{dp(o.remoteStore,l)}),o.cc.fs(),o.uc=new Map,o.oc=new wt(P.comparator)}(t),t.fc=!1,yield sS(t.remoteStore,!1)}}),PS.apply(this,arguments)}function Eq(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=g(function*(n,e,t){const r=O(n),i=[],s=[];for(const o of e){let a;const l=r.ic.get(o);if(l&&0!==l.length){a=yield Bu(r.localStore,sr(l[0]));for(const c of l){const u=r.sc.get(c),d=yield Nme(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield ZW(r.localStore,o);a=yield Bu(r.localStore,c),yield gS(r,Cq(c),o,!1)}i.push(a)}return r.nc.Wo(s),i}),OS.apply(this,arguments)}function Cq(n){return kz(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ume(n){const e=O(n);return O(O(e.localStore).persistence).vi()}function Vme(n,e,t,r){return NS.apply(this,arguments)}function NS(){return NS=g(function*(n,e,t,r){const i=O(n);if(i.fc)return void x("SyncEngine","Ignoring unexpected query state notification.");const s=i.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield JW(i.localStore,Oz(s[0])),a=Yf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ls(i,o,a);break}case"rejected":yield Uu(i.localStore,e,!0),qu(i,e,r);break;default:H()}}),NS.apply(this,arguments)}function jme(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=g(function*(n,e,t){const r=LS(n);if(r.fc){for(const i of e){if(r.ic.has(i)){x("SyncEngine","Adding an already active target "+i);continue}const s=yield ZW(r.localStore,i),o=yield Bu(r.localStore,s);yield gS(r,Cq(s),o.targetId,!1),hv(r.remoteStore,o)}for(const i of t)r.ic.has(i)&&(yield Uu(r.localStore,i,!1).then(()=>{dp(r.remoteStore,i),qu(r,i)}).catch(Bo))}}),FS.apply(this,arguments)}function LS(n){const e=O(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ome.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ame.bind(null,e),e.nc.Wo=yme.bind(null,e.eventManager),e.nc._c=vme.bind(null,e.eventManager),e}function BS(n){const e=O(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xme.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mme.bind(null,e),e}class Iq{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return g(function*(){t.It=cp(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return KW(this.persistence,new GW,e.initialUser,this.It)}gc(e){return new WW(ov.Bs,this.It)}mc(e){return new rq}terminate(){var e=this;return g(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tq extends Iq{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return g(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield BS(r.Ec.syncEngine),yield ju(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return KW(this.persistence,new GW,e.initialUser,this.It)}Ic(e,t){return new Rge(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new gpe(t,this.persistence);return new ppe(e.asyncQueue,r)}gc(e){const t=PD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new RD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sq(),dv(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new rq}}class $me extends Tq{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return g(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof HD&&(r.sharedClientState.syncEngine={Fr:Lme.bind(null,i),$r:Vme.bind(null,i),Br:jme.bind(null,i),vi:Ume.bind(null,i),Or:Fme.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=g(function*(o){yield function Bme(n,e){return PS.apply(this,arguments)}(r.Ec.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}mc(e){const t=sq();if(!HD.C(t))throw new D(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=PD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class US{initialize(e,t){var r=this;return g(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bq(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Pme.bind(null,r.syncEngine),yield sS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _me}createDatastore(e){const t=cp(e.databaseInfo.databaseId),r=new tme(e.databaseInfo);return new ime(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>bq(this.syncEngine,a,0),o=iq.C()?new iq:new Zge,new ome(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,l,c){const u=new Ime(r,i,s,o,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=g(function*(t){const r=O(t);x("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Vu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Dq(n,e=10240){let t=0;return{read:()=>g(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>g(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zme{constructor(e,t){this.bc=e,this.It=t,this.metadata=new sn,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return g(function*(){return e.metadata.promise})()}wc(){var e=this;return g(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return g(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const s=yield e.Dc(i);return new bme(JSON.parse(s),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return g(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return g(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return g(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Wme{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return g(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new D(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=g(function*(s,o){const a=O(s),l=Jf(a.It)+"/documents",c={documents:o.map(f=>Zf(a.It,f))},u=yield a.fo("BatchGetDocuments",l,c,o.length),d=new Map;u.forEach(f=>{const p=function Kpe(n,e){return"found"in e?function(t,r){J(!!r.found);const i=Ji(t,r.found.name),s=on(r.found.updateTime),o=new vn({mapValue:{fields:r.found.fields}});return nt.newFoundDocument(i,s,o)}(n,e):"missing"in e?function(t,r){J(!!r.missing),J(!!r.readTime);const i=Ji(t,r.missing),s=on(r.readTime);return nt.newNoDocument(i,s)}(n,e):H()}(a.It,f);d.set(p.key.toString(),p)});const h=[];return o.forEach(f=>{const p=d.get(f.toString());J(!!p),h.push(p)}),h}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return g(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=P.fromPath(i);e.mutations.push(new vD(s,e.precondition(s)))}),yield(r=g(function*(i,s){const o=O(i),a=Jf(o.It)+"/documents",l={writes:s.map(c=>ep(o.It,c))};yield o.co("Commit",a,l)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H();t=Q.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new D(w.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?ct.exists(!1):ct.updateTime(t):ct.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new D(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ct.updateTime(t)}return ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qme{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Nc=r.maxAttempts,this.xo=new $D(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao(g(function*(){const t=new Wme(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Oc(s)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Bf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yz(t)}return!1}}class Gme{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=oz.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=g(function*(a){x("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return g(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$u(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Sq(n,e){return VS.apply(this,arguments)}function VS(){return VS=g(function*(n,e){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=g(function*(s){r.isEqual(s)||(yield YW(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),VS.apply(this,arguments)}function Aq(n,e){return jS.apply(this,arguments)}function jS(){return jS=g(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HS(n);x("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>hq(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>hq(e.remoteStore,s)),n.onlineComponents=e}),jS.apply(this,arguments)}function HS(n){return $S.apply(this,arguments)}function $S(){return $S=g(function*(n){return n.offlineComponents||(x("FirestoreClient","Using default OfflineComponentProvider"),yield Sq(n,new Iq)),n.offlineComponents}),$S.apply(this,arguments)}function gv(n){return zS.apply(this,arguments)}function zS(){return zS=g(function*(n){return n.onlineComponents||(x("FirestoreClient","Using default OnlineComponentProvider"),yield Aq(n,new US)),n.onlineComponents}),zS.apply(this,arguments)}function xq(n){return HS(n).then(e=>e.persistence)}function mv(n){return HS(n).then(e=>e.localStore)}function Mq(n){return gv(n).then(e=>e.remoteStore)}function WS(n){return gv(n).then(e=>e.syncEngine)}function Gu(n){return qS.apply(this,arguments)}function qS(){return qS=g(function*(n){const e=yield gv(n),t=e.eventManager;return t.onListen=Tme.bind(null,e.syncEngine),t.onUnlisten=Dme.bind(null,e.syncEngine),t}),qS.apply(this,arguments)}function kq(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(g(function*(){return function(i,s,o,a,l){const c=new pv({next:d=>{s.enqueueAndForget(()=>uS(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new D(w.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new D(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new fS(Au(o.path),c,{includeMetadataChanges:!0,Nu:!0});return lS(i,u)}(yield Gu(n),n.asyncQueue,e,t,r)})),r.promise}function Rq(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(g(function*(){return function(i,s,o,a,l){const c=new pv({next:d=>{s.enqueueAndForget(()=>uS(i,u)),d.fromCache&&"server"===a.source?l.reject(new D(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new fS(o,c,{includeMetadataChanges:!0,Nu:!0});return lS(i,u)}(yield Gu(n),n.asyncQueue,e,t,r)})),r.promise}const Pq=new Map;function GS(n,e,t){if(!t)throw new D(w.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Oq(n,e,t,r){if(!0===e&&!0===r)throw new D(w.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nq(n){if(!P.isDocumentKey(n))throw new D(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fq(n){if(P.isDocumentKey(n))throw new D(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _v(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":H()}function Ae(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new D(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_v(n);throw new D(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Lq(n,e){if(e<=0)throw new D(w.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Bq{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new D(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Oq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bq({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bq(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new npe;switch(t.type){case"gapi":return new ope(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new D(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Pq.get(e);t&&(x("ComponentProvider","Removing Datastore"),Pq.delete(e),t.terminate())}(this),Promise.resolve()}}class it{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}}class kn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kn(this.firestore,e,this._query)}}class ts extends kn{constructor(e,t,r){super(e,t,Au(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new P(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function KS(n,e,...t){if(n=pe(n),GS("collection","path",e),n instanceof hp){const r=Me.fromString(e,...t);return Fq(r),new ts(n,null,r)}{if(!(n instanceof it||n instanceof ts))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Me.fromString(e,...t));return Fq(r),new ts(n.firestore,null,r)}}function yv(n,e,...t){if(n=pe(n),1===arguments.length&&(e=oz.R()),GS("doc","path",e),n instanceof hp){const r=Me.fromString(e,...t);return Nq(r),new it(n,null,new P(r))}{if(!(n instanceof it||n instanceof ts))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Me.fromString(e,...t));return Nq(r),new it(n.firestore,n instanceof ts?n.converter:null,new P(r))}}function Uq(n,e){return n=pe(n),e=pe(e),(n instanceof it||n instanceof ts)&&(e instanceof it||e instanceof ts)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Vq(n,e){return n=pe(n),e=pe(e),n instanceof kn&&e instanceof kn&&n.firestore===e.firestore&&zf(n._query,e._query)&&n.converter===e.converter}class i_e{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new $D(this,"async_queue_retry"),this.jc=()=>{const t=dv();t&&x("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=dv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=dv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new sn;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return g(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Uo(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,kt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=aS.createAndSchedule(this,e,t,r,s=>this.Jc(s));return this.Uc.push(i),i}Wc(){this.qc&&H()}verifyOperationInProgress(){}Yc(){var e=this;return g(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function YS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class s_e{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ut extends hp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new i_e,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Hq(this),this._firestoreClient.terminate()}}function jq(n,e){const r="string"==typeof n?n:e||"(default)";return pi("object"==typeof n?n:yo(),"firestore").getImmediate({identifier:r})}function Vt(n){return n._firestoreClient||Hq(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Hq(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ype(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new Gme(n._authCredentials,n._appCheckCredentials,n._queue,r)}function $q(n,e,t){const r=new sn;return n.asyncQueue.enqueue(g(function*(){try{yield Sq(n,t),yield Aq(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(o=s).name?o.code===w.FAILED_PRECONDITION||o.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;al("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var o})).then(()=>r.promise)}function zq(n){if(n._initialized||n._terminated)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new D(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ns(Qt.fromBase64String(e))}catch(t){throw new D(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ns(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tl{constructor(e){this._methodName=e}}class vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new D(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}const g_e=/^__.*__$/;class m_e{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class Wq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qq(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class bv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new bv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Cv(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(qq(this.na)&&g_e.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class __e{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||cp(e)}fa(e,t,r,i=!1){return new bv({na:e,methodName:t,la:r,path:bt.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Dl(n){const e=n._freezeSettings(),t=cp(n._databaseId);return new __e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wv(n,e,t,r,i,s={}){const o=n.fa(s.merge||s.mergeFields?2:0,e,t,i);JS("Data must be an object, but it was:",o,r);const a=Yq(r,o);let l,c;if(s.merge)l=new xr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=eA(e,d,t);if(!o.contains(h))throw new D(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Xq(u,h)||u.push(h)}l=new xr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new m_e(new vn(a),l,c)}class fp extends Tl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fp}}function Gq(n,e,t){return new bv({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class QS extends Tl{_toFieldTransform(e){return new Wf(e.path,new Mu)}isEqual(e){return e instanceof QS}}class y_e extends Tl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Gq(this,e,!0),r=this.da.map(s=>Sl(s,t)),i=new gl(r);return new Wf(e.path,i)}isEqual(e){return this===e}}class v_e extends Tl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Gq(this,e,!0),r=this.da.map(s=>Sl(s,t)),i=new ml(r);return new Wf(e.path,i)}isEqual(e){return this===e}}class b_e extends Tl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new ku(e.It,Bz(e.It,this._a));return new Wf(e.path,t)}isEqual(e){return this===e}}function XS(n,e,t,r){const i=n.fa(1,e,t);JS("Data must be an object, but it was:",i,r);const s=[],o=vn.empty();ul(r,(l,c)=>{const u=Ev(e,l,t);c=pe(c);const d=i.ua(u);if(c instanceof fp)s.push(u);else{const h=Sl(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new xr(s);return new Wq(o,a,i.fieldTransforms)}function ZS(n,e,t,r,i,s){const o=n.fa(1,e,t),a=[eA(e,r,t)],l=[i];if(s.length%2!=0)throw new D(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(eA(e,s[h])),l.push(s[h+1]);const c=[],u=vn.empty();for(let h=a.length-1;h>=0;--h)if(!Xq(c,a[h])){const f=a[h];let p=l[h];p=pe(p);const m=o.ua(f);if(p instanceof fp)c.push(f);else{const _=Sl(p,m);null!=_&&(c.push(f),u.set(f,_))}}const d=new xr(c);return new Wq(u,d,o.fieldTransforms)}function Kq(n,e,t,r=!1){return Sl(t,n.fa(r?4:3,e))}function Sl(n,e){if(Qq(n=pe(n)))return JS("Unsupported field value:",e,n),Yq(n,e);if(n instanceof Tl)return function(t,r){if(!qq(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=Sl(o,r.ca(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=pe(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bz(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=lt.fromDate(t);return{timestampValue:Xf(r.It,i)}}if(t instanceof lt){const i=new lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xf(r.It,i)}}if(t instanceof vv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ns)return{bytesValue:sW(r.It,t._byteString)};if(t instanceof it){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bD(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${_v(t)}`)}(n,e)}function Yq(n,e){const t={};return pz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ul(n,(r,i)=>{const s=Sl(i,e.ia(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Qq(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof vv||n instanceof ns||n instanceof it||n instanceof Tl)}function JS(n,e,t){if(!Qq(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_v(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function eA(n,e,t){if((e=pe(e))instanceof Bs)return e._internalPath;if("string"==typeof e)return Ev(n,e);throw Cv("Field path arguments must be of type string or ",n,!1,void 0,t)}const w_e=new RegExp("[~\\*/\\[\\]]");function Ev(n,e,t){if(e.search(w_e)>=0)throw Cv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bs(...e.split("."))._internalPath}catch(r){throw Cv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new D(w.INVALID_ARGUMENT,a+n+l)}function Xq(n,e){return n.some(t=>t.isEqual(e))}class pp{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new E_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class E_e extends pp{data(){return super.data()}}function Iv(n,e){return"string"==typeof e?Ev(n,e):e instanceof Bs?e._internalPath:e._delegate._internalPath}class Al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends pp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gp extends Us{data(e={}){return super.data(e)}}class Xo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Al(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gp(this._firestore,this._userDataWriter,r.key,r,new Al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new D(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new gp(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Al(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new gp(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Al(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:C_e(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function C_e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function Zq(n,e){return n instanceof Us&&e instanceof Us?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xo&&e instanceof Xo&&n._firestore===e._firestore&&Vq(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Jq(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new D(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}function Zo(n,...e){for(const t of e)n=t._apply(n);return n}class I_e extends mp{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Dl(e.firestore),r=function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new D(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){sG(u,c);const f=[];for(const p of u)f.push(iG(a,i,p));d={arrayValue:{values:f}}}else d=iG(a,i,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||sG(u,c),d=Kq(o,"where",u,"in"===c||"not-in"===c);const h=bn.create(l,c,d);return function(f,p){if(p.dt()){const _=gD(f);if(null!==_&&!_.isEqual(p.field))throw new D(w.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_.toString()}' and '${p.field.toString()}'`);const v=pD(f);null!==v&&oG(0,p.field,v)}const m=function(_,v){for(const y of _.filters)if(v.indexOf(y.op)>=0)return y.op;return null}(f,function(_){switch(_){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(null!==m)throw new D(w.INVALID_ARGUMENT,m===p.op?`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`:`Invalid query. You cannot use '${p.op.toString()}' filters with '${m.toString()}' filters.`)}(i,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new kn(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new Ns(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class D_e extends mp{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new D(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new D(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Su(i,s);return function(a,l){if(null===pD(a)){const c=gD(a);null!==c&&oG(0,c,l.field)}}(r,o),o}(e._query,this.wa,this.ya);return new kn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ns(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eG extends mp{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new kn(e.firestore,e.converter,qy(e._query,this.pa,this.Ia))}}class tG extends mp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rG(e,this.type,this.Ta,this.Ea);return new kn(e.firestore,e.converter,(i=t,new Ns((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class nG extends mp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rG(e,this.type,this.Ta,this.Ea);return new kn(e.firestore,e.converter,(i=t,new Ns((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function rG(n,e,t,r){if(t[0]=pe(t[0]),t[0]instanceof pp)return function(i,s,o,a,l){if(!a)throw new D(w.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of xu(i))if(u.field.isKeyField())c.push(fl(s,a.key));else{const d=a.data.field(u.field);if(dD(d))throw new D(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new D(w.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new zo(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Dl(n.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new D(w.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new D(w.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!mD(s)&&-1!==p.indexOf("/"))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const m=s.path.child(Me.fromString(p));if(!P.isDocumentKey(m))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const _=new P(m);h.push(fl(o,_))}else{const m=Kq(a,l,p);h.push(m)}}return new zo(h,u)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iG(n,e,t){if("string"==typeof(t=pe(t))){if(""===t)throw new D(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mD(e)&&-1!==t.indexOf("/"))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Me.fromString(t));if(!P.isDocumentKey(r))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fl(n,new P(r))}if(t instanceof it)return fl(n,t._key);throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_v(t)}.`)}function sG(n,e){if(!Array.isArray(n)||0===n.length)throw new D(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new D(w.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function oG(n,e,t){if(!t.isEqual(e))throw new D(w.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const O_e={maxAttempts:5};class tA{convertValue(e,t="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw H()}}convertObject(e,t){const r={};return ul(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new vv(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mz(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lf(e));default:return null}}convertTimestamp(e){const t=Vo(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Me.fromString(e);J(gW(r));const i=new jo(r.get(1),r.get(3)),s=new P(r.popFirst(5));return i.isEqual(t)||kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Tv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class N_e extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}class aG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dl(e)}set(e,t,r){this._verifyNotCommitted();const i=Jo(e,this._firestore),s=Tv(i.converter,t,r),o=wv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ct.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Jo(e,this._firestore);let o;return o="string"==typeof(t=pe(t))||t instanceof Bs?ZS(this._dataReader,"WriteBatch.update",s._key,t,r,i):XS(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jo(e,this._firestore);return this._mutations=this._mutations.concat(new Pu(t._key,ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jo(n,e){if((n=pe(n)).firestore!==e)throw new D(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xl extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}function lG(n,e,t){n=Ae(n,it);const r=Ae(n.firestore,ut),i=Tv(n.converter,e,t);return Ku(r,[wv(Dl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ct.none())])}function cG(n,e,t,...r){n=Ae(n,it);const i=Ae(n.firestore,ut),s=Dl(i);let o;return o="string"==typeof(e=pe(e))||e instanceof Bs?ZS(s,"updateDoc",n._key,e,t,r):XS(s,"updateDoc",n._key,e),Ku(i,[o.toMutation(n._key,ct.exists(!0))])}function uG(n,e){const t=Ae(n.firestore,ut),r=yv(n),i=Tv(n.converter,e);return Ku(t,[wv(Dl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ct.exists(!1))]).then(()=>r)}function dG(n,...e){var t,r,i;n=pe(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||YS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(YS(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(n instanceof it)c=Ae(n.firestore,ut),u=Au(n._key.path),l={next:d=>{e[o]&&e[o](nA(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Ae(n,kn);c=Ae(d.firestore,ut),u=d._query;const h=new xl(c);l={next:f=>{e[o]&&e[o](new Xo(c,h,d,f))},error:e[o+1],complete:e[o+2]},Jq(n._query)}return function(d,h,f,p){const m=new pv(p),_=new fS(h,m,f);return d.asyncQueue.enqueueAndForget(g(function*(){return lS(yield Gu(d),_)})),()=>{m.Rc(),d.asyncQueue.enqueueAndForget(g(function*(){return uS(yield Gu(d),_)}))}}(Vt(c),u,a,l)}function Ku(n,e){return function(t,r){const i=new sn;return t.asyncQueue.enqueueAndForget(g(function*(){return function Sme(n,e,t){return yS.apply(this,arguments)}(yield WS(t),r,i)})),i.promise}(Vt(n),e)}function nA(n,e,t){const r=t.docs.get(e._key),i=new xl(n);return new Us(n,i,e._key,r,new Al(t.hasPendingWrites,t.fromCache),e.converter)}class z_e extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dl(e)}get(e){const t=Jo(e,this._firestore),r=new N_e(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return H();const s=i[0];if(s.isFoundDocument())return new pp(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new pp(this._firestore,r,t._key,null,t.converter);throw H()})}set(e,t,r){const i=Jo(e,this._firestore),s=Tv(i.converter,t,r),o=wv(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=Jo(e,this._firestore);let o;return o="string"==typeof(t=pe(t))||t instanceof Bs?ZS(this._dataReader,"Transaction.update",s._key,t,r,i):XS(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=Jo(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jo(e,this._firestore),r=new xl(this._firestore);return super.get(e).then(i=>new Us(this._firestore,r,t._key,i._document,new Al(!1,!1),t.converter))}}function rA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new D("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fG(){if("undefined"==typeof Uint8Array)throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function pG(){if(!function mpe(){return"undefined"!=typeof atob}())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Cu=Vi,Ft(new Mt("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new ut(new ipe(t.getProvider("auth-internal")),new ape(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Se(rz,"3.5.0",n),Se(rz,"3.5.0","esm2017")}();class _p{constructor(e){this._delegate=e}static fromBase64String(e){return pG(),new _p(ns.fromBase64String(e))}static fromUint8Array(e){return fG(),new _p(ns.fromUint8Array(e))}toBase64(){return pG(),this._delegate.toBase64()}toUint8Array(){return fG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iA(n){return function J_e(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eye{enableIndexedDbPersistence(e,t){return function a_e(n,e){zq(n=Ae(n,ut));const t=Vt(n),r=n._freezeSettings(),i=new US;return $q(t,i,new Tq(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function l_e(n){zq(n=Ae(n,ut));const e=Vt(n),t=n._freezeSettings(),r=new US;return $q(e,r,new $me(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function c_e(n){if(n._initialized&&!n._terminated)throw new D(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sn;return n._queue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{yield(t=g(function*(r){if(!wi.C())return Promise.resolve();const i=r+"main";yield wi.delete(i)}),function(r){return t.apply(this,arguments)})(PD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gG{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function n_e(n,e,t,r={}){var i;const s=(n=Ae(n,hp))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=rn.MOCK_USER;else{o=function Qee(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Im(JSON.stringify({alg:"none",type:"JWT"})),Im(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new D(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new rn(l)}n._authCredentials=new rpe(new iz(o,a))}}(this._delegate,e,t,r)}enableNetwork(){return function d_e(n){return function Kme(n){return n.asyncQueue.enqueue(g(function*(){const e=yield xq(n),t=yield Mq(n);return e.setNetworkEnabled(!0),function(r){const i=O(r);return i._u.delete(0),up(i)}(t)}))}(Vt(n=Ae(n,ut)))}(this._delegate)}disableNetwork(){return function h_e(n){return function Yme(n){return n.asyncQueue.enqueue(g(function*(){const e=yield xq(n),t=yield Mq(n);return e.setNetworkEnabled(!1),(r=g(function*(i){const s=O(i);s._u.add(0),yield Vu(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vt(n=Ae(n,ut)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Oq("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function u_e(n){return function(e){const t=new sn;return e.asyncQueue.enqueueAndForget(g(function*(){return function kme(n,e){return CS.apply(this,arguments)}(yield WS(e),t)})),t.promise}(Vt(n=Ae(n,ut)))}(this._delegate)}onSnapshotsInSync(e){return function $_e(n,e){return function Zme(n,e){const t=new pv(e);return n.asyncQueue.enqueueAndForget(g(function*(){return r=yield Gu(n),i=t,O(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget(g(function*(){return r=yield Gu(n),i=t,void O(r).Ru.delete(i);var r,i}))}}(Vt(n=Ae(n,ut)),YS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yu(this,KS(this._delegate,e))}catch(t){throw Hn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yr(this,yv(this._delegate,e))}catch(t){throw Hn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $n(this,function r_e(n,e){if(n=Ae(n,hp),GS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kn(n,null,(t=e,new Ns(Me.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Hn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W_e(n,e,t){n=Ae(n,ut);const r=Object.assign(Object.assign({},O_e),t);return function(i){if(i.maxAttempts<1)throw new D(w.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Jme(n,e,t){const r=new sn;return n.asyncQueue.enqueueAndForget(g(function*(){const i=yield(s=n,gv(s).then(o=>o.datastore));var s;new qme(n.asyncQueue,i,t,e,r).run()})),r.promise}(Vt(n),i=>e(new z_e(n,i)),r)}(this._delegate,t=>e(new mG(this,t)))}batch(){return Vt(this._delegate),new _G(new aG(this._delegate,e=>Ku(this._delegate,e)))}loadBundle(e){return function f_e(n,e){const t=Vt(n=Ae(n,ut)),r=new s_e;return function e_e(n,e,t,r){const i=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,c){if(l instanceof Uint8Array)return Dq(l,c);if(l instanceof ArrayBuffer)return Dq(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new zme(l,o);var l}(t,cp(e));n.asyncQueue.enqueueAndForget(g(function*(){!function Hme(n,e,t){const r=O(n);var i;(i=g(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(h,f){const p=O(h),m=on(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.Ns.getBundleMetadata(_,f.id)).then(_=>!!_&&_.createTime.compareTo(m)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=l).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(gq(l));const c=new wme(l,s.localStore,o.It);let u=yield o.wc();for(;u;){const h=yield c.Ou(u);h&&a._updateProgress(h),u=yield o.wc()}const d=yield c.complete();return yield Ls(s,d.Bu,void 0),yield function(h,f){const p=O(h);return p.persistence.runTransaction("Save bundle","readwrite",m=>p.Ns.saveBundleMetadata(m,f))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.$u)}catch(l){return al("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var h}),function(s,o,a){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield WS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function p_e(n,e){return function t_e(n,e){return n.asyncQueue.enqueue(g(function*(){return function(t,r){const i=O(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield mv(n),e)}))}(Vt(n=Ae(n,ut)),e).then(t=>t?new kn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $n(this,t):null)}}class Dv extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _p(new ns(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yr.forKey(t,this.firestore,null)}}class mG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Dv(e)}get(e){const t=kl(e);return this._delegate.get(t).then(r=>new yp(this._firestore,new Us(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=kl(e);return r?(rA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=kl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}}class _G{constructor(e){this._delegate=e}set(e,t,r){const i=kl(e);return r?(rA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=kl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ml{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vp(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ml.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ml(e,new Dv(e),t),i.set(t,s)),s}}Ml.INSTANCES=new WeakMap;class Yr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yr(t,new it(t._delegate,r,new P(e)))}static forKey(e,t,r){return new Yr(t,new it(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Yu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yu(this.firestore,KS(this._delegate,e))}catch(t){throw Hn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=pe(e))instanceof it&&Uq(this._delegate,e)}set(e,t){t=rA("DocumentReference.set",t);try{return t?lG(this._delegate,e,t):lG(this._delegate,e)}catch(r){throw Hn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cG(this._delegate,e):cG(this._delegate,e,t,...r)}catch(i){throw Hn(i,"updateDoc()","DocumentReference.update()")}}delete(){return function H_e(n){return Ku(Ae(n.firestore,ut),[new Pu(n._key,ct.none())])}(this._delegate)}onSnapshot(...e){const t=yG(e),r=vG(e,i=>new yp(this.firestore,new Us(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return dG(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function L_e(n){n=Ae(n,it);const e=Ae(n.firestore,ut),t=Vt(e),r=new xl(e);return function Qme(n,e){const t=new sn;return n.asyncQueue.enqueueAndForget(g(function*(){return(r=g(function*(i,s,o){try{const a=yield function(l,c){const u=O(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new D(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=$u(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(i,s,o){return r.apply(this,arguments)})(yield mv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Us(e,r,n._key,i,new Al(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function B_e(n){n=Ae(n,it);const e=Ae(n.firestore,ut);return kq(Vt(e),n._key,{source:"server"}).then(t=>nA(e,n,t))}(this._delegate):function F_e(n){n=Ae(n,it);const e=Ae(n.firestore,ut);return kq(Vt(e),n._key).then(t=>nA(e,n,t))}(this._delegate),t.then(r=>new yp(this.firestore,new Us(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Yr(this.firestore,this._delegate.withConverter(e?Ml.getInstance(this.firestore,e):null))}}function Hn(n,e,t){return n.message=n.message.replace(e,t),n}function yG(n){for(const e of n)if("object"==typeof e&&!iA(e))return e;return{}}function vG(n,e){var t,r;let i;return i=iA(n[0])?n[0]:iA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zq(this._delegate,e._delegate)}}class vp extends yp{data(e){const t=this._delegate.data(e);return function tpe(n,e){n||H()}(void 0!==t),t}}class $n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dv(e)}where(e,t,r){try{return new $n(this.firestore,Zo(this._delegate,function T_e(n,e,t){const r=e,i=Iv("where",n);return new I_e(i,r,t)}(e,t,r)))}catch(i){throw Hn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $n(this.firestore,Zo(this._delegate,function S_e(n,e="asc"){const t=e,r=Iv("orderBy",n);return new D_e(r,t)}(e,t)))}catch(r){throw Hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $n(this.firestore,Zo(this._delegate,function A_e(n){return Lq("limit",n),new eG("limit",n,"F")}(e)))}catch(t){throw Hn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $n(this.firestore,Zo(this._delegate,function x_e(n){return Lq("limitToLast",n),new eG("limitToLast",n,"L")}(e)))}catch(t){throw Hn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $n(this.firestore,Zo(this._delegate,function M_e(...n){return new tG("startAt",n,!0)}(...e)))}catch(t){throw Hn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $n(this.firestore,Zo(this._delegate,function k_e(...n){return new tG("startAfter",n,!1)}(...e)))}catch(t){throw Hn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $n(this.firestore,Zo(this._delegate,function R_e(...n){return new nG("endBefore",n,!1)}(...e)))}catch(t){throw Hn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $n(this.firestore,Zo(this._delegate,function P_e(...n){return new nG("endAt",n,!0)}(...e)))}catch(t){throw Hn(t,"endAt()","Query.endAt()")}}isEqual(e){return Vq(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function V_e(n){n=Ae(n,kn);const e=Ae(n.firestore,ut),t=Vt(e),r=new xl(e);return function Xme(n,e){const t=new sn;return n.asyncQueue.enqueueAndForget(g(function*(){return(r=g(function*(i,s,o){try{const a=yield lv(i,s,!0),l=new yq(s,a.Hi),c=l.ju(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=$u(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(i,s,o){return r.apply(this,arguments)})(yield mv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Xo(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function j_e(n){n=Ae(n,kn);const e=Ae(n.firestore,ut),t=Vt(e),r=new xl(e);return Rq(t,n._query,{source:"server"}).then(i=>new Xo(e,r,n,i))}(this._delegate):function U_e(n){n=Ae(n,kn);const e=Ae(n.firestore,ut),t=Vt(e),r=new xl(e);return Jq(n._query),Rq(t,n._query).then(i=>new Xo(e,r,n,i))}(this._delegate),t.then(r=>new sA(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yG(e),r=vG(e,i=>new sA(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return dG(this._delegate,t,r)}withConverter(e){return new $n(this.firestore,this._delegate.withConverter(e?Ml.getInstance(this.firestore,e):null))}}class nye{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $n(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nye(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vp(this._firestore,r))})}isEqual(e){return Zq(this._delegate,e._delegate)}}class Yu extends $n{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yr(this.firestore,e):null}doc(e){try{return new Yr(this.firestore,void 0===e?yv(this._delegate):yv(this._delegate,e))}catch(t){throw Hn(t,"doc()","CollectionReference.doc()")}}add(e){return uG(this._delegate,e).then(t=>new Yr(this.firestore,t))}isEqual(e){return Uq(this._delegate,e._delegate)}withConverter(e){return new Yu(this.firestore,this._delegate.withConverter(e?Ml.getInstance(this.firestore,e):null))}}function kl(n){return Ae(n,it)}class oA{constructor(...e){this._delegate=new Bs(...e)}static documentId(){return new oA(bt.keyField().canonicalString())}isEqual(e){return(e=pe(e))instanceof Bs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function G_e(){return new QS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rl(e)}static delete(){const e=function q_e(){return new fp("deleteField")}();return e._methodName="FieldValue.delete",new Rl(e)}static arrayUnion(...e){const t=function K_e(...n){return new y_e("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rl(t)}static arrayRemove(...e){const t=function Y_e(...n){return new v_e("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rl(t)}static increment(e){const t=function Q_e(n){return new b_e("increment",n)}(e);return t._methodName="FieldValue.increment",new Rl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rye={Firestore:gG,GeoPoint:vv,Timestamp:lt,Blob:_p,Transaction:mG,WriteBatch:_G,DocumentReference:Yr,DocumentSnapshot:yp,Query:$n,QueryDocumentSnapshot:vp,QuerySnapshot:sA,CollectionReference:Yu,FieldPath:oA,FieldValue:Rl,setLogLevel:function tye(n){!function epe(n){Lo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function sye(n){(function iye(n,e){n.INTERNAL.registerComponent(new Mt("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rye)))})(n,(e,t)=>new gG(e,t,new eye)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(yu);const bG="firebasestorage.googleapis.com",wG="storageBucket";class Ct extends tr{constructor(e,t){super(aA(e),`Firebase Storage: ${t} (${aA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}_codeEquals(e){return aA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function aA(n){return"storage/"+n}function lA(){return new Ct("unknown","An unknown error occurred, please check the error payload for server response.")}function EG(){return new Ct("canceled","User canceled the upload/download.")}function CG(){return new Ct("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cA(n){return new Ct("invalid-argument",n)}function IG(){return new Ct("app-deleted","The Firebase app was deleted.")}function bp(n,e){return new Ct("invalid-format","String does not match format '"+n+"': "+e)}function wp(n){throw new Ct("internal-error","Internal error: "+n)}class zn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zn.makeFromUrl(e,t)}catch(i){return new zn(e,"")}if(""===r.path)return r;throw function gye(n){return new Ct("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(T){T.path_=decodeURIComponent(T.path)}const d=t.replace(/[.]/g,"\\."),E=[{regex:a,indices:{bucket:1,path:3},postModify:function s(T){"/"===T.path.charAt(T.path.length-1)&&(T.path_=T.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===bG?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<E.length;T++){const k=E[T],V=k.regex.exec(e);if(V){let Ye=V[k.indices.path];Ye||(Ye=""),r=new zn(V[k.indices.bucket],Ye),k.postModify(r);break}}if(null==r)throw function pye(n){return new Ct("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class bye{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Sv(n){return"string"==typeof n||n instanceof String}function TG(n){return uA()&&n instanceof Blob}function uA(){return"undefined"!=typeof Blob}function dA(n,e,t,r){if(r<e)throw cA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cA(`Invalid value for '${n}'. Expected ${t} or less.`)}function Vs(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function DG(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ea=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ea||(ea={})),ea))();class Dye{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function Cye(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=lA();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(i.canceled?this.appDelete_?IG():EG():function fye(){return new Ct("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Av(!1,null,!0)):this.backoffId_=function wye(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(..._){c||(c=!0,e.apply(null,_))}function d(_){i=setTimeout(()=>{i=null,n(f,l())},_)}function h(){s&&clearTimeout(s)}function f(_,...v){if(c)return void h();if(_)return h(),void u.call(null,_,...v);if(l()||o)return h(),void u.call(null,_,...v);let E;r<64&&(r*=2),1===a?(a=2,E=0):E=1e3*(r+Math.random()),d(E)}let p=!1;function m(_){p||(p=!0,h(),!c&&(null!==i?(_||(a=2),clearTimeout(i),d(0)):_||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},t),m}((r,i)=>{if(i)return void r(!1,new Av(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ea.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===ea.ABORT;return void r(!1,new Av(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new Av(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Eye(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class Av{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Pye(...n){const e=function Rye(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(uA())return new Blob(n);throw new Ct("unsupported-environment","This browser doesn't seem to support creating Blobs")}class hA{constructor(e,t){this.data=e,this.contentType=t||null}}function AG(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function xG(n,e){switch(n){case"base64":{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw bp(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw bp(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Nye(n){return atob(n)}(e)}catch(i){throw bp(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class MG{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bp("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Uye(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class js{constructor(e,t){let r=0,i="";TG(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(TG(this.data_)){const i=function Oye(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new js(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new js(r,!0)}}static getBlob(...e){if(uA()){const t=e.map(r=>r instanceof js?r.data_:r);return new js(Pye.apply(null,t))}{const t=e.map(o=>Sv(o)?function SG(n,e){switch(n){case"raw":return new hA(AG(e));case"base64":case"base64url":return new hA(xG(n,e));case"data_url":return new hA(function Lye(n){const e=new MG(n);return e.base64?xG("base64",e.rest):function Fye(n){let e;try{e=decodeURIComponent(n)}catch(t){throw bp("data_url","Malformed data URL.")}return AG(e)}(e.rest)}(e),function Bye(n){return new MG(n).contentType}(e))}throw lA()}("raw",o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new js(i,!0)}}uploadData(){return this.data_}}function fA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Tye(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function kG(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Hye(n,e){return e}class Wn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Hye}}let xv=null;function Ep(){if(xv)return xv;const n=[];n.push(new Wn("bucket")),n.push(new Wn("generation")),n.push(new Wn("metageneration")),n.push(new Wn("name","fullPath",!0));const t=new Wn("name");t.xform=function e(s,o){return function $ye(n){return!Sv(n)||n.length<2?n:kG(n)}(o)},n.push(t);const i=new Wn("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Wn("timeCreated")),n.push(new Wn("updated")),n.push(new Wn("md5Hash",null,!0)),n.push(new Wn("cacheControl",null,!0)),n.push(new Wn("contentDisposition",null,!0)),n.push(new Wn("contentEncoding",null,!0)),n.push(new Wn("contentLanguage",null,!0)),n.push(new Wn("contentType",null,!0)),n.push(new Wn("metadata","customMetadata",!0)),xv=n,xv}function RG(n,e,t){const r=fA(e);return null===r?null:function Wye(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function zye(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new zn(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function pA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class rs{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function is(n){if(!n)throw lA()}function Mv(n,e){return function t(r,i){const s=RG(n,i,e);return is(null!==s),s}}function Qu(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dye(){return new Ct("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function uye(){return new Ct("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cye(n){return new Ct("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hye(n){return new Ct("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Cp(n){const e=Qu(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function lye(n){return new Ct("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function LG(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function tve(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kv{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function gA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){is(!1)}return is(!!t&&-1!==(e||["active"]).indexOf(t)),t}function mA(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class sve{constructor(e,t,r){if(function Iye(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Xu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ave extends class ove{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw wp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw wp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ci(){return new ave}class hve{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Ep(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function nve(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=LG(e,r,i),a={name:o.fullPath},l=Vs(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=pA(o,t),p=new rs(l,"POST",function f(m){let _;gA(m);try{_=m.getResponseHeader("X-Goog-Upload-URL")}catch(v){is(!1)}return is(Sv(_)),_},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Qu(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ci,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function rve(n,e,t,r){const l=new rs(t,"POST",function s(c){const u=gA(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){is(!1)}d||is(!1);const h=Number(d);return is(!isNaN(h)),new kv(h,r.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Qu(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ci,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function ive(n,e,t,r,i,s,o,a){const l=new kv(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function _ye(){return new Ct("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,p={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,d+u);if(null===m)throw CG();const E=new rs(t,"POST",function _(T,k){const V=gA(T,["active","final"]),ee=l.current+u,Ye=r.size();let Rt;return Rt="final"===V?Mv(e,s)(T,k):null,new kv(ee,Ye,"final"===V,Rt)},e.maxUploadRetryTime);return E.headers=p,E.body=m.uploadData(),E.progressCallback=a||null,E.errorHandler=Qu(n),E}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Ci,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=function NG(n,e,t){const i=Vs(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new rs(i,"GET",Mv(n,t),o);return a.errorHandler=Cp(e),a}(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ci,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function BG(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let E="";for(let T=0;T<2;T++)E+=Math.random().toString().slice(2);return E}();o["Content-Type"]="multipart/related; boundary="+l;const c=LG(e,r,i),u=pA(c,t),f=js.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===f)throw CG();const p={name:c.fullPath},m=Vs(s,n.host,n._protocol),v=n.maxUploadRetryTime,y=new rs(m,"POST",Mv(n,t),v);return y.urlParams=p,y.headers=o,y.body=f.uploadData(),y.errorHandler=Qu(e),y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ci,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=EG(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=mA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new sve(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(mA(this._state)){case"success":Xu(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Xu(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mA(this._state)){case"running":case"paused":e.next&&Xu(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Xu(e.complete.bind(e))();break;default:e.error&&Xu(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pl{constructor(e,t){this._service=e,this._location=t instanceof zn?t:zn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pl(e,t)}get root(){const e=new zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kG(this._location.path)}get storage(){return this._service}get parent(){const e=function Vye(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zn(this._location.bucket,e);return new Pl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function vye(n){return new Ct("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function bve(n){n._throwIfRoot("getDownloadURL");const e=function Zye(n,e,t){const i=Vs(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new rs(i,"GET",function Qye(n,e){return function t(r,i){const s=RG(n,i,e);return is(null!==s),function qye(n,e,t,r){const i=fA(e);if(null===i||!Sv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return Vs("/b/"+o(n.bucket)+"/o/"+o(d),t,r)+DG({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Cp(e),a}(n.storage,n._location,Ep());return n.storage.makeRequestWithTokens(e,Ci).then(t=>{if(null===t)throw function yye(){return new Ct("no-download-url","The given file does not have any download URLs.")}();return t})}function WG(n,e){if(n instanceof yA){const t=n;if(null==t._bucket)throw function mye(){return new Ct("no-default-bucket","No default bucket found. Did you set the '"+wG+"' property when initializing the app?")}();const r=new Pl(t,t._bucket);return null!=e?WG(r,e):r}return void 0!==e?function zG(n,e){const t=function jye(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zn(n._location.bucket,t);return new Pl(n.storage,r)}(n,e):n}function qG(n,e){const t=null==e?void 0:e[wG];return null==t?null:zn.makeFromBucketSpec(t,n)}class yA{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zn.makeFromBucketSpec(i,this._host):qG(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zn.makeFromBucketSpec(this._url,e):qG(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return g(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return g(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pl(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new bye(IG());{const s=function kye(n,e,t,r,i,s){const o=DG(n.urlParams),a=n.url+o,l=Object.assign({},n.headers);return function xye(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function Sye(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function Aye(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function Mye(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new Dye(a,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return g(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const GG="@firebase/storage",YG="storage";function QG(n=yo(),e){return pi(n=pe(n),YG).getImmediate({identifier:e})}function xve(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new yA(t,r,i,e,Vi)}!function Mve(){Ft(new Mt(YG,xve,"PUBLIC").setMultipleInstances(!0)),Se(GG,"0.9.9",""),Se(GG,"0.9.9","esm2017")}();class kve{}let XG=(()=>{class n{constructor(t){this.userdata=t,this.app=ji(yi_firebase),this.firebase_storage=QG(this.app),this.firebase_firestore_db=jq(this.app),this.fbapp=yu.initializeApp(yi_firebase),this.fb_db=yu.firestore(),this.post_url_list=[],this.current_post_url="",this.fetched_post_data=new kve,this.fetched_posts_list=[]}ngOnInit(){}save_metadata_of_post(t,r){var i=this;return g(function*(){const s=i.userdata.email.replace(".","");try{yield uG(KS(i.firebase_firestore_db,"posts_metadata"),{caption:t.caption,name:t.name,keymail:s,fileType:t.fileType,username:t.username,url:r}),alert("Data uploaded in firestore successfully")}catch(o){console.error("Error adding document: ",o)}})()}Upload_post(t){var r=this;const i=this.userdata.email.replace(".","");console.log(i);const s="posts/"+i+"/"+t.name;console.log(s);const o=function Ave(n,e){return function Ive(n,e){if(e&&function Eve(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof yA)return function Cve(n,e){return new Pl(n,e)}(n,e);throw cA("To use ref(service, url), the first argument must be a Storage instance.")}return WG(n,e)}(n=pe(n),e)}(this.firebase_storage,s),a=function Dve(n,e,t){return function gve(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hve(n,new js(e),t)}(n=pe(n),e,t)}(o,t.post);a.on("state_changed",l=>{switch(console.log("Upload is "+l.bytesTransferred/l.totalBytes*100+"% done"),l.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},l=>{switch(l.code){case"storage/unauthorized":alert("You are not an authorized user");break;case"storage/canceled":alert("The upload was cancled");break;case"storage/unknown":alert("Storage Unknown")}},()=>{alert("Post Uploaded successfully"),function Sve(n){return bve(n=pe(n))}(a.snapshot.ref).then(function(){var l=g(function*(c){r.current_post_url=c,console.log(r.current_post_url),t.post_url=c,console.log("File available at",c),r.save_metadata_of_post(t,c)});return function(c){return l.apply(this,arguments)}}())})}delete_post(){}get_user_post(){}get_all_posts(){return g(function*(){})()}}return n.\u0275fac=function(t){return new(t||n)(C(_u))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rve(n,e){if(1&n&&Ve(0,"img",6),2&n){const t=_s().$implicit;Vg("src",t.url,ma),jg("alt","Post by ",t.username,"")}}function Pve(n,e){1&n&&Ve(0,"video",7),2&n&&Vg("src",_s().$implicit.url,ma)}function Ove(n,e){if(1&n&&(U(0,"ul",0)(1,"li")(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title"),G(5),L(),Ve(6,"mat-card-subtitle"),L(),oi(7,Rve,1,2,"img",3),oi(8,Pve,1,1,"video",4),U(9,"mat-card-content"),G(10),L(),U(11,"mat-card-actions")(12,"button",5),G(13,"LIKE"),L(),U(14,"button",5),G(15,"SHARE"),L()()()()()),2&n){const t=e.$implicit;yt(5),dE(t.username),yt(2),zt("ngIf","image"===t.fileType),yt(1),zt("ngIf","video"===t.fileType),yt(2),ys(" ",t.caption," ")}}let Nve=(()=>{class n{constructor(t){this.post_service=t,this.metadata=[]}ngOnInit(){this.get_all_posts()}get_all_posts(){var t=this;return g(function*(){yu.initializeApp(yi_firebase),(yield yu.firestore().collection("posts_metadata").get()).forEach(a=>{t.metadata.push(a.data()),console.log(a.id,"=>",a.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(I(XG))},n.\u0275cmp=ht({type:n,selectors:[["app-post_list"]],decls:2,vars:1,consts:[[1,"main_scroll"],["class","main_scroll",4,"ngFor","ngForOf"],[1,"example-card"],["mat-card-image","",3,"src","alt",4,"ngIf"],["controls","",3,"src",4,"ngIf"],["mat-button",""],["mat-card-image","",3,"src","alt"],["controls","",3,"src"]],template:function(t,r){1&t&&(U(0,"div",0),oi(1,Ove,16,4,"ul",1),L()),2&t&&(yt(1),zt("ngForOf",r.metadata))},directives:[iC,BH,Vhe,Fhe,Lhe,th,Uhe,Nhe,Bhe],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.main_scroll[_ngcontent-%COMP%]{max-height:600px;overflow-y:scroll}"]}),n})(),Fve=(()=>{class n{constructor(t){this.dialogRef=t}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(I(Xh))},n.\u0275cmp=ht({type:n,selectors:[["app-ConfirmDialog"]],decls:9,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,r){1&t&&(U(0,"h1",0),G(1,"Sure ?"),L(),U(2,"div",1),G(3," You really wanna delete the chat ?\n"),L(),U(4,"div",2)(5,"button",3),Ze("click",function(){return r.onDismiss()}),G(6,"No"),L(),U(7,"button",4),Ze("click",function(){return r.onConfirm()}),G(8,"Yes"),L()())},styles:[""]}),n})();const Lve=["chat"],Bve=function(n,e){return{righty:n,lefty:e}},Uve=function(n,e){return{s1:n,s2:e}};function Vve(n,e){if(1&n){const t=co();U(0,"div")(1,"div",14)(2,"div",14)(3,"b"),G(4),U(5,"mat-icon",15),Ze("click",function(){const s=ni(t).$implicit;return _s().delete_chat(s.key)}),G(6,"delete"),L()(),Ve(7,"br"),G(8),L(),Ve(9,"br"),L()()}if(2&n){const t=e.$implicit,r=_s();yt(1),zt("ngClass",EE(4,Bve,r.username==t.username,r.username!=t.username)),yt(1),zt("ngClass",EE(7,Uve,r.username==t.username,r.username!=t.username)),yt(2),ys("",t.username," "),yt(4),ys(" ",t.chat," ")}}let jve=(()=>{class n{constructor(t){this.dialog=t,this.username="",this.x=[],this.all_chats=[],this.app=ji(yi_firebase),this.database=Va(this.app)}ngOnInit(){f_(Ss(this.database,"/Chats"),r=>{this.x=[],r.forEach(i=>{const s=i.val();s.key=i.key,this.x.push(s)})})}add_to_chat(t){this.all_chats.push(t);let i=function gse(n,e){n=pe(n),qi("push",n._path),Wi("push",e,n._path,!0);const t=wU(n._repo),r=Ire(t),i=su(n,r),s=su(n,r);let o;return o=null!=e?d_(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(Ss(this.database,"Chats/"));""==t?alert("Trying to send empty text!"):(d_(i,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",f_(Ss(this.database,"/Chats"),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(Fve,{width:"250px"}).afterClosed().subscribe(i=>{i&&function mse(n){qi("remove",n._path),d_(n,null)}(Ss(this.database,"/Chats/"+t+"/"))})}ngOnChanges(){f_(Ss(this.database,"/Chats"),r=>{this.x=[],r.forEach(i=>{const s=i.val();this.x.push(s),s.key=i.key})})}}return n.\u0275fac=function(t){return new(t||n)(I(Zh))},n.\u0275cmp=ht({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(1&t&&Bc(Lve,5),2&t){let i;Bi(i=Ui())&&(r.chat_line=i.first)}},inputs:{username:"username"},features:[Si],decls:19,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],[1,"example-sidenav-content"],["type","button","mat-button","",1,"chat-button",3,"disabled","click"],[3,"ngClass"],[2,"cursor","pointer",3,"click"]],template:function(t,r){if(1&t){const i=co();U(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),Ze("click",function(){return ni(i),Jn(2).toggle()}),U(5,"mat-icon",5),G(6,"navigate_next"),L()()(),U(7,"div",6),oi(8,Vve,10,10,"div",7),Ve(9,"br"),L(),U(10,"div",8)(11,"input",9,10),Ze("keyup.enter",function(){ni(i);const o=Jn(12);return r.add_to_chat(o.value)}),L(),U(13,"button",11),Ze("click",function(){ni(i);const o=Jn(12);return r.add_to_chat(o.value)}),U(14,"mat-icon",5),G(15,"send"),L()()()(),U(16,"div",12)(17,"button",13),Ze("click",function(){return ni(i),Jn(2).toggle()}),G(18," Open Chats "),L()()()}2&t&&(yt(8),zt("ngForOf",r.x.slice().reverse()),yt(9),zt("disabled",""==r.username))},directives:[pT,fT,_T,iC,qL],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#a2f7da;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#a2f7f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#c1e8ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:80vh;display:flex;flex-direction:column-reverse;background-color:#83f8e8}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:calc(100% - 47px);background-color:#89f5f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{border-radius:30px;cursor:pointer}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})(),ZG=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.ud=i,this.username=this.ud.username,this.email="",this.logged_in_user={username:""},this.app=ji(yi_firebase),this.db=Va(this.app)}ngOnInit(){this.route.queryParamMap.subscribe(t=>this.email=t.get("email")),console.log("user_email:",this.ud.email),""==this.ud.email?console.log("Not Logged In"):this.fetch_user_details(this.ud.email)}fetch_user_details(t){let r=t.replace(".","");this.ud.fetch_userdata_with_keymail(r),this.logged_in_user=this.ud}ngOnChanges(){console.log("Changed")}go_to_profile(){this.router.navigate(["/profile"])}}return n.\u0275fac=function(t){return new(t||n)(I(ko),I(Yt),I(_u))},n.\u0275cmp=ht({type:n,selectors:[["app-home"]],features:[Si],decls:18,vars:3,consts:[[1,"main-row"],[1,"prof_col"],["settings",""],["mat-raised-button","",2,"cursor","pointer",3,"disabled","click"],[1,"posts_col"],["posts",""],[1,"chat_col"],["chats",""],[3,"username"]],template:function(t,r){1&t&&(U(0,"div",0)(1,"div",1,2)(3,"h1"),G(4,"Profile Setting Component"),L(),U(5,"button",3),Ze("click",function(){return r.go_to_profile()}),G(6,"Profile"),L()(),U(7,"div",4,5)(9,"h1"),G(10,"Main Component"),L(),Ve(11,"br")(12,"app-post_list"),L(),U(13,"div",6,7)(15,"h1"),G(16),L(),Ve(17,"app-chat",8),L()()),2&t&&(yt(5),zt("disabled",""==r.logged_in_user.username),yt(11),ys("Welcome ",r.logged_in_user.username,""),yt(1),zt("username",r.logged_in_user.username))},directives:[Nve,jve],styles:['.main-row[_ngcontent-%COMP%]{width:100%}.prof_col[_ngcontent-%COMP%]{float:left;height:100vh;width:10%;border:1px solid black}.posts_col[_ngcontent-%COMP%]{float:left;height:100vh;width:60%;border:1px solid black}.chat_col[_ngcontent-%COMP%]{float:left;height:100vh;width:30%;border:1px solid black}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.chat_button[_ngcontent-%COMP%]{float:right}.prof_button[_ngcontent-%COMP%]{float:left}']}),n})();const Hve=function JG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},e3=new jr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),t3=new go("@firebase/auth");function Rv(n,...e){t3.logLevel<=Ie.ERROR&&t3.error(`Auth (${Vi}): ${n}`,...e)}function cr(n,...e){throw vA(n,...e)}function ss(n,...e){return vA(n,...e)}function n3(n,e,t){const r=Object.assign(Object.assign({},Hve()),{[e]:t});return new jr("auth","Firebase",r).create(e,{appName:n.name})}function vA(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return e3.create(n,...e)}function R(n,e,...t){if(!n)throw vA(e,...t)}function os(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rv(e),new Error(e)}function ta(n,e){n||os(e)}const r3=new Map;function Hs(n){ta(n instanceof Function,"Expected a class definition");let e=r3.get(n);return e?(ta(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,r3.set(n,e),e)}function Ip(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function s3(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Tp{constructor(e,t){this.shortDelay=e,this.longDelay=t,ta(t>e,"Short delay should be less than long delay!"),this.isMobile=yC()||mB()}get(){return function Wve(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function bA(){return"http:"===s3()||"https:"===s3()}()||vC()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wA(n,e){ta(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class o3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kve=new Tp(3e4,6e4);function Xt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function cn(n,e,t,r){return EA.apply(this,arguments)}function EA(){return EA=g(function*(n,e,t,r,i={}){return a3(n,i,g(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=ah(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),o3.fetch()(l3(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),EA.apply(this,arguments)}function a3(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=g(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gve),e);try{const i=new Yve(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Dp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Dp(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw Dp(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw Dp(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw n3(n,u,c);cr(n,u)}}catch(i){if(i instanceof tr)throw i;cr(n,"network-request-failed")}}),CA.apply(this,arguments)}function $s(n,e,t,r){return IA.apply(this,arguments)}function IA(){return IA=g(function*(n,e,t,r,i={}){const s=yield cn(n,e,t,r,i);return"mfaPendingCredential"in s&&cr(n,"multi-factor-auth-required",{_serverResponse:s}),s}),IA.apply(this,arguments)}function l3(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?wA(n.config,i):`${n.config.apiScheme}://${i}`}class Yve{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ss(this.auth,"network-request-failed")),Kve.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ss(n,e,r);return i.customData._tokenResponse=t,i}function TA(){return TA=g(function*(n,e){return cn(n,"POST","/v1/accounts:delete",e)}),TA.apply(this,arguments)}function Zve(n,e){return SA.apply(this,arguments)}function SA(){return SA=g(function*(n,e){return cn(n,"POST","/v1/accounts:lookup",e)}),SA.apply(this,arguments)}function Sp(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function AA(){return AA=g(function*(n,e=!1){const t=pe(n),r=yield t.getIdToken(e),i=Pv(r);R(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sp(xA(i.auth_time)),issuedAtTime:Sp(xA(i.iat)),expirationTime:Sp(xA(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),AA.apply(this,arguments)}function xA(n){return 1e3*Number(n)}function Pv(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return Rv("JWT malformed, contained fewer than 3 sections"),null;try{const s=_C(r);return s?JSON.parse(s):(Rv("Failed to decode base64 JWT payload"),null)}catch(s){return Rv("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function zs(n,e){return MA.apply(this,arguments)}function MA(){return MA=g(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof tr&&tbe(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),MA.apply(this,arguments)}function tbe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class nbe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(g(function*(){yield t.iteration()}),r)}iteration(){var e=this;return g(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class c3{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sp(this.lastLoginAt),this.creationTime=Sp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ap(n){return kA.apply(this,arguments)}function kA(){return kA=g(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield zs(n,Zve(t,{idToken:r}));R(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?sbe(s.providerUserInfo):[],a=ibe(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new c3(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),kA.apply(this,arguments)}function RA(){return RA=g(function*(n){const e=pe(n);yield Ap(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),RA.apply(this,arguments)}function ibe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sbe(n){return n.map(e=>{var{providerId:t}=e,r=VR(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function PA(){return PA=g(function*(n,e){const t=yield a3(n,{},g(function*(){const r=ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=l3(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",o3.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),PA.apply(this,arguments)}class xp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(void 0!==e.idToken,"internal-error"),R(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function ebe(n){const e=Pv(n);return R(e,"internal-error"),R(void 0!==e.exp,"internal-error"),R(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return g(function*(){return R(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return g(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function obe(n,e){return PA.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new xp;return r&&(R("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(R("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(R("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xp,this.toJSON())}_performRefresh(){return os("not implemented")}}function na(n,e){R("string"==typeof n||void 0===n,"internal-error",{appName:e})}class Ol{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=VR(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nbe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new c3(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return g(function*(){const r=yield zs(t,t.stsTokenManager.getToken(t.auth,e));return R(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Jve(n){return AA.apply(this,arguments)}(this,e)}reload(){return function rbe(n){return RA.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ol(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return g(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ap(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return g(function*(){const t=yield e.getIdToken();return yield zs(e,function Qve(n,e){return TA.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:E,emailVerified:T,isAnonymous:k,providerData:V,stsTokenManager:ee}=t;R(E&&ee,e,"internal-error");const Ye=xp.fromJSON(this.name,ee);R("string"==typeof E,e,"internal-error"),na(d,e.name),na(h,e.name),R("boolean"==typeof T,e,"internal-error"),R("boolean"==typeof k,e,"internal-error"),na(f,e.name),na(p,e.name),na(m,e.name),na(_,e.name),na(v,e.name),na(y,e.name);const Rt=new Ol({uid:E,auth:e,email:h,emailVerified:T,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:Ye,createdAt:v,lastLoginAt:y});return V&&Array.isArray(V)&&(Rt.providerData=V.map(Gn=>Object.assign({},Gn))),_&&(Rt._redirectEventId=_),Rt}static _fromIdTokenResponse(e,t,r=!1){return g(function*(){const i=new xp;i.updateFromServerResponse(t);const s=new Ol({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ap(s),s})()}}const u3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(t,r){var i=this;return g(function*(){i.storage[t]=r})()}_get(t){var r=this;return g(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return g(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Ov(n,e,t){return`firebase:${n}:${e}:${t}`}class Ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ov(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ov("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return g(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Ol._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return g(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(function*(){if(!t.length)return new Ju(Hs(u3),e,r);const i=(yield Promise.all(t.map(function(){var c=g(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Hs(u3);const o=Ov(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=Ol._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=g(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new Ju(s,e,r)):new Ju(s,e,r)})()}}function d3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m3(e))return"Blackberry";if(_3(e))return"Webos";if(OA(e))return"Safari";if((e.includes("chrome/")||f3(e))&&!e.includes("edge/"))return"Chrome";if(g3(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function h3(n=xt()){return/firefox\//i.test(n)}function OA(n=xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f3(n=xt()){return/crios\//i.test(n)}function p3(n=xt()){return/iemobile/i.test(n)}function g3(n=xt()){return/android/i.test(n)}function m3(n=xt()){return/blackberry/i.test(n)}function _3(n=xt()){return/webos/i.test(n)}function Nv(n=xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function y3(n=xt()){return Nv(n)||g3(n)||_3(n)||m3(n)||/windows phone/i.test(n)||p3(n)}function v3(n,e=[]){let t;switch(n){case"Browser":t=d3(xt());break;case"Worker":t=`${d3(xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vi}/${r}`}class ube{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return g(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const s of t.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class dbe{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b3(this),this.idTokenSubscription=new b3(this),this.beforeStateQueue=new ube(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e3,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Hs(t)),this._initializationPromise=this.queue(g(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Ju.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return g(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return g(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return R(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return g(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return g(function*(){var r;try{yield Ap(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function qve(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return g(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return g(function*(){const r=e?pe(e):null;return r&&R(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return g(function*(){if(!r._deleted)return e&&R(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(g(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return g(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(g(function*(){yield t.assertedPersistence.setPersistence(Hs(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return g(function*(){if(!t.redirectPersistenceManager){const r=e&&Hs(e)||t._popupRedirectResolver;R(r,t,"argument-error"),t.redirectPersistenceManager=yield Ju.create(t,[Hs(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return g(function*(){var r,i;return t._isInitialized&&(yield t.queue(g(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return g(function*(){if(e===t.currentUser)return t.queue(g(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return R(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return g(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return g(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function ur(n){return pe(n)}class b3{constructor(e){this.auth=e,this.observer=null,this.addObserver=yB(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class C3{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,t){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}function FA(){return FA=g(function*(n,e){return cn(n,"POST","/v1/accounts:update",e)}),FA.apply(this,arguments)}function BA(){return BA=g(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithPassword",Xt(n,e))}),BA.apply(this,arguments)}function Fv(n,e){return UA.apply(this,arguments)}function UA(){return UA=g(function*(n,e){return cn(n,"POST","/v1/accounts:sendOobCode",Xt(n,e))}),UA.apply(this,arguments)}function _be(n,e){return jA.apply(this,arguments)}function jA(){return jA=g(function*(n,e){return Fv(n,e)}),jA.apply(this,arguments)}function zA(){return zA=g(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithEmailLink",Xt(n,e))}),zA.apply(this,arguments)}function WA(){return WA=g(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithEmailLink",Xt(n,e))}),WA.apply(this,arguments)}class Mp extends C3{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Mp(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Mp(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return g(function*(){switch(t.signInMethod){case"password":return function gbe(n,e){return BA.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function bbe(n,e){return zA.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:cr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return g(function*(){switch(r.signInMethod){case"password":return function T3(n,e){return FA.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function wbe(n,e){return WA.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:cr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ws(n,e){return qA.apply(this,arguments)}function qA(){return qA=g(function*(n,e){return $s(n,"POST","/v1/accounts:signInWithIdp",Xt(n,e))}),qA.apply(this,arguments)}class Pp{constructor(e){var t,r,i,s,o,a;const l=lh(ch(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(r=l.oobCode)&&void 0!==r?r:null,d=function Abe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);R(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function xbe(n){const e=lh(ch(n)).link,t=e?lh(ch(e)).deep_link_id:null,r=lh(ch(n)).deep_link_id;return(r?lh(ch(r)).link:null)||r||t||e||n}(e);try{return new Pp(t)}catch(r){return null}}}let D3=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Mp._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=Pp.parseLink(r);return R(i,"argument-error"),Mp._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class ra{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mbe extends ra{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function S3(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=g(function*(n,e){return $s(n,"POST","/v1/accounts:signUp",Xt(n,e))}),ZA.apply(this,arguments)}class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(function*(){const s=yield Ol._fromIdTokenResponse(e,r,i),o=A3(r);return new Qr({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return g(function*(){yield e._updateTokensIfNecessary(r,!0);const i=A3(r);return new Qr({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function A3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Bv extends tr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bv.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Bv(e,t,r,i)}}function x3(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Bv._fromErrorAndOperation(n,s,e,r):s})}function tx(n,e){return nx.apply(this,arguments)}function nx(){return nx=g(function*(n,e,t=!1){const r=yield zs(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qr._forOperation(n,"link",r)}),nx.apply(this,arguments)}function ix(){return ix=g(function*(n,e,t=!1){var r;const{auth:i}=n,s="reauthenticate";try{const o=yield zs(n,x3(i,s,e,n),t);R(o.idToken,i,"internal-error");const a=Pv(o.idToken);R(a,i,"internal-error");const{sub:l}=a;return R(n.uid===l,i,"user-mismatch"),Qr._forOperation(n,s,o)}catch(o){throw"auth/user-not-found"===(null===(r=o)||void 0===r?void 0:r.code)&&cr(i,"user-mismatch"),o}}),ix.apply(this,arguments)}function R3(n,e){return sx.apply(this,arguments)}function sx(){return sx=g(function*(n,e,t=!1){const r="signIn",i=yield x3(n,r,e),s=yield Qr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),sx.apply(this,arguments)}function ax(){return ax=g(function*(n,e){return R3(ur(n),e)}),ax.apply(this,arguments)}function Vv(n,e,t){var r;R((null===(r=t.url)||void 0===r?void 0:r.length)>0,n,"invalid-continue-uri"),R(void 0===t.dynamicLinkDomain||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(R(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(R(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function px(){return px=g(function*(n,e,t){const r=pe(n),i={requestType:"PASSWORD_RESET",email:e};t&&Vv(r,i,t),yield _be(r,i)}),px.apply(this,arguments)}function vx(){return vx=g(function*(n,e,t){const r=ur(n),i=yield S3(r,{returnSecureToken:!0,email:e,password:t}),s=yield Qr._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s}),vx.apply(this,arguments)}const jv="__sak";class O3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jv,"1"),this.storage.removeItem(jv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jbe=(()=>{class n extends O3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Qbe(){const n=xt();return OA(n)||Nv(n)}()&&function cbe(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=y3(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function lbe(){return function Jee(){const n=xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return g(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return g(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),N3=(()=>{class n extends O3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let twe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return g(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!(null==l?void 0:l.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=g(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function ewe(n){return Promise.all(n.map(function(){var e=g(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Ox(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class nwe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return g(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=Ox("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Zt(){return window}function Nx(){return void 0!==Zt().WorkerGlobalScope&&"function"==typeof Zt().importScripts}function Fx(){return(Fx=g(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const F3="firebaseLocalStorageDb",Hv="firebaseLocalStorage",L3="fbase_key";class Np{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $v(n,e){return n.transaction([Hv],e?"readwrite":"readonly").objectStore(Hv)}function Lx(){const n=indexedDB.open(F3,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Hv,{keyPath:L3})}catch(i){t(i)}}),n.addEventListener("success",g(function*(){const r=n.result;r.objectStoreNames.contains(Hv)?e(r):(r.close(),yield function lwe(){const n=indexedDB.deleteDatabase(F3);return new Np(n).toPromise()}(),e(yield Lx()))}))})}function B3(n,e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=g(function*(n,e,t){const r=$v(n,!0).put({[L3]:e,value:t});return new Np(r).toPromise()}),Bx.apply(this,arguments)}function Ux(){return Ux=g(function*(n,e){const t=$v(n,!1).get(e),r=yield new Np(t).toPromise();return void 0===r?null:r.value}),Ux.apply(this,arguments)}function U3(n,e){const t=$v(n,!0).delete(e);return new Np(t).toPromise()}const hwe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return g(function*(){return t.db||(t.db=yield Lx()),t.db})()}_withRetries(t){var r=this;return g(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return g(function*(){return Nx()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return g(function*(){t.receiver=twe._getInstance(function owe(){return Nx()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=g(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=g(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return g(function*(){var r,i;if(t.activeServiceWorker=yield function iwe(){return Fx.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new nwe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function swe(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const t=yield Lx();return yield B3(t,jv,"1"),yield U3(t,jv),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return g(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(s=>B3(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return g(function*(){const i=yield r._withRetries(s=>function cwe(n,e){return Ux.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>U3(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return g(function*(){const r=yield t._withRetries(o=>{const a=$v(o,!1).getAll();return new Np(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function j3(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Fl(n,e){return e?Hs(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}j3("rcb"),new Tp(3e4,6e4);class Yx extends C3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ws(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xwe(n){return R3(n.auth,new Yx(n),n.bypassAuthState)}function Mwe(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),function k3(n,e){return ix.apply(this,arguments)}(t,new Yx(n),n.bypassAuthState)}function kwe(n){return Qx.apply(this,arguments)}function Qx(){return Qx=g(function*(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),tx(t,new Yx(n),n.bypassAuthState)}),Qx.apply(this,arguments)}new Tp(2e3,1e4);const Fp=new Map;class Owe extends class Rwe{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=g(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xwe;case"linkViaPopup":case"linkViaRedirect":return kwe;case"reauthViaPopup":case"reauthViaRedirect":return Mwe;default:cr(this.auth,"internal-error")}}resolve(e){ta(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ta(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return g(function*(){let r=Fp.get(t.auth._key());if(!r){try{const s=(yield function Nwe(n,e){return tM.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Fp.set(t.auth._key(),r)}return t.bypassAuthState||Fp.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function tM(){return tM=g(function*(n,e){const t=z3(e),r=$3(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),tM.apply(this,arguments)}function Fwe(n,e){Fp.set(n._key(),e)}function $3(n){return Hs(n._redirectPersistence)}function z3(n){return Ov("pendingRedirect",n.config.apiKey,n.name)}function W3(n,e){return lM.apply(this,arguments)}function lM(){return lM=g(function*(n,e,t=!1){const r=ur(n),i=Fl(r,e),o=yield new Owe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),lM.apply(this,arguments)}class jwe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Hwe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K3(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!K3(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ss(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(G3(e))}saveEventToCache(e){this.cachedEventUids.add(G3(e)),this.lastProcessedEventTime=Date.now()}}function G3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function K3({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function $we(n){return uM.apply(this,arguments)}function uM(){return uM=g(function*(n,e={}){return cn(n,"GET","/v1/projects",e)}),uM.apply(this,arguments)}const zwe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wwe=/^https?/;function dM(){return dM=g(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield $we(n);for(const t of e)try{if(Gwe(t))return}catch(r){}cr(n,"unauthorized-domain")}),dM.apply(this,arguments)}function Gwe(n){const e=Ip(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!Wwe.test(t))return!1;if(zwe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Kwe=new Tp(3e4,6e4);function Y3(){const n=Zt().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Wv=null;function Qwe(n){return Wv=Wv||function Ywe(n){return new Promise((e,t)=>{var r,i,s;function o(){Y3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y3(),t(ss(n,"network-request-failed"))},timeout:Kwe.get()})}if(null===(i=null===(r=Zt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Zt().gapi)||void 0===s?void 0:s.load)){const a=j3("iframefcb");return Zt()[a]=()=>{gapi.load?o():t(ss(n,"network-request-failed"))},function V3(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ss("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function mwe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw Wv=null,e})}(n),Wv}const Xwe=new Tp(5e3,15e3),eEe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tEe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nEe(n){const e=n.config;R(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wA(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Vi},i=tEe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ah(r).slice(1)}`}function hM(){return hM=g(function*(n){const e=yield Qwe(n),t=Zt().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:nEe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eEe,dontclear:!0},r=>new Promise(function(){var i=g(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=ss(n,"network-request-failed"),l=Zt().setTimeout(()=>{o(a)},Xwe.get());function c(){Zt().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),hM.apply(this,arguments)}const iEe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Q3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function X3(n,e,t,r,i,s){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vi,eventId:i};if(e instanceof ra){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Mbe){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(o.scopes=l.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function fEe({config:n}){return n.emulator?wA(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${ah(a).slice(1)}`}const fM="webStorageSupport",gEe=class pEe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N3,this._completeRedirectFn=W3,this._overrideRedirectResult=Fwe}_openPopup(e,t,r,i){var s=this;return g(function*(){var o;ta(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=X3(e,t,r,Ip(),i);return function cEe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},iEe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=xt().toLowerCase();t&&(a=f3(c)?"_blank":t),h3(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function abe(n=xt()){var e;return Nv(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function uEe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new Q3(null);const d=window.open(e||"",a,u);R(d,n,"popup-blocked");try{d.focus()}catch(h){}return new Q3(d)}(e,a,Ox())})()}_openRedirect(e,t,r,i){var s=this;return g(function*(){return yield s._originValidation(e),function rwe(n){Zt().location.href=n}(X3(e,t,r,Ip(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ta(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return g(function*(){const r=yield function rEe(n){return hM.apply(this,arguments)}(e),i=new jwe(e);return r.register("authEvent",s=>(R(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fM,{type:fM},i=>{var s;const o=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[fM];void 0!==o&&t(!!o),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function qwe(n){return dM.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y3()||OA()||Nv()}};var J3="@firebase/auth";class mEe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return g(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pM(n=yo()){const e=pi(n,"auth");return e.isInitialized()?e.getImmediate():function $ve(n,e){const t=pi(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Sm(t.getOptions(),null!=e?e:{}))return i;cr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:gEe,persistence:[hwe,Jbe,N3]})}!function yEe(n){Ft(new Mt("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{R(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),R(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v3(n)},u=new dbe(a,l,c);return function zve(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hs);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(u,t),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ft(new Mt("auth-internal",e=>{const t=ur(e.getProvider("auth").getImmediate());return new mEe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(J3,"0.20.7",function _Ee(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Se(J3,"0.20.7","esm2017")}("Browser");let vEe=(()=>{class n{constructor(t,r){this.router=t,this.user_data_service=r,this.uname="",this.app=ji(yi_firebase),this.realdb=Va(this.app),this.auth=pM(this.app)}ngOnInit(){}signIn(t,r){var i=this;return g(function*(){yield function Ube(n,e,t){return function ox(n,e){return ax.apply(this,arguments)}(pe(n),D3.credential(e,t))}(i.auth,t,r).then(o=>{console.log(o.user),console.log("LogedIn"),i.user_data_service.email=t,i.router.navigate(["/home"],{queryParams:{email:t}})}).catch(o=>{alert("Username or Password incorrect"),console.log("There was some error logging in!")})})()}forgotPass(){var t=this;return g(function*(){let r;console.log("forgot password method called"),r=prompt("Enter your email:"),console.log("password reset email:",r),function Fbe(n,e,t){return px.apply(this,arguments)}(t.auth,r).then(()=>{console.log("password reset email2:",r),alert("Check your email for a reset password link.")}).catch(i=>{})})()}go_to_register(){this.router.navigate(["/register"]),console.log("Entered Registration Page")}}return n.\u0275fac=function(t){return new(t||n)(I(Yt),I(_u))},n.\u0275cmp=ht({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Email","autofocus",""],["email",""],["type","password","placeholder","Password"],["password",""],["type","button","value","Login",3,"click"],["mat-button","",1,"t-color",2,"border","0px","background-color","rgba(255, 255, 255, 0)",3,"click"],["type","button","value","Register",1,"t-color",3,"click"]],template:function(t,r){if(1&t){const i=co();U(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),G(5,"LOGIN"),L(),Ve(6,"input",4,5)(8,"input",6,7)(10,"br"),U(11,"input",8),Ze("click",function(){ni(i);const o=Jn(7),a=Jn(9);return r.signIn(o.value,a.value)}),L(),U(12,"button",9),Ze("click",function(){return r.forgotPass()}),G(13,"Forgot Password ?"),L(),Ve(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),U(19,"div",3),G(20," Don't have an account? "),L(),U(21,"input",10),Ze("click",function(){return r.go_to_register()}),L()()()()()}},directives:[z_],styles:[".back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();function bEe(n,e){1&n&&(U(0,"div"),G(1," Passwords don't match "),L())}let wEe=(()=>{class n{constructor(t,r){this.router=t,this.route=r,this.pass_dont_match=!1,this.app=ji(yi_firebase),this.auth=pM(this.app)}ngOnInit(){console.log("omkarelectric892@gmail.com".replace(".",""))}register(t,r,i,s,o){if(s==o){this.pass_dont_match=!1;let a=i.replace(".","");d_(Ss(Va(),"users/"+a),{name:t,username:r,email:i}).then(()=>{console.log("Data updated in realtime database")}).catch(u=>{console.log("There was some error while adding user data in realtime database")}),function Bbe(n,e,t){return vx.apply(this,arguments)}(this.auth,i,s).then(u=>{alert("User Registered successfully"),this.router.navigate(["/login"])}).catch(u=>{})}else this.pass_dont_match=!0}go_to_login(){this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(I(Yt),I(ko))},n.\u0275cmp=ht({type:n,selectors:[["app-register"]],decls:26,vars:1,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Name"],["name",""],["type","text","placeholder","Username"],["uname",""],["type","text","placeholder","Email"],["email",""],["type","password","placeholder","Password"],["password",""],["type","password","placeholder","Confirm Password"],["con_password",""],[4,"ngIf"],["type","button","value","Register",3,"click"],[1,"t-color",2,"margin-left","23%"],["type","button","value","Login",1,"t-color",3,"click"]],template:function(t,r){if(1&t){const i=co();U(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),G(5,"Register"),L(),Ve(6,"input",4,5)(8,"input",6,7)(10,"input",8,9)(12,"input",10,11)(14,"input",12,13),oi(16,bEe,2,0,"div",14),U(17,"input",15),Ze("click",function(){ni(i);const o=Jn(7),a=Jn(9),l=Jn(11),c=Jn(13),u=Jn(15);return r.register(o.value,a.value,l.value,c.value,u.value)}),L(),Ve(18,"br")(19,"br")(20,"br"),U(21,"div",16),G(22," Already have an account? "),Ve(23,"br")(24,"br"),L(),U(25,"input",17),Ze("click",function(){return r.go_to_login()}),L()()()()()}2&t&&(yt(16),zt("ngIf",r.pass_dont_match))},directives:[th],styles:[".back[_ngcontent-%COMP%]{background:url(/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;height:22px;margin:20px 0;padding:12px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;margin-left:28%;float:center;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();class EEe{constructor(e){this.post=e}}function CEe(n,e){1&n&&Ve(0,"img",16),2&n&&zt("src",_s().url,ma)}function IEe(n,e){1&n&&Ve(0,"video",17),2&n&&zt("src",_s().url,ma)}const TEe=[{path:"",component:ZG},{path:"home",component:ZG},{path:"login",component:vEe},{path:"register",component:wEe},{path:"profile",component:jhe},{path:"add-post",component:(()=>{class n{constructor(t,r,i,s){this.router=t,this.location=r,this.post_service=i,this.user_data=s,this.url="assets/images/prj_logo_colour.png"}ngOnInit(){}go_to_profile(){this.location.back()}onSelectFile(t){const r=t.target.files&&t.target.files[0];if(r){this.current_post_data=new EEe(t.target.files[0]),this.current_post_data.name=t.target.files[0].name,console.log(this.current_post_data.name),console.log(r);var i=new FileReader;i.readAsDataURL(r),r.type.indexOf("image")>-1?this.format="image":r.type.indexOf("video")>-1&&(this.format="video"),this.current_post_data.fileType=this.format,i.onload=s=>{this.url=s.target.result}}}upload_post(t){this.current_post_data.caption=t,this.current_post_data.username=this.user_data.username,this.post_service.Upload_post(this.current_post_data)}}return n.\u0275fac=function(t){return new(t||n)(I(Yt),I(Ia),I(XG),I(_u))},n.\u0275cmp=ht({type:n,selectors:[["app-add-post"]],decls:25,vars:2,consts:[[1,"col"],[1,"row-1"],[1,"back-icon",3,"click"],["align","center",1,"new-post-text"],[1,"row-2"],[1,"preview"],["style","height: 100%; width:100%",3,"src",4,"ngIf"],["style","height: 100%; width:100%","controls","",3,"src",4,"ngIf"],["mat-raised-button","",1,"select-file-button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input-file-button",3,"change"],[1,"text-caption"],["id","caption",1,"textarea-position"],["caption",""],["mat-raised-button","",1,"upload-button",3,"click"],["mat-raised-button","",1,"cancle-button"],[2,"height","100%","width","100%",3,"src"],["controls","",2,"height","100%","width","100%",3,"src"]],template:function(t,r){if(1&t){const i=co();U(0,"div")(1,"div",0)(2,"div",1)(3,"mat-icon",2),Ze("click",function(){return r.go_to_profile()}),G(4,"keyboard_arrow_left"),L(),U(5,"h2",3),G(6," New Post "),L()(),U(7,"div",4)(8,"div",5),oi(9,CEe,1,1,"img",6),oi(10,IEe,1,1,"video",7),L(),U(11,"div")(12,"button",8)(13,"label",9),G(14," Select File "),U(15,"input",10),Ze("change",function(o){return r.onSelectFile(o)}),L()()(),U(16,"h3",11),G(17," Caption "),L(),U(18,"textarea",12,13),G(20,"\n                "),L()(),U(21,"button",14),Ze("click",function(){ni(i);const o=Jn(19);return r.upload_post(o.value)}),G(22," Upload "),L(),U(23,"button",15),G(24," Cancle "),L()()()()}2&t&&(yt(9),zt("ngIf","image"===r.format&&r.url),yt(1),zt("ngIf","video"===r.format&&r.url))},directives:[_T,th,z_],styles:[".row-1[_ngcontent-%COMP%]{width:100%;float:left;height:5vh;background-color:#7fffd4}.row-2[_ngcontent-%COMP%]{width:98%;float:left;height:90vh;background-color:#fff8dc;margin:2vh}.preview[_ngcontent-%COMP%]{width:46%;height:60%;float:left;margin:2%;background-color:#fff;border:3px solid brown}.select-file-button[_ngcontent-%COMP%]{width:20%;height:8%;margin:4% 2% 2%;float:left;color:azure;background-color:navy;border:2px solid brown;cursor:pointer;text-align:center}.text-caption[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:15%;font-size:x-large}.textarea-position[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:20%;width:40%;height:12em}.upload-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-87%;width:38%;background-color:#05b905;font-size:medium}.cancle-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-37%;width:38%;background-color:red;font-size:medium}.back-icon[_ngcontent-%COMP%]{margin:.2%;cursor:pointer}.new-post-text[_ngcontent-%COMP%]{margin-top:-2%}.input-file-button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}"]}),n})()}];let DEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[uT.forRoot(TEe)],uT]}),n})(),SEe=(()=>{class n{constructor(t,r){this.ud=t,this.router=r}ngOnInit(){}logout(){this.router.navigate(["/home"])}}return n.\u0275fac=function(t){return new(t||n)(I(_u),I(Yt))},n.\u0275cmp=ht({type:n,selectors:[["app-header"]],decls:8,vars:0,consts:[["routerLink",""],["routerLink","/login"]],template:function(t,r){1&t&&(U(0,"p"),G(1,"header works!"),L(),U(2,"button",0),G(3,"Home"),L(),U(4,"button",1),G(5,"Login"),L(),U(6,"button"),G(7,"Logout"),L())},directives:[oy],styles:[""]}),n})(),AEe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ht({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(t,r){1&t&&(U(0,"p"),G(1,"footer works!"),L())},styles:[""]}),n})(),xEe=(()=>{class n{constructor(){this.title="wynyard"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ht({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&Ve(0,"app-header")(1,"router-outlet")(2,"app-footer")},directives:[SEe,rT,AEe],styles:[""]}),n})();const t4="@firebase/installations",gM="0.5.12",r4=`w:${gM}`,i4="FIS_v2",qs=new jr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function s4(n){return n instanceof tr&&n.code.includes("request-failed")}function mM({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function o4(n){return{token:n.token,requestStatus:2,expiresIn:NEe(n.expiresIn),creationTime:Date.now()}}function _M(n,e){return yM.apply(this,arguments)}function yM(){return yM=g(function*(n,e){const r=(yield e.json()).error;return qs.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),yM.apply(this,arguments)}function a4({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function l4(n,{refreshToken:e}){const t=a4(n);return t.append("Authorization",function FEe(n){return`${i4} ${n}`}(e)),t}function vM(n){return bM.apply(this,arguments)}function bM(){return bM=g(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),bM.apply(this,arguments)}function NEe(n){return Number(n.replace("s","000"))}function LEe(n,e){return wM.apply(this,arguments)}function wM(){return wM=g(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=mM(n),i=a4(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:i4,appId:n.appId,sdkVersion:r4})},l=yield vM(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:o4(c.authToken)}}throw yield _M("Create Installation",l)}),wM.apply(this,arguments)}function c4(n){return new Promise(e=>{setTimeout(e,n)})}const UEe=/^[cdef][\w-]{21}$/;function VEe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function jEe(n){return function BEe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return UEe.test(t)?t:""}catch(n){return""}}function ed(n){return`${n.appName}!${n.appId}`}const td=new Map;function u4(n,e){const t=ed(n);d4(t,e),function zEe(n,e){const t=function h4(){return!Ll&&"BroadcastChannel"in self&&(Ll=new BroadcastChannel("[Firebase] FID Change"),Ll.onmessage=n=>{d4(n.data.key,n.data.fid)}),Ll}();t&&t.postMessage({key:n,fid:e}),function f4(){0===td.size&&Ll&&(Ll.close(),Ll=null)}()}(t,e)}function d4(n,e){const t=td.get(n);if(t)for(const r of t)r(e)}let Ll=null;const Bl="firebase-installations-store";let CM=null;function IM(){return CM||(CM=xm("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Bl)}})),CM}function qv(n,e){return TM.apply(this,arguments)}function TM(){return TM=g(function*(n,e){const t=ed(n),i=(yield IM()).transaction(Bl,"readwrite"),s=i.objectStore(Bl),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&u4(n,e.fid),e}),TM.apply(this,arguments)}function DM(n){return SM.apply(this,arguments)}function SM(){return SM=g(function*(n){const e=ed(n),r=(yield IM()).transaction(Bl,"readwrite");yield r.objectStore(Bl).delete(e),yield r.done}),SM.apply(this,arguments)}function Lp(n,e){return AM.apply(this,arguments)}function AM(){return AM=g(function*(n,e){const t=ed(n),i=(yield IM()).transaction(Bl,"readwrite"),s=i.objectStore(Bl),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&u4(n,a.fid),a}),AM.apply(this,arguments)}function xM(n){return MM.apply(this,arguments)}function MM(){return MM=g(function*(n){let e;const t=yield Lp(n.appConfig,r=>{const i=GEe(r),s=KEe(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),MM.apply(this,arguments)}function GEe(n){return g4(n||{fid:VEe(),registrationStatus:0})}function KEe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(qs.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function YEe(n,e){return kM.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:QEe(n)}:{installationEntry:e}}function kM(){return kM=g(function*(n,e){try{const t=yield LEe(n,e);return qv(n.appConfig,t)}catch(t){throw s4(t)&&409===t.customData.serverCode?yield DM(n.appConfig):yield qv(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),kM.apply(this,arguments)}function QEe(n){return RM.apply(this,arguments)}function RM(){return RM=g(function*(n){let e=yield p4(n.appConfig);for(;1===e.registrationStatus;)yield c4(100),e=yield p4(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield xM(n);return r||t}return e}),RM.apply(this,arguments)}function p4(n){return Lp(n,e=>{if(!e)throw qs.create("installation-not-found");return g4(e)})}function g4(n){return function XEe(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function ZEe(n,e){return PM.apply(this,arguments)}function PM(){return PM=g(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=JEe(n,t),i=l4(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:r4,appId:n.appId}})},l=yield vM(()=>fetch(r,a));if(l.ok)return o4(yield l.json());throw yield _M("Generate Auth Token",l)}),PM.apply(this,arguments)}function JEe(n,{fid:e}){return`${mM(n)}/${e}/authTokens:generate`}function OM(n){return NM.apply(this,arguments)}function NM(){return NM=g(function*(n,e=!1){let t;const r=yield Lp(n.appConfig,s=>{if(!_4(s))throw qs.create("not-registered");const o=s.authToken;if(!e&&nCe(o))return s;if(1===o.requestStatus)return t=eCe(n,e),s;{if(!navigator.onLine)throw qs.create("app-offline");const a=iCe(s);return t=tCe(n,a),a}});return t?yield t:r.authToken}),NM.apply(this,arguments)}function eCe(n,e){return FM.apply(this,arguments)}function FM(){return FM=g(function*(n,e){let t=yield m4(n.appConfig);for(;1===t.authToken.requestStatus;)yield c4(100),t=yield m4(n.appConfig);const r=t.authToken;return 0===r.requestStatus?OM(n,e):r}),FM.apply(this,arguments)}function m4(n){return Lp(n,e=>{if(!_4(e))throw qs.create("not-registered");return function sCe(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function tCe(n,e){return LM.apply(this,arguments)}function LM(){return LM=g(function*(n,e){try{const t=yield ZEe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield qv(n.appConfig,r),t}catch(t){if(!s4(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield qv(n.appConfig,r)}else yield DM(n.appConfig);throw t}}),LM.apply(this,arguments)}function _4(n){return void 0!==n&&2===n.registrationStatus}function nCe(n){return 2===n.requestStatus&&!function rCe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function iCe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function BM(){return BM=g(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield xM(e);return r?r.catch(console.error):OM(e).catch(console.error),t.fid}),BM.apply(this,arguments)}function UM(){return UM=g(function*(n,e=!1){const t=n;return yield lCe(t),(yield OM(t,e)).token}),UM.apply(this,arguments)}function lCe(n){return VM.apply(this,arguments)}function VM(){return VM=g(function*(n){const{registrationPromise:e}=yield xM(n);e&&(yield e)}),VM.apply(this,arguments)}function $M(n){return qs.create("missing-app-config-values",{valueName:n})}const y4="installations",fCe=n=>{const e=n.getProvider("app").getImmediate(),t=function dCe(n){if(!n||!n.options)throw $M("App Configuration");if(!n.name)throw $M("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw $M(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:pi(e,"heartbeat"),_delete:()=>Promise.resolve()}},pCe=n=>{const t=pi(n.getProvider("app").getImmediate(),y4).getImmediate();return{getId:()=>function oCe(n){return BM.apply(this,arguments)}(t),getToken:i=>function aCe(n){return UM.apply(this,arguments)}(t,i)}};(function gCe(){Ft(new Mt(y4,fCe,"PUBLIC")),Ft(new Mt("installations-internal",pCe,"PRIVATE"))})(),Se(t4,gM),Se(t4,gM,"esm2017");const zM="@firebase/remote-config",dr=new jr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class DCe{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return g(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function SCe(n=navigator){return n.languages&&n.languages[0]||n.language}class ACe{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return g(function*(){var r,i,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:SCe()},h={method:"POST",headers:u,body:JSON.stringify(d)},f=fetch(c,h),p=new Promise((T,k)=>{e.signal.addEventListener(()=>{const V=new Error("The operation was aborted.");V.name="AbortError",k(V)})});let m;try{yield Promise.race([f,p]),m=yield f}catch(T){let k="fetch-client-network";throw"AbortError"===(null===(r=T)||void 0===r?void 0:r.name)&&(k="fetch-timeout"),dr.create(k,{originalErrorMessage:null===(i=T)||void 0===i?void 0:i.message})}let _=m.status;const v=m.headers.get("ETag")||void 0;let y,E;if(200===m.status){let T;try{T=yield m.json()}catch(k){throw dr.create("fetch-client-parse",{originalErrorMessage:null===(s=k)||void 0===s?void 0:s.message})}y=T.entries,E=T.state}if("INSTANCE_STATE_UNSPECIFIED"===E?_=500:"NO_CHANGE"===E?_=304:("NO_TEMPLATE"===E||"EMPTY_CONFIG"===E)&&(y={}),304!==_&&200!==_)throw dr.create("fetch-status",{httpStatus:_});return{status:_,eTag:v,config:y}})()}}class kCe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return g(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return g(function*(){yield function xCe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function MCe(n){if(!(n instanceof tr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+CC(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class OCe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Kv(n,e){var t;const r=n.target.error||void 0;return dr.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const Ul="app_namespace_store";class BCe{constructor(e,t,r,i=function LCe(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(Kv(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ul,{keyPath:"compositeKey"})}}catch(r){e(dr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return g(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([Ul],"readonly").objectStore(Ul),c=t.createCompositeKey(e);try{const u=l.get(c);u.onerror=d=>{s(Kv(d,"storage-get"))},u.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(u){s(dr.create("storage-get",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}set(e,t){var r=this;return g(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const c=i.transaction([Ul],"readwrite").objectStore(Ul),u=r.createCompositeKey(e);try{const d=c.put({compositeKey:u,value:t});d.onerror=h=>{o(Kv(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(dr.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return g(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([Ul],"readwrite").objectStore(Ul),c=t.createCompositeKey(e);try{const u=l.delete(c);u.onerror=d=>{s(Kv(d,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){s(dr.create("storage-delete",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class UCe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return g(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function jCe(){return YM.apply(this,arguments)}function YM(){return(YM=g(function*(){if(!po())return!1;try{return yield sh()}catch(n){return!1}})).apply(this,arguments)}!function VCe(){Ft(new Mt("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw dr.create("registration-window");if(!po())throw dr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw dr.create("registration-project-id");if(!o)throw dr.create("registration-api-key");if(!a)throw dr.create("registration-app-id");const l=new BCe(a,r.name,t=t||"firebase"),c=new UCe(l),u=new go(zM);u.logLevel=Ie.ERROR;const d=new ACe(i,Vi,t,s,o,a),h=new kCe(d,l),f=new DCe(h,l,c,u),p=new OCe(r,f,c,l,u);return function CCe(n){const e=pe(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Se(zM,"0.3.11"),Se(zM,"0.3.11","esm2017")}();const HCe="/firebase-messaging-sw.js",$Ce="/firebase-cloud-messaging-push-scope",E4="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",C4="google.c.a.c_id",WCe="google.c.a.c_l",qCe="google.c.a.ts",GCe="google.c.a.e";var nd=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(nd||(nd={})),nd))();function Gs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function KCe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const QM="fcm_token_details_db",I4="fcm_token_object_Store";function QCe(n){return XM.apply(this,arguments)}function XM(){return XM=g(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(QM))return null;let e=null;return(yield xm(QM,5,{upgrade:(r=g(function*(i,s,o,a){var l;if(s<2||!i.objectStoreNames.contains(I4))return;const c=a.objectStore(I4),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Gs(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gs(d.auth),p256dh:Gs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gs(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gs(d.auth),p256dh:Gs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gs(d.vapidKey)}}}}),function(s,o,a,l){return r.apply(this,arguments)})})).close(),yield MC(QM),yield MC("fcm_vapid_details_db"),yield MC("undefined"),XCe(e)?e:null;var r}),XM.apply(this,arguments)}function XCe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Vl="firebase-messaging-store";let ZM=null;function JM(){return ZM||(ZM=xm("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Vl)}})),ZM}function T4(n){return ek.apply(this,arguments)}function ek(){return ek=g(function*(n){const e=ik(n),r=yield(yield JM()).transaction(Vl).objectStore(Vl).get(e);if(r)return r;{const i=yield QCe(n.appConfig.senderId);if(i)return yield tk(n,i),i}}),ek.apply(this,arguments)}function tk(n,e){return nk.apply(this,arguments)}function nk(){return nk=g(function*(n,e){const t=ik(n),i=(yield JM()).transaction(Vl,"readwrite");return yield i.objectStore(Vl).put(e,t),yield i.done,e}),nk.apply(this,arguments)}function e0e(n){return rk.apply(this,arguments)}function rk(){return rk=g(function*(n){const e=ik(n),r=(yield JM()).transaction(Vl,"readwrite");yield r.objectStore(Vl).delete(e),yield r.done}),rk.apply(this,arguments)}function ik({appConfig:n}){return n.appId}const wn=new jr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function n0e(n,e){return sk.apply(this,arguments)}function sk(){return sk=g(function*(n,e){var t;const r=yield ck(n),i=S4(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(lk(n.appConfig),s)).json()}catch(a){throw wn.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw wn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw wn.create("token-subscribe-no-token");return o.token}),sk.apply(this,arguments)}function r0e(n,e){return ok.apply(this,arguments)}function ok(){return ok=g(function*(n,e){var t;const r=yield ck(n),i=S4(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${lk(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw wn.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw wn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw wn.create("token-update-no-token");return o.token}),ok.apply(this,arguments)}function D4(n,e){return ak.apply(this,arguments)}function ak(){return ak=g(function*(n,e){var t;const i={method:"DELETE",headers:yield ck(n)};try{const o=yield(yield fetch(`${lk(n.appConfig)}/${e}`,i)).json();if(o.error)throw wn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw wn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}}),ak.apply(this,arguments)}function lk({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function ck(n){return uk.apply(this,arguments)}function uk(){return uk=g(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),uk.apply(this,arguments)}function S4({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==E4&&(i.web.applicationPubKey=r),i}function s0e(n){return dk.apply(this,arguments)}function dk(){return dk=g(function*(n){const e=yield a0e(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Gs(e.getKey("auth")),p256dh:Gs(e.getKey("p256dh"))},r=yield T4(n.firebaseDependencies);if(r){if(l0e(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?o0e(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield D4(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return x4(n.firebaseDependencies,t)}return x4(n.firebaseDependencies,t)}),dk.apply(this,arguments)}function A4(n){return hk.apply(this,arguments)}function hk(){return hk=g(function*(n){const e=yield T4(n.firebaseDependencies);e&&(yield D4(n.firebaseDependencies,e.token),yield e0e(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),hk.apply(this,arguments)}function o0e(n,e){return fk.apply(this,arguments)}function fk(){return fk=g(function*(n,e){try{const t=yield r0e(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield tk(n.firebaseDependencies,r),t}catch(t){throw yield A4(n),t}}),fk.apply(this,arguments)}function x4(n,e){return pk.apply(this,arguments)}function pk(){return pk=g(function*(n,e){const r={token:yield n0e(n,e),createTime:Date.now(),subscriptionOptions:e};return yield tk(n,r),r.token}),pk.apply(this,arguments)}function a0e(n,e){return gk.apply(this,arguments)}function gk(){return gk=g(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:KCe(e)})}),gk.apply(this,arguments)}function l0e(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function M4(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function c0e(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function u0e(n,e){!e.data||(n.data=e.data)}(e,n),function d0e(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function h0e(n){return"object"==typeof n&&!!n&&C4 in n}function k4(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function mk(n){return wn.create("missing-app-config-values",{valueName:n})}k4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),k4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class p0e{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function f0e(n){if(!n||!n.options)throw mk("App Configuration Object");if(!n.name)throw mk("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw mk(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function R4(n){return _k.apply(this,arguments)}function _k(){return _k=g(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(HCe,{scope:$Ce}),n.swRegistration.update().catch(()=>{})}catch(t){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}),_k.apply(this,arguments)}function g0e(n,e){return yk.apply(this,arguments)}function yk(){return yk=g(function*(n,e){if(!e&&!n.swRegistration&&(yield R4(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");n.swRegistration=e}}),yk.apply(this,arguments)}function m0e(n,e){return vk.apply(this,arguments)}function vk(){return vk=g(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=E4)}),vk.apply(this,arguments)}function bk(){return bk=g(function*(n,e){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wn.create("permission-blocked");return yield m0e(n,null==e?void 0:e.vapidKey),yield g0e(n,null==e?void 0:e.serviceWorkerRegistration),s0e(n)}),bk.apply(this,arguments)}function _0e(n,e,t){return wk.apply(this,arguments)}function wk(){return wk=g(function*(n,e,t){const r=y0e(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[C4],message_name:t[WCe],message_time:t[qCe],message_device_time:Math.floor(Date.now()/1e3)})}),wk.apply(this,arguments)}function y0e(n){switch(n){case nd.NOTIFICATION_CLICKED:return"notification_open";case nd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ek(){return Ek=g(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===nd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(M4(t)):n.onMessageHandler.next(M4(t)));const r=t.data;h0e(r)&&"1"===r[GCe]&&(yield _0e(n,t.messageType,r))}),Ek.apply(this,arguments)}const O4="@firebase/messaging",b0e=n=>{const e=new p0e(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function v0e(n,e){return Ek.apply(this,arguments)}(e,t)),e},w0e=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function P4(n,e){return bk.apply(this,arguments)}(e,r)}};function F4(){return Ck.apply(this,arguments)}function Ck(){return(Ck=g(function*(){try{yield sh()}catch(n){return!1}return"undefined"!=typeof window&&po()&&bC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function T0e(n=yo()){return F4().then(e=>{if(!e)throw wn.create("unsupported-browser")},e=>{throw wn.create("indexed-db-unsupported")}),pi(pe(n),"messaging").getImmediate()}!function E0e(){Ft(new Mt("messaging",b0e,"PUBLIC")),Ft(new Mt("messaging-internal",w0e,"PRIVATE")),Se(O4,"0.9.16"),Se(O4,"0.9.16","esm2017")}();const Yv="analytics",D0e="firebase_id",x0e="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",L4="https://www.googletagmanager.com/gtag/js",En=new go("@firebase/analytics");function B4(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function M0e(n,e){const t=document.createElement("script");t.src=`${L4}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function R0e(n,e,t,r,i,s){return Dk.apply(this,arguments)}function Dk(){return Dk=g(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield B4(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){En.error(a)}n("config",i,s)}),Dk.apply(this,arguments)}function P0e(n,e,t,r,i){return Sk.apply(this,arguments)}function Sk(){return Sk=g(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield B4(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){En.error(s)}}),Sk.apply(this,arguments)}function F0e(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(L4))return e;return null}const Mr=new jr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),U4=new class V0e{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function j0e(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function H0e(n){return Ak.apply(this,arguments)}function Ak(){return Ak=g(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:j0e(r)},s=x0e.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw Mr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),Ak.apply(this,arguments)}function $0e(n){return xk.apply(this,arguments)}function xk(){return xk=g(function*(n,e=U4,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Mr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Mr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new q0e;return setTimeout(g(function*(){a.abort()}),void 0!==t?t:6e4),V4({appId:r,apiKey:i,measurementId:s},o,a,e)}),xk.apply(this,arguments)}function V4(n,e,t){return Mk.apply(this,arguments)}function Mk(){return Mk=g(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=U4){var s,o;const{appId:a,measurementId:l}=n;try{yield z0e(r,e)}catch(c){if(l)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield H0e(n);return i.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!W0e(u)){if(i.deleteThrottleMetadata(a),l)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?CC(t,i.intervalMillis,30):CC(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(a,h),En.debug(`Calling attemptFetch again in ${d} millis`),V4(n,h,r,i)}}),Mk.apply(this,arguments)}function z0e(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Mr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function W0e(n){if(!(n instanceof tr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class q0e{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let kk,Lk;function Rk(){return Rk=g(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),Rk.apply(this,arguments)}function j4(n){Lk=n}function H4(n){kk=n}function Z0e(){return Bk.apply(this,arguments)}function Bk(){return Bk=g(function*(){var n;if(!po())return En.warn(Mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield sh()}catch(e){return En.warn(Mr.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0}),Bk.apply(this,arguments)}function Uk(){return Uk=g(function*(n,e,t,r,i,s,o){var a;const l=$0e(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>En.error(f)),e.push(l);const c=Z0e().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([l,c]);F0e()||M0e(s,u.measurementId),Lk&&(i("consent","default",Lk),j4(void 0)),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[D0e]=d),i("config",u.measurementId,h),kk&&(i("set",kk),H4(void 0)),u.measurementId}),Uk.apply(this,arguments)}class eIe{constructor(e){this.app=e}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},$4=[];const z4={};let q4,Ys,Qv="dataLayer",Vk=!1;function nIe(n,e,t){!function tIe(){const n=[];if(vC()&&n.push("This is a browser extension environment."),bC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Mr.create("invalid-analytics-context",{errorInfo:e});En.warn(t.message)}}();const r=n.options.appId;if(!r)throw Mr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Mr.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ks[r])throw Mr.create("already-exists",{id:r});if(!Vk){!function k0e(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Qv);const{wrappedGtag:s,gtagCore:o}=function N0e(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function O0e(n,e,t,r){function s(){return(s=g(function*(o,a,l){try{"event"===o?yield P0e(n,e,t,a,l):"config"===o?yield R0e(n,e,t,r,a,l):"consent"===o?n("consent","update",l):n("set",a)}catch(c){En.error(c)}})).apply(this,arguments)}return function i(o,a,l){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Ks,$4,z4,Qv,"gtag");Ys=s,q4=o,Vk=!0}return Ks[r]=function J0e(n,e,t,r,i,s,o){return Uk.apply(this,arguments)}(n,$4,z4,e,q4,Qv,t),new eIe(n)}function iIe(){return jk.apply(this,arguments)}function jk(){return(jk=g(function*(){if(vC()||!bC()||!po())return!1;try{return yield sh()}catch(n){return!1}})).apply(this,arguments)}const G4="@firebase/analytics";!function oIe(){Ft(new Mt(Yv,(e,{options:t})=>nIe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ft(new Mt("analytics-internal",function n(e){try{const t=e.getProvider(Yv).getImmediate();return{logEvent:(r,i,s)=>function sIe(n,e,t,r){n=pe(n),function G0e(n,e,t,r,i){return Rk.apply(this,arguments)}(Ys,Ks[n.app.options.appId],e,t,r).catch(i=>En.error(i))}(t,r,i,s)}}catch(t){throw Mr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Se(G4,"0.8.0"),Se(G4,"0.8.0","esm2017")}();const cIe=new class lIe extends m_{}(class aIe extends g_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),ia=new wa("7.4.1"),Hk="__angularfire_symbol__analyticsIsSupportedValue",$k="__angularfire_symbol__analyticsIsSupported",zk="__angularfire_symbol__remoteConfigIsSupportedValue",Wk="__angularfire_symbol__remoteConfigIsSupported",qk="__angularfire_symbol__messagingIsSupportedValue",Gk="__angularfire_symbol__messagingIsSupported";globalThis[$k]||(globalThis[$k]=iIe().then(n=>globalThis[Hk]=n).catch(()=>globalThis[Hk]=!1)),globalThis[Gk]||(globalThis[Gk]=F4().then(n=>globalThis[qk]=n).catch(()=>globalThis[qk]=!1)),globalThis[Wk]||(globalThis[Wk]=jCe().then(n=>globalThis[zk]=n).catch(()=>globalThis[zk]=!1));const Xv={async:()=>globalThis[Gk],sync:()=>{const n=globalThis[qk];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function jl(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Hl=(n,e)=>{const t=e?[e]:PC(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function rd(){}class Y4{constructor(e,t=cIe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class uIe{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rd,{},rd,rd)),t.pipe(fn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $l=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Y4(Zone.current)),this.insideAngular=t.run(()=>new Y4(Zone.current,v_)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zl(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function dIe(n){return zl().ngZone.runOutsideAngular(()=>n())}function Wl(n){return zl().ngZone.run(()=>n())}function hIe(n){return zl(),function fIe(n){return function(t){return(t=t.lift(new uIe(n.ngZone))).pipe(qp(n.outsideAngular),Wp(n.insideAngular))}}(zl())(n)}const pIe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Wl(()=>n.apply(void 0,r))},ql=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Wl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rd,{},rd,rd)))),r[s]=pIe(r[s],t));const i=dIe(()=>n.apply(this,r));if(!e){if(i instanceof Qe){const s=zl();return i.pipe(qp(s.outsideAngular),Wp(s.insideAngular))}return Wl(()=>i)}return i instanceof Qe?i.pipe(hIe):i instanceof Promise?Wl(()=>new Promise((s,o)=>i.then(a=>Wl(()=>s(a)),a=>Wl(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Wl(()=>i)};class as{constructor(e){return e}}class Gl{constructor(){return PC()}}const Yk=new B("angularfire2._apps"),mIe={provide:as,useFactory:function gIe(n){return n&&1===n.length?n[0]:new as(yo())},deps:[[new Ce,Yk]]},_Ie={provide:Gl,deps:[[new Ce,Yk]]};function yIe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new as(r)}}let vIe=(()=>{class n{constructor(t){Se("angularfire",ia.full,"core"),Se("angularfire",ia.full,"app"),Se("angular",TF.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(C(Vc))},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[mIe,_Ie]}),n})();function bIe(n,...e){return{ngModule:vIe,providers:[{provide:Yk,useFactory:yIe(n),multi:!0,deps:[ce,Ge,$l,...e]}]}}const wIe=ql(ji,!0),Q4=new Map,EIe={activated:!1,tokenObservers:[]},CIe={initialized:!1,enabled:!1};function un(n){return Q4.get(n)||EIe}function Ii(n,e){Q4.set(n,e)}function Zv(){return CIe}class AIe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return g(function*(){t.stop();try{t.pending=new Da,yield function xIe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Da,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qn=new jr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Z4(n){if(!un(n).activated)throw qn.create("use-before-activation",{appName:n.name})}function Zk(n,e){return Jk.apply(this,arguments)}function Jk(){return Jk=g(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l,c;try{l=yield fetch(n,a)}catch(f){throw qn.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==l.status)throw qn.create("fetch-status-error",{httpStatus:l.status});try{c=yield l.json()}catch(f){throw qn.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw qn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=1e3*Number(u[1]),h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}),Jk.apply(this,arguments)}function PIe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Bp="firebase-app-check-store";let tb=null;function e8(){return tb||(tb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(qn.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Bp,{keyPath:"compositeKey"})}}catch(r){e(qn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),tb)}function eR(){return eR=g(function*(n,e){const r=(yield e8()).transaction(Bp,"readwrite"),s=r.objectStore(Bp).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(qn.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),eR.apply(this,arguments)}const Up=new go("@firebase/app-check");function i8(n,e){return po()?function LIe(n,e){return function t8(n,e){return eR.apply(this,arguments)}(function r8(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Up.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function s8(){return Zv().enabled}function o8(){return iR.apply(this,arguments)}function iR(){return iR=g(function*(){const n=Zv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),iR.apply(this,arguments)}const $Ie={error:"UNKNOWN_ERROR"};function zIe(n){return Cm.encodeString(JSON.stringify(n),!1)}function nb(n){return sR.apply(this,arguments)}function sR(){return sR=g(function*(n,e=!1){const t=n.app;Z4(t);const r=un(t);let s,i=r.token;if(!i){const l=yield r.cachedTokenPromise;l&&rb(l)&&(i=l)}if(!e&&i&&rb(i))return{token:i.token};let a,o=!1;if(s8()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zk(PIe(t,yield o8()),n.heartbeatServiceProvider).then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0);const l=yield r.exchangeTokenPromise;return yield i8(t,l),Ii(t,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=yield r.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Up.warn(l.message):Up.error(l),s=l}return i?(a={token:i.token},Ii(t,Object.assign(Object.assign({},r),{token:i})),yield i8(t,i)):a=qIe(s),o&&l8(t,a),a}),sR.apply(this,arguments)}function aR(n,e){const t=un(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ii(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function a8(n){const{app:e}=n,t=un(e);let r=t.tokenRefresher;r||(r=function WIe(n){const{app:e}=n;return new AIe(g(function*(){let r;if(r=un(e).token?yield nb(n,!0):yield nb(n),r.error)throw r.error}),()=>!0,()=>{const t=un(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ii(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function l8(n,e){const t=un(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function rb(n){return n.expireTimeMillis-Date.now()>0}function qIe(n){return{token:zIe($Ie),error:n}}class GIe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=un(this.app);for(const t of e)aR(this.app,t.next);return Promise.resolve()}}const m8="app-check-internal";!function aTe(){Ft(new Mt("app-check",n=>function KIe(n,e){return new GIe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(m8).initialize()})),Ft(new Mt(m8,n=>function YIe(n){return{getToken:e=>nb(n,e),addTokenListener:e=>function oR(n,e,t,r){const{app:i}=n,s=un(i),o={next:t,error:r,type:e};if(Ii(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&rb(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),a8(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>a8(n))}(n,"INTERNAL",e),removeTokenListener:e=>aR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Se("@firebase/app-check","0.5.12")}();class id{constructor(){return Hl("app-check")}}"undefined"!=typeof window&&window;class hR{constructor(e){return e}}class Vp{constructor(){return Hl("auth")}}const fR=new B("angularfire2.auth-instances");function fTe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new hR(r)}}const pTe={provide:Vp,deps:[[new Ce,fR]]},gTe={provide:hR,useFactory:function hTe(n,e){const t=jl("auth",n,e);return t&&new hR(t)},deps:[[new Ce,fR],as]};let mTe=(()=>{class n{constructor(){Se("angularfire",ia.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[gTe,pTe]}),n})();function _Te(n,...e){return{ngModule:mTe,providers:[{provide:fR,useFactory:fTe(n),multi:!0,deps:[ce,Ge,$l,Gl,[new Ce,id],...e]}]}}const yTe=ql(pM,!0);class pR{constructor(e){return e}}const v8="database",gR=new B("angularfire2.database-instances");function wTe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pR(r)}}const ETe={provide:class vTe{constructor(){return Hl(v8)}},deps:[[new Ce,gR]]},CTe={provide:pR,useFactory:function bTe(n,e){const t=jl(v8,n,e);return t&&new pR(t)},deps:[[new Ce,gR],as]};let ITe=(()=>{class n{constructor(){Se("angularfire",ia.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[CTe,ETe]}),n})();function TTe(n,...e){return{ngModule:ITe,providers:[{provide:gR,useFactory:wTe(n),multi:!0,deps:[ce,Ge,$l,Gl,[new Ce,Vp],[new Ce,id],...e]}]}}const DTe=ql(Va,!0);class mR{constructor(e){return e}}const b8="firestore",_R=new B("angularfire2.firestore-instances");function xTe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mR(r)}}const MTe={provide:class STe{constructor(){return Hl(b8)}},deps:[[new Ce,_R]]},kTe={provide:mR,useFactory:function ATe(n,e){const t=jl(b8,n,e);return t&&new mR(t)},deps:[[new Ce,_R],as]};let RTe=(()=>{class n{constructor(){Se("angularfire",ia.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[kTe,MTe]}),n})();function PTe(n,...e){return{ngModule:RTe,providers:[{provide:_R,useFactory:xTe(n),multi:!0,deps:[ce,Ge,$l,Gl,[new Ce,Vp],[new Ce,id],...e]}]}}const OTe=ql(jq,!0),vR="functions";class UTe{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return g(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return g(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return g(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return g(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const bR="us-central1";class jTe{constructor(e,t,r,i,s=bR,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new UTe(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=bR}catch(a){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const I8="@firebase/functions";function XTe(n=yo(),e=bR){return pi(pe(n),vR).getImmediate({identifier:e})}!function QTe(n,e){Ft(new Mt(vR,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),l=r.getProvider("app-check-internal");return new jTe(s,o,a,l,i,n)},"PUBLIC").setMultipleInstances(!0)),Se(I8,"0.8.4",e),Se(I8,"0.8.4","esm2017")}(fetch.bind(self));class CR{constructor(e){return e}}const D8="functions",IR=new B("angularfire2.functions-instances");function eDe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new CR(r)}}const tDe={provide:class ZTe{constructor(){return Hl(D8)}},deps:[[new Ce,IR]]},nDe={provide:CR,useFactory:function JTe(n,e){const t=jl(D8,n,e);return t&&new CR(t)},deps:[[new Ce,IR],as]};let rDe=(()=>{class n{constructor(){Se("angularfire",ia.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[nDe,tDe]}),n})();function iDe(n,...e){return{ngModule:rDe,providers:[{provide:IR,useFactory:eDe(n),multi:!0,deps:[ce,Ge,$l,Gl,[new Ce,Vp],[new Ce,id],...e]}]}}const sDe=ql(XTe,!0);class TR{constructor(e){return e}}const S8="messaging",DR=new B("angularfire2.messaging-instances");function lDe(n){return(e,t)=>{if(!Xv.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new TR(r)}}const cDe={provide:class oDe{constructor(){return Hl(S8)}},deps:[[new Ce,DR]]},uDe={provide:TR,useFactory:function aDe(n,e){if(!Xv.sync())return null;const t=jl(S8,n,e);return t&&new TR(t)},deps:[[new Ce,DR],as]};let dDe=(()=>{class n{constructor(){Se("angularfire",ia.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[uDe,cDe,{provide:rm,useValue:Xv.async,multi:!0}]}),n})();function hDe(n,...e){return{ngModule:dDe,providers:[{provide:DR,useFactory:lDe(n),multi:!0,deps:[ce,Ge,$l,Gl,...e]}]}}const fDe=ql(T0e,!0);class SR{constructor(e){return e}}const A8="storage",AR=new B("angularfire2.storage-instances");function mDe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new SR(r)}}const _De={provide:class pDe{constructor(){return Hl(A8)}},deps:[[new Ce,AR]]},yDe={provide:SR,useFactory:function gDe(n,e){const t=jl(A8,n,e);return t&&new SR(t)},deps:[[new Ce,AR],as]};let vDe=(()=>{class n{constructor(){Se("angularfire",ia.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[yDe,_De]}),n})();function bDe(n,...e){return{ngModule:vDe,providers:[{provide:AR,useFactory:mDe(n),multi:!0,deps:[ce,Ge,$l,Gl,[new Ce,Vp],[new Ce,id],...e]}]}}const wDe=ql(QG,!0),TDe={provide:new B("mat-menu-scroll-strategy"),deps:[qh],useFactory:function IDe(n){return()=>n.scrollStrategies.reposition()}};let M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({providers:[TDe],imports:[[Ta,rr,hj,tV],Wh,rr]}),n})(),xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[Ta,ay,gf,HI]]}),n})(),k8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[Ta,uT,xR,gf,ay,xR,yT]]}),n})(),DDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[Ta,gf,ay,k8,M8,$I,yT,HI]]}),n})(),SDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n}),n.\u0275inj=Re({imports:[[Ta,gf,$I]]}),n})(),ADe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ne({type:n,bootstrap:[xEe]}),n.\u0275inj=Re({providers:[],imports:[[cB,DEe,sce,DDe,k8,xR,SDe,bIe(()=>wIe(yi_firebase)),_Te(()=>yTe()),TTe(()=>DTe()),PTe(()=>OTe()),iDe(()=>sDe()),hDe(()=>fDe()),bDe(()=>wDe()),gf,ay,$I,yT,M8,HI]]}),n})();(function bZ(){EL=!1})(),Nee().bootstrapModule(ADe).catch(n=>console.error(n))}},hr=>{hr(hr.s=601)}]);