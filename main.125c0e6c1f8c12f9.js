"use strict";var qSe=Object.defineProperty,GSe=Object.defineProperties,KSe=Object.getOwnPropertyDescriptors,_K=Object.getOwnPropertySymbols,YSe=Object.prototype.hasOwnProperty,QSe=Object.prototype.propertyIsEnumerable,yK=(vr,Un,rr)=>Un in vr?qSe(vr,Un,{enumerable:!0,configurable:!0,writable:!0,value:rr}):vr[Un]=rr,vK=(vr,Un)=>{for(var rr in Un||(Un={}))YSe.call(Un,rr)&&yK(vr,rr,Un[rr]);if(_K)for(var rr of _K(Un))QSe.call(Un,rr)&&yK(vr,rr,Un[rr]);return vr},bK=(vr,Un)=>GSe(vr,KSe(Un));(self.webpackChunkwynyard=self.webpackChunkwynyard||[]).push([[179],{171:(vr,Un,rr)=>{var vd={};function He(n){return"function"==typeof n}function Eb(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}rr.r(vd),rr.d(vd,{FirebaseError:()=>cr,SDK_VERSION:()=>Ki,_DEFAULT_ENTRY_NAME:()=>La,_addComponent:()=>qm,_addOrOverwriteComponent:()=>YB,_apps:()=>Co,_clearComponents:()=>qne,_components:()=>bh,_getProvider:()=>Di,_registerComponent:()=>jt,_removeServiceInstance:()=>Wne,deleteApp:()=>QB,getApp:()=>To,getApps:()=>zC,initializeApp:()=>Yi,onLog:()=>XB,registerVersion:()=>ke,setLogLevel:()=>ZB});const Cb=Eb(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ng(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(He(r))try{r()}catch(s){e=s instanceof Cb?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{rP(s)}catch(o){e=null!=e?e:[],o instanceof Cb?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Cb(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rP(e);else{if(e instanceof bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ng(t,e)}remove(e){const{_finalizers:t}=this;t&&ng(t,e),e instanceof bt&&e._removeParent(this)}}bt.EMPTY=(()=>{const n=new bt;return n.closed=!0,n})();const tP=bt.EMPTY;function nP(n){return n instanceof bt||n&&"closed"in n&&He(n.remove)&&He(n.add)&&He(n.unsubscribe)}function rP(n){He(n)?n():n.unsubscribe()}const pa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rg={setTimeout(n,e,...t){const{delegate:r}=rg;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=rg;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function iP(n){rg.setTimeout(()=>{const{onUnhandledError:e}=pa;if(!e)throw n;e(n)})}function ig(){}const wK=Ib("C",void 0,void 0);function Ib(n,e,t){return{kind:n,value:e,error:t}}let ga=null;function sg(n){if(pa.useDeprecatedSynchronousErrorHandling){const e=!ga;if(e&&(ga={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ga;if(ga=null,t)throw r}}else n()}class Tb extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nP(e)&&e.add(this)):this.destination=AK}static create(e,t,r){return new bd(e,t,r)}next(e){this.isStopped?Sb(function CK(n){return Ib("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Sb(function EK(n){return Ib("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sb(wK,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const TK=Function.prototype.bind;function Db(n,e){return TK.call(n,e)}class DK{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){og(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){og(r)}else og(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){og(t)}}}class bd extends Tb{constructor(e,t,r){let i;if(super(),He(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&pa.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Db(e.next,s),error:e.error&&Db(e.error,s),complete:e.complete&&Db(e.complete,s)}):i=e}this.destination=new DK(i)}}function og(n){pa.useDeprecatedSynchronousErrorHandling?function IK(n){pa.useDeprecatedSynchronousErrorHandling&&ga&&(ga.errorThrown=!0,ga.error=n)}(n):iP(n)}function Sb(n,e){const{onStoppedNotification:t}=pa;t&&rg.setTimeout(()=>t(n,e))}const AK={closed:!0,next:ig,error:function SK(n){throw n},complete:ig},Ab="function"==typeof Symbol&&Symbol.observable||"@@observable";function ao(n){return n}let Je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function MK(n){return n&&n instanceof Tb||function xK(n){return n&&He(n.next)&&He(n.error)&&He(n.complete)}(n)&&nP(n)}(t)?t:new bd(t,r,i);return sg(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=oP(r))((i,s)=>{const o=new bd({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ab](){return this}pipe(...t){return function sP(n){return 0===n.length?ao:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=oP(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function oP(n){var e;return null!==(e=null!=n?n:pa.Promise)&&void 0!==e?e:Promise}const kK=Eb(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let me=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new aP(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kK}next(t){sg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){sg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){sg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?tP:(this.currentObservers=null,s.push(t),new bt(()=>{this.currentObservers=null,ng(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Je;return t.source=this,t}}return n.create=(e,t)=>new aP(e,t),n})();class aP extends me{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:tP}}function lP(n){return He(null==n?void 0:n.lift)}function wt(n){return e=>{if(lP(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function at(n,e,t,r,i){return new RK(n,e,t,r,i)}class RK extends Tb{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function be(n,e){return wt((t,r)=>{let i=0;t.subscribe(at(r,s=>{r.next(n.call(e,s,i++))}))})}function uP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function ma(n){return this instanceof ma?(this.v=n,this):new ma(n)}function NK(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof ma?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function FK(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function hP(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Mb=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function fP(n){return He(null==n?void 0:n.then)}function pP(n){return He(n[Ab])}function gP(n){return Symbol.asyncIterator&&He(null==n?void 0:n[Symbol.asyncIterator])}function mP(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _P=function BK(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yP(n){return He(null==n?void 0:n[_P])}function vP(n){return NK(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ma(t.read());if(i)return yield ma(void 0);yield yield ma(r)}}finally{t.releaseLock()}})}function bP(n){return He(null==n?void 0:n.getReader)}function ir(n){if(n instanceof Je)return n;if(null!=n){if(pP(n))return function UK(n){return new Je(e=>{const t=n[Ab]();if(He(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Mb(n))return function VK(n){return new Je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(fP(n))return function jK(n){return new Je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,iP)})}(n);if(gP(n))return wP(n);if(yP(n))return function HK(n){return new Je(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(bP(n))return function $K(n){return wP(vP(n))}(n)}throw mP(n)}function wP(n){return new Je(e=>{(function zK(n,e){var t,r,i,s;return function PK(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=FK(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ys(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ft(n,e,t=1/0){return He(e)?Ft((r,i)=>be((s,o)=>e(r,s,i,o))(ir(n(r,i))),t):("number"==typeof e&&(t=e),wt((r,i)=>function WK(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<r?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let _=!1;ir(t(m,u++)).subscribe(at(e,b=>{null==i||i(b),s?f(b):e.next(b)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){const b=l.shift();o?ys(e,o,()=>p(b)):p(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(at(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,n,t)))}function wd(n=1/0){return Ft(ao,n)}const vs=new Je(n=>n.complete());function EP(n){return n&&He(n.schedule)}function kb(n){return n[n.length-1]}function CP(n){return He(kb(n))?n.pop():void 0}function Ed(n){return EP(kb(n))?n.pop():void 0}function ag(n,e=0){return wt((t,r)=>{t.subscribe(at(r,i=>ys(r,n,()=>r.next(i),e),()=>ys(r,n,()=>r.complete(),e),i=>ys(r,n,()=>r.error(i),e)))})}function lg(n,e=0){return wt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IP(n,e){if(!n)throw new Error("Iterable cannot be null");return new Je(t=>{ys(t,e,()=>{const r=n[Symbol.asyncIterator]();ys(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Sn(n,e){return e?function JK(n,e){if(null!=n){if(pP(n))return function KK(n,e){return ir(n).pipe(lg(e),ag(e))}(n,e);if(Mb(n))return function QK(n,e){return new Je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(fP(n))return function YK(n,e){return ir(n).pipe(lg(e),ag(e))}(n,e);if(gP(n))return IP(n,e);if(yP(n))return function XK(n,e){return new Je(t=>{let r;return ys(t,e,()=>{r=n[_P](),ys(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>He(null==r?void 0:r.return)&&r.return()})}(n,e);if(bP(n))return function ZK(n,e){return IP(vP(n),e)}(n,e)}throw mP(n)}(n,e):ir(n)}function oc(...n){const e=Ed(n),t=function GK(n,e){return"number"==typeof kb(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ir(r[0]):wd(t)(Sn(r,e)):vs}function TP(n={}){const{connector:e=(()=>new me),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return wt((m,_)=>{c++,!d&&!u&&h();const b=l=null!=l?l:e();_.add(()=>{c--,0===c&&!d&&!u&&(a=Rb(p,i))}),b.subscribe(_),!o&&c>0&&(o=new bd({next:y=>b.next(y),error:y=>{d=!0,h(),a=Rb(f,t,y),b.error(y)},complete:()=>{u=!0,h(),a=Rb(f,r),b.complete()}}),ir(m).subscribe(o))})(s)}}function Rb(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new bd({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function Pb(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ze(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ze).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ob(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const e5=Ke({__forward_ref__:Ke});function cg(n){return n.__forward_ref__=cg,n.toString=function(){return ze(this())},n}function de(n){return DP(n)?n():n}function DP(n){return"function"==typeof n&&n.hasOwnProperty(e5)&&n.__forward_ref__===cg}class H extends Error{constructor(e,t){super(function Nb(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ae(n){return"string"==typeof n?n:null==n?"":String(n)}function Vn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ae(n)}function ug(n,e){const t=e?` in ${e}`:"";throw new H(-201,`No provider for ${Vn(n)} found${t}`)}function wr(n,e){null==n&&function st(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Te(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fb(n){return SP(n,dg)||SP(n,xP)}function SP(n,e){return n.hasOwnProperty(e)?n[e]:null}function AP(n){return n&&(n.hasOwnProperty(Lb)||n.hasOwnProperty(l5))?n[Lb]:null}const dg=Ke({\u0275prov:Ke}),Lb=Ke({\u0275inj:Ke}),xP=Ke({ngInjectableDef:Ke}),l5=Ke({ngInjectorDef:Ke});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let Bb;function lo(n){const e=Bb;return Bb=n,e}function MP(n,e,t){const r=Fb(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ne.Optional?null:void 0!==e?e:void ug(ze(n),"Injector")}function co(n){return{toString:n}.toString()}var ci=(()=>((ci=ci||{})[ci.OnPush=0]="OnPush",ci[ci.Default=1]="Default",ci))(),ui=(()=>{return(n=ui||(ui={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ui;var n})();const u5="undefined"!=typeof globalThis&&globalThis,d5="undefined"!=typeof window&&window,h5="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,We=u5||"undefined"!=typeof global&&global||d5||h5,ac={},Ye=[],hg=Ke({\u0275cmp:Ke}),Ub=Ke({\u0275dir:Ke}),Vb=Ke({\u0275pipe:Ke}),kP=Ke({\u0275mod:Ke}),ws=Ke({\u0275fac:Ke}),Cd=Ke({__NG_ELEMENT_ID__:Ke});let f5=0;function Ue(n){return co(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ci.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ye,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ui.Emulated,id:"c",styles:n.styles||Ye,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=f5++,r.inputs=NP(n.inputs,t),r.outputs=NP(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(RP):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(PP):null,r})}function RP(n){return An(n)||function uo(n){return n[Ub]||null}(n)}function PP(n){return function _a(n){return n[Vb]||null}(n)}const OP={};function Me(n){return co(()=>{const e={type:n.type,bootstrap:n.bootstrap||Ye,declarations:n.declarations||Ye,imports:n.imports||Ye,exports:n.exports||Ye,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(OP[n.id]=n.type),e})}function NP(n,e){if(null==n)return ac;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Pe=Ue;function An(n){return n[hg]||null}function Hr(n,e){const t=n[kP]||null;if(!t&&!0===e)throw new Error(`Type ${ze(n)} does not have '\u0275mod' property.`);return t}function Fi(n){return Array.isArray(n)&&"object"==typeof n[1]}function hi(n){return Array.isArray(n)&&!0===n[1]}function $b(n){return 0!=(8&n.flags)}function mg(n){return 2==(2&n.flags)}function _g(n){return 1==(1&n.flags)}function fi(n){return null!==n.template}function v5(n){return 0!=(512&n[2])}function wa(n,e){return n.hasOwnProperty(ws)?n[ws]:null}class E5{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Li(){return LP}function LP(n){return n.type.prototype.ngOnChanges&&(n.setInput=I5),C5}function C5(){const n=UP(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===ac)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function I5(n,e,t,r){const i=UP(n)||function T5(n,e){return n[BP]=e}(n,{previous:ac,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new E5(l&&l.currentValue,e,o===ac),n[r]=e}Li.ngInherit=!0;const BP="__ngSimpleChanges__";function UP(n){return n[BP]||null}let Kb;function Et(n){return!!n.listen}const VP={createRenderer:(n,e)=>function Yb(){return void 0!==Kb?Kb:"undefined"!=typeof document?document:void 0}()};function Lt(n){for(;Array.isArray(n);)n=n[0];return n}function yg(n,e){return Lt(e[n])}function Wr(n,e){return Lt(e[n.index])}function Qb(n,e){return n.data[e]}function Cr(n,e){const t=e[n];return Fi(t)?t:t[0]}function jP(n){return 4==(4&n[2])}function Xb(n){return 128==(128&n[2])}function ho(n,e){return null==e?null:n[e]}function HP(n){n[18]=0}function Zb(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const re={lFrame:QP(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $P(){return re.bindingsEnabled}function S(){return re.lFrame.lView}function Oe(){return re.lFrame.tView}function _n(n){return re.lFrame.contextLView=n,n[8]}function Gt(){let n=zP();for(;null!==n&&64===n.type;)n=n.parent;return n}function zP(){return re.lFrame.currentTNode}function Bi(n,e){const t=re.lFrame;t.currentTNode=n,t.isParent=e}function Jb(){return re.lFrame.isParent}function ew(){re.lFrame.isParent=!1}function vg(){return re.isInCheckNoChangesMode}function bg(n){re.isInCheckNoChangesMode=n}function fc(){return re.lFrame.bindingIndex++}function H5(n,e){const t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,tw(e)}function tw(n){re.lFrame.currentDirectiveIndex=n}function nw(n){const e=re.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function GP(){return re.lFrame.currentQueryIndex}function rw(n){re.lFrame.currentQueryIndex=n}function z5(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function KP(n,e,t){if(t&ne.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ne.Host||(i=z5(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=re.lFrame=YP();return r.currentTNode=e,r.lView=n,!0}function wg(n){const e=YP(),t=n[1];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YP(){const n=re.lFrame,e=null===n?null:n.child;return null===e?QP(n):e}function QP(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function XP(){const n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ZP=XP;function Eg(){const n=XP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hn(){return re.lFrame.selectedIndex}function fo(n){re.lFrame.selectedIndex=n}function Ct(){const n=re.lFrame;return Qb(n.tView,n.selectedIndex)}function Cg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Ig(n,e,t){eO(n,e,3,t)}function Tg(n,e,t,r){(3&n[2])===t&&eO(n,e,t,r)}function iw(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function eO(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(Z5(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function Z5(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Ad{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Dg(n,e,t){const r=Et(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];ow(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function tO(n){return 3===n||4===n||6===n}function ow(n){return 64===n.charCodeAt(0)}function Sg(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||nO(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function nO(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function rO(n){return-1!==n}function pc(n){return 32767&n}function gc(n,e){let t=function r6(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let aw=!0;function Ag(n){const e=aw;return aw=n,e}let i6=0;function Md(n,e){const t=cw(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,lw(r.data,n),lw(e,null),lw(r.blueprint,null));const i=xg(n,e),s=n.injectorIndex;if(rO(i)){const o=pc(i),a=gc(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function lw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cw(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function xg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Mg(n,e,t){!function s6(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Cd)&&(r=t[Cd]),null==r&&(r=t[Cd]=i6++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function oO(n,e,t){if(t&ne.Optional)return n;ug(e,"NodeInjector")}function aO(n,e,t,r){if(t&ne.Optional&&void 0===r&&(r=null),0==(t&(ne.Self|ne.Host))){const i=n[9],s=lo(void 0);try{return i?i.get(e,r,t&ne.Optional):MP(e,r,t&ne.Optional)}finally{lo(s)}}return oO(r,e,t)}function lO(n,e,t,r=ne.Default,i){if(null!==n){const s=function c6(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Cd)?n[Cd]:void 0;return"number"==typeof e?e>=0?255&e:a6:e}(t);if("function"==typeof s){if(!KP(e,n,r))return r&ne.Host?oO(i,t,r):aO(e,t,r,i);try{const o=s(r);if(null!=o||r&ne.Optional)return o;ug(t)}finally{ZP()}}else if("number"==typeof s){let o=null,a=cw(n,e),l=-1,c=r&ne.Host?e[16][6]:null;for((-1===a||r&ne.SkipSelf)&&(l=-1===a?xg(n,e):e[a+8],-1!==l&&dO(r,!1)?(o=e[1],a=pc(l),e=gc(l,e)):a=-1);-1!==a;){const u=e[1];if(uO(s,a,u.data)){const d=l6(a,e,t,o,r,c);if(d!==cO)return d}l=e[a+8],-1!==l&&dO(r,e[1].data[a+8]===c)&&uO(s,a,e)?(o=u,a=pc(l),e=gc(l,e)):a=-1}}}return aO(e,t,r,i)}const cO={};function a6(){return new mc(Gt(),S())}function l6(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=kg(a,o,t,null==r?mg(a)&&aw:r!=o&&0!=(3&a.type),i&ne.Host&&s===a);return null!==u?kd(e,o,u,a):cO}function kg(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=o[l];if(f&&fi(f)&&f.type===t)return l}return null}function kd(n,e,t,r){let i=n[t];const s=e.data;if(function J5(n){return n instanceof Ad}(i)){const o=i;o.resolving&&function t5(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new H(-200,`Circular dependency in DI detected for ${n}${t}`)}(Vn(s[t]));const a=Ag(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?lo(o.injectImpl):null;KP(n,r,ne.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function X5(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=LP(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&lo(l),Ag(a),o.resolving=!1,ZP()}}return i}function uO(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function dO(n,e){return!(n&ne.Self||n&ne.Host&&e)}class mc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return lO(this._tNode,this._lView,e,r,t)}}function uw(n){return co(()=>{const e=n.prototype.constructor,t=e[ws]||dw(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ws]||dw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function dw(n){return DP(n)?()=>{const e=dw(de(n));return e&&e()}:wa(n)}function _c(n){return function o6(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(tO(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Gt(),n)}const vc="__parameters__";function wc(n,e,t){return co(()=>{const r=function hw(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(vc)?l[vc]:Object.defineProperty(l,vc,{value:[]})[vc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class B{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const d6=new B("AnalyzeForEntryComponents");function qr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),qr(r,e)):e!==n&&e.push(r)}return e}function Ui(n,e){n.forEach(t=>Array.isArray(t)?Ui(t,e):e(t))}function fO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Od(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ir(n,e,t){let r=Ec(n,e);return r>=0?n[1|r]=t:(r=~r,function p6(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function pw(n,e){const t=Ec(n,e);if(t>=0)return n[1|t]}function Ec(n,e){return function mO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Nd={},mw="__NG_DI_FLAG__",Og="ngTempTokenPath",w6=/\n/gm,yO="__source",C6=Ke({provide:String,useValue:Ke});let Fd;function vO(n){const e=Fd;return Fd=n,e}function I6(n,e=ne.Default){if(void 0===Fd)throw new H(203,"");return null===Fd?MP(n,void 0,e):Fd.get(n,e&ne.Optional?null:void 0,e)}function I(n,e=ne.Default){return(function c5(){return Bb}()||I6)(de(n),e)}const Ng=I;function _w(n){const e=[];for(let t=0;t<n.length;t++){const r=de(n[t]);if(Array.isArray(r)){if(0===r.length)throw new H(900,"");let i,s=ne.Default;for(let o=0;o<r.length;o++){const a=r[o],l=T6(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(I(i,s))}else e.push(I(r))}return e}function Ld(n,e){return n[mw]=e,n.prototype[mw]=e,n}function T6(n){return n[mw]}const Fg=Ld(wc("Inject",n=>({token:n})),-1),De=Ld(wc("Optional"),8),Cc=Ld(wc("SkipSelf"),4);let Bg;function Tc(n){var e;return(null===(e=function vw(){if(void 0===Bg&&(Bg=null,We.trustedTypes))try{Bg=We.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Bg}())||void 0===e?void 0:e.createHTML(n))||n}class Ea{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class B6 extends Ea{getTypeName(){return"HTML"}}class U6 extends Ea{getTypeName(){return"Style"}}class V6 extends Ea{getTypeName(){return"Script"}}class j6 extends Ea{getTypeName(){return"URL"}}class H6 extends Ea{getTypeName(){return"ResourceURL"}}function Tr(n){return n instanceof Ea?n.changingThisBreaksApplicationSecurity:n}function Vi(n,e){const t=AO(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function AO(n){return n instanceof Ea&&n.getTypeName()||null}class K6{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Tc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Y6{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Tc(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Tc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const X6=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Z6=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ud(n){return(n=String(n)).match(X6)||n.match(Z6)?n:"unsafe:"+n}function MO(n){return(n=String(n)).split(",").map(e=>Ud(e.trim())).join(", ")}function ji(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Vd(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const kO=ji("area,br,col,hr,img,wbr"),RO=ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),PO=ji("rp,rt"),ww=Vd(kO,Vd(RO,ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vd(PO,ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vd(PO,RO)),Ew=ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cw=ji("srcset"),OO=Vd(Ew,Cw,ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),J6=ji("script,style,template");class e7{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ww.hasOwnProperty(t))return this.sanitizedSomething=!0,!J6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!OO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Ew[a]&&(l=Ud(l)),Cw[a]&&(l=MO(l)),this.buf.push(" ",o,'="',NO(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ww.hasOwnProperty(t)&&!kO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(NO(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const t7=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n7=/([^\#-~ |!])/g;function NO(n){return n.replace(/&/g,"&amp;").replace(t7,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(n7,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vg;function FO(n,e){let t=null;try{Vg=Vg||function xO(n){const e=new Y6(n);return function Q6(){try{return!!(new window.DOMParser).parseFromString(Tc(""),"text/html")}catch(n){return!1}}()?new K6(e):e}(n);let r=e?String(e):"";t=Vg.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Vg.getInertBodyElement(r)}while(r!==s);return Tc((new e7).sanitizeChildren(Iw(t)||t))}finally{if(t){const r=Iw(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Iw(n){return"content"in n&&function r7(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var je=(()=>((je=je||{})[je.NONE=0]="NONE",je[je.HTML=1]="HTML",je[je.STYLE=2]="STYLE",je[je.SCRIPT=3]="SCRIPT",je[je.URL=4]="URL",je[je.RESOURCE_URL=5]="RESOURCE_URL",je))();function pi(n){const e=function jd(){const n=S();return n&&n[12]}();return e?e.sanitize(je.URL,n)||"":Vi(n,"URL")?Tr(n):Ud(ae(n))}const UO="__ngContext__";function Mn(n,e){n[UO]=e}function Dw(n){const e=function Hd(n){return n[UO]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Aw(n){return n.ngOriginalError}function b7(n,...e){n.error(...e)}class go{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function v7(n){return n&&n.ngErrorLogger||b7}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Aw(e);for(;t&&Aw(t);)t=Aw(t);return t||null}}const M7=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(We))();function Hi(n){return n instanceof Function?n():n}var Dr=(()=>((Dr=Dr||{})[Dr.Important=1]="Important",Dr[Dr.DashCase=2]="DashCase",Dr))();function Mw(n,e){return undefined(n,e)}function $d(n){const e=n[3];return hi(e)?e[3]:e}function kw(n){return KO(n[13])}function Rw(n){return KO(n[4])}function KO(n){for(;null!==n&&!hi(n);)n=n[4];return n}function Sc(n,e,t,r,i){if(null!=r){let s,o=!1;hi(r)?s=r:Fi(r)&&(o=!0,r=r[0]);const a=Lt(r);0===n&&null!==t?null==i?e1(e,t,a):Ca(e,t,a,i||null,!0):1===n&&null!==t?Ca(e,t,a,i||null,!0):2===n?function l1(n,e,t){const r=jg(n,e);r&&function z7(n,e,t,r){Et(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function G7(n,e,t,r,i){const s=t[7];s!==Lt(t)&&Sc(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];zd(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function Ow(n,e,t){if(Et(n))return n.createElement(e,t);{const r=null!==t?function x5(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function QO(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Zb(i,-1)),t.splice(r,1)}function Nw(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&QO(i,r),e>0&&(n[t-1][4]=r[4]);const s=Rg(n,10+e);!function F7(n,e){zd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function XO(n,e){if(!(256&e[2])){const t=e[11];Et(t)&&t.destroyNode&&zd(n,e,t,3,null,null),function U7(n){let e=n[13];if(!e)return Fw(n[1],n);for(;e;){let t=null;if(Fi(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Fi(e)&&Fw(e[1],e),e=e[3];null===e&&(e=n),Fi(e)&&Fw(e[1],e),t=e&&e[4]}e=t}}(e)}}function Fw(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function $7(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ad)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function H7(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Lt(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&Et(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&hi(e[3])){t!==e[3]&&QO(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function ZO(n,e,t){return function JO(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===ui.None||i===ui.Emulated)return null}return Wr(r,t)}(n,e.parent,t)}function Ca(n,e,t,r,i){Et(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function e1(n,e,t){Et(n)?n.appendChild(e,t):e.appendChild(t)}function t1(n,e,t,r,i){null!==r?Ca(n,e,t,r,i):e1(n,e,t)}function jg(n,e){return Et(n)?n.parentNode(e):e.parentNode}function n1(n,e,t){return s1(n,e,t)}let s1=function r1(n,e,t){return 40&n.type?Wr(n,t):null};function Hg(n,e,t,r){const i=ZO(n,r,e),s=e[11],a=n1(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)t1(s,i,t[l],a,!1);else t1(s,i,t,a,!1)}function $g(n,e){if(null!==e){const t=e.type;if(3&t)return Wr(e,n);if(4&t)return Bw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return $g(n,r);{const i=n[e.index];return hi(i)?Bw(-1,i):Lt(i)}}if(32&t)return Mw(e,n)()||Lt(n[e.index]);{const r=a1(n,e);return null!==r?Array.isArray(r)?r[0]:$g($d(n[16]),r):$g(n,e.next)}}return null}function a1(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Bw(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return $g(r,i)}return e[7]}function Uw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Mn(Lt(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Uw(n,e,t.child,r,i,s,!1),Sc(e,n,i,a,s);else if(32&l){const c=Mw(t,r);let u;for(;u=c();)Sc(e,n,i,u,s);Sc(e,n,i,a,s)}else 16&l?c1(n,e,r,t,i,s):Sc(e,n,i,a,s);t=o?t.projectionNext:t.next}}function zd(n,e,t,r,i,s){Uw(t,r,n.firstChild,e,i,s,!1)}function c1(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Sc(e,n,i,l[c],s);else Uw(n,e,l,o[3],i,s,!0)}function u1(n,e,t){Et(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Vw(n,e,t){Et(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function d1(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const h1="ng-template";function Y7(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==d1(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function f1(n){return 4===n.type&&n.value!==h1}function Q7(n,e,t){return e===(4!==n.type||t?n.value:h1)}function X7(n,e,t){let r=4;const i=n.attrs||[],s=function eY(n){for(let e=0;e<n.length;e++)if(tO(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Q7(n,l,t)||""===l&&1===e.length){if(gi(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!Y7(n.attrs,c,t)){if(gi(r))return!1;o=!0}continue}const d=Z7(8&r?"class":l,i,f1(n),t);if(-1===d){if(gi(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==d1(f,c,0)||2&r&&c!==h){if(gi(r))return!1;o=!0}}}}else{if(!o&&!gi(r)&&!gi(l))return!1;if(o&&gi(l))continue;o=!1,r=l|1&r}}return gi(r)||o}function gi(n){return 0==(1&n)}function Z7(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function tY(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function p1(n,e,t=!1){for(let r=0;r<e.length;r++)if(X7(n,e[r],t))return!0;return!1}function nY(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function g1(n,e){return n?":not("+e.trim()+")":e}function rY(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gi(o)&&(e+=g1(s,i),i=""),r=o,s=s||!gi(r);t++}return""!==i&&(e+=g1(s,i)),e}const le={};function ee(n){m1(Oe(),S(),Hn()+n,vg())}function m1(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ig(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Tg(e,s,0,t)}fo(t)}function zg(n,e){return n<<17|e<<2}function mi(n){return n>>17&32767}function jw(n){return 2|n}function Is(n){return(131068&n)>>2}function Hw(n,e){return-131069&n|e<<2}function $w(n){return 1|n}function S1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];rw(i),o.contentQueries(2,e[s],s)}}}function Wd(n,e,t,r,i,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,HP(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Ac(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Zw(n,e,t,r,i){const s=zP(),o=Jb(),l=n.data[e]=function wY(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function j5(){return re.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Sd(){const n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Bi(s,!0),s}function xc(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function qd(n,e,t){wg(e);try{const r=n.viewQuery;null!==r&&aE(1,r,t);const i=n.template;null!==i&&A1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&S1(n,e),n.staticViewQueries&&aE(2,n.viewQuery,t);const s=n.components;null!==s&&function yY(n,e){for(let t=0;t<e.length;t++)UY(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Eg()}}function Mc(n,e,t,r){const i=e[2];if(256==(256&i))return;wg(e);const s=vg();try{HP(e),function WP(n){return re.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&A1(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Ig(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Tg(e,c,0,null),iw(e,0)}if(function LY(n){for(let e=kw(n);null!==e;e=Rw(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&Zb(s,1),i[2]|=1024}}}(e),function FY(n){for(let e=kw(n);null!==e;e=Rw(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Xb(r)&&Mc(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&S1(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Ig(e,c)}else{const c=n.contentHooks;null!==c&&Tg(e,c,1),iw(e,1)}!function mY(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)fo(~i);else{const s=i,o=t[++r],a=t[++r];H5(o,s),a(2,e[s])}}}finally{fo(-1)}}(n,e);const a=n.components;null!==a&&function _Y(n,e){for(let t=0;t<e.length;t++)BY(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&aE(2,l,r),!s)if(o){const c=n.viewCheckHooks;null!==c&&Ig(e,c)}else{const c=n.viewHooks;null!==c&&Tg(e,c,2),iw(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Zb(e[3],-1))}finally{Eg()}}function vY(n,e,t,r){const i=e[10],s=!vg(),o=jP(e);try{s&&!o&&i.begin&&i.begin(),o&&qd(n,e,r),Mc(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function A1(n,e,t,r,i){const s=Hn(),o=2&r;try{fo(-1),o&&e.length>20&&m1(n,e,20,vg()),t(r,i)}finally{fo(s)}}function Jw(n,e,t){!$P()||(function AY(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Md(t,e),Mn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=fi(l);c&&PY(e,t,l);const u=kd(e,n,a,t);Mn(u,e),null!==o&&OY(0,a-i,u,l,0,o),c&&(Cr(t.index,e)[8]=u)}}(n,e,t,Wr(t,e)),128==(128&t.flags)&&function xY(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function $5(){return re.lFrame.currentDirectiveIndex}();try{fo(o);for(let l=r;l<i;l++){const c=n.data[l],u=e[l];tw(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&L1(c,u)}}finally{fo(-1),tw(a)}}(n,e,t))}function eE(n,e,t=Wr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function M1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Gg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Gg(n,e,t,r,i,s,o,a,l,c){const u=20+r,d=u+i,h=function bY(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:le);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function P1(n,e,t,r){const i=$1(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&z1(n).push(r,i.length-1))}function O1(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Sr(n,e,t,r,i,s,o,a){const l=Wr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(G1(n,t,u,r,i),mg(e)&&function IY(n,e){const t=Cr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function CY(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,Et(s)?s.setProperty(l,r,i):ow(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function tE(n,e,t,r){let i=!1;if($P()){const s=function MY(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];p1(t,o.selectors,!1)&&(i||(i=[]),Mg(Md(t,e),n,o.type),fi(o)?(B1(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,U1(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=xc(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Sg(t.mergedAttrs,d.hostAttrs),V1(n,t,e,c,d),RY(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function EY(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===s||f1(e)?null:NY(d,s);o.push(h),a=O1(d,c,a),l=O1(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function kY(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new H(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Sg(t.mergedAttrs,t.attrs),i}function F1(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function SY(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function L1(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function B1(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function RY(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;fi(e)&&(t[""]=n)}}function U1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function V1(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=wa(i.type)),o=new Ad(s,fi(i),null);n.blueprint[r]=o,t[r]=o,F1(n,e,0,r,xc(n,t,i.hostVars,le),i)}function PY(n,e,t){const r=Wr(e,n),i=M1(t),s=n[10],o=Kg(n,Wd(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function $i(n,e,t,r,i,s){const o=Wr(n,e);!function nE(n,e,t,r,i,s,o){if(null==s)Et(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?ae(s):o(s,r||"",i);Et(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function OY(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function NY(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function j1(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function BY(n,e){const t=Cr(e,n);if(Xb(t)){const r=t[1];80&t[2]?Mc(r,t,r.template,t[8]):t[5]>0&&rE(t)}}function rE(n){for(let r=kw(n);null!==r;r=Rw(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Mc(o,s,o.template,s[8])}else s[5]>0&&rE(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Cr(t[r],n);Xb(i)&&i[5]>0&&rE(i)}}function UY(n,e){const t=Cr(e,n),r=t[1];(function VY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),qd(r,t,t[8])}function Kg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function iE(n){for(;n;){n[2]|=64;const e=$d(n);if(v5(n)&&!e)return n;n=e}return null}function oE(n,e,t){const r=e[10];r.begin&&r.begin();try{Mc(n,e,n.template,t)}catch(i){throw q1(e,i),i}finally{r.end&&r.end()}}function H1(n){!function sE(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Dw(t),i=r[1];vY(i,r,i.template,t)}}(n[8])}function aE(n,e,t){rw(0),e(n,t)}const zY=(()=>Promise.resolve(null))();function $1(n){return n[7]||(n[7]=[])}function z1(n){return n.cleanup||(n.cleanup=[])}function W1(n,e,t){return(null===n||fi(n))&&(t=function R5(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function q1(n,e){const t=n[9],r=t?t.get(go,null):null;r&&r.handleError(e)}function G1(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Ts(n,e,t){const r=yg(e,n);!function YO(n,e,t){Et(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ob(i,a):2==s&&(r=Ob(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const lE=new B("INJECTOR",-1);class K1{get(e,t=Nd){if(t===Nd){const r=new Error(`NullInjectorError: No provider for ${ze(e)}!`);throw r.name="NullInjectorError",r}return t}}const cE=new B("Set Injector scope."),Gd={},GY={};let uE;function Y1(){return void 0===uE&&(uE=new K1),uE}function Q1(n,e=null,t=null,r){const i=X1(n,e,t,r);return i._resolveInjectorDefTypes(),i}function X1(n,e=null,t=null,r){return new KY(n,t,e||Y1(),r)}class KY{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Ui(t,a=>this.processProvider(a,e,t)),Ui([e],a=>this.processInjectorType(a,[],s)),this.records.set(lE,kc(void 0,this));const o=this.records.get(cE);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:ze(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Nd,r=ne.Default){this.assertNotDestroyed();const i=vO(this),s=lo(void 0);try{if(!(r&ne.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function nQ(n){return"function"==typeof n||"object"==typeof n&&n instanceof B}(e)&&Fb(e);a=l&&this.injectableDefInScope(l)?kc(dE(e),Gd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&ne.Self?Y1():this.parent).get(e,t=r&ne.Optional&&t===Nd?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Og]=o[Og]||[]).unshift(ze(e)),i)throw o;return function D6(n,e,t,r){const i=n[Og];throw e[yO]&&i.unshift(e[yO]),n.message=function S6(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=ze(e);if(Array.isArray(e))i=e.map(ze).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ze(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(w6,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Og]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{lo(s),vO(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(ze(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processInjectorType(e,t,r){if(!(e=de(e)))return!1;let i=AP(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=AP(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{Ui(i.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Ui(f,p=>this.processProvider(p,h,f||Ye))}}this.injectorDefTypes.add(o);const l=wa(o)||(()=>new o);this.records.set(o,kc(l,Gd));const c=i.providers;if(null!=c&&!a){const u=e;Ui(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Rc(e=de(e))?e:de(e&&e.provide);const s=function QY(n,e,t){return J1(n)?kc(void 0,n.useValue):kc(Z1(n),Gd)}(e);if(Rc(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=kc(void 0,Gd,!0),o.factory=()=>_w(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Gd&&(t.value=GY,t.value=t.factory()),"object"==typeof t.value&&t.value&&function tQ(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=de(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function dE(n){const e=Fb(n),t=null!==e?e.factory:wa(n);if(null!==t)return t;if(n instanceof B)throw new H(204,!1);if(n instanceof Function)return function YY(n){const e=n.length;if(e>0)throw Od(e,"?"),new H(204,!1);const t=function o5(n){const e=n&&(n[dg]||n[xP]);if(e){const t=function a5(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new H(204,!1)}function Z1(n,e,t){let r;if(Rc(n)){const i=de(n);return wa(i)||dE(i)}if(J1(n))r=()=>de(n.useValue);else if(function ZY(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(..._w(n.deps||[]));else if(function XY(n){return!(!n||!n.useExisting)}(n))r=()=>I(de(n.useExisting));else{const i=de(n&&(n.useClass||n.provide));if(!function eQ(n){return!!n.deps}(n))return wa(i)||dE(i);r=()=>new i(..._w(n.deps))}return r}function kc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function J1(n){return null!==n&&"object"==typeof n&&C6 in n}function Rc(n){return"function"==typeof n}let Qe=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return Q1({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return Q1({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Nd,n.NULL=new K1,n.\u0275prov=$({token:n,providedIn:"any",factory:()=>I(lE)}),n.__NG_ELEMENT_ID__=-1,n})();function uQ(n,e){Cg(Dw(n)[1],Gt())}function Gr(n){let e=function dN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=pE(n.inputs),o.declaredInputs=pE(n.declaredInputs),o.outputs=pE(n.outputs);const a=i.hostBindings;a&&pQ(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&hQ(n,l),c&&fQ(n,c),Pb(n.inputs,i.inputs),Pb(n.declaredInputs,i.declaredInputs),Pb(n.outputs,i.outputs),fi(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Gr&&(t=!1)}}e=Object.getPrototypeOf(e)}!function dQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sg(i.hostAttrs,t=Sg(t,i.hostAttrs))}}(r)}function pE(n){return n===ac?{}:n===Ye?[]:n}function hQ(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function fQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function pQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let Qg=null;function Pc(){if(!Qg){const n=We.Symbol;if(n&&n.iterator)Qg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Qg=r)}}}return Qg}function Kd(n){return!!gE(n)&&(Array.isArray(n)||!(n instanceof Map)&&Pc()in n)}function gE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function kn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ar(n,e,t,r){const i=S();return kn(i,fc(),e)&&(Oe(),$i(Ct(),i,n,e,t,r)),ar}function Nc(n,e,t,r){return kn(n,fc(),t)?e+ae(t)+r:le}function Bt(n,e,t,r,i,s,o,a){const l=S(),c=Oe(),u=n+20,d=c.firstCreatePass?function wQ(n,e,t,r,i,s,o,a,l){const c=e.consts,u=Ac(e,n,4,o||null,ho(c,a));tE(e,t,u,ho(c,l)),Cg(e,u);const d=u.tViews=Gg(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Bi(d,!1);const h=l[11].createComment("");Hg(c,l,h,d),Mn(h,l),Kg(l,l[u]=j1(h,l,h,d)),_g(d)&&Jw(c,l,d),null!=o&&eE(l,d,a)}function Yt(n){return function hc(n,e){return n[e]}(function V5(){return re.lFrame.contextLView}(),20+n)}function v(n,e=ne.Default){const t=S();return null===t?I(n,e):lO(Gt(),t,de(n),e)}function Jg(){throw new Error("invalid")}function ge(n,e,t){const r=S();return kn(r,fc(),e)&&Sr(Oe(),Ct(),r,n,e,r[11],t,!1),ge}function bE(n,e,t,r,i){const o=i?"class":"style";G1(n,t,e.inputs[o],o,r)}function M(n,e,t,r){const i=S(),s=Oe(),o=20+n,a=i[11],l=i[o]=Ow(a,e,function Q5(){return re.lFrame.currentNamespace}()),c=s.firstCreatePass?function HQ(n,e,t,r,i,s,o){const a=e.consts,c=Ac(e,n,2,i,ho(a,s));return tE(e,t,c,ho(a,o)),null!==c.attrs&&Yg(c,c.attrs,!1),null!==c.mergedAttrs&&Yg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];Bi(c,!0);const u=c.mergedAttrs;null!==u&&Dg(a,l,u);const d=c.classes;null!==d&&Vw(a,l,d);const h=c.styles;return null!==h&&u1(a,l,h),64!=(64&c.flags)&&Hg(s,i,l,c),0===function N5(){return re.lFrame.elementDepthCount}()&&Mn(l,i),function F5(){re.lFrame.elementDepthCount++}(),_g(c)&&(Jw(s,i,c),function x1(n,e,t){if($b(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,i)),null!==r&&eE(i,c),M}function x(){let n=Gt();Jb()?ew():(n=n.parent,Bi(n,!1));const e=n;!function L5(){re.lFrame.elementDepthCount--}();const t=Oe();return t.firstCreatePass&&(Cg(t,n),$b(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function t6(n){return 0!=(16&n.flags)}(e)&&bE(t,e,S(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function n6(n){return 0!=(32&n.flags)}(e)&&bE(t,e,S(),e.stylesWithoutHost,!1),x}function te(n,e,t,r){return M(n,e,t,r),x(),te}function yi(){return S()}function em(n){return!!n&&"function"==typeof n.then}const PN=function RN(n){return!!n&&"function"==typeof n.subscribe};function Le(n,e,t,r){const i=S(),s=Oe(),o=Gt();return ON(s,i,i[11],o,n,e,!!t,r),Le}function tm(n,e){const t=Gt(),r=S(),i=Oe();return ON(i,r,W1(nw(i.data),t,r),t,n,e,!1),tm}function ON(n,e,t,r,i,s,o,a){const l=_g(r),u=n.firstCreatePass&&z1(n),d=e[8],h=$1(e);let f=!0;if(3&r.type||a){const _=Wr(r,e),b=a?a(_):_,y=h.length,C=a?T=>a(Lt(T[r.index])):r.index;if(Et(t)){let T=null;if(!a&&l&&(T=function zQ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,f=!1;else{s=CE(r,e,d,s,!1);const R=t.listen(b,i,s);h.push(s,R),u&&u.push(i,C,y,y+1)}}else s=CE(r,e,d,s,!0),b.addEventListener(i,s,o),h.push(s),u&&u.push(i,C,y,o)}else s=CE(r,e,d,s,!1);const p=r.outputs;let m;if(f&&null!==p&&(m=p[i])){const _=m.length;if(_)for(let b=0;b<_;b+=2){const U=e[m[b]][m[b+1]].subscribe(s),Z=h.length;h.push(s,U),u&&u.push(i,r.index,Z,-(Z+1))}}}function NN(n,e,t,r){try{return!1!==t(r)}catch(i){return q1(n,i),!1}}function CE(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?Cr(n.index,e):e;0==(32&e[2])&&iE(a);let l=NN(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=NN(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Mt(n=1){return function W5(n){return(re.lFrame.contextLView=function q5(n,e){for(;n>0;)e=e[15],n--;return e}(n,re.lFrame.contextLView))[8]}(n)}function WQ(n,e){let t=null;const r=function J7(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?p1(n,s,!0):nY(r,s))return i}else t=i}return t}function Ar(n){const e=S()[16][6];if(!e.projection){const r=e.projection=Od(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?WQ(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Qt(n,e=0,t){const r=S(),i=Oe(),s=Ac(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),ew(),64!=(64&s.flags)&&function q7(n,e,t){c1(e[11],0,e,t,ZO(n,t,e),n1(t.parent||e[6],t,e))}(i,r,s)}function yo(n,e,t){return zc(n,"",e,"",t),yo}function zc(n,e,t,r,i){const s=S(),o=Nc(s,e,t,r);return o!==le&&Sr(Oe(),Ct(),s,n,o,s[11],i,!1),zc}function zN(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?mi(s):Is(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];KQ(n[a],e)&&(l=!0,n[a+1]=r?$w(u):jw(u)),a=r?mi(u):Is(u)}l&&(n[t+1]=r?jw(s):$w(s))}function KQ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ec(n,e)>=0}function IE(n,e,t){return vi(n,e,t,!1),IE}function xr(n,e){return vi(n,e,null,!0),xr}function vi(n,e,t,r){const i=S(),s=Oe(),o=function Cs(n){const e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function ZN(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Hn()],o=function XN(n,e){return e>=n.expandoStartIndex}(n,t);(function nF(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function r9(n,e,t,r){const i=nw(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Qd(t=TE(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=TE(i,n,e,t,r),null===s){let l=function i9(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Is(r))return n[mi(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=TE(null,n,e,l[1],r),l=Qd(l,e.attrs,r),function s9(n,e,t,r){n[mi(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function o9(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Qd(r,n[s].hostAttrs,t);return Qd(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function qQ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=mi(o),l=Is(o);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Ec(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=mi(n[a+1]);n[r+1]=zg(h,a),0!==h&&(n[h+1]=Hw(n[h+1],r)),n[a+1]=function oY(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=zg(a,0),0!==a&&(n[a+1]=Hw(n[a+1],r)),a=r;else n[r+1]=zg(l,0),0===a?a=r:n[l+1]=Hw(n[l+1],r),l=r;c&&(n[r+1]=jw(n[r+1])),zN(n,u,r,!0),zN(n,u,r,!1),function GQ(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ec(s,e)>=0&&(t[r+1]=$w(t[r+1]))}(e,u,n,r,s),o=zg(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==le&&kn(i,o,e)&&function eF(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];nm(function v1(n){return 1==(1&n)}(c)?tF(l,e,t,i,Is(c),o):void 0)||(nm(s)||function y1(n){return 2==(2&n)}(c)&&(s=tF(l,null,t,i,a,o)),function K7(n,e,t,r,i){const s=Et(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Dr.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Dr.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,yg(Hn(),t),i,s))}(s,s.data[Hn()],i,i[11],n,i[o+1]=function c9(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ze(Tr(n)))),n}(e,t),r,o)}function TE(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Qd(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Qd(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ir(n,o,!!t||e[++s]))}return void 0===n?null:n}function tF(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===le&&(h=d?Ye:void 0);let f=d?pw(h,r):u===r?h:void 0;if(c&&!nm(f)&&(f=pw(l,r)),nm(f)&&(a=f,o))return a;const p=n[i+1];i=o?mi(p):Is(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=pw(l,r))}return a}function nm(n){return void 0!==n}function z(n,e=""){const t=S(),r=Oe(),i=n+20,s=r.firstCreatePass?Ac(r,i,1,e,null):r.data[i],o=t[i]=function Pw(n,e){return Et(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Hg(r,t,o,s),Bi(s,!1)}function Xd(n){return Yr("",n,""),Xd}function Yr(n,e,t){const r=S(),i=Nc(r,n,e,t);return i!==le&&Ts(r,Hn(),i),Yr}function rm(n,e,t){const r=S();return kn(r,fc(),e)&&Sr(Oe(),Ct(),r,n,e,r[11],t,!0),rm}function im(n,e,t){const r=S();if(kn(r,fc(),e)){const s=Oe(),o=Ct();Sr(s,o,r,n,e,W1(nw(s.data),o,r),t,!0)}return im}const sm="en-US";let EF=sm;function AE(n,e,t,r,i){if(n=de(n),Array.isArray(n))for(let s=0;s<n.length;s++)AE(n[s],e,t,r,i);else{const s=Oe(),o=S();let a=Rc(n)?n:de(n.provide),l=Z1(n);const c=Gt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Rc(n)||!n.multi){const f=new Ad(l,i,v),p=ME(a,e,i?u:u+h,d);-1===p?(Mg(Md(c,o),s,a),xE(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=ME(a,e,u+h,d),p=ME(a,e,u,u+h),m=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!m){Mg(Md(c,o),s,a);const b=function AX(n,e,t,r,i){const s=new Ad(n,t,v);return s.multi=[],s.index=e,s.componentProviders=0,qF(s,i,r&&!t),s}(i?SX:DX,t.length,i,r,l);!i&&_&&(t[p].providerFactory=b),xE(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(b),o.push(b)}else xE(s,n,f>-1?f:p,qF(t[i?p:f],l,!i&&r));!i&&r&&_&&t[p].componentProviders++}}}function xE(n,e,t,r){const i=Rc(e),s=function JY(n){return!!n.useClass}(e);if(i||s){const l=(s?de(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function qF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ME(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function DX(n,e,t,r){return kE(this.multi,[])}function SX(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=kd(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),kE(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],kE(i,s);return s}function kE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function nh(n,e=[]){return t=>{t.providersResolver=(r,i)=>function TX(n,e,t){const r=Oe();if(r.firstCreatePass){const i=fi(n);AE(t,r.data,r.blueprint,i,!0),AE(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class GF{}class kX{resolveComponentFactory(e){throw function MX(n){const e=Error(`No component factory found for ${ze(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Da=(()=>{class n{}return n.NULL=new kX,n})();function RX(){return Kc(Gt(),S())}function Kc(n,e){return new qe(Wr(n,e))}let qe=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=RX,n})();function PX(n){return n instanceof qe?n.nativeElement:n}class rh{}let um=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function NX(){const n=S(),t=Cr(Gt().index,n);return function OX(n){return n[11]}(Fi(t)?t:n)}(),n})(),FX=(()=>{class n{}return n.\u0275prov=$({token:n,providedIn:"root",factory:()=>null}),n})();class Sa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const YF=new Sa("13.2.7"),RE={};function dm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Lt(s)),hi(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&dm(l[1],l,c,r)}const o=t.type;if(8&o)dm(n,e,t.child,r);else if(32&o){const a=Mw(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=a1(e,t);if(Array.isArray(a))r.push(...a);else{const l=$d(e[16]);dm(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class ih{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return dm(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(hi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Nw(e,r),Rg(t,r))}this._attachedToViewContainer=!1}XO(this._lView[1],this._lView)}onDestroy(e){P1(this._lView[1],this._lView,null,e)}markForCheck(){iE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){oE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function HY(n,e,t){bg(!0);try{oE(n,e,t)}finally{bg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new H(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function B7(n,e){zd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,"");this._appRef=e}}class LX extends ih{constructor(e){super(e),this._view=e}detectChanges(){H1(this._view)}checkNoChanges(){!function $Y(n){bg(!0);try{H1(n)}finally{bg(!1)}}(this._view)}get context(){return null}}class QF extends Da{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=An(e);return new PE(t,this.ngModule)}}function XF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class PE extends GF{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function iY(n){return n.map(rY).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return XF(this.componentDef.inputs)}get outputs(){return XF(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function UX(n,e){return{get:(t,r,i)=>{const s=n.get(t,RE,i);return s!==RE||r===RE?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(rh,VP),a=s.get(FX,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=r?function R1(n,e,t){if(Et(n))return n.selectRootElement(e,t===ui.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Ow(o.createRenderer(null,this.componentDef),c,function BX(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function uN(n,e){return{components:[],scheduler:n||M7,clean:zY,playerHandler:e||null,flags:0}}(),f=Gg(0,null,null,1,0,null,null,null,null,null),p=Wd(null,f,h,d,null,null,o,l,a,s);let m,_;wg(p);try{const b=function lN(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=Ac(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Yg(l,c,!0),null!==n&&(Dg(i,n,c),null!==l.classes&&Vw(i,n,l.classes),null!==l.styles&&u1(i,n,l.styles)));const u=r.createRenderer(n,e),d=Wd(t,M1(e),null,e.onPush?64:16,t[20],l,r,u,s||null,null);return o.firstCreatePass&&(Mg(Md(l,t),o,e.type),B1(o,l),U1(l,t.length,1)),Kg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(r)Dg(l,u,["ng-version",YF.full]);else{const{attrs:y,classes:C}=function sY(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!gi(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Dg(l,u,y),C&&C.length>0&&Vw(l,u,C.join(" "))}if(_=Qb(f,20),void 0!==t){const y=_.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const T=t[C];y.push(null!=T?Array.from(T):null)}}m=function cN(n,e,t,r,i){const s=t[1],o=function DY(n,e,t){const r=Gt();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),V1(n,r,e,xc(n,e,1,null),t));const i=kd(e,n,r.directiveStart,r);Mn(i,e);const s=Wr(r,e);return s&&Mn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Gt();e.contentQueries(1,o,l.directiveStart)}const a=Gt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fo(a.index),F1(t[1],a,0,a.directiveStart,a.directiveEnd,e),L1(e,o)),o}(b,this.componentDef,p,h,[uQ]),qd(f,p,null)}finally{Eg()}return new jX(this.componentType,m,Kc(_,p),p,_)}}class jX extends class xX{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new LX(i),this.componentType=e}get injector(){return new mc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Ds{}class ZF{}const Yc=new Map;class tL extends Ds{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new QF(this);const r=Hr(e);this._bootstrapComponents=Hi(r.bootstrap),this._r3Injector=X1(e,t,[{provide:Ds,useValue:this},{provide:Da,useValue:this.componentFactoryResolver}],ze(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Qe.THROW_IF_NOT_FOUND,r=ne.Default){return e===Qe||e===Ds||e===lE?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class OE extends ZF{constructor(e){super(),this.moduleType=e,null!==Hr(e)&&function $X(n){const e=new Set;!function t(r){const i=Hr(r,!0),s=i.id;null!==s&&(function JF(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${ze(e)} vs ${ze(e.name)}`)}(s,Yc.get(s),r),Yc.set(s,r));const o=Hi(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new tL(this.moduleType,e)}}function hm(n,e,t,r,i){return function rL(n,e,t,r,i,s,o){const a=e+t;return function Ia(n,e,t,r){const i=kn(n,e,t);return kn(n,e+1,r)||i}(n,a,i,s)?function zi(n,e,t){return n[e]=t}(n,a+2,o?r.call(o,i,s):r(i,s)):function sh(n,e){const t=n[e];return t===le?void 0:t}(n,a+2)}(S(),function jn(){const n=re.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r,i)}function NE(n){return e=>{setTimeout(n,void 0,e)}}const ct=class oZ extends me{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=NE(l),a&&(a=NE(a)),c&&(c=NE(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof bt&&e.add(u),u}};function aZ(){return this._results[Pc()]()}class Aa{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Pc(),r=Aa.prototype;r[t]||(r[t]=aZ)}get changes(){return this._changes||(this._changes=new ct)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=qr(e);(this._changesDetected=!function h6(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=uZ,n})();const lZ=wi,cZ=class extends lZ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Wd(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),qd(t,r,e),new ih(r)}};function uZ(){return fm(Gt(),S())}function fm(n,e){return 4&n.type?new cZ(e,n,Kc(n,e)):null}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=dZ,n})();function dZ(){return cL(Gt(),S())}const hZ=Mr,aL=class extends hZ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Kc(this._hostTNode,this._hostLView)}get injector(){return new mc(this._hostTNode,this._hostLView)}get parentInjector(){const e=xg(this._hostTNode,this._hostLView);if(rO(e)){const t=gc(e,this._hostLView),r=pc(e);return new mc(t[1].data[r+8],t)}return new mc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=lL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function Pd(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new PE(An(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Ds,null);h&&(s=h)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function O5(n){return hi(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new aL(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function V7(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],fO(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function j7(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Bw(s,o),l=r[11],c=jg(l,o[7]);return null!==c&&function L7(n,e,t,r,i,s){r[0]=i,r[6]=e,zd(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),fO(FE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=lL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Nw(this._lContainer,t);r&&(Rg(FE(this._lContainer),t),XO(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Nw(this._lContainer,t);return r&&null!=Rg(FE(this._lContainer),t)?new ih(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function lL(n){return n[8]}function FE(n){return n[8]||(n[8]=[])}function cL(n,e){let t;const r=e[n.index];if(hi(r))t=r;else{let i;if(8&n.type)i=Lt(r);else{const s=e[11];i=s.createComment("");const o=Wr(n,e);Ca(s,jg(s,o),i,function W7(n,e){return Et(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=j1(r,e,i,n),Kg(e,t)}return new aL(t,n,e)}class LE{constructor(e){this.queryList=e,this.matches=null}clone(){return new LE(this.queryList)}setDirty(){this.queryList.setDirty()}}class BE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new BE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==pL(e,t).matches&&this.queries[t].setDirty()}}class uL{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class UE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new UE(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class VE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new VE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,gZ(t,s)),this.matchTNodeWithReadOption(e,t,kg(t,e,s,!1,!1))}else r===wi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,kg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===qe||i===Mr||i===wi&&4&t.type)this.addMatch(t.index,-2);else{const s=kg(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function gZ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function _Z(n,e,t,r){return-1===t?function mZ(n,e){return 11&n.type?Kc(n,e):4&n.type?fm(n,e):null}(e,n):-2===t?function yZ(n,e,t){return t===qe?Kc(e,n):t===wi?fm(e,n):t===Mr?cL(e,n):void 0}(n,e,r):kd(n,n[1],t,e)}function dL(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:_Z(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function jE(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=dL(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&jE(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];jE(f[1],f,c,r)}}}}}return r}function Rn(n){const e=S(),t=Oe(),r=GP();rw(r+1);const i=pL(t,r);if(n.dirty&&jP(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?jE(t,e,r,[]):dL(t,e,i,r);n.reset(s,PX),n.notifyOnChanges()}return!0}return!1}function xa(n,e,t){const r=Oe();r.firstCreatePass&&(fL(r,new uL(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),hL(r,S(),e)}function Gi(n,e,t,r){const i=Oe();if(i.firstCreatePass){const s=Gt();fL(i,new uL(e,t,r),s.index),function bZ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}hL(i,S(),t)}function Pn(){return function vZ(n,e){return n[19].queries[e].queryList}(S(),GP())}function hL(n,e,t){const r=new Aa(4==(4&t));P1(n,e,r,r.destroy),null===e[19]&&(e[19]=new BE),e[19].queries.push(new LE(r))}function fL(n,e,t){null===n.queries&&(n.queries=new UE),n.queries.track(new VE(e,t))}function pL(n,e){return n.queries.getByIndex(e)}function mm(...n){}const _m=new B("Application Initializer");let GE=(()=>{class n{constructor(t){this.appInits=t,this.resolve=mm,this.reject=mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(em(s))t.push(s);else if(PN(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(I(_m,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lh=new B("AppId",{providedIn:"root",factory:function kL(){return`${KE()}${KE()}${KE()}`}});function KE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RL=new B("Platform Initializer"),Xc=new B("Platform ID"),PL=new B("appBootstrapListener");let OL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Ss=new B("LocaleId",{providedIn:"root",factory:()=>Ng(Ss,ne.Optional|ne.SkipSelf)||function BZ(){return"undefined"!=typeof $localize&&$localize.locale||sm}()});class VZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let NL=(()=>{class n{compileModuleSync(t){return new OE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Hi(Hr(t).declarations).reduce((o,a)=>{const l=An(a);return l&&o.push(new PE(l)),o},[]);return new VZ(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HZ=(()=>Promise.resolve(0))();function YE(n){"undefined"==typeof Zone?HZ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ie{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function $Z(){let n=We.requestAnimationFrame,e=We.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function qZ(n){const e=()=>{!function WZ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(We,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,XE(n),n.isCheckStableRunning=!0,QE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),XE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return FL(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),LL(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return FL(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),LL(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,XE(n),QE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ie.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ie.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zZ,mm,mm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const zZ={};function QE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function FL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LL(n){n._nesting--,QE(n)}class GZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let ZE=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ie.assertNotInAngularZone(),YE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())YE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(I(ie))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),BL=(()=>{class n{constructor(){this._applications=new Map,JE.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return JE.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class KZ{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let Ei,JE=new KZ;const UL=new B("AllowMultipleToken");class VL{constructor(e,t){this.name=e,this.token=t}}function jL(n,e,t=[]){const r=`Platform: ${e}`,i=new B(r);return(s=[])=>{let o=HL();if(!o||o.injector.get(UL,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:cE,useValue:"platform"});!function ZZ(n){if(Ei&&!Ei.destroyed&&!Ei.injector.get(UL,!1))throw new H(400,"");Ei=n.get($L);const e=n.get(RL,null);e&&e.forEach(t=>t())}(Qe.create({providers:a,name:r}))}return function JZ(n){const e=HL();if(!e)throw new H(401,"");return e}()}}function HL(){return Ei&&!Ei.destroyed?Ei:null}let $L=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function eJ(n,e){let t;return t="noop"===n?new GZ:("zone.js"===n?void 0:n)||new ie({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:ie,useValue:a}];return a.run(()=>{const c=Qe.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(go,null);if(!d)throw new H(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{eC(this._modules,u),h.unsubscribe()})}),function tJ(n,e,t){try{const r=t();return em(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(GE);return h.runInitializers(),h.donePromise.then(()=>(function O9(n){wr(n,"Expected localeId to be defined"),"string"==typeof n&&(EF=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ss,sm)||sm),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=zL({},r);return function QZ(n,e,t){const r=new OE(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ym);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new H(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(I(Qe))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function zL(n,e){return Array.isArray(e)?e.reduce(zL,n):Object.assign(Object.assign({},n),e)}let ym=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Je(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Je(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),YE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=oc(a,l.pipe(TP()))}bootstrap(t,r){if(!this._initStatus.done)throw new H(405,"");let i;i=t instanceof GF?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function XZ(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Ds),a=i.create(Qe.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(ZE,null),u=c&&a.injector.get(BL);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),eC(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new H(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;eC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(PL,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(I(ie),I(Qe),I(go),I(Da),I(GE))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let qL=!0,As=(()=>{class n{}return n.__NG_ELEMENT_ID__=iJ,n})();function iJ(n){return function sJ(n,e,t){if(mg(n)&&!t){const r=Cr(n.index,e);return new ih(r,r)}return 47&n.type?new ih(e[16],e):null}(Gt(),S(),16==(16&n))}class XL{constructor(){}supports(e){return Kd(e)}create(e){return new dJ(e)}}const uJ=(n,e)=>e;class dJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<JL(r,i,s)?t:r,a=JL(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Kd(e))throw new H(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function bQ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Pc()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new hJ(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ZL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class hJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class ZL{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new fJ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JL(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class eB{constructor(){}supports(e){return e instanceof Map||gE(e)}create(){return new pJ}}class pJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||gE(e)))throw new H(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new gJ(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class gJ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tB(){return new wm([new XL])}let wm=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tB()),deps:[[n,new Cc,new De]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new H(901,"")}}return n.\u0275prov=$({token:n,providedIn:"root",factory:tB}),n})();function nB(){return new ch([new eB])}let ch=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nB()),deps:[[n,new Cc,new De]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new H(901,"")}}return n.\u0275prov=$({token:n,providedIn:"root",factory:nB}),n})();const yJ=jL(null,"core",[{provide:Xc,useValue:"unknown"},{provide:$L,deps:[Qe]},{provide:BL,deps:[]},{provide:OL,deps:[]}]);let vJ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(I(ym))},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})(),Em=null;function vo(){return Em}const _e=new B("DocumentToken");let ka=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(){return function CJ(){return I(rB)}()},providedIn:"platform"}),n})();const IJ=new B("Location Initialized");let rB=(()=>{class n extends ka{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vo().getBaseHref(this._doc)}onPopState(t){const r=vo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=vo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){iB()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){iB()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:function(){return function TJ(){return new rB(I(_e))}()},providedIn:"platform"}),n})();function iB(){return!!window.history.pushState}function sC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function sB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xs(n){return n&&"?"!==n[0]?"?"+n:n}let Zc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(){return function DJ(n){const e=I(_e).location;return new oB(I(ka),e&&e.origin||"")}()},providedIn:"root"}),n})();const oC=new B("appBaseHref");let oB=(()=>{class n extends Zc{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+xs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+xs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+xs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(I(ka),I(oC,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),SJ=(()=>{class n extends Zc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=sC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+xs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+xs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(I(ka),I(oC,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),Ra=(()=>{class n{constructor(t,r){this._subject=new ct,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=sB(aB(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xs(r))}normalize(t){return n.stripTrailingSlash(function xJ(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,aB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xs(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xs(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=xs,n.joinWithSlash=sC,n.stripTrailingSlash=sB,n.\u0275fac=function(t){return new(t||n)(I(Zc),I(ka))},n.\u0275prov=$({token:n,factory:function(){return function AJ(){return new Ra(I(Zc),I(ka))}()},providedIn:"root"}),n})();function aB(n){return n.replace(/\/index.html$/,"")}let Rm=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Kd(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ze(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(v(wm),v(ch),v(qe),v(um))},n.\u0275dir=Pe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class pee{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pm=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pee(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),mB(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{mB(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(v(Mr),v(wi),v(wm))},n.\u0275dir=Pe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function mB(n,e){n.context.$implicit=e.item}let ks=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_B("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_B("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(v(Mr),v(wi))},n.\u0275dir=Pe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class gee{constructor(){this.$implicit=null,this.ngIf=null}}function _B(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ze(e)}'.`)}let Pa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})();const bB="browser";let qee=(()=>{class n{}return n.\u0275prov=$({token:n,providedIn:"root",factory:()=>new Gee(I(_e),window)}),n})();class Gee{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Kee(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wB(this.window.history)||wB(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function wB(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bC extends class Qee extends class EJ{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wJ(n){Em||(Em=n)}(new bC)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xee(){return hh=hh||document.querySelector("base"),hh?hh.getAttribute("href"):null}();return null==t?null:function Zee(n){Om=Om||document.createElement("a"),Om.setAttribute("href",n);const e=Om.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hee(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Om,hh=null;const EB=new B("TRANSITION_ID"),ete=[{provide:_m,useFactory:function Jee(n,e,t){return()=>{t.get(GE).donePromise.then(()=>{const r=vo(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[EB,_e,Qe],multi:!0}];class wC{static init(){!function YZ(n){JE=n}(new wC)}addToWindow(e){We.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const i=We.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?vo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let tte=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Nm=new B("EventManagerPlugins");let Fm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I(Nm),I(ie))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class CB{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=vo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let IB=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),fh=(()=>{class n extends IB{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(TB),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(TB))}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function TB(n){vo().remove(n)}const EC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CC=/%COMP%/g;function Lm(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Lm(n,i,t):(i=i.replace(CC,n),t.push(i))}return t}function AB(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bm=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new IC(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ui.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ate(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case ui.ShadowDom:return new lte(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Lm(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I(Fm),I(fh),I(lh))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class IC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(EC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=EC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=EC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Dr.DashCase|Dr.Important)?e.style.setProperty(t,r,i&Dr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Dr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,AB(r)):this.eventManager.addEventListener(e,t,AB(r))}}class ate extends IC{constructor(e,t,r,i){super(e),this.component=r;const s=Lm(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function ite(n){return"_ngcontent-%COMP%".replace(CC,n)}(i+"-"+r.id),this.hostAttr=function ste(n){return"_nghost-%COMP%".replace(CC,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class lte extends IC{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Lm(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cte=(()=>{class n extends CB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const MB=["alt","control","meta","shift"],dte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kB={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fte=(()=>{class n extends CB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(MB.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function pte(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&kB.hasOwnProperty(e)&&(e=kB[e]))}return dte[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MB.forEach(s=>{s!=i&&hte[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const yte=jL(yJ,"browser",[{provide:Xc,useValue:bB},{provide:RL,useValue:function gte(){bC.makeCurrent(),wC.init()},multi:!0},{provide:_e,useFactory:function _te(){return function M5(n){Kb=n}(document),document},deps:[]}]),vte=[{provide:cE,useValue:"root"},{provide:go,useFactory:function mte(){return new go},deps:[]},{provide:Nm,useClass:cte,multi:!0,deps:[_e,ie,Xc]},{provide:Nm,useClass:fte,multi:!0,deps:[_e]},{provide:Bm,useClass:Bm,deps:[Fm,fh,lh]},{provide:rh,useExisting:Bm},{provide:IB,useExisting:fh},{provide:fh,useClass:fh,deps:[_e]},{provide:ZE,useClass:ZE,deps:[ie]},{provide:Fm,useClass:Fm,deps:[Nm,ie]},{provide:class Yee{},useClass:tte,deps:[]}];let RB=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:lh,useValue:t.appId},{provide:EB,useExisting:lh},ete]}}}return n.\u0275fac=function(t){return new(t||n)(I(n,12))},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:vte,imports:[Pa,vJ]}),n})();"undefined"!=typeof window&&window;let DC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:function(t){let r=null;return r=t?new(t||n):I(NB),r},providedIn:"root"}),n})(),NB=(()=>{class n extends DC{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case je.NONE:return r;case je.HTML:return Vi(r,"HTML")?Tr(r):FO(this._doc,String(r)).toString();case je.STYLE:return Vi(r,"Style")?Tr(r):r;case je.SCRIPT:if(Vi(r,"Script"))return Tr(r);throw new Error("unsafe value used in a script context");case je.URL:return AO(r),Vi(r,"URL")?Tr(r):Ud(String(r));case je.RESOURCE_URL:if(Vi(r,"ResourceURL"))return Tr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function $6(n){return new B6(n)}(t)}bypassSecurityTrustStyle(t){return function z6(n){return new U6(n)}(t)}bypassSecurityTrustScript(t){return function W6(n){return new V6(n)}(t)}bypassSecurityTrustUrl(t){return function q6(n){return new j6(n)}(t)}bypassSecurityTrustResourceUrl(t){return function G6(n){return new H6(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:function(t){let r=null;return r=t?new t:function xte(n){return new NB(n.get(_e))}(I(Qe)),r},providedIn:"root"}),n})();function FB(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){FB(s,r,i,o,a,"next",l)}function a(l){FB(s,r,i,o,a,"throw",l)}o(void 0)})}}const k=function(n,e){if(!n)throw Jc(e)},Jc=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},LB=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Um={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw Error();r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},BB=function(n){const e=LB(n);return Um.encodeByteArray(e,!0)},Vm=function(n){return BB(n).replace(/\./g,"")},AC=function(n){try{return Um.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ph(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Rte(t)||(n[t]=ph(n[t],e[t]));return n}function Rte(n){return"__proto__"!==n}class Oa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xC(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function MC(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function UB(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wo(){return"object"==typeof indexedDB}function gh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function kC(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class cr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zr.prototype.create)}}class Zr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Ute(n,e){return n.replace(Vte,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new cr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Vte=/\{\$([^}]+)}/g;function mh(n){return JSON.parse(n)}function Jt(n){return JSON.stringify(n)}const jm=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=mh(AC(s[0])||""),t=mh(AC(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:r,signature:i}};function Ti(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function eu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function RC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hm(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function $m(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(VB(s)&&VB(o)){if(!$m(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function VB(n){return null!==n&&"object"==typeof n}function _h(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function vh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class $te{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function jB(n,e){const t=new zte(n,e);return t.subscribe.bind(t)}class zte{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Wte(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=PC),void 0===i.error&&(i.error=PC),void 0===i.complete&&(i.complete=PC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PC(){}function tu(n,e){return`${n} failed: ${e} argument `}const zm=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function OC(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function pe(n){return n&&n._delegate?n._delegate:n}class Pt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Na="[DEFAULT]";class Zte{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Oa;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function ene(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return g(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Na?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Zte(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const NC=[];var Se=(()=>{return(n=Se||(Se={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Se;var n})();const HB={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},nne=Se.INFO,rne={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},ine=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=rne[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Eo{constructor(e){this.name=e,this._logLevel=nne,this._logHandler=ine,this._userLogHandler=null,NC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?HB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}let $B,zB;const WB=new WeakMap,FC=new WeakMap,qB=new WeakMap,LC=new WeakMap,BC=new WeakMap;let UC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return FC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||qB.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ps(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function pne(n){return"function"==typeof n?function fne(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function cne(){return zB||(zB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(VC(this),e),Ps(WB.get(this))}:function(...e){return Ps(n.apply(VC(this),e))}:function(e,...t){const r=n.call(VC(this),e,...t);return qB.set(r,e.sort?e.sort():[e]),Ps(r)}}(n):(n instanceof IDBTransaction&&function dne(n){if(FC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});FC.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function lne(){return $B||($B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,UC):n)}function Ps(n){if(n instanceof IDBRequest)return function une(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ps(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&WB.set(t,n)}).catch(()=>{}),BC.set(e,n),e}(n);if(LC.has(n))return LC.get(n);const e=pne(n);return e!==n&&(LC.set(n,e),BC.set(e,n)),e}const VC=n=>BC.get(n);function Wm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ps(o.result),l.oldVersion,l.newVersion,Ps(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function jC(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Ps(t).then(()=>{})}const gne=["get","getKey","getAll","getAllKeys","count"],mne=["put","add","delete","clear"],HC=new Map;function GB(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(HC.get(e))return HC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=mne.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!gne.includes(t))return;const s=function(){var o=g(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return HC.set(e,s),s}!function hne(n){UC=n(UC)}(n=>bK(vK({},n),{get:(e,t,r)=>GB(e,t)||n.get(e,t,r),has:(e,t)=>!!GB(e,t)||n.has(e,t)}));class _ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function yne(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const $C="@firebase/app",Fa=new Eo("@firebase/app"),La="[DEFAULT]",zne={[$C]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Co=new Map,bh=new Map;function qm(n,e){try{n.container.addComponent(e)}catch(t){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function YB(n,e){n.container.addOrOverwriteComponent(e)}function jt(n){const e=n.name;if(bh.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;bh.set(e,n);for(const t of Co.values())qm(t,n);return!0}function Di(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wne(n,e,t=La){Di(n,e).clearInstance(t)}function qne(){bh.clear()}const Io=new Zr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kne{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}const Ki="9.10.0";function Yi(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:La,automaticDataCollectionEnabled:!1},e),r=t.name;if("string"!=typeof r||!r)throw Io.create("bad-app-name",{appName:String(r)});const i=Co.get(r);if(i){if($m(n,i.options)&&$m(t,i.config))return i;throw Io.create("duplicate-app",{appName:r})}const s=new tne(r);for(const a of bh.values())s.addComponent(a);const o=new Kne(n,t,s);return Co.set(r,o),o}function To(n=La){const e=Co.get(n);if(!e)throw Io.create("no-app",{appName:n});return e}function zC(){return Array.from(Co.values())}function QB(n){return WC.apply(this,arguments)}function WC(){return(WC=g(function*(n){const e=n.name;Co.has(e)&&(Co.delete(e),yield Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)})).apply(this,arguments)}function ke(n,e,t){var r;let i=null!==(r=zne[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Fa.warn(a.join(" "))}jt(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function XB(n,e){if(null!==n&&"function"!=typeof n)throw Io.create("invalid-log-argument");!function one(n,e){for(const t of NC){let r=null;e&&e.level&&(r=HB[e.level]),t.userLogHandler=null===n?null:(i,s,...o)=>{const a=o.map(l=>{if(null==l)return null;if("string"==typeof l)return l;if("number"==typeof l||"boolean"==typeof l)return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch(c){return null}}).filter(l=>l).join(" ");s>=(null!=r?r:i.logLevel)&&n({level:Se[s].toLowerCase(),message:a,args:o,type:i.name})}}}(n,e)}function ZB(n){!function sne(n){NC.forEach(e=>{e.setLogLevel(n)})}(n)}const wh="firebase-heartbeat-store";let qC=null;function JB(){return qC||(qC=Wm("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(wh)}}).catch(n=>{throw Io.create("idb-open",{originalErrorMessage:n.message})})),qC}function GC(){return(GC=g(function*(n){var e;try{return(yield JB()).transaction(wh).objectStore(wh).get(t2(n))}catch(t){if(t instanceof cr)Fa.warn(t.message);else{const r=Io.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Fa.warn(r.message)}}})).apply(this,arguments)}function e2(n,e){return KC.apply(this,arguments)}function KC(){return(KC=g(function*(n,e){var t;try{const i=(yield JB()).transaction(wh,"readwrite");return yield i.objectStore(wh).put(e,t2(n)),i.done}catch(r){if(r instanceof cr)Fa.warn(r.message);else{const i=Io.create("idb-set",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message});Fa.warn(i.message)}}})).apply(this,arguments)}function t2(n){return`${n.name}!${n.options.appId}`}class ere{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nre(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return g(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=n2();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return g(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=n2(),{heartbeatsToSend:r,unsentEntries:i}=function tre(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),r2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),r2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Vm(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function n2(){return(new Date).toISOString().substring(0,10)}class nre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!wo()&&gh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return g(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Xne(n){return GC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return e2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return e2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function r2(n){return Vm(JSON.stringify({version:2,heartbeats:n})).length}!function rre(n){jt(new Pt("platform-logger",e=>new _ne(e),"PRIVATE")),jt(new Pt("heartbeat",e=>new ere(e),"PRIVATE")),ke($C,"0.7.33",n),ke($C,"0.7.33","esm2017"),ke("fire-js","")}("");const s2="firebasestorage.googleapis.com",o2="storageBucket";class Tt extends cr{constructor(e,t){super(YC(e),`Firebase Storage: ${t} (${YC(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}_codeEquals(e){return YC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function YC(n){return"storage/"+n}function QC(){return new Tt("unknown","An unknown error occurred, please check the error payload for server response.")}function a2(){return new Tt("canceled","User canceled the upload/download.")}function l2(){return new Tt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function XC(n){return new Tt("invalid-argument",n)}function c2(){return new Tt("app-deleted","The Firebase app was deleted.")}function Eh(n,e){return new Tt("invalid-format","String does not match format '"+n+"': "+e)}function Ch(n){throw new Tt("internal-error","Internal error: "+n)}class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qn.makeFromUrl(e,t)}catch(i){return new qn(e,"")}if(""===r.path)return r;throw function fre(n){return new Tt("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(T){T.path_=decodeURIComponent(T.path)}const d=t.replace(/[.]/g,"\\."),C=[{regex:a,indices:{bucket:1,path:3},postModify:function s(T){"/"===T.path.charAt(T.path.length-1)&&(T.path_=T.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===s2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<C.length;T++){const R=C[T],U=R.regex.exec(e);if(U){let Ze=U[R.indices.path];Ze||(Ze=""),r=new qn(U[R.indices.bucket],Ze),R.postModify(r);break}}if(null==r)throw function hre(n){return new Tt("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class yre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Gm(n){return"string"==typeof n||n instanceof String}function u2(n){return ZC()&&n instanceof Blob}function ZC(){return"undefined"!=typeof Blob}function JC(n,e,t,r){if(r<e)throw XC(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw XC(`Invalid value for '${n}'. Expected ${t} or less.`)}function Os(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function d2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Do=(()=>{return(n=Do||(Do={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Do;var n})();class Ire{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function wre(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=QC();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(i.canceled?this.appDelete_?c2():a2():function dre(){return new Tt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Km(!1,null,!0)):this.backoffId_=function vre(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(..._){c||(c=!0,e.apply(null,_))}function d(_){i=setTimeout(()=>{i=null,n(f,l())},_)}function h(){s&&clearTimeout(s)}function f(_,...b){if(c)return void h();if(_)return h(),void u.call(null,_,...b);if(l()||o)return h(),void u.call(null,_,...b);let C;r<64&&(r*=2),1===a?(a=2,C=0):C=1e3*(r+Math.random()),d(C)}let p=!1;function m(_){p||(p=!0,h(),!c&&(null!==i?(_||(a=2),clearTimeout(i),d(0)):_||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},t),m}((r,i)=>{if(i)return void r(!1,new Km(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Do.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===Do.ABORT;return void r(!1,new Km(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new Km(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function bre(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class Km{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kre(...n){const e=function Mre(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(ZC())return new Blob(n);throw new Tt("unsupported-environment","This browser doesn't seem to support creating Blobs")}class e0{constructor(e,t){this.data=e,this.contentType=t||null}}function f2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function p2(n,e){switch(n){case"base64":{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Eh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Eh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Pre(n){return atob(n)}(e)}catch(i){throw Eh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class g2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Eh("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Lre(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ns{constructor(e,t){let r=0,i="";u2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(u2(this.data_)){const i=function Rre(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ns(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ns(r,!0)}}static getBlob(...e){if(ZC()){const t=e.map(r=>r instanceof Ns?r.data_:r);return new Ns(kre.apply(null,t))}{const t=e.map(o=>Gm(o)?function h2(n,e){switch(n){case"raw":return new e0(f2(e));case"base64":case"base64url":return new e0(p2(n,e));case"data_url":return new e0(function Nre(n){const e=new g2(n);return e.base64?p2("base64",e.rest):function Ore(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Eh("data_url","Malformed data URL.")}return f2(e)}(e.rest)}(e),function Fre(n){return new g2(n).contentType}(e))}throw QC()}("raw",o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ns(i,!0)}}uploadData(){return this.data_}}function t0(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Cre(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function m2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Vre(n,e){return e}class Gn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Vre}}let Ym=null;function Ih(){if(Ym)return Ym;const n=[];n.push(new Gn("bucket")),n.push(new Gn("generation")),n.push(new Gn("metageneration")),n.push(new Gn("name","fullPath",!0));const t=new Gn("name");t.xform=function e(s,o){return function jre(n){return!Gm(n)||n.length<2?n:m2(n)}(o)},n.push(t);const i=new Gn("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Gn("timeCreated")),n.push(new Gn("updated")),n.push(new Gn("md5Hash",null,!0)),n.push(new Gn("cacheControl",null,!0)),n.push(new Gn("contentDisposition",null,!0)),n.push(new Gn("contentEncoding",null,!0)),n.push(new Gn("contentLanguage",null,!0)),n.push(new Gn("contentType",null,!0)),n.push(new Gn("metadata","customMetadata",!0)),Ym=n,Ym}function _2(n,e,t){const r=t0(e);return null===r?null:function $re(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Hre(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new qn(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function n0(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Qi{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xi(n){if(!n)throw QC()}function Qm(n,e){return function t(r,i){const s=_2(n,i,e);return Xi(null!==s),s}}function nu(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function cre(){return new Tt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function lre(){return new Tt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function are(n){return new Tt("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function ure(n){return new Tt("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Th(n){const e=nu(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function ore(n){return new Tt("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function E2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Jre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Xm{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function r0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Xi(!1)}return Xi(!!t&&-1!==(e||["active"]).indexOf(t)),t}function s0(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class rie{constructor(e,t,r){if(function Ere(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function ru(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class sie extends class iie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ch("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ch("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ch("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ch("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ch("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ai(){return new sie}class uie{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Ih(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function eie(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=E2(e,r,i),a={name:o.fullPath},l=Os(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=n0(o,t),p=new Qi(l,"POST",function f(m){let _;r0(m);try{_=m.getResponseHeader("X-Goog-Upload-URL")}catch(b){Xi(!1)}return Xi(Gm(_)),_},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=nu(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ai,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function tie(n,e,t,r){const l=new Qi(t,"POST",function s(c){const u=r0(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){Xi(!1)}d||Xi(!1);const h=Number(d);return Xi(!isNaN(h)),new Xm(h,r.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=nu(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ai,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Xm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function nie(n,e,t,r,i,s,o,a){const l=new Xm(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function gre(){return new Tt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,p={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,d+u);if(null===m)throw l2();const C=new Qi(t,"POST",function _(T,R){const U=r0(T,["active","final"]),Z=l.current+u,Ze=r.size();let Nt;return Nt="final"===U?Qm(e,s)(T,R):null,new Xm(Z,Ze,"final"===U,Nt)},e.maxUploadRetryTime);return C.headers=p,C.body=m.uploadData(),C.progressCallback=a||null,C.errorHandler=nu(n),C}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Ai,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=function b2(n,e,t){const i=Os(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Qi(i,"GET",Qm(n,t),o);return a.errorHandler=Th(e),a}(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ai,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function C2(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let C="";for(let T=0;T<2;T++)C+=Math.random().toString().slice(2);return C}();o["Content-Type"]="multipart/related; boundary="+l;const c=E2(e,r,i),u=n0(c,t),f=Ns.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===f)throw l2();const p={name:c.fullPath},m=Os(s,n.host,n._protocol),b=n.maxUploadRetryTime,y=new Qi(m,"POST",Qm(n,t),b);return y.urlParams=p,y.headers=o,y.body=f.uploadData(),y.errorHandler=nu(e),y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ai,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=a2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=s0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new rie(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(s0(this._state)){case"success":ru(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":ru(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(s0(this._state)){case"running":case"paused":e.next&&ru(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&ru(e.complete.bind(e))();break;default:e.error&&ru(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ba{constructor(e,t){this._service=e,this._location=t instanceof qn?t:qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ba(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m2(this._location.path)}get storage(){return this._service}get parent(){const e=function Bre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new qn(this._location.bucket,e);return new Ba(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function _re(n){return new Tt("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function yie(n){n._throwIfRoot("getDownloadURL");const e=function Qre(n,e,t){const i=Os(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Qi(i,"GET",function Kre(n,e){return function t(r,i){const s=_2(n,i,e);return Xi(null!==s),function zre(n,e,t,r){const i=t0(e);if(null===i||!Gm(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return Os("/b/"+o(n.bucket)+"/o/"+o(d),t,r)+d2({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Th(e),a}(n.storage,n._location,Ih());return n.storage.makeRequestWithTokens(e,Ai).then(t=>{if(null===t)throw function mre(){return new Tt("no-download-url","The given file does not have any download URLs.")}();return t})}function M2(n,e){if(n instanceof a0){const t=n;if(null==t._bucket)throw function pre(){return new Tt("no-default-bucket","No default bucket found. Did you set the '"+o2+"' property when initializing the app?")}();const r=new Ba(t,t._bucket);return null!=e?M2(r,e):r}return void 0!==e?function x2(n,e){const t=function Ure(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new qn(n._location.bucket,t);return new Ba(n.storage,r)}(n,e):n}function k2(n,e){const t=null==e?void 0:e[o2];return null==t?null:qn.makeFromBucketSpec(t,n)}class a0{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=s2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?qn.makeFromBucketSpec(i,this._host):k2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?qn.makeFromBucketSpec(this._url,e):k2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return g(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return g(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ba(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new yre(c2());{const s=function xre(n,e,t,r,i,s){const o=d2(n.urlParams),a=n.url+o,l=Object.assign({},n.headers);return function Sre(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function Tre(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function Dre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function Are(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new Ire(a,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return g(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const R2="@firebase/storage",O2="storage";function N2(n,e){return function Eie(n,e){if(e&&function bie(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof a0)return function wie(n,e){return new Ba(n,e)}(n,e);throw XC("To use ref(service, url), the first argument must be a Storage instance.")}return M2(n,e)}(n=pe(n),e)}function l0(n=To(),e){return Di(n=pe(n),O2).getImmediate({identifier:e})}function Sie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new a0(t,r,i,e,Ki)}!function Aie(){jt(new Pt(O2,Sie,"PUBLIC").setMultipleInstances(!0)),ke(R2,"0.9.9",""),ke(R2,"0.9.9","esm2017")}(),ke("firebase","9.10.0","app");const kr_firebase={projectId:"site-wynyard",appId:"1:788072440341:web:961357f1f92a55f4eba41c",storageBucket:"site-wynyard.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyDV7W5Hv2CnumoHfr3Tdtq_Xf1Kp8Rsls4",authDomain:"site-wynyard.firebaseapp.com",messagingSenderId:"788072440341"};var W,kie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fs={},c0=c0||{},se=kie||self;function Zm(){}function Jm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var u0="closure_uid_"+(1e9*Math.random()>>>0),Pie=0;function Oie(n,e,t){return n.call.apply(n.bind,arguments)}function Nie(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function On(n,e,t){return(On=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Oie:Nie).apply(null,arguments)}function e_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function yn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function So(){this.s=this.s,this.o=this.o}var Lie={};So.prototype.s=!1,So.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Rie(n){return Object.prototype.hasOwnProperty.call(n,u0)&&n[u0]||(n[u0]=++Pie)}(this);delete Lie[n]}},So.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const F2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function d0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function L2(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Jm(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Nn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Nn.prototype.h=function(){this.defaultPrevented=!0};var Bie=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{se.addEventListener("test",Zm,e),se.removeEventListener("test",Zm,e)}catch(t){}return n}();function t_(n){return/^[\s\xa0]*$/.test(n)}var B2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function h0(n,e){return n<e?-1:n>e?1:0}function n_(){var n=se.navigator;return n&&(n=n.userAgent)?n:""}function Zi(n){return-1!=n_().indexOf(n)}function f0(n){return f0[" "](n),n}f0[" "]=Zm;var r_,n,Vie=Zi("Opera"),iu=Zi("Trident")||Zi("MSIE"),U2=Zi("Edge"),p0=U2||iu,V2=Zi("Gecko")&&!(-1!=n_().toLowerCase().indexOf("webkit")&&!Zi("Edge"))&&!(Zi("Trident")||Zi("MSIE"))&&!Zi("Edge"),jie=-1!=n_().toLowerCase().indexOf("webkit")&&!Zi("Edge");function j2(){var n=se.document;return n?n.documentMode:void 0}e:{var g0="",m0=(n=n_(),V2?/rv:([^\);]+)(\)|;)/.exec(n):U2?/Edge\/([\d\.]+)/.exec(n):iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jie?/WebKit\/(\S+)/.exec(n):Vie?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(m0&&(g0=m0?m0[1]:""),iu){var _0=j2();if(null!=_0&&_0>parseFloat(g0)){r_=String(_0);break e}}r_=g0}var Hie={};var zie=se.document&&iu&&(j2()||parseInt(r_,10))||void 0;function Sh(n,e){if(Nn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(V2){e:{try{f0(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Wie[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sh.X.h.call(this)}}yn(Sh,Nn);var Wie={2:"touch",3:"pen",4:"mouse"};Sh.prototype.h=function(){Sh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ah="closure_listenable_"+(1e6*Math.random()|0),qie=0;function Gie(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++qie,this.ba=this.ea=!1}function i_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function v0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $2(n){const e={};for(const t in n)e[t]=n[t];return e}const z2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<z2.length;s++)t=z2[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function s_(n){this.src=n,this.g={},this.h=0}function b0(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=F2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(i_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function w0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}s_.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=w0(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new Gie(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var E0="closure_lm_"+(1e6*Math.random()|0),C0={};function q2(n,e,t,r,i){if(r&&r.once)return K2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)q2(n,e[s],t,r,i);return null}return t=S0(t),n&&n[Ah]?n.N(e,t,Dh(r)?!!r.capture:!!r,i):G2(n,e,t,!1,r,i)}function G2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Dh(i)?!!i.capture:!!i,a=T0(n);if(a||(n[E0]=a=new s_(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function Kie(){const e=Yie;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Bie||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Q2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function K2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)K2(n,e[s],t,r,i);return null}return t=S0(t),n&&n[Ah]?n.O(e,t,Dh(r)?!!r.capture:!!r,i):G2(n,e,t,!0,r,i)}function Y2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Y2(n,e[s],t,r,i);else r=Dh(r)?!!r.capture:!!r,t=S0(t),n&&n[Ah]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=w0(s=n.g[e],t,r,i))&&(i_(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=T0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=w0(e,t,r,i)),(t=-1<n?e[n]:null)&&I0(t))}function I0(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ah])b0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Q2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=T0(e))?(b0(t,n),0==t.h&&(t.src=null,e[E0]=null)):i_(n)}}}function Q2(n){return n in C0?C0[n]:C0[n]="on"+n}function Yie(n,e){if(n.ba)n=!0;else{e=new Sh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&I0(n),n=t.call(r,e)}return n}function T0(n){return(n=n[E0])instanceof s_?n:null}var D0="__closure_events_fn_"+(1e9*Math.random()>>>0);function S0(n){return"function"==typeof n?n:(n[D0]||(n[D0]=function(e){return n.handleEvent(e)}),n[D0])}function sn(){So.call(this),this.i=new s_(this),this.P=this,this.I=null}function vn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Nn(e,n);else if(e instanceof Nn)e.target=e.target||n;else{var i=e;W2(e=new Nn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=o_(o,r,!0,e)&&i}if(i=o_(o=e.g=n,r,!0,e)&&i,i=o_(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=o_(o=e.g=t[s],r,!1,e)&&i}function o_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&b0(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}yn(sn,So),sn.prototype[Ah]=!0,sn.prototype.removeEventListener=function(n,e,t,r){Y2(this,n,e,t,r)},sn.prototype.M=function(){if(sn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)i_(t[r]);delete n.g[e],n.h--}}this.I=null},sn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},sn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var A0=se.JSON.stringify;function Qie(){var n=J2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var x0,X2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Zie,n=>n.reset());class Zie{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Jie(n){se.setTimeout(()=>{throw n},0)}function Z2(n,e){x0||function ese(){var n=se.Promise.resolve(void 0);x0=function(){n.then(tse)}}(),M0||(x0(),M0=!0),J2.add(n,e)}var M0=!1,J2=new class Xie{constructor(){this.h=this.g=null}add(e,t){const r=X2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function tse(){for(var n;n=Qie();){try{n.h.call(n.g)}catch(t){Jie(t)}var e=X2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}M0=!1}function a_(n,e){sn.call(this),this.h=n||1,this.g=e||se,this.j=On(this.kb,this),this.l=Date.now()}function k0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function R0(n,e,t){if("function"==typeof n)t&&(n=On(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=On(n.handleEvent,n)}return 2147483647<Number(e)?-1:se.setTimeout(n,e||0)}function eU(n){n.g=R0(()=>{n.g=null,n.i&&(n.i=!1,eU(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yn(a_,sn),(W=a_.prototype).ca=!1,W.R=null,W.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vn(this,"tick"),this.ca&&(k0(this),this.start()))}},W.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){a_.X.M.call(this),k0(this),delete this.g};class nse extends So{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eU(this)}M(){super.M(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xh(n){So.call(this),this.h=n,this.g={}}yn(xh,So);var tU=[];function nU(n,e,t,r){Array.isArray(t)||(t&&(tU[0]=t.toString()),t=tU);for(var i=0;i<t.length;i++){var s=q2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function rU(n){v0(n.g,function(e,t){this.g.hasOwnProperty(t)&&I0(e)},n),n.g={}}function l_(){this.g=!0}function su(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ose(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return A0(t)}catch(a){return e}}(n,t)+(r?" "+r:"")})}xh.prototype.M=function(){xh.X.M.call(this),rU(this)},xh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},l_.prototype.Aa=function(){this.g=!1},l_.prototype.info=function(){};var Ua={},iU=null;function c_(){return iU=iU||new sn}function sU(n){Nn.call(this,Ua.Oa,n)}function Mh(n){const e=c_();vn(e,new sU(e,n))}function oU(n,e){Nn.call(this,Ua.STAT_EVENT,n),this.stat=e}function Kn(n){const e=c_();vn(e,new oU(e,n))}function aU(n,e){Nn.call(this,Ua.Pa,n),this.size=e}function kh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){n()},e)}Ua.Oa="serverreachability",yn(sU,Nn),Ua.STAT_EVENT="statevent",yn(oU,Nn),Ua.Pa="timingevent",yn(aU,Nn);var u_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},lU={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function P0(){}function uU(){}P0.prototype.h=null;var F0,Rh={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function O0(){Nn.call(this,"d")}function N0(){Nn.call(this,"c")}function d_(){}function Ph(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new xh(this),this.O=ase,this.T=new a_(n=p0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new dU}function dU(){this.i=null,this.g="",this.h=!1}yn(O0,Nn),yn(N0,Nn),yn(d_,P0),d_.prototype.g=function(){return new XMLHttpRequest},d_.prototype.i=function(){return{}},F0=new d_;var ase=45e3,L0={},h_={};function B0(n,e,t){n.K=1,n.v=m_(Ls(e)),n.s=t,n.P=!0,hU(n,null)}function hU(n,e){n.F=Date.now(),Oh(n),n.A=Ls(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),EU(t.i,"t",r),n.C=0,t=n.l.H,n.h=new dU,n.g=qU(n.l,t?e:null,!n.s),0<n.N&&(n.L=new nse(On(n.Ka,n,n.g),n.N)),nU(n.S,n.g,"readystatechange",n.hb),e=n.H?$2(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Mh(1),function rse(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function fU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function pU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=lse(n,t),i==h_){4==e&&(n.o=4,Kn(14),r=!1),su(n.j,n.m,null,"[Incomplete Response]");break}if(i==L0){n.o=4,Kn(15),su(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}su(n.j,n.m,i,null),U0(n,i)}fU(n)&&i!=h_&&i!=L0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Kn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),G0(e),e.K=!0,Kn(11))):(su(n.j,n.m,t,"[Invalid Chunked Response]"),Va(n),Nh(n))}function lse(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?h_:(t=Number(e.substring(t,r)),isNaN(t)?L0:(r+=1)+t>e.length?h_:(e=e.substr(r,t),n.C=r+t,e))}function Oh(n){n.V=Date.now()+n.O,gU(n,n.O)}function gU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kh(On(n.fb,n),e)}function f_(n){n.B&&(se.clearTimeout(n.B),n.B=null)}function Nh(n){0==n.l.G||n.I||HU(n.l,n)}function Va(n){f_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,k0(n.T),rU(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function U0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||V0(t.h,n)))if(!n.J&&V0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=kh(On(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;E_(t),b_(t)}q0(t),Kn(18)}if(1>=TU(t.h)&&t.ja){try{t.ja()}catch(c){}t.ja=void 0}}else Ha(t,11)}else if((n.J||t.g==n)&&E_(t),!t_(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.T=c[0],c=c[1],2==t.G)if("c"==c[0]){t.I=c[1],t.ka=c[2];const u=c[3];null!=u&&(t.ma=u,t.j.info("VER="+t.ma));const d=c[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.J=r=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(j0(s,s.h),s.h=null))}if(r.D){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.za=m,ut(r.F,r.D,m))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=WU(r,r.H?r.ka:null,r.V),o.J){DU(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(f_(a),Oh(a)),r.g=o}else VU(r);0<t.i.length&&w_(t)}else"stop"!=c[0]&&"close"!=c[0]||Ha(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ha(t,7):W0(t):"noop"!=c[0]&&t.l&&t.l.wa(c),t.A=0)}Mh(4)}catch(c){}}function mU(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function use(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Jm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function cse(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Jm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(W=Ph.prototype).setTimeout=function(n){this.O=n},W.hb=function(n){n=n.target;const e=this.L;e&&3==Bs(n)?e.l():this.Ka(n)},W.Ka=function(n){try{if(n==this.g)e:{const u=Bs(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(3!=u||p0||this.g&&(this.h.h||this.g.fa()||OU(this.g)))){this.I||4!=u||7==e||Mh(8==e||0>=d?3:2),f_(this);var t=this.g.aa();this.Y=t;t:if(fU(this)){var r=OU(this.g);n="";var i=r.length,s=4==Bs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Va(this),Nh(this);var o="";break t}this.h.i=new se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function ise(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!t_(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,Kn(12),Va(this),Nh(this);break e}su(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,U0(this,t)}this.P?(pU(this,u,o),p0&&this.i&&3==u&&(nU(this.S,this.T,"tick",this.gb),this.T.start())):(su(this.j,this.m,o,null),U0(this,o)),4==u&&Va(this),this.i&&!this.I&&(4==u?HU(this.l,this):(this.i=!1,Oh(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Kn(12)):(this.o=0,Kn(13)),Va(this),Nh(this)}}}catch(u){}},W.gb=function(){if(this.g){var n=Bs(this.g),e=this.g.fa();this.C<e.length&&(f_(this),pU(this,n,e),this.i&&4!=n&&Oh(this))}},W.cancel=function(){this.I=!0,Va(this)},W.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function sse(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Mh(3),Kn(17)),Va(this),this.o=2,Nh(this)):gU(this,this.V-n)};var _U=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ja){this.h=void 0!==e?e:n.h,p_(this,n.j),this.s=n.s,this.g=n.g,g_(this,n.m),this.l=n.l,e=n.i;var t=new Bh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),yU(this,t),this.o=n.o}else n&&(t=String(n).match(_U))?(this.h=!!e,p_(this,t[1]||"",!0),this.s=Fh(t[2]||""),this.g=Fh(t[3]||"",!0),g_(this,t[4]),this.l=Fh(t[5]||"",!0),yU(this,t[6]||"",!0),this.o=Fh(t[7]||"")):(this.h=!!e,this.i=new Bh(null,this.h))}function Ls(n){return new ja(n)}function p_(n,e,t){n.j=t?Fh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function g_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function yU(n,e,t){e instanceof Bh?(n.i=e,function _se(n,e){e&&!n.j&&(Ao(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(bU(this,r),EU(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Lh(e,gse)),n.i=new Bh(e,n.h))}function ut(n,e,t){n.i.set(e,t)}function m_(n){return ut(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hse),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hse(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ja.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lh(e,vU,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lh(e,vU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lh(t,"/"==t.charAt(0)?pse:fse,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lh(t,mse)),n.join("")};var vU=/[#\/\?@]/g,fse=/[#\?:]/g,pse=/[#\?]/g,gse=/[#\?@]/g,mse=/#/g;function Bh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ao(n){n.g||(n.g=new Map,n.h=0,n.i&&function dse(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bU(n,e){Ao(n),e=ou(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function wU(n,e){return Ao(n),e=ou(n,e),n.g.has(e)}function EU(n,e,t){bU(n,e),0<t.length&&(n.i=null,n.g.set(ou(n,e),d0(t)),n.h+=t.length)}function ou(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CU(n){this.l=n||vse,n=se.PerformanceNavigationTiming?0<(n=se.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(se.g&&se.g.Ga&&se.g.Ga()&&se.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Bh.prototype).add=function(n,e){Ao(this),this.i=null,n=ou(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},W.forEach=function(n,e){Ao(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},W.oa=function(){Ao(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},W.W=function(n){Ao(this);let e=[];if("string"==typeof n)wU(this,n)&&(e=e.concat(this.g.get(ou(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},W.set=function(n,e){return Ao(this),this.i=null,wU(this,n=ou(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},W.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var vse=10;function IU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TU(n){return n.h?1:n.g?n.g.size:0}function V0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function j0(n,e){n.g?n.g.add(e):n.h=e}function DU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function SU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return d0(n.i)}function H0(){}function bse(){this.g=new H0}function wse(n,e,t){const r=t||"";try{mU(n,function(i,s){let o=i;Dh(i)&&(o=A0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function __(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Uh(n){this.l=n.$b||null,this.j=n.ib||!1}function y_(n,e){sn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CU.prototype.cancel=function(){if(this.i=SU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},H0.prototype.stringify=function(n){return se.JSON.stringify(n,void 0)},H0.prototype.parse=function(n){return se.JSON.parse(n,void 0)},yn(Uh,P0),Uh.prototype.g=function(){return new y_(this.l,this.j)},Uh.prototype.i=function(n){return function(){return n}}({}),yn(y_,sn);var $0=0;function AU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Vh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jh(n)}function jh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(W=y_.prototype).open=function(n,e){if(this.readyState!=$0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jh(this)},W.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||se).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vh(this)),this.readyState=$0},W.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jh(this)),this.g&&(this.readyState=3,jh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==se.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;AU(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},W.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vh(this):jh(this),3==this.readyState&&AU(this)}},W.Ua=function(n){this.g&&(this.response=this.responseText=n,Vh(this))},W.Ta=function(n){this.g&&(this.response=n,Vh(this))},W.ga=function(){this.g&&Vh(this)},W.setRequestHeader=function(n,e){this.v.append(n,e)},W.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(y_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Cse=se.JSON.parse;function Ht(n){sn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xU,this.K=this.L=!1}yn(Ht,sn);var xU="",Ise=/^https?$/i,Tse=["POST","PUT"];function MU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kU(n),v_(n)}function kU(n){n.D||(n.D=!0,vn(n,"complete"),vn(n,"error"))}function RU(n){if(n.h&&void 0!==c0&&(!n.C[1]||4!=Bs(n)||2!=n.aa()))if(n.v&&4==Bs(n))R0(n.Ha,0,n);else if(vn(n,"readystatechange"),4==Bs(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(_U)[1]||null;if(!i&&se.self&&se.self.location){var s=se.self.location.protocol;i=s.substr(0,s.length-1)}r=!Ise.test(i?i.toLowerCase():"")}t=r}if(t)vn(n,"complete"),vn(n,"success");else{n.m=6;try{var o=2<Bs(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.aa()+"]",kU(n)}}finally{v_(n)}}}function v_(n,e){if(n.g){PU(n);const t=n.g,r=n.C[0]?Zm:null;n.g=null,n.C=null,e||vn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function PU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(se.clearTimeout(n.A),n.A=null)}function Bs(n){return n.g?n.g.readyState:0}function OU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function NU(n){let e="";return v0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function z0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=NU(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ut(n,e,t))}function Hh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FU(n){this.Ca=0,this.i=[],this.j=new l_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Hh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Hh("baseRetryDelayMs",5e3,n),this.ab=Hh("retryDelaySeedMs",1e4,n),this.Za=Hh("forwardChannelMaxRetries",2,n),this.ta=Hh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new CU(n&&n.concurrentRequestLimit),this.Fa=new bse,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function W0(n){if(LU(n),3==n.G){var e=n.U++,t=Ls(n.F);ut(t,"SID",n.I),ut(t,"RID",e),ut(t,"TYPE","terminate"),$h(n,t),(e=new Ph(n,n.j,e,void 0)).K=2,e.v=m_(Ls(t)),t=!1,se.navigator&&se.navigator.sendBeacon&&(t=se.navigator.sendBeacon(e.v.toString(),"")),!t&&se.Image&&((new Image).src=e.v,t=!0),t||(e.g=qU(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oh(e)}zU(n)}function b_(n){n.g&&(G0(n),n.g.cancel(),n.g=null)}function LU(n){b_(n),n.u&&(se.clearTimeout(n.u),n.u=null),E_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&se.clearTimeout(n.m),n.m=null)}function w_(n){IU(n.h)||n.m||(n.m=!0,Z2(n.Ja,n),n.C=0)}function BU(n,e){var t;t=e?e.m:n.U++;const r=Ls(n.F);ut(r,"SID",n.I),ut(r,"RID",t),ut(r,"AID",n.T),$h(n,r),n.o&&n.s&&z0(r,n.o,n.s),t=new Ph(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=UU(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),j0(n.h,t),B0(t,r,e)}function $h(n,e){n.ia&&v0(n.ia,function(t,r){ut(e,r,t)}),n.l&&mU({},function(t,r){ut(e,r,t)})}function UU(n,e,t){t=Math.min(n.i.length,t);var r=n.l?On(n.l.Qa,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{wse(u,o,"req"+c+"_")}catch(d){r&&r(u)}}if(a){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function VU(n){n.g||n.u||(n.Z=1,Z2(n.Ia,n),n.A=0)}function q0(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=kh(On(n.Ia,n),$U(n,n.A)),n.A++,0))}function G0(n){null!=n.B&&(se.clearTimeout(n.B),n.B=null)}function jU(n){n.g=new Ph(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ls(n.sa);ut(e,"RID","rpc"),ut(e,"SID",n.I),ut(e,"CI",n.L?"0":"1"),ut(e,"AID",n.T),ut(e,"TYPE","xmlhttp"),$h(n,e),n.o&&n.s&&z0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=m_(Ls(e)),t.s=null,t.P=!0,hU(t,n)}function E_(n){null!=n.v&&(se.clearTimeout(n.v),n.v=null)}function HU(n,e){var t=null;if(n.g==e){E_(n),G0(n),n.g=null;var r=2}else{if(!V0(n.h,e))return;t=e.D,DU(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vn(r=c_(),new aU(r,t,e,i)),w_(n)}else VU(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Sse(n,e){return!(TU(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=kh(On(n.Ja,n,e),$U(n,n.C)),n.C++,0)))}(n,e)||2==r&&q0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ha(n,5);break;case 4:Ha(n,10);break;case 3:Ha(n,6);break;default:Ha(n,2)}}function $U(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Ha(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=On(n.jb,n);t||(t=new ja("//www.google.com/images/cleardot.gif"),se.location&&"http"==se.location.protocol||p_(t,"https"),m_(t)),function Ese(n,e){const t=new l_;if(se.Image){const r=new Image;r.onload=e_(__,t,r,"TestLoadImage: loaded",!0,e),r.onerror=e_(__,t,r,"TestLoadImage: error",!1,e),r.onabort=e_(__,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=e_(__,t,r,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Kn(2);n.G=0,n.l&&n.l.va(e),zU(n),LU(n)}function zU(n){if(n.G=0,n.la=[],n.l){const e=SU(n.h);(0!=e.length||0!=n.i.length)&&(L2(n.la,e),L2(n.la,n.i),n.h.i.length=0,d0(n.i),n.i.length=0),n.l.ua()}}function WU(n,e,t){var r=t instanceof ja?Ls(t):new ja(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),g_(r,r.m);else{var i=se.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ja(null,void 0);r&&p_(s,r),e&&(s.g=e),i&&g_(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&ut(r,t,e),ut(r,"VER",n.ma),$h(n,r),r}function qU(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ht(t&&n.Da&&!n.ra?new Uh({ib:!0}):n.ra)).L=n.H,e}function GU(){}function C_(){if(iu&&!(10<=Number(zie)))throw Error("Environmental error: no available transport.")}function Rr(n,e){sn.call(this),this.g=new FU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!t_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!t_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new au(this)}function KU(n){O0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function YU(){N0.call(this),this.status=1}function au(n){this.g=n}(W=Ht.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():F0.g(),this.C=function cU(n){return n.h||(n.h=n.i())}(this.u?this.u:F0),this.g.onreadystatechange=On(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void MU(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=se.FormData&&n instanceof se.FormData,!(0<=F2(Tse,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{PU(this),0<this.B&&((this.K=function Dse(n){return iu&&function $ie(){return function Uie(n){var e=Hie;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=B2(String(r_)).split("."),t=B2("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=h0(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||h0(0==i[2].length,0==s[2].length)||h0(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=On(this.qa,this)):this.A=R0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){MU(this,s)}},W.qa=function(){void 0!==c0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},W.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vn(this,"complete"),vn(this,"abort"),v_(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),v_(this,!0)),Ht.X.M.call(this)},W.Ha=function(){this.s||(this.F||this.v||this.l?RU(this):this.eb())},W.eb=function(){RU(this)},W.aa=function(){try{return 2<Bs(this)?this.g.status:-1}catch(n){return-1}},W.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},W.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Cse(e)}},W.Ea=function(){return this.m},W.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=FU.prototype).ma=8,W.G=1,W.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ph(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=$2(s),W2(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UU(this,i,e),ut(t=Ls(this.F),"RID",n),ut(t,"CVER",22),this.D&&ut(t,"X-HTTP-Session-Id",this.D),$h(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(NU(s)))+"&"+e:this.o&&z0(t,this.o,s)),j0(this.h,i),this.Xa&&ut(t,"TYPE","init"),this.O?(ut(t,"$req",e),ut(t,"SID","null"),i.Z=!0,B0(i,t,null)):B0(i,t,e),this.G=2}}else 3==this.G&&(n?BU(this,n):0==this.i.length||IU(this.h)||BU(this))},W.Ia=function(){if(this.u=null,jU(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=kh(On(this.cb,this),n)}},W.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Kn(10),b_(this),jU(this))},W.bb=function(){null!=this.v&&(this.v=null,b_(this),q0(this),Kn(19))},W.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))},(W=GU.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Qa=function(){},C_.prototype.g=function(n,e){return new Rr(n,e)},yn(Rr,sn),Rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Kn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=WU(n,null,n.V),w_(n)},Rr.prototype.close=function(){W0(this.g)},Rr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=A0(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&w_(e)},Rr.prototype.M=function(){this.g.l=null,delete this.j,W0(this.g),delete this.g,Rr.X.M.call(this)},yn(KU,O0),yn(YU,N0),yn(au,GU),au.prototype.xa=function(){vn(this.g,"a")},au.prototype.wa=function(n){vn(this.g,new KU(n))},au.prototype.va=function(n){vn(this.g,new YU(n))},au.prototype.ua=function(){vn(this.g,"b")},C_.prototype.createWebChannel=C_.prototype.g,Rr.prototype.send=Rr.prototype.u,Rr.prototype.open=Rr.prototype.m,Rr.prototype.close=Rr.prototype.close,u_.NO_ERROR=0,u_.TIMEOUT=8,u_.HTTP_ERROR=6,lU.COMPLETE="complete",uU.EventType=Rh,Rh.OPEN="a",Rh.CLOSE="b",Rh.ERROR="c",Rh.MESSAGE="d",sn.prototype.listen=sn.prototype.N,Ht.prototype.listenOnce=Ht.prototype.O,Ht.prototype.getLastError=Ht.prototype.Na,Ht.prototype.getLastErrorCode=Ht.prototype.Ea,Ht.prototype.getStatus=Ht.prototype.aa,Ht.prototype.getResponseJson=Ht.prototype.Ra,Ht.prototype.getResponseText=Ht.prototype.fa,Ht.prototype.send=Ht.prototype.da;var Ase=Fs.createWebChannelTransport=function(){return new C_},xse=Fs.getStatEventTarget=function(){return c_()},K0=Fs.ErrorCode=u_,Mse=Fs.EventType=lU,kse=Fs.Event=Ua,QU=Fs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Rse=Fs.FetchXmlHttpFactory=Uh,I_=Fs.WebChannel=uU,Pse=Fs.XhrIo=Ht;const XU="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let lu="9.10.0";const xo=new Eo("@firebase/firestore");function Y0(){return xo.logLevel}function A(n,...e){if(xo.logLevel<=Se.DEBUG){const t=e.map(Q0);xo.debug(`Firestore (${lu}): ${n}`,...t)}}function Ot(n,...e){if(xo.logLevel<=Se.ERROR){const t=e.map(Q0);xo.error(`Firestore (${lu}): ${n}`,...t)}}function $a(n,...e){if(xo.logLevel<=Se.WARN){const t=e.map(Q0);xo.warn(`Firestore (${lu}): ${n}`,...t)}}function Q0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function j(n="Unexpected state"){const e=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+n;throw Ot(e),new Error(e)}function X(n,e){n||j()}function N(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class an{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ZU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class Lse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bse{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new an;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new an,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(g(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new an)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X("string"==typeof r.accessToken),new ZU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return X(null===e||"string"==typeof e),new on(e)}}class Use{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(X(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vse{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Use(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jse{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(X("string"==typeof t.token),this.A=t.token,new JU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hse(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class eV{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Hse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function oe(n,e){return n<e?-1:n>e?1:0}function cu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function tV(n){return n+"\0"}class dt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new dt(0,0))}static max(){return new Y(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zh{constructor(e,t,r){void 0===t?t=0:t>e.length&&j(),void 0===r?r=e.length-t:r>e.length-t&&j(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ne extends zh{construct(e,t,r){return new Ne(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ne(t)}static emptyPath(){return new Ne([])}}const $se=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends zh{construct(e,t,r){return new Dt(e,t,r)}static isValidIdentifier(e){return $se.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new D(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new D(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}class O{constructor(e){this.path=e}static fromPath(e){return new O(Ne.fromString(e))}static fromName(e){return new O(Ne.fromString(e).popFirst(5))}static empty(){return new O(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new Ne(e.slice()))}}class T_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function X0(n){return n.fields.find(e=>2===e.kind)}function za(n){return n.fields.filter(e=>2!==e.kind)}T_.UNKNOWN_ID=-1;class D_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wh(0,Pr.min())}}function nV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new dt(t+1,0):new dt(t,r));return new Pr(i,O.empty(),e)}function rV(n){return new Pr(n.readTime,n.key,-1)}class Pr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pr(Y.min(),O.empty(),-1)}static max(){return new Pr(Y.max(),O.empty(),-1)}}function Z0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=O.comparator(n.documentKey,e.documentKey),0!==t?t:oe(n.largestBatchId,e.largestBatchId))}const iV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mo(n){return J0.apply(this,arguments)}function J0(){return J0=g(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==iV)throw n;A("LocalStore","Unexpectedly lost primary lease")}),J0.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,r)=>{t(e)})}static reject(e){return new w((t,r)=>{r(e)})}static waitFor(e){return new w((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=w.resolve(!1);for(const r of e)t=t.next(i=>i?w.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new w((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class S_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new an,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new qh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=eI(r.target.error);this.P.reject(new qh(e,i))}}static open(e,t,r,i){try{return new S_(t,e.transaction(i,r))}catch(s){throw new qh(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gse(t)}}class xi{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===xi.D(Rt())&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),Wa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!wo())return!1;if(xi.N())return!0;const e=Rt(),t=xi.D(e),r=0<t&&t<10,i=xi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return g(function*(){return t.db||(A("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new D(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new D(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new qh(e,a))},s.onupgradeneeded=o=>{A("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{A("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return g(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.F(e);const l=S_.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),w.reject(u))).toPromise();return c.catch(()=>{}),yield l.v,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(A("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qse{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Wa(this.U.delete())}}class qh extends D{constructor(e,t){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ko(n){return"IndexedDbTransactionError"===n.name}class Gse{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(A("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wa(r)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),Wa(this.store.add(e))}get(e){return Wa(this.store.get(e)).next(t=>(void 0===t&&(t=null),A("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),Wa(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),Wa(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new w((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new w((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,t){A("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new w((r,i)=>{t.onerror=s=>{const o=eI(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,t){const r=[];return new w((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new qse(a),c=t(a.primaryKey,a.value,l);if(c instanceof w){const u=c.catch(d=>(l.done(),w.reject(d)));r.push(u)}l.isDone?i():null===l.G?a.continue():a.continue(l.G)}}).next(()=>w.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wa(n){return new w((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=eI(r.target.error);t(i)}})}let oV=!1;function eI(n){const e=xi.D(Rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oV||(oV=!0,setTimeout(()=>{throw r},0)),r}}return n}class Kse{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;A("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,g(function*(){t.task=null;try{A("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ko(r)?A("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Mo(r)}yield t.nt(6e4)}))}}class Yse{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return g(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return w.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return A("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(A("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=rV(s);Z0(o,r)>0&&(r=o)}),new Pr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class dr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function aV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}dr.at=-1;class St{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A_(this.root,e,this.comparator,!1)}getReverseIterator(){return new A_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A_(this.root,e,this.comparator,!0)}}class A_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:bn.RED,this.left=null!=i?i:bn.EMPTY,this.right=null!=s?s:bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new bn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();const e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1,bn.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ge{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cV(this.data.getIterator())}getIteratorFrom(e){return new cV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class cV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uu(n){return n.hasNext()?n.getNext():void 0}class Or{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Or([])}unionWith(e){let t=new Ge(Dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new en(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Xse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(n){if(X(!!n),"string"==typeof n){let e=0;const t=Xse.exec(n);if(X(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ga(n){return"string"==typeof n?en.fromBase64String(n):en.fromUint8Array(n)}function tI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uV(n){const e=n.mapValue.fields.__previous_value__;return tI(e)?uV(e):e}function Gh(n){const e=Ro(n.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}class Zse{constructor(e,t,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}function Kh(n){return null==n}function Yh(n){return 0===n&&1/n==-1/0}function dV(n){return"number"==typeof n&&Number.isInteger(n)&&!Yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Oo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},x_={nullValue:"NULL_VALUE"};function Ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tI(n)?4:gV(n)?9007199254740991:10:j()}function Ji(n,e){if(n===e)return!0;const t=Ka(n);if(t!==Ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gh(n).isEqual(Gh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ro(r.timestampValue),o=Ro(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ga(n.bytesValue).isEqual(Ga(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return At(r.geoPointValue.latitude)===At(i.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return At(r.integerValue)===At(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=At(r.doubleValue),o=At(i.doubleValue);return s===o?Yh(s)===Yh(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return cu(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(aV(s)!==aV(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Ji(s[a],o[a])))return!1;return!0}(n,e);default:return j()}var i}function Qh(n,e){return void 0!==(n.values||[]).find(t=>Ji(t,e))}function No(n,e){if(n===e)return 0;const t=Ka(n),r=Ka(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=At(i.integerValue||i.doubleValue),a=At(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return hV(n.timestampValue,e.timestampValue);case 4:return hV(Gh(n),Gh(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Ga(i),a=Ga(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=oe(o[l],a[l]);if(0!==c)return c}return oe(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=oe(At(i.latitude),At(s.latitude));return 0!==o?o:oe(At(i.longitude),At(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=No(o[l],a[l]);if(c)return c}return oe(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Oo.mapValue&&s===Oo.mapValue)return 0;if(i===Oo.mapValue)return 1;if(s===Oo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=oe(a[u],c[u]);if(0!==d)return d;const h=No(o[a[u]],l[c[u]]);if(0!==h)return h}return oe(a.length,c.length)}(n.mapValue,e.mapValue);default:throw j()}}function hV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return oe(n,e);const t=Ro(n),r=Ro(e),i=oe(t.seconds,r.seconds);return 0!==i?i:oe(t.nanos,r.nanos)}function du(n){return nI(n)}function nI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ro(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ga(n.bytesValue).toBase64():"referenceValue"in n?O.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=nI(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${nI(r.fields[a])}`;return s+"}"}(n.mapValue):j();var e}function Ya(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rI(n){return!!n&&"integerValue"in n}function Xh(n){return!!n&&"arrayValue"in n}function fV(n){return!!n&&"nullValue"in n}function pV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function M_(n){return!!n&&"mapValue"in n}function Zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jse(n){return"nullValue"in n?x_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ya(Po.empty(),O.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:j()}function eoe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ya(Po.empty(),O.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Oo:j()}function mV(n,e){const t=No(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _V(n,e){const t=No(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!M_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zh(t)}setAll(e){let t=Dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());M_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];M_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qa(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(Zh(this.value))}}function yV(n){const e=[];return qa(n.fields,(t,r)=>{const i=new Dt([t]);if(M_(r)){const s=yV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Or(e)}class nt{constructor(e,t,r,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new nt(e,0,Y.min(),Y.min(),wn.empty(),0)}static newFoundDocument(e,t,r){return new nt(e,1,t,Y.min(),r,0)}static newNoDocument(e,t){return new nt(e,2,t,Y.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new nt(e,3,t,Y.min(),wn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class toe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function vV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new toe(n,e,t,r,i,s,o)}function Qa(n){const e=N(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+du(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>du(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>du(r)).join(",")),e.ht=t}return e.ht}function Jh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!uoe(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ji(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IV(n.startAt,e.startAt)&&IV(n.endAt,e.endAt)}function k_(n){return O.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function R_(n,e){return n.filters.filter(t=>t instanceof En&&t.field.isEqual(e))}function bV(n,e,t){let r=x_,i=!0;for(const s of R_(n,e)){let o=x_,a=!0;switch(s.op){case"<":case"<=":o=Jse(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=x_}mV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];mV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function wV(n,e,t){let r=Oo,i=!0;for(const s of R_(n,e)){let o=Oo,a=!0;switch(s.op){case">=":case">":o=eoe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Oo}_V({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];_V({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class En extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new roe(e,t,r):"array-contains"===t?new ooe(e,r):"in"===t?new aoe(e,r):"not-in"===t?new loe(e,r):"array-contains-any"===t?new coe(e,r):new En(e,t,r)}static lt(e,t,r){return"in"===t?new ioe(e,r):new soe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(No(t,this.value)):null!==t&&Ka(this.value)===Ka(t)&&this.ft(No(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class roe extends En{constructor(e,t,r){super(e,t,r),this.key=O.fromName(r.referenceValue)}matches(e){const t=O.comparator(e.key,this.key);return this.ft(t)}}class ioe extends En{constructor(e,t){super(e,"in",t),this.keys=EV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class soe extends En{constructor(e,t){super(e,"not-in",t),this.keys=EV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>O.fromName(r.referenceValue))}class ooe extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xh(t)&&Qh(t.arrayValue,this.value)}}class aoe extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qh(this.value.arrayValue,t)}}class loe extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qh(this.value.arrayValue,t)}}class coe extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qh(this.value.arrayValue,r))}}class Fo{constructor(e,t){this.position=e,this.inclusive=t}}class hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function uoe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function CV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?O.comparator(O.fromName(o.referenceValue),t.key):No(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function IV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}class Us{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function TV(n,e,t,r,i,s,o,a){return new Us(n,e,t,r,i,s,o,a)}function fu(n){return new Us(n)}function DV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sI(n){for(const e of n.filters)if(e.dt())return e.field;return null}function oI(n){return null!==n.collectionGroup}function pu(n){const e=N(n);if(null===e._t){e._t=[];const t=sI(e),r=iI(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new hu(t)),e._t.push(new hu(Dt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new hu(Dt.keyField(),s))}}}return e._t}function hr(n){const e=N(n);if(!e.wt)if("F"===e.limitType)e.wt=vV(e.path,e.collectionGroup,pu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of pu(e))t.push(new hu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Fo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fo(e.startAt.position,e.startAt.inclusive):null;e.wt=vV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function P_(n,e,t){return new Us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ef(n,e){return Jh(hr(n),hr(e))&&n.limitType===e.limitType}function SV(n){return`${Qa(hr(n))}|lt:${n.limitType}`}function aI(n){return`Query(target=${function noe(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${du(r.value)}`;var r}).join(", ")}]`),Kh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>du(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>du(t)).join(",")),`Target(${e})`}(hr(n))}; limitType=${n.limitType})`}function lI(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):O.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=CV(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,pu(t),r)||t.endAt&&!function(i,s,o){const a=CV(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,pu(t),r)));var t,r}function AV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xV(n){return(e,t)=>{let r=!1;for(const i of pu(n)){const s=doe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function doe(n,e,t){const r=n.field.isKeyField()?O.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return null!==a&&null!==l?No(a,l):j()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}function MV(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function kV(n){return{integerValue:""+n}}function RV(n,e){return dV(e)?kV(e):MV(n,e)}class O_{constructor(){this._=void 0}}function hoe(n,e,t){return n instanceof gu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Xa?OV(n,e):n instanceof Za?NV(n,e):function(r,i){const s=PV(r,i),o=FV(s)+FV(r.yt);return rI(s)&&rI(r.yt)?kV(o):MV(r.It,o)}(n,e)}function foe(n,e,t){return n instanceof Xa?OV(n,e):n instanceof Za?NV(n,e):t}function PV(n,e){return n instanceof mu?rI(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class gu extends O_{}class Xa extends O_{constructor(e){super(),this.elements=e}}function OV(n,e){const t=LV(e);for(const r of n.elements)t.some(i=>Ji(i,r))||t.push(r);return{arrayValue:{values:t}}}class Za extends O_{constructor(e){super(),this.elements=e}}function NV(n,e){let t=LV(e);for(const r of n.elements)t=t.filter(i=>!Ji(i,r));return{arrayValue:{values:t}}}class mu extends O_{constructor(e,t){super(),this.It=e,this.yt=t}}function FV(n){return At(n.integerValue||n.doubleValue)}function LV(n){return Xh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tf{constructor(e,t){this.field=e,this.transform=t}}class goe{constructor(e,t){this.version=e,this.transformResults=t}}class ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class F_{}function BV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yu(n.key,ht.none()):new _u(n.key,n.data,ht.none());{const t=n.data,r=wn.empty();let i=new Ge(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Vs(n.key,r,new Or(i.toArray()),ht.none())}}function moe(n,e,t){n instanceof _u?function(r,i,s){const o=r.value.clone(),a=jV(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(r,i,s){if(!N_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=jV(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(VV(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nf(n,e,t,r){return n instanceof _u?function(i,s,o,a){if(!N_(i.precondition,s))return o;const l=i.value.clone(),c=HV(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vs?function(i,s,o,a){if(!N_(i.precondition,s))return o;const l=HV(i.fieldTransforms,a,s),c=s.data;return c.setAll(VV(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(n,e,t,r):(o=t,N_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function _oe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=PV(r.transform,i||null);null!=s&&(null===t&&(t=wn.empty()),t.set(r.field,s))}return t||null}function UV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&cu(t,r,(i,s)=>function poe(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xa&&r instanceof Xa||t instanceof Za&&r instanceof Za?cu(t.elements,r.elements,Ji):t instanceof mu&&r instanceof mu?Ji(t.yt,r.yt):t instanceof gu&&r instanceof gu);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class _u extends F_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vs extends F_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jV(n,e,t){const r=new Map;X(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,foe(o,a,t[i]))}return r}function HV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,hoe(s,o,e))}return r}class yu extends F_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends F_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yoe{constructor(e){this.count=e}}var $t,Fe;function $V(n){switch(n){default:return j();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function zV(n){if(void 0===n)return Ot("GRPC error has no .code"),E.UNKNOWN;switch(n){case $t.OK:return E.OK;case $t.CANCELLED:return E.CANCELLED;case $t.UNKNOWN:return E.UNKNOWN;case $t.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case $t.INTERNAL:return E.INTERNAL;case $t.UNAVAILABLE:return E.UNAVAILABLE;case $t.UNAUTHENTICATED:return E.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case $t.NOT_FOUND:return E.NOT_FOUND;case $t.ALREADY_EXISTS:return E.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return E.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case $t.ABORTED:return E.ABORTED;case $t.OUT_OF_RANGE:return E.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return E.UNIMPLEMENTED;case $t.DATA_LOSS:return E.DATA_LOSS;default:return j()}}(Fe=$t||($t={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lV(this.inner)}size(){return this.innerSize}}const voe=new St(O.comparator);function fr(){return voe}const WV=new St(O.comparator);function rf(...n){let e=WV;for(const t of n)e=e.insert(t.key,t);return e}function qV(n){let e=WV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function es(){return sf()}function GV(){return sf()}function sf(){return new Lo(n=>n.toString(),(n,e)=>n.isEqual(e))}const boe=new St(O.comparator),woe=new Ge(O.comparator);function ue(...n){let e=woe;for(const t of n)e=e.add(t);return e}const Eoe=new Ge(oe);function L_(){return Eoe}class af{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lf.createSynthesizedTargetChangeForCurrentChange(e,t)),new af(Y.min(),r,L_(),fr(),ue())}}class lf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lf(en.EMPTY_BYTE_STRING,t,ue(),ue(),ue())}}class B_{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class KV{constructor(e,t){this.targetId=e,this.At=t}}class YV{constructor(e,t,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class QV{constructor(){this.Rt=0,this.bt=ZV(),this.Pt=en.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=ue(),t=ue(),r=ue();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:j()}}),new lf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ZV()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Coe{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=fr(),this.qt=XV(),this.Kt=new Ge(oe)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:j()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(k_(s))if(0===r){const o=new O(s.path);this.jt(t,o,nt.newNoDocument(o,Y.min()))}else X(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&k_(a.target)){const l=new O(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,nt.newNoDocument(l,e))}s.Dt&&(t.set(o,s.xt()),s.Nt())}});let r=ue();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||2===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new af(e,t,this.Kt,this.Ut,r);return this.Ut=fr(),this.qt=XV(),this.Kt=new Ge(oe),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new QV,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ge(oe),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new QV),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function XV(){return new St(O.comparator)}function ZV(){return new St(O.comparator)}const Ioe={asc:"ASCENDING",desc:"DESCENDING"},Toe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Doe{constructor(e,t){this.databaseId=e,this.gt=t}}function cf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JV(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Soe(n,e){return cf(n,e.toTimestamp())}function ln(n){return X(!!n),Y.fromTimestamp(function(e){const t=Ro(e);return new dt(t.seconds,t.nanos)}(n))}function uI(n,e){return(t=n,new Ne(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ej(n){const e=Ne.fromString(n);return X(cj(e)),e}function uf(n,e){return uI(n.databaseId,e.path)}function ts(n,e){const t=ej(e);if(t.get(1)!==n.databaseId.projectId)throw new D(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new D(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new O(nj(t))}function dI(n,e){return uI(n.databaseId,e)}function tj(n){const e=ej(n);return 4===e.length?Ne.emptyPath():nj(e)}function df(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nj(n){return X(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rj(n,e,t){return{name:uf(n,e),fields:t.value.mapValue.fields}}function ij(n,e,t){const r=ts(n,e.name),i=ln(e.updateTime),s=new wn({mapValue:{fields:e.fields}}),o=nt.newFoundDocument(r,i,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function hf(n,e){let t;if(e instanceof _u)t={update:rj(n,e.key,e.value)};else if(e instanceof yu)t={delete:uf(n,e.key)};else if(e instanceof Vs)t={update:rj(n,e.key,e.data),updateMask:Foe(e.fieldMask)};else{if(!(e instanceof cI))return j();t={verify:uf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof gu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Xa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Za)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof mu)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw j()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Soe(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:j()),t;var i}function hI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ht.updateTime(ln(i.updateTime)):void 0!==i.exists?ht.exists(i.exists):ht.none():ht.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;"setToServerValue"in o?(X("REQUEST_TIME"===o.setToServerValue),a=new gu):"appendMissingElements"in o?a=new Xa(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new Za(o.removeAllFromArray.values||[]):"increment"in o?a=new mu(s,o.increment):j();const l=Dt.fromServerFormat(o.fieldPath);return new tf(l,a)}(n,i)):[];var i;if(e.update){const i=ts(n,e.update.name),s=new wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Or((e.updateMask.fieldPaths||[]).map(c=>Dt.fromServerFormat(c)));return new Vs(i,s,o,t,r)}return new _u(i,s,t,r)}if(e.delete){const i=ts(n,e.delete);return new yu(i,t)}if(e.verify){const i=ts(n,e.verify);return new cI(i,t)}return j()}function sj(n,e){return{documents:[dI(n,e.path)]}}function oj(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0===l.length)return;const c=l.map(u=>function(d){if("=="===d.op){if(pV(d.value))return{unaryFilter:{field:vu(d.field),op:"IS_NAN"}};if(fV(d.value))return{unaryFilter:{field:vu(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(pV(d.value))return{unaryFilter:{field:vu(d.field),op:"IS_NOT_NAN"}};if(fV(d.value))return{unaryFilter:{field:vu(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(d.field),op:Poe(d.op),value:d.value}}}(u));return 1===c.length?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:vu((u=c).field),direction:Roe(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(c=e.limit,n.gt||Kh(c)?c:{value:c});var c,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function aj(n){let e=tj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){X(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=lj(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new hu(bu((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,Kh(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new Fo((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new Fo(u.values||[],!u.before)}(t.endAt)),TV(e,i,o,s,a,"F",l,c)}function lj(n){return n?void 0!==n.unaryFilter?[Noe(n)]:void 0!==n.fieldFilter?[Ooe(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lj(e)).reduce((e,t)=>e.concat(t)):j():[]}function Roe(n){return Ioe[n]}function Poe(n){return Toe[n]}function vu(n){return{fieldPath:n.canonicalString()}}function bu(n){return Dt.fromServerFormat(n.fieldPath)}function Ooe(n){return En.create(bu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(n.fieldFilter.op),n.fieldFilter.value)}function Noe(n){switch(n.unaryFilter.op){case"IS_NAN":const e=bu(n.unaryFilter.field);return En.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=bu(n.unaryFilter.field);return En.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bu(n.unaryFilter.field);return En.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bu(n.unaryFilter.field);return En.create(i,"!=",{nullValue:"NULL_VALUE"});default:return j()}}function Foe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uj(e)),e=Loe(n.get(t),e);return uj(e)}function Loe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function uj(n){return n+"\x01\x01"}function ns(n){const e=n.length;if(X(e>=2),2===e)return X("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ne.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&j(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:j()}s=o+2}return new Ne(r)}const dj=["userId","batchId"];function U_(n,e){return[n,Yn(e)]}function hj(n,e,t){return[n,Yn(e),t]}const Boe={},Uoe=["prefixPath","collectionGroup","readTime","documentId"],Voe=["prefixPath","collectionGroup","documentId"],joe=["collectionGroup","readTime","prefixPath","documentId"],Hoe=["canonicalId","targetId"],$oe=["targetId","path"],zoe=["path","targetId"],Woe=["collectionId","parent"],qoe=["indexId","uid"],Goe=["uid","sequenceNumber"],Koe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yoe=["indexId","uid","orderedDocumentKey"],Qoe=["userId","collectionPath","documentId"],Xoe=["userId","collectionPath","largestBatchId"],Zoe=["userId","collectionGroup","largestBatchId"],fj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Joe=[...fj,"documentOverlays"],pj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gj=pj,eae=[...gj,"indexConfiguration","indexState","indexEntries"];class fI extends sV{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function cn(n,e){const t=N(n);return xi.O(t.ie,e)}class pI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&moe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=BV(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&cu(this.mutations,e.mutations,(t,r)=>UV(t,r))&&cu(this.baseMutations,e.baseMutations,(t,r)=>UV(t,r))}}class gI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){X(e.mutations.length===r.length);let i=boe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gI(e,t,r,i)}}class mI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bo{constructor(e,t,r,i,s=Y.min(),o=Y.min(),a=en.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mj{constructor(e){this.re=e}}function _j(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:V_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:uf(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:cf(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ja(e.version)};else{if(!e.isUnknownDocument())return j();r.unknownDocument={path:t.path.toArray(),version:Ja(e.version)}}var i,s;return r}function V_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ja(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(n){const e=new dt(n.seconds,n.nanoseconds);return Y.fromTimestamp(e)}function tl(n,e){const t=(e.baseMutations||[]).map(s=>hI(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>hI(n.re,s)),i=dt.fromMillis(e.localWriteTimeMs);return new pI(e.batchId,i,t,r)}function ff(n){const e=el(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?el(n.lastLimboFreeSnapshotVersion):Y.min();let r;var i;return void 0!==n.query.documents?(X(1===(i=n.query).documents.length),r=hr(fu(tj(i.documents[0])))):r=hr(aj(n.query)),new Bo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,en.fromBase64String(n.resumeToken))}function yj(n,e){const t=Ja(e.snapshotVersion),r=Ja(e.lastLimboFreeSnapshotVersion);let i;i=k_(e.target)?sj(n.re,e.target):oj(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _I(n){const e=aj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?P_(e,e.limit,"L"):e}function yI(n,e){return new mI(e.largestBatchId,hI(n.re,e.overlayMutation))}function vj(n,e){const t=e.path.lastSegment();return[n,Yn(e.path.popLast()),t]}function bj(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ja(r.readTime),documentKey:Yn(r.documentKey.path),largestBatchId:r.largestBatchId}}class nae{getBundleMetadata(e,t){return wj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:el(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wj(e).put({bundleId:(r=t).id,createTime:Ja(ln(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ej(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:_I(i.bundledQuery),readTime:el(i.readTime)};var i})}saveNamedQuery(e,t){return Ej(e).put({name:(r=t).name,readTime:Ja(ln(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wj(n){return cn(n,"bundles")}function Ej(n){return cn(n,"namedQueries")}class j_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new j_(e,t.uid||"")}getOverlay(e,t){return pf(e).get(vj(this.userId,t)).next(r=>r?yI(this.It,r):null)}getOverlays(e,t){const r=es();return w.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new mI(t,o);i.push(this.ue(e,a))}),w.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Yn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(pf(e).Y("collectionPathOverlayIndex",a))}),w.waitFor(s)}getOverlaysForCollection(e,t,r){const i=es(),s=Yn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pf(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=yI(this.It,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=es();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pf(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=yI(this.It,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(e,t){return pf(e).put(function(r,i,s){const[o,a,l]=vj(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hf(r.re,s.mutation)}}(this.It,this.userId,t))}}function pf(n){return cn(n,"documentOverlays")}class nl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Yh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ga(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?gV(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):j()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),O.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function rae(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Cj(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=rae(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}nl.Te=new nl;class iae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=Cj(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=Cj(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sae{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class oae{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class gf{constructor(){this.Be=new iae,this.Le=new sae(this.Be),this.Ue=new oae(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class rl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rl(this.indexId,this.documentKey,this.arrayValue,r)}}function il(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ij(n.arrayValue,e.arrayValue),0!==t?t:(t=Ij(n.directionalValue,e.directionalValue),0!==t?t:O.comparator(n.documentKey,e.documentKey)))}function Ij(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class aae{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=X0(e);if(void 0!==t&&!this.ze(t))return!1;const r=za(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const o=r[i];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lae{constructor(){this.Ye=new vI}addToCollectionParentIndex(e,t){return this.Ye.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(Pr.min())}updateCollectionGroup(e,t,r){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class vI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Ne.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Ne.comparator)).toArray()}}const H_=new Uint8Array(0);class cae{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vI,this.Ze=new Lo(r=>Qa(r),(r,i)=>Jh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Yn(i)};return Tj(e).put(s)}return w.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[tV(t),""],!1,!0);return Tj(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ns(o.parent))}return r})}addFieldIndex(e,t){const r=$_(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=_f(e);return s.next(a=>{o.put(bj(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=$_(e),i=_f(e),s=mf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=mf(e);let i=!0;const s=new Map;return w.forEach(this.tn(t),o=>this.en(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ue();const a=[];return w.forEach(s,(l,c)=>{var u;A("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`} to execute ${Qa(t)}`);const d=function(C,T){const R=X0(T);if(void 0===R)return null;for(const U of R_(C,R.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(c,l),h=function(C,T){const R=new Map;for(const U of za(T))for(const Z of R_(C,U.fieldPath))switch(Z.op){case"==":case"in":R.set(U.fieldPath.canonicalString(),Z.value);break;case"not-in":case"!=":return R.set(U.fieldPath.canonicalString(),Z.value),Array.from(R.values())}return null}(c,l),f=function(C,T){const R=[];let U=!0;for(const Z of za(T)){const Ze=0===Z.kind?bV(C,Z.fieldPath,C.startAt):wV(C,Z.fieldPath,C.startAt);R.push(Ze.value),U&&(U=Ze.inclusive)}return new Fo(R,U)}(c,l),p=function(C,T){const R=[];let U=!0;for(const Z of za(T)){const Ze=0===Z.kind?wV(C,Z.fieldPath,C.endAt):bV(C,Z.fieldPath,C.endAt);R.push(Ze.value),U&&(U=Ze.inclusive)}return new Fo(R,U)}(c,l),m=this.nn(l,c,f),_=this.nn(l,c,p),b=this.sn(l,c,h),y=this.rn(l.indexId,d,m,f.inclusive,_,p.inclusive,b);return w.forEach(y,C=>r.J(C,t.limit).next(T=>{T.forEach(R=>{const U=O.fromSegments(R.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return w.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const h=t?this.on(t[d/c]):H_,f=this.un(e,h,r[d%c],i),p=this.cn(e,h,s[d%c],o),m=a.map(_=>this.un(e,h,_,!0));u.push(...this.createRange(f,p,m))}return u}un(e,t,r,i){const s=new rl(e,O.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new rl(e,O.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new aae(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;return w.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(o){let a=new Ge(Dt.comparator),l=!1;for(const c of o.filters){const u=c;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const c of o.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new gf;for(const i of za(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.qe(i.kind);nl.Te.ce(s,o)}return r.$e()}on(e){const t=new gf;return nl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new gf;return nl.Te.ce(Ya(this.databaseId,t),r.qe(function(i){const s=za(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new gf);let s=0;for(const o of za(e)){const a=r[s++];for(const l of i)if(this.ln(t,o.fieldPath)&&Xh(a))i=this.fn(i,o,a);else{const c=l.qe(o.kind);nl.Te.ce(a,c)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new gf;l.seed(a.$e()),nl.Te.ce(o,l.qe(t.kind)),s.push(l)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof En&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$_(e),i=_f(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return w.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new Wh(u.sequenceNumber,new Pr(el(u.readTime),new O(ns(u.documentKey)),u.largestBatchId)):Wh.empty(),h=c.fields.map(([f,p])=>new D_(Dt.fromServerFormat(f),p));return new T_(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=$_(e),s=_f(e);return this._n(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>w.forEach(a,l=>s.put(bj(l.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return w.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?w.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),w.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.mn(s,l);return c.isEqual(u)?w.resolve():this.gn(e,s,l,c,u)}))))})}yn(e,t,r,i){return mf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return mf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=mf(e);let s=new Ge(il);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(o,a)=>{s=s.add(new rl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(e,t){let r=new Ge(il);const i=this.an(t,e);if(null==i)return r;const s=X0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Xh(o))for(const a of o.arrayValue.values||[])r=r.add(new rl(t.indexId,e.key,this.on(a),i))}else r=r.add(new rl(t.indexId,e.key,H_,i));return r}gn(e,t,r,i,s){A("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=uu(h),m=uu(f);for(;p||m;){let _=!1,b=!1;if(p&&m){const y=c(p,m);y<0?b=!0:y>0&&(_=!0)}else null!=p?b=!0:_=!0;_?(u(m),m=uu(f)):b?(d(p),p=uu(h)):(p=uu(h),m=uu(f))}}(i,s,il,a=>{o.push(this.yn(e,t,r,a))},a=>{o.push(this.pn(e,t,r,a))}),w.waitFor(o)}_n(e){let t=1;return _f(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>il(o,a)).filter((o,a,l)=>!a||0!==il(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=il(o,e),l=il(o,t);if(0===a)i[0]=e.Ke();else if(a>0&&l<0)i.push(o),i.push(o.Ke());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,H_,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,H_,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Dj)}getMinOffset(e,t){return w.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||j())).next(Dj)}}function Tj(n){return cn(n,"collectionParents")}function mf(n){return cn(n,"indexEntries")}function $_(n){return cn(n,"indexConfiguration")}function _f(n){return cn(n,"indexState")}function Dj(n){X(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Z0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Pr(e.readTime,e.documentKey,t)}const Sj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Aj(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Z({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{X(1===a)}));const c=[];for(const u of t.mutations){const d=hj(e,u.key.path,t.batchId);s.push(i.delete(d)),c.push(u.key)}return w.waitFor(s).next(()=>c)}function z_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw j();e=n.noDocument}return JSON.stringify(e).length}pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(41943040,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);class W_{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){X(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new W_(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=wu(e),o=Uo(e);return o.add({}).next(a=>{X("number"==typeof a);const l=new pI(a,t,r,i),c=function(h,f,p){const m=p.baseMutations.map(b=>hf(h.re,b)),_=p.mutations.map(b=>hf(h.re,b));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:m,mutations:_}}(this.It,this.userId,l),u=[];let d=new Ge((h,f)=>oe(h.canonicalString(),f.canonicalString()));for(const h of i){const f=hj(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,Boe))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),w.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Uo(e).get(t).next(r=>r?(X(r.userId===this.userId),tl(this.It,r)):null)}Tn(e,t){return this.In[t]?w.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Uo(e).Z({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(X(a.batchId>=r),s=tl(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uo(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).W("userMutationsIndex",t).next(r=>r.map(i=>tl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=U_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return wu(e).Z({range:i},(o,a,l)=>{const[c,u,d]=o,h=ns(u);if(c===this.userId&&t.path.isEqual(h))return Uo(e).get(d).next(f=>{if(!f)throw j();X(f.userId===this.userId),s.push(tl(this.It,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(oe);const i=[];return t.forEach(s=>{const o=U_(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=wu(e).Z({range:a},(c,u,d)=>{const[h,f,p]=c,m=ns(f);h===this.userId&&s.path.isEqual(m)?r=r.add(p):d.done()});i.push(l)}),w.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=U_(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ge(oe);return wu(e).Z({range:o},(l,c,u)=>{const[d,h,f]=l,p=ns(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.En(e,a))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Uo(e).get(s).next(o=>{if(null===o)throw j();X(o.userId===this.userId),r.push(tl(this.It,o))}))}),w.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Aj(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),w.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wu(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ns(s[1]);i.push(l)}else a.done()}).next(()=>{X(0===i.length)})})}containsKey(e,t){return xj(e,this.userId,t)}Rn(e){return Mj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xj(n,e,t){const r=U_(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return wu(n).Z({range:s,X:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Uo(n){return cn(n,"mutations")}function wu(n){return cn(n,"documentMutations")}function Mj(n){return cn(n,"mutationQueues")}class sl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sl(0)}static vn(){return new sl(-1)}}class uae{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new sl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Y.fromTimestamp(new dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Eu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(X(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Eu(e).Z((o,a)=>{const l=ff(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>w.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Eu(e).Z((r,i)=>{const s=ff(i);t(s)})}Vn(e){return kj(e).get("targetGlobalKey").next(t=>(X(null!==t),t))}Sn(e,t){return kj(e).put("targetGlobalKey",t)}Dn(e,t){return Eu(e).put(yj(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Eu(e).Z({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=ff(a);Jh(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Vo(e);return t.forEach(o=>{const a=Yn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),w.waitFor(i)}removeMatchingKeys(e,t,r){const i=Vo(e);return w.forEach(t,s=>{const o=Yn(s.path);return w.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Vo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vo(e);let s=ue();return i.Z({range:r,X:!0},(o,a,l)=>{const c=ns(o[1]),u=new O(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=Yn(t.path),i=IDBKeyRange.bound([r],[tV(r)],!1,!0);let s=0;return Vo(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}se(e,t){return Eu(e).get(t).next(r=>r?ff(r):null)}}function Eu(n){return cn(n,"targets")}function kj(n){return cn(n,"targetGlobal")}function Vo(n){return cn(n,"targetDocuments")}function Rj([n,e],[t,r]){const i=oe(n,t);return 0===i?oe(e,r):i}class dae{constructor(e){this.xn=e,this.buffer=new Ge(Rj),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hae{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;A("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,g(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ko(r)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Mo(r)}yield t.Fn(3e5)}))}}class fae{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return w.resolve(dr.at);const r=new dae(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(Sj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sj):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Y0()<=Se.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class pae{constructor(e,t){this.db=e,this.garbageCollector=new fae(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return q_(e,r)}removeReference(e,t,r){return q_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return q_(e,t)}Gn(e,t){return function(r,i){let s=!1;return Mj(r).tt(o=>xj(r,o,i).next(a=>(a&&(s=!0),w.resolve(!a)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=t){const l=this.Gn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Y.min()),Vo(e).delete([0,Yn(o.path)])))});i.push(l)}}).next(()=>w.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return q_(e,t)}Kn(e,t){const r=Vo(e);let i,s=dr.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==dr.at&&t(new O(ns(i)),s),s=c,i=l):s=dr.at}).next(()=>{s!==dr.at&&t(new O(ns(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function q_(n,e){return Vo(n).put((r=n.currentSequenceNumber,{targetId:0,path:Yn(e.path),sequenceNumber:r}));var r}class Pj{constructor(){this.changes=new Lo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?w.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gae{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ol(e).put(r)}removeEntry(e,t,r){return ol(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],V_(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yf(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yf(t))},(i,s)=>{r={document:this.jn(t,s),size:z_(s)}}).next(()=>r)}getEntries(e,t){let r=fr();return this.zn(e,t,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,t){let r=fr(),i=new St(O.comparator);return this.zn(e,t,(s,o)=>{const a=this.jn(s,o);r=r.insert(s,a),i=i.insert(s,z_(o))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return w.resolve();let i=new Ge(Lj);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(yf(i.first()),yf(i.last())),o=i.getIterator();let a=o.getNext();return ol(e).Z({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=O.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Lj(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(yf(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),V_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ol(e).W(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=fr();for(const l of o){const c=this.jn(O.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,t,r,i){let s=fr();const o=Fj(t,r),a=Fj(t,Pr.max());return ol(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.jn(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new mae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Nj(e).get("remoteDocumentGlobalKey").next(t=>(X(!!t),t))}Qn(e,t){return Nj(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function tae(n,e){let t;if(e.document)t=ij(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=O.fromSegments(e.noDocument.path),i=el(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return j();{const r=O.fromSegments(e.unknownDocument.path),i=el(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new dt(r[0],r[1]);return Y.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Y.min()))return r}return nt.newInvalidDocument(e)}}function Oj(n){return new gae(n)}class mae extends Pj{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Lo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ge((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=_j(this.Yn.It,o);i=i.add(s.path.popLast()),r+=z_(l)-a.size,t.push(this.Yn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=_j(this.Yn.It,o.convertToNoDocument(Y.min()));t.push(this.Yn.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),w.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Nj(n){return cn(n,"remoteDocumentGlobal")}function ol(n){return cn(n,"remoteDocumentsV14")}function yf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fj(n,e){const t=e.documentKey.path.toArray();return[n,V_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=oe(t[s],r[s]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}class _ae{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bj{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&nf(r.mutation,i,Or.empty(),dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){const i=es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=rf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=fr();const o=sf(),a=sf();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof Vs)?s=s.insert(c.key,c):void 0!==u&&(o.set(c.key,u.mutation.getFieldMask()),nf(u.mutation,c,u.mutation.getFieldMask(),dt.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new _ae(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=sf();let i=new St((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||Or.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||ue()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=GV();u.forEach(h=>{if(!s.has(h)){const f=BV(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return O.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):w.resolve(es());let a=-1,l=s;return o.next(c=>w.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.getBaseDocument(e,u,d).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ue())).next(u=>({batchId:a,changes:qV(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new O(t)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=rf();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const l=(c=t,u=a.child(i),new Us(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((a,l)=>{const c=l.getKey();null===i.get(c)&&(i=i.insert(c,nt.newInvalidDocument(c)))});let o=rf();return i.forEach((a,l)=>{const c=s.get(a);void 0!==c&&nf(c.mutation,l,Or.empty(),dt.now()),lI(t,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):w.resolve(nt.newInvalidDocument(t))}}class yae{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return w.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ln(r.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:_I(r.bundledQuery),readTime:ln(r.readTime)}),w.resolve();var r}}class vae{constructor(){this.overlays=new St(O.comparator),this.es=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const r=es();return w.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),w.resolve()}getOverlaysForCollection(e,t,r){const i=es(),s=t.length+1,o=new O(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return w.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new St((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=es(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return w.resolve(a)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mI(t,r));let s=this.es.get(t);void 0===s&&(s=ue(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class bI{constructor(){this.ns=new Ge(un.ss),this.rs=new Ge(un.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new un(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new un(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new O(new Ne([])),r=new un(t,e),i=new un(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new O(new Ne([])),r=new un(t,e),i=new un(t,e+1);let s=ue();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new un(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return O.comparator(e.key,t.key)||oe(e._s,t._s)}static os(e,t){return oe(e._s,t._s)||O.comparator(e.key,t.key)}}class bae{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ge(un.ss)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const o=new pI(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),i=new un(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(oe);return t.forEach(i=>{const s=new un(i,0),o=new un(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),w.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;O.isDocumentKey(s)||(s=s.child(""));const o=new un(new O(s),0);let a=new Ge(oe);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l._s)),!0)},o),w.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){X(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return w.forEach(t.mutations,i=>{const s=new un(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new un(t,0),i=this.gs.firstAfterOrEqual(r);return w.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wae{constructor(e){this.Es=e,this.docs=new St(O.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return w.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=fr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),w.resolve(r)}getAllFromCollection(e,t,r){let i=fr();const s=new O(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||Z0(rV(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return w.resolve(i)}getAllFromCollectionGroup(e,t,r,i){j()}As(e,t){return w.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Eae(this)}getSize(e){return w.resolve(this.size)}}class Eae extends Pj{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),w.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Cae{constructor(e){this.persistence=e,this.Rs=new Lo(t=>Qa(t),Jh),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.bs=0,this.Ps=new bI,this.targetCount=0,this.vs=sl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),w.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.Dn(t),w.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return w.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),w.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),w.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return w.resolve(r)}containsKey(e,t){return w.resolve(this.Ps.containsKey(t))}}class Uj{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new dr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Cae(this),this.indexManager=new lae,this.remoteDocumentCache=new wae(r=>this.referenceDelegate.xs(r)),this.It=new mj(t),this.Ns=new yae(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vae,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new bae(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){A("MemoryPersistence","Starting transaction:",e);const i=new Iae(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Ms(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,t){return w.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Iae extends sV{constructor(e){super(),this.currentSequenceNumber=e}}class G_{constructor(e){this.persistence=e,this.Fs=new bI,this.$s=null}static Bs(e){return new G_(e)}get Ls(){if(this.$s)return this.$s;throw j()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),w.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),w.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ls,r=>{const i=O.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return w.or([()=>w.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Tae{constructor(e){this.It=e}$(e,t,r,i){const s=new S_("createOrUpgrade",t);var a;r<1&&i>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dj,{unique:!0}),a.createObjectStore("documentMutations"),Vj(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=w.resolve();return r<3&&i>=3&&(0!==r&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Vj(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dj,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return w.waitFor(d)})}(e,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.qs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:Qoe});l.createIndex("collectionPathOverlayIndex",Xoe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Zoe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:Uoe});l.createIndex("documentKeyIndex",Voe),l.createIndex("collectionGroupIndex",joe)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:qoe}).createIndex("sequenceNumberIndex",Goe,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:Koe}).createIndex("documentKeyIndex",Yoe,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=z_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>w.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>w.forEach(a,l=>{X(l.userId===s.userId);const c=tl(this.It,l);return Aj(e,s.userId,c).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const l=new Ne(o),c=[0,Yn(l)];s.push(t.get(c).next(u=>u?w.resolve():t.put({targetId:0,path:Yn(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>w.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Woe});const r=t.store("collectionParents"),i=new vI,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Yn(l)})}};return t.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Ne(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,a,l],c)=>{const u=ns(a);return s(u.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=ff(i),o=yj(this.It,s);return t.put(o)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(c=o,c.document?new O(Ne.fromString(c.document.name).popFirst(5)):c.noDocument?O.fromSegments(c.noDocument.path):c.unknownDocument?O.fromSegments(c.unknownDocument.path):j()).path.toArray();var c;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>w.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Oj(this.It),s=new Uj(G_.Bs,this.It.re);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:ue();tl(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),w.forEach(a,(l,c)=>{const u=new on(c),d=j_.oe(this.It,u),h=s.getIndexManager(u),f=W_.oe(u,this.It,h,s.referenceDelegate);return new Bj(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new fI(t,dr.at),l).next()})})}}function Vj(n){n.createObjectStore("targetDocuments",{keyPath:$oe}).createIndex("documentTargetsIndex",zoe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hoe,{unique:!0}),n.createObjectStore("targetGlobal")}const wI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class EI{constructor(e,t,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=h=>Promise.resolve(),!EI.C())throw new D(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pae(this,i),this.ii=t+"main",this.It=new mj(l),this.ri=new xi(this.ii,this.Xs,new Tae(this.It)),this.Cs=new uae(this.referenceDelegate,this.It),this.remoteDocumentCache=Oj(this.It),this.Ns=new nae,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(E.FAILED_PRECONDITION,wI);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new dr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=g(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=g(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(g(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>K_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ko(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return vf(e).get("owner").next(t=>w.resolve(this.mi(t)))}gi(e){return K_(e).delete(this.clientId)}yi(){var e=this;return g(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=cn(r,"clientMetadata");return i.W().next(s=>{const o=e.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return w.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?w.resolve(!0):vf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new D(E.FAILED_PRECONDITION,wI);return!1}}return!(!this.networkEnabled||!this.inForeground)||K_(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&A("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return g(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new fI(t,dr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>K_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return W_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cae(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return j_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){A("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?eae:14===o?gj:13===o?pj:12===o?Joe:11===o?fj:void j();var o;let a;return this.ri.runTransaction(e,i,s,l=>(a=new fI(l,this.Ss?this.Ss.next():dr.at),"readwrite-primary"===t?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new D(E.FAILED_PRECONDITION,iV);return r(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return vf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new D(E.FAILED_PRECONDITION,wI)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vf(e).put("owner",t)}static C(){return xi.C()}_i(e){const t=vf(e);return t.get("owner").next(r=>this.mi(r)?(A("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ot(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function Lte(){return!function Ote(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return A("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vf(n){return cn(n,"owner")}function K_(n){return cn(n,"clientMetadata")}function CI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class II{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=ue(),i=ue();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new II(e,t.fromCache,r,i)}}class jj{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Mi(e,t,i,r)).next(s=>s||this.Oi(e,t))}ki(e,t){if(DV(t))return w.resolve(null);let r=hr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=P_(t,null,"F"),r=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,P_(t,null,"F")):this.Bi(e,c,t,l)}))})))}Mi(e,t,r,i){return DV(t)||i.isEqual(Y.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Oi(e,t):(Y0()<=Se.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aI(t)),this.Bi(e,o,t,nV(i,-1)))})}Fi(e,t){let r=new Ge(xV(e));return t.forEach((i,s)=>{lI(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,t){return Y0()<=Se.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",aI(t)),this.Ni.getDocumentsMatchingQuery(e,t,Pr.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Dae{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new St(oe),this.qi=new Lo(s=>Qa(s),Jh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bj(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Hj(n,e,t,r){return new Dae(n,e,t,r)}function $j(n,e){return TI.apply(this,arguments)}function TI(){return TI=g(function*(n,e){const t=N(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ue();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}),TI.apply(this,arguments)}function Sae(n,e){const t=N(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);X(null!==m),p.version.compareTo(m)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ue();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zj(n){const e=N(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Aae(n,e){const t=N(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(t.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,m,_;e.targetMismatches.has(d)?f=f.withResumeToken(en.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),m=f,_=u,(0===(p=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(t.Cs.updateTargetData(s,f))});let l=fr(),c=ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Wj(s,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!r.isEqual(Y.min())){const u=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ui=i,s))}function Wj(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=fr();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:i}})}function xae(n,e){const t=N(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cu(n,e){const t=N(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new Bo(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Iu(n,e,t){return DI.apply(this,arguments)}function DI(){return DI=g(function*(n,e,t){const r=N(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ko(o))throw o;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),DI.apply(this,arguments)}function Y_(n,e,t){const r=N(n);let i=Y.min(),s=ue();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=N(a),d=u.qi.get(c);return void 0!==d?w.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,c)}(r,o,hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:Y.min(),t?s:ue())).next(a=>(Kj(r,AV(e),a),{documents:a,Hi:s})))}function qj(n,e){const t=N(n),r=N(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(o=>o?o.target:null))}function Gj(n,e){const t=N(n),r=t.Ki.get(e)||Y.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,nV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Kj(t,e,i),i))}function Kj(n,e,t){let r=Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function SI(){return SI=g(function*(n,e,t,r){const i=N(n);let s=ue(),o=fr();for(const c of t){const u=e.Ji(c.metadata.name);c.document&&(s=s.add(u));const d=e.Yi(c);d.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(u,d)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),l=yield Cu(i,(c=r,hr(fu(Ne.fromString(`__bundle__/docs/${c}`)))));var c;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Wj(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Cs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Cs.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Wi,u.zi)).next(()=>u.Wi)))}),SI.apply(this,arguments)}function kae(n,e){return AI.apply(this,arguments)}function AI(){return AI=g(function*(n,e,t=ue()){const r=yield Cu(n,hr(_I(e.bundledQuery))),i=N(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ln(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const a=r.withResumeToken(en.EMPTY_BYTE_STRING,o);return i.Ui=i.Ui.insert(a.targetId,a),i.Cs.updateTargetData(s,a).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),AI.apply(this,arguments)}function Yj(n,e){return`firestore_clients_${n}_${e}`}function Qj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xI(n,e){return`firestore_targets_${n}_${e}`}class Q_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new D(i.error.code,i.error.message))),o?new Q_(e,t,i.state,s):(Ot("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new D(r.error.code,r.error.message))),s?new bf(e,r.state,i):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=L_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new X_(e,s):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class MI{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new MI(t.clientId,t.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kI{constructor(){this.activeTargetIds=L_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RI{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new St(oe),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=Yj(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new kI),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return g(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(Yj(e.persistenceKey,i));if(s){const o=X_.Zi(i,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xI(this.persistenceKey,e));if(r){const i=bf.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xI(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return A("SharedClientState","READ",e,t),t}setItem(e,t){A("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(A("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(g(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let o=dr.at;if(null!=s)try{const a=JSON.parse(s);X("number"==typeof a),o=a}catch(a){Ot("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(r.newValue);i!==dr.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Or(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Q_(this.currentUser,e,t,r),s=Qj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=Qj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=xI(this.persistenceKey,e),s=new bf(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return X_.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Q_.Zi(new on(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return bf.Zi(i,t)}yr(e){return MI.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return g(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);A("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=L_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Xj{constructor(){this.Lr=new kI,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new kI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rae{qr(e){}shutdown(){}}class Zj{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Pae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Oae{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Nae extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const o=this.ao(e,t);A("RestConnection","Sending: ",o,r);const a={};return this.ho(a,i,s),this.lo(e,o,a,r).then(l=>(A("RestConnection","Received: ",l),l),l=>{throw $a("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}fo(e,t,r,i,s,o){return this.co(e,t,r,i,s)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,t){return`${this.oo}/v1/${t}:${Pae[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((s,o)=>{const a=new Pse;a.listenOnce(Mse.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case K0.NO_ERROR:const c=a.getResponseJson();A("Connection","XHR received:",JSON.stringify(c)),s(c);break;case K0.TIMEOUT:A("Connection",'RPC "'+e+'" timed out'),o(new D(E.DEADLINE_EXCEEDED,"Request time out"));break;case K0.HTTP_ERROR:const u=a.getStatus();if(A("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(p)>=0?p:E.UNKNOWN}(d.status);o(new D(h,d.message))}else o(new D(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(E.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{A("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(t,"POST",l,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ase(),o=xse(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Rse({})),this.ho(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;const l=i.join("");A("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new Oae({Hr:p=>{d?A("Connection","Not sending because WebChannel is closed:",p):(u||(A("Connection","Opening WebChannel transport."),c.open(),u=!0),A("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,m,_)=>{p.listen(m,b=>{try{_(b)}catch(y){setTimeout(()=>{throw y},0)}})};return f(c,I_.EventType.OPEN,()=>{d||A("Connection","WebChannel transport opened.")}),f(c,I_.EventType.CLOSE,()=>{d||(d=!0,A("Connection","WebChannel transport closed"),h.io())}),f(c,I_.EventType.ERROR,p=>{d||(d=!0,$a("Connection","WebChannel transport errored:",p),h.io(new D(E.UNAVAILABLE,"The operation could not be completed")))}),f(c,I_.EventType.MESSAGE,p=>{var m;if(!d){const _=p.data[0];X(!!_);const b=_,y=b.error||(null===(m=b[0])||void 0===m?void 0:m.error);if(y){A("Connection","WebChannel received error:",y);const C=y.status;let T=function(U){const Z=$t[U];if(void 0!==Z)return zV(Z)}(C),R=y.message;void 0===T&&(T=E.INTERNAL,R="Unknown error status: "+C+" with message "+y.message),d=!0,h.io(new D(T,R)),c.close()}else A("Connection","WebChannel received:",_),h.ro(_)}}),f(o,kse.STAT_EVENT,p=>{p.stat===QU.PROXY?A("Connection","Detected buffering proxy"):p.stat===QU.NOPROXY&&A("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function Jj(){return"undefined"!=typeof window?window:null}function Z_(){return"undefined"!=typeof document?document:null}function wf(n){return new Doe(n,!0)}class PI{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&A("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class eH{constructor(e,t,r,i,s,o,a,l){this.Hs=e,this.Po=r,this.vo=i,this.Vo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new PI(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return g(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return g(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return g(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new D(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao(g(function*(){e.state=0,e.start()}))}Qo(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fae extends eH{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.It=s}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function xoe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:j(),i=e.targetChange.targetIds||[],s=function(l,c){return l.gt?(X(void 0===c||"string"==typeof c),en.fromBase64String(c||"")):(X(void 0===c||c instanceof Uint8Array),en.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?E.UNKNOWN:zV(l.code);return new D(c,l.message||"")}(o);t=new YV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ts(n,r.document.name),s=ln(r.document.updateTime),o=new wn({mapValue:{fields:r.document.fields}}),a=nt.newFoundDocument(i,s,o);t=new B_(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ts(n,r.document),s=r.readTime?ln(r.readTime):Y.min(),o=nt.newNoDocument(i,s);t=new B_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ts(n,r.document);t=new B_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return j();{const r=e.filter,s=new yoe(r.count||0);t=new KV(r.targetId,s)}}var l;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Y.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?ln(s.readTime):Y.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=df(this.It),t.addTarget=function(i,s){let o;const a=s.target;return o=k_(a)?{documents:sj(i,a)}:{query:oj(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=JV(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=cf(i,s.snapshotVersion.toTimestamp())),o}(this.It,e);const r=function koe(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return j()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=df(this.It),t.removeTarget=e,this.Bo(t)}}class Lae extends eH{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Moe(n,e){return n&&n.length>0?(X(void 0!==e),n.map(t=>function(r,i){let s=ln(r.updateTime?r.updateTime:i);return s.isEqual(Y.min())&&(s=ln(i)),new goe(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.Zo(r,t)}return X(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=df(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hf(this.It,r))};this.Bo(t)}}class Bae extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new D(E.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.Vo.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(E.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.Vo.fo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(E.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Uae{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ot(t),this.ou=!1):A("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Vae{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{r.enqueueAndForget(g(function*(){var l;jo(o)&&(A("RemoteStore","Restarting streams for network reachability change."),yield(l=g(function*(c){const u=N(c);u._u.add(4),yield Tu(u),u.gu.set("Unknown"),u._u.delete(4),yield Ef(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.gu=new Uae(r,i)}}function Ef(n){return OI.apply(this,arguments)}function OI(){return OI=g(function*(n){if(jo(n))for(const e of n.wu)yield e(!0)}),OI.apply(this,arguments)}function Tu(n){return NI.apply(this,arguments)}function NI(){return NI=g(function*(n){for(const e of n.wu)yield e(!1)}),NI.apply(this,arguments)}function J_(n,e){const t=N(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),BI(t)?LI(t):Su(t).ko()&&FI(t,e))}function Cf(n,e){const t=N(n),r=Su(t);t.du.delete(e),r.ko()&&tH(t,e),0===t.du.size&&(r.ko()?r.Fo():jo(t)&&t.gu.set("Unknown"))}function FI(n,e){n.yu.Ot(e.targetId),Su(n).zo(e)}function tH(n,e){n.yu.Ot(e),Su(n).Ho(e)}function LI(n){n.yu=new Coe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Su(n).start(),n.gu.uu()}function BI(n){return jo(n)&&!Su(n).No()&&n.du.size>0}function jo(n){return 0===N(n)._u.size}function nH(n){n.yu=void 0}function jae(n){return UI.apply(this,arguments)}function UI(){return UI=g(function*(n){n.du.forEach((e,t)=>{FI(n,e)})}),UI.apply(this,arguments)}function Hae(n,e){return VI.apply(this,arguments)}function VI(){return VI=g(function*(n,e){nH(n),BI(n)?(n.gu.hu(e),LI(n)):n.gu.set("Unknown")}),VI.apply(this,arguments)}function $ae(n,e,t){return jI.apply(this,arguments)}function jI(){return jI=g(function*(n,e,t){if(n.gu.set("Online"),e instanceof YV&&2===e.state&&e.cause)try{yield(r=g(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ey(n,r)}else if(e instanceof B_?n.yu.Gt(e):e instanceof KV?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Y.min()))try{const r=yield zj(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(l);c&&i.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.du.get(a);if(!l)return;i.du.set(a,l.withResumeToken(en.EMPTY_BYTE_STRING,l.snapshotVersion)),tH(i,a);const c=new Bo(l.target,a,1,l.sequenceNumber);FI(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){A("RemoteStore","Failed to raise snapshot:",r),yield ey(n,r)}var r}),jI.apply(this,arguments)}function ey(n,e,t){return HI.apply(this,arguments)}function HI(){return HI=g(function*(n,e,t){if(!ko(e))throw e;n._u.add(1),yield Tu(n),n.gu.set("Offline"),t||(t=()=>zj(n.localStore)),n.asyncQueue.enqueueRetryable(g(function*(){A("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Ef(n)}))}),HI.apply(this,arguments)}function rH(n,e){return e().catch(t=>ey(n,t,e))}function Du(n){return $I.apply(this,arguments)}function $I(){return $I=g(function*(n){const e=N(n),t=Ho(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;zae(e);)try{const i=yield xae(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,Wae(e,i)}catch(i){yield ey(e,i)}iH(e)&&sH(e)}),$I.apply(this,arguments)}function zae(n){return jo(n)&&n.fu.length<10}function Wae(n,e){n.fu.push(e);const t=Ho(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function iH(n){return jo(n)&&!Ho(n).No()&&n.fu.length>0}function sH(n){Ho(n).start()}function qae(n){return zI.apply(this,arguments)}function zI(){return zI=g(function*(n){Ho(n).eu()}),zI.apply(this,arguments)}function Gae(n){return WI.apply(this,arguments)}function WI(){return WI=g(function*(n){const e=Ho(n);for(const t of n.fu)e.Xo(t.mutations)}),WI.apply(this,arguments)}function Kae(n,e,t){return qI.apply(this,arguments)}function qI(){return qI=g(function*(n,e,t){const r=n.fu.shift(),i=gI.from(r,e,t);yield rH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Du(n)}),qI.apply(this,arguments)}function Yae(n,e){return GI.apply(this,arguments)}function GI(){return GI=g(function*(n,e){var t;e&&Ho(n).Yo&&(yield(t=g(function*(r,i){if($V(s=i.code)&&s!==E.ABORTED){const o=r.fu.shift();Ho(r).Oo(),yield rH(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Du(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),iH(n)&&sH(n)}),GI.apply(this,arguments)}function oH(n,e){return KI.apply(this,arguments)}function KI(){return KI=g(function*(n,e){const t=N(n);t.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");const r=jo(t);t._u.add(3),yield Tu(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ef(t)}),KI.apply(this,arguments)}function YI(n,e){return QI.apply(this,arguments)}function QI(){return QI=g(function*(n,e){const t=N(n);e?(t._u.delete(2),yield Ef(t)):e||(t._u.add(2),yield Tu(t),t.gu.set("Unknown"))}),QI.apply(this,arguments)}function Su(n){return n.pu||(n.pu=function(e,t,r){const i=N(e);return i.su(),new Fae(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:jae.bind(null,n),Zr:Hae.bind(null,n),Wo:$ae.bind(null,n)}),n.wu.push(function(){var e=g(function*(t){t?(n.pu.Oo(),BI(n)?LI(n):n.gu.set("Unknown")):(yield n.pu.stop(),nH(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ho(n){return n.Iu||(n.Iu=function(e,t,r){const i=N(e);return i.su(),new Lae(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:qae.bind(null,n),Zr:Yae.bind(null,n),tu:Gae.bind(null,n),Zo:Kae.bind(null,n)}),n.wu.push(function(){var e=g(function*(t){t?(n.Iu.Oo(),yield Du(n)):(yield n.Iu.stop(),n.fu.length>0&&(A("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class XI{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new XI(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Au(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),ko(n))return new D(E.UNAVAILABLE,`${e}: ${n}`);throw n}class xu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||O.comparator(t.key,r.key):(t,r)=>O.comparator(t.key,r.key),this.keyedMap=rf(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new xu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aH{constructor(){this.Tu=new St(O.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):j():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Mu{constructor(e,t,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Mu(e,t,xu.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Qae{constructor(){this.Au=void 0,this.listeners=[]}}class Xae{constructor(){this.queries=new Lo(e=>SV(e),ef),this.onlineState="Unknown",this.Ru=new Set}}function ZI(n,e){return JI.apply(this,arguments)}function JI(){return JI=g(function*(n,e){const t=N(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Qae),i)try{s.Au=yield t.onListen(r)}catch(o){const a=Au(o,`Initialization of query '${aI(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&nT(t)}),JI.apply(this,arguments)}function eT(n,e){return tT.apply(this,arguments)}function tT(){return tT=g(function*(n,e){const t=N(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),tT.apply(this,arguments)}function Zae(n,e){const t=N(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&nT(t)}function Jae(n,e,t){const r=N(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function nT(n){n.Ru.forEach(e=>{e.next()})}class rT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class ele{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class lH{constructor(e){this.It=e}Ji(e){return ts(this.It,e)}Yi(e){return e.metadata.exists?ij(this.It,e.document,!1):nt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ln(e)}}class tle{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cH(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ne.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new lH(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ue()).add(s);t.set(o,a)}}return t}complete(){var e=this;return g(function*(){const t=yield function Mae(n,e,t,r){return SI.apply(this,arguments)}(e.localStore,new lH(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield kae(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function cH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class uH{constructor(e){this.key=e}}class dH{constructor(e){this.key=e}}class hH{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=ue(),this.mutatedKeys=ue(),this.Ku=xV(e),this.Gu=new xu(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new aH,i=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=lI(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),_=!0):this.zu(h,f)||(r.track({type:2,doc:f}),_=!0,(l&&this.Ku(f,l)>0||c&&this.Ku(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Gu:o,Wu:r,$i:a,mutatedKeys:s}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return f(d)-f(h)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(r);const o=t?this.Ju():[],a=0===this.qu.size&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,0!==s.length||l?{snapshot:new Mu(this.query,e.Gu,i,s,e.mutatedKeys,0===a,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new aH,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=ue(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new dH(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new uH(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=ue();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Mu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class nle{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rle{constructor(e){this.key=e,this.ec=!1}}class ile{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Lo(a=>SV(a),ef),this.ic=new Map,this.rc=new Set,this.oc=new St(O.comparator),this.uc=new Map,this.cc=new bI,this.ac={},this.hc=new Map,this.lc=sl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function sle(n,e){return iT.apply(this,arguments)}function iT(){return iT=g(function*(n,e){const t=ST(n);let r,i;const s=t.sc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const o=yield Cu(t.localStore,hr(e));t.isPrimaryClient&&J_(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield sT(t,e,r,"current"===a)}return i}),iT.apply(this,arguments)}function sT(n,e,t,r){return oT.apply(this,arguments)}function oT(){return oT=g(function*(n,e,t,r){n.dc=(u,d,h)=>{return(f=g(function*(p,m,_,b){let y=m.view.ju(_);y.$i&&(y=yield Y_(p.localStore,m.query,!1).then(({documents:R})=>m.view.ju(R,y)));const C=b&&b.targetChanges.get(m.targetId),T=m.view.applyChanges(y,p.isPrimaryClient,C);return mT(p,m.targetId,T.Yu),T.snapshot}),function(p,m,_,b){return f.apply(this,arguments)})(n,u,d,h);var f};const i=yield Y_(n.localStore,e,!0),s=new hH(e,i.Hi),o=s.ju(i.documents),a=lf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),l=s.applyChanges(o,n.isPrimaryClient,a);mT(n,t,l.Yu);const c=new nle(e,t,s);return n.sc.set(e,c),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),l.snapshot}),oT.apply(this,arguments)}function ole(n,e){return aT.apply(this,arguments)}function aT(){return aT=g(function*(n,e){const t=N(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(s=>!ef(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Iu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Cf(t.remoteStore,r.targetId),ku(t,r.targetId)}).catch(Mo))):(ku(t,r.targetId),yield Iu(t.localStore,r.targetId,!0))}),aT.apply(this,arguments)}function lT(){return lT=g(function*(n,e,t){const r=AT(n);try{const i=yield function(s,o){const a=N(s),l=dt.now(),c=o.reduce((h,f)=>h.add(f.key),ue());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=fr(),p=ue();return a.Gi.getEntries(h,c).next(m=>{f=m,f.forEach((_,b)=>{b.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(m=>{u=m;const _=[];for(const b of o){const y=_oe(b,u.get(b.key).overlayedDocument);null!=y&&_.push(new Vs(b.key,y,yV(y.value.mapValue),ht.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,_,o)}).next(m=>{d=m;const _=m.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,m.batchId,_)})}).then(()=>({batchId:d.batchId,changes:qV(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.ac[s.currentUser.toKey()];l||(l=new St(oe)),l=l.insert(o,a),s.ac[s.currentUser.toKey()]=l}(r,i.batchId,t),yield js(r,i.changes),yield Du(r.remoteStore)}catch(i){const s=Au(i,"Failed to persist write");t.reject(s)}}),lT.apply(this,arguments)}function fH(n,e){return cT.apply(this,arguments)}function cT(){return cT=g(function*(n,e){const t=N(n);try{const r=yield Aae(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.uc.get(s);o&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ec=!0:i.modifiedDocuments.size>0?X(o.ec):i.removedDocuments.size>0&&(X(o.ec),o.ec=!1))}),yield js(t,r,e)}catch(r){yield Mo(r)}}),cT.apply(this,arguments)}function pH(n,e,t){const r=N(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&nT(a)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lle(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=g(function*(n,e,t){const r=N(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),s=i&&i.key;if(s){let o=new St(O.comparator);o=o.insert(s,nt.newNoDocument(s,Y.min()));const a=ue().add(s),l=new af(Y.min(),new Map,new Ge(oe),o,a);yield fH(r,l),r.oc=r.oc.remove(s),r.uc.delete(e),_T(r)}else yield Iu(r.localStore,e,!1).then(()=>ku(r,e,t)).catch(Mo)}),uT.apply(this,arguments)}function cle(n,e){return dT.apply(this,arguments)}function dT(){return dT=g(function*(n,e){const t=N(n),r=e.batch.batchId;try{const i=yield Sae(t.localStore,e);gT(t,r,null),pT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield js(t,i)}catch(i){yield Mo(i)}}),dT.apply(this,arguments)}function ule(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=g(function*(n,e,t){const r=N(n);try{const i=yield function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(X(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);gT(r,e,t),pT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield js(r,i)}catch(i){yield Mo(i)}}),hT.apply(this,arguments)}function fT(){return fT=g(function*(n,e){const t=N(n);jo(t.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=N(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Au(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fT.apply(this,arguments)}function pT(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function gT(n,e,t){const r=N(n);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function ku(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||gH(n,r)})}function gH(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Cf(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),_T(n))}function mT(n,e,t){for(const r of t)r instanceof uH?(n.cc.addReference(r.key,e),hle(n,r)):r instanceof dH?(A("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||gH(n,r.key)):j()}function hle(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(A("SyncEngine","New document in limbo: "+t),n.rc.add(r),_T(n))}function _T(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new O(Ne.fromString(e)),r=n.lc.next();n.uc.set(r,new rle(t)),n.oc=n.oc.insert(t,r),J_(n.remoteStore,new Bo(hr(fu(t.path)),r,2,dr.at))}}function js(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=g(function*(n,e,t){const r=N(n),i=[],s=[],o=[];var a;r.sc.isEmpty()||(r.sc.forEach((a,l)=>{o.push(r.dc(l,e,t).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),i.push(c);const u=II.Ci(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),r.nc.Wo(i),yield(a=g(function*(l,c){const u=N(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(c,h=>w.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ko(d))throw d;A("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ui.get(h),m=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ui=u.Ui.insert(h,m)}}}),function(l,c){return a.apply(this,arguments)})(r.localStore,s))}),yT.apply(this,arguments)}function fle(n,e){return vT.apply(this,arguments)}function vT(){return vT=g(function*(n,e){const t=N(n);if(!t.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());const r=yield $j(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(o=>{o.forEach(a=>{a.reject(new D(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield js(t,r.ji)}var i}),vT.apply(this,arguments)}function ple(n,e){const t=N(n),r=t.uc.get(e);if(r&&r.ec)return ue().add(r.key);{let i=ue();const s=t.ic.get(e);if(!s)return i;for(const o of s){const a=t.sc.get(o);i=i.unionWith(a.view.Qu)}return i}}function gle(n,e){return bT.apply(this,arguments)}function bT(){return bT=g(function*(n,e){const t=N(n),r=yield Y_(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&mT(t,e.targetId,i.Yu),i}),bT.apply(this,arguments)}function mle(n,e){return wT.apply(this,arguments)}function wT(){return wT=g(function*(n,e){const t=N(n);return Gj(t.localStore,e).then(r=>js(t,r))}),wT.apply(this,arguments)}function _le(n,e,t,r){return ET.apply(this,arguments)}function ET(){return ET=g(function*(n,e,t,r){const i=N(n),s=yield function(o,a){const l=N(o),c=N(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):w.resolve(null)))}(i.localStore,e);var a;null!==s?("pending"===t?yield Du(i.remoteStore):"acknowledged"===t||"rejected"===t?(gT(i,e,r||null),pT(i,e),a=e,N(N(i.localStore).mutationQueue).An(a)):j(),yield js(i,s)):A("SyncEngine","Cannot apply mutation batch with id: "+e)}),ET.apply(this,arguments)}function CT(){return CT=g(function*(n,e){const t=N(n);if(ST(t),AT(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mH(t,r.toArray());t.fc=!0,yield YI(t.remoteStore,!0);for(const s of i)J_(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ku(t,o),Iu(t.localStore,o,!0))),Cf(t.remoteStore,o)}),yield i,yield mH(t,r),function(s){const o=N(s);o.uc.forEach((a,l)=>{Cf(o.remoteStore,l)}),o.cc.fs(),o.uc=new Map,o.oc=new St(O.comparator)}(t),t.fc=!1,yield YI(t.remoteStore,!1)}}),CT.apply(this,arguments)}function mH(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=g(function*(n,e,t){const r=N(n),i=[],s=[];for(const o of e){let a;const l=r.ic.get(o);if(l&&0!==l.length){a=yield Cu(r.localStore,hr(l[0]));for(const c of l){const u=r.sc.get(c),d=yield gle(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield qj(r.localStore,o);a=yield Cu(r.localStore,c),yield sT(r,_H(c),o,!1)}i.push(a)}return r.nc.Wo(s),i}),IT.apply(this,arguments)}function _H(n){return TV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function vle(n){const e=N(n);return N(N(e.localStore).persistence).vi()}function ble(n,e,t,r){return TT.apply(this,arguments)}function TT(){return TT=g(function*(n,e,t,r){const i=N(n);if(i.fc)return void A("SyncEngine","Ignoring unexpected query state notification.");const s=i.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Gj(i.localStore,AV(s[0])),a=af.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield js(i,o,a);break}case"rejected":yield Iu(i.localStore,e,!0),ku(i,e,r);break;default:j()}}),TT.apply(this,arguments)}function wle(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=g(function*(n,e,t){const r=ST(n);if(r.fc){for(const i of e){if(r.ic.has(i)){A("SyncEngine","Adding an already active target "+i);continue}const s=yield qj(r.localStore,i),o=yield Cu(r.localStore,s);yield sT(r,_H(s),o.targetId,!1),J_(r.remoteStore,o)}for(const i of t)r.ic.has(i)&&(yield Iu(r.localStore,i,!1).then(()=>{Cf(r.remoteStore,i),ku(r,i)}).catch(Mo))}}),DT.apply(this,arguments)}function ST(n){const e=N(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ple.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lle.bind(null,e),e.nc.Wo=Zae.bind(null,e.eventManager),e.nc._c=Jae.bind(null,e.eventManager),e}function AT(n){const e=N(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cle.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ule.bind(null,e),e}class yH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return g(function*(){t.It=wf(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Hj(this.persistence,new jj,e.initialUser,this.It)}gc(e){return new Uj(G_.Bs,this.It)}mc(e){return new Xj}terminate(){var e=this;return g(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vH extends yH{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return g(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield AT(r.Ec.syncEngine),yield Du(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Hj(this.persistence,new jj,e.initialUser,this.It)}Ic(e,t){return new hae(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new Yse(t,this.persistence);return new Kse(e.asyncQueue,r)}gc(e){const t=CI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new EI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Jj(),Z_(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Xj}}class Cle extends vH{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return g(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof RI&&(r.sharedClientState.syncEngine={Fr:_le.bind(null,i),$r:ble.bind(null,i),Br:wle.bind(null,i),vi:vle.bind(null,i),Or:mle.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=g(function*(o){yield function yle(n,e){return CT.apply(this,arguments)}(r.Ec.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}mc(e){const t=Jj();if(!RI.C(t))throw new D(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RI(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xT{initialize(e,t){var r=this;return g(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=fle.bind(null,r.syncEngine),yield YI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Xae}createDatastore(e){const t=wf(e.databaseInfo.databaseId),r=new Nae(e.databaseInfo);return new Bae(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>pH(this.syncEngine,a,0),o=Zj.C()?new Zj:new Rae,new Vae(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,l,c){const u=new ile(r,i,s,o,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=g(function*(t){const r=N(t);A("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Tu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bH(n,e=10240){let t=0;return{read:()=>g(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>g(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ty{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ile{constructor(e,t){this.bc=e,this.It=t,this.metadata=new an,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return g(function*(){return e.metadata.promise})()}wc(){var e=this;return g(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return g(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const s=yield e.Dc(i);return new ele(JSON.parse(s),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return g(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return g(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return g(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Tle{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return g(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new D(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=g(function*(s,o){const a=N(s),l=df(a.It)+"/documents",c={documents:o.map(f=>uf(a.It,f))},u=yield a.fo("BatchGetDocuments",l,c,o.length),d=new Map;u.forEach(f=>{const p=function Aoe(n,e){return"found"in e?function(t,r){X(!!r.found);const i=ts(t,r.found.name),s=ln(r.found.updateTime),o=new wn({mapValue:{fields:r.found.fields}});return nt.newFoundDocument(i,s,o)}(n,e):"missing"in e?function(t,r){X(!!r.missing),X(!!r.readTime);const i=ts(t,r.missing),s=ln(r.readTime);return nt.newNoDocument(i,s)}(n,e):j()}(a.It,f);d.set(p.key.toString(),p)});const h=[];return o.forEach(f=>{const p=d.get(f.toString());X(!!p),h.push(p)}),h}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return g(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=O.fromPath(i);e.mutations.push(new cI(s,e.precondition(s)))}),yield(r=g(function*(i,s){const o=N(i),a=df(o.It)+"/documents",l={writes:s.map(c=>hf(o.It,c))};yield o.co("Commit",a,l)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j();t=Y.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new D(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Y.min())?ht.exists(!1):ht.updateTime(t):ht.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Y.min()))throw new D(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(t)}return ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Dle{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Nc=r.maxAttempts,this.xo=new PI(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao(g(function*(){const t=new Tle(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Oc(s)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Kh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!$V(t)}return!1}}class Sle{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=eV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=g(function*(a){A("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(A("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return g(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Au(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wH(n,e){return MT.apply(this,arguments)}function MT(){return MT=g(function*(n,e){n.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=g(function*(s){r.isEqual(s)||(yield $j(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),MT.apply(this,arguments)}function EH(n,e){return kT.apply(this,arguments)}function kT(){return kT=g(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RT(n);A("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>oH(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>oH(e.remoteStore,s)),n.onlineComponents=e}),kT.apply(this,arguments)}function RT(n){return PT.apply(this,arguments)}function PT(){return PT=g(function*(n){return n.offlineComponents||(A("FirestoreClient","Using default OfflineComponentProvider"),yield wH(n,new yH)),n.offlineComponents}),PT.apply(this,arguments)}function ny(n){return OT.apply(this,arguments)}function OT(){return OT=g(function*(n){return n.onlineComponents||(A("FirestoreClient","Using default OnlineComponentProvider"),yield EH(n,new xT)),n.onlineComponents}),OT.apply(this,arguments)}function CH(n){return RT(n).then(e=>e.persistence)}function ry(n){return RT(n).then(e=>e.localStore)}function IH(n){return ny(n).then(e=>e.remoteStore)}function NT(n){return ny(n).then(e=>e.syncEngine)}function Ru(n){return FT.apply(this,arguments)}function FT(){return FT=g(function*(n){const e=yield ny(n),t=e.eventManager;return t.onListen=sle.bind(null,e.syncEngine),t.onUnlisten=ole.bind(null,e.syncEngine),t}),FT.apply(this,arguments)}function TH(n,e,t={}){const r=new an;return n.asyncQueue.enqueueAndForget(g(function*(){return function(i,s,o,a,l){const c=new ty({next:d=>{s.enqueueAndForget(()=>eT(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new D(E.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new D(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new rT(fu(o.path),c,{includeMetadataChanges:!0,Nu:!0});return ZI(i,u)}(yield Ru(n),n.asyncQueue,e,t,r)})),r.promise}function DH(n,e,t={}){const r=new an;return n.asyncQueue.enqueueAndForget(g(function*(){return function(i,s,o,a,l){const c=new ty({next:d=>{s.enqueueAndForget(()=>eT(i,u)),d.fromCache&&"server"===a.source?l.reject(new D(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new rT(o,c,{includeMetadataChanges:!0,Nu:!0});return ZI(i,u)}(yield Ru(n),n.asyncQueue,e,t,r)})),r.promise}const SH=new Map;function LT(n,e,t){if(!t)throw new D(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AH(n,e,t,r){if(!0===e&&!0===r)throw new D(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xH(n){if(!O.isDocumentKey(n))throw new D(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MH(n){if(O.isDocumentKey(n))throw new D(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":j()}function Re(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new D(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iy(n);throw new D(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kH(n,e){if(e<=0)throw new D(E.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new D(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class If{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Fse;switch(t.type){case"gapi":return new Vse(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new D(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SH.get(e);t&&(A("ComponentProvider","Removing Datastore"),SH.delete(e),t.terminate())}(this),Promise.resolve()}}class ot{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}}class Fn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fn(this.firestore,e,this._query)}}class rs extends Fn{constructor(e,t,r){super(e,t,fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new O(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function BT(n,e,...t){if(n=pe(n),LT("collection","path",e),n instanceof If){const r=Ne.fromString(e,...t);return MH(r),new rs(n,null,r)}{if(!(n instanceof ot||n instanceof rs))throw new D(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return MH(r),new rs(n.firestore,null,r)}}function sy(n,e,...t){if(n=pe(n),1===arguments.length&&(e=eV.R()),LT("doc","path",e),n instanceof If){const r=Ne.fromString(e,...t);return xH(r),new ot(n,null,new O(r))}{if(!(n instanceof ot||n instanceof rs))throw new D(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return xH(r),new ot(n.firestore,n instanceof rs?n.converter:null,new O(r))}}function PH(n,e){return n=pe(n),e=pe(e),(n instanceof ot||n instanceof rs)&&(e instanceof ot||e instanceof rs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OH(n,e){return n=pe(n),e=pe(e),n instanceof Fn&&e instanceof Fn&&n.firestore===e.firestore&&ef(n._query,e._query)&&n.converter===e.converter}class Ble{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new PI(this,"async_queue_retry"),this.jc=()=>{const t=Z_();t&&A("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Z_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Z_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new an;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return g(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!ko(t))throw t;A("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=XI.createAndSchedule(this,e,t,r,s=>this.Jc(s));return this.Uc.push(i),i}Wc(){this.qc&&j()}verifyOperationInProgress(){}Yc(){var e=this;return g(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function UT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ule{constructor(){this._progressObserver={},this._taskCompletionResolver=new an,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ft extends If{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ble,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||FH(this),this._firestoreClient.terminate()}}function NH(n,e){const r="string"==typeof n?n:e||"(default)";return Di("object"==typeof n?n:To(),"firestore").getImmediate({identifier:r})}function zt(n){return n._firestoreClient||FH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FH(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Zse(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new Sle(n._authCredentials,n._appCheckCredentials,n._queue,r)}function LH(n,e,t){const r=new an;return n.asyncQueue.enqueue(g(function*(){try{yield wH(n,t),yield EH(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(o=s).name?o.code===E.FAILED_PRECONDITION||o.code===E.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;$a("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var o})).then(()=>r.promise)}function BH(n){if(n._initialized||n._terminated)throw new D(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new D(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new is(en.fromBase64String(e))}catch(t){throw new D(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new is(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class al{constructor(e){this._methodName=e}}class oy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new D(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}const Yle=/^__.*__$/;class Qle{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class UH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}class ay{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return uy(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(VH(this.na)&&Yle.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Xle{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||wf(e)}fa(e,t,r,i=!1){return new ay({na:e,methodName:t,la:r,path:Dt.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ll(n){const e=n._freezeSettings(),t=wf(n._databaseId);return new Xle(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ly(n,e,t,r,i,s={}){const o=n.fa(s.merge||s.mergeFields?2:0,e,t,i);$T("Data must be an object, but it was:",o,r);const a=$H(r,o);let l,c;if(s.merge)l=new Or(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=zT(e,d,t);if(!o.contains(h))throw new D(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);WH(u,h)||u.push(h)}l=new Or(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Qle(new wn(a),l,c)}class Tf extends al{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function jH(n,e,t){return new ay({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class VT extends al{_toFieldTransform(e){return new tf(e.path,new gu)}isEqual(e){return e instanceof VT}}class Zle extends al{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=jH(this,e,!0),r=this.da.map(s=>cl(s,t)),i=new Xa(r);return new tf(e.path,i)}isEqual(e){return this===e}}class Jle extends al{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=jH(this,e,!0),r=this.da.map(s=>cl(s,t)),i=new Za(r);return new tf(e.path,i)}isEqual(e){return this===e}}class ece extends al{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new mu(e.It,RV(e.It,this._a));return new tf(e.path,t)}isEqual(e){return this===e}}function jT(n,e,t,r){const i=n.fa(1,e,t);$T("Data must be an object, but it was:",i,r);const s=[],o=wn.empty();qa(r,(l,c)=>{const u=cy(e,l,t);c=pe(c);const d=i.ua(u);if(c instanceof Tf)s.push(u);else{const h=cl(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new Or(s);return new UH(o,a,i.fieldTransforms)}function HT(n,e,t,r,i,s){const o=n.fa(1,e,t),a=[zT(e,r,t)],l=[i];if(s.length%2!=0)throw new D(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(zT(e,s[h])),l.push(s[h+1]);const c=[],u=wn.empty();for(let h=a.length-1;h>=0;--h)if(!WH(c,a[h])){const f=a[h];let p=l[h];p=pe(p);const m=o.ua(f);if(p instanceof Tf)c.push(f);else{const _=cl(p,m);null!=_&&(c.push(f),u.set(f,_))}}const d=new Or(c);return new UH(u,d,o.fieldTransforms)}function HH(n,e,t,r=!1){return cl(t,n.fa(r?4:3,e))}function cl(n,e){if(zH(n=pe(n)))return $T("Unsupported field value:",e,n),$H(n,e);if(n instanceof al)return function(t,r){if(!VH(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=cl(o,r.ca(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=pe(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return RV(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=dt.fromDate(t);return{timestampValue:cf(r.It,i)}}if(t instanceof dt){const i=new dt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cf(r.It,i)}}if(t instanceof oy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof is)return{bytesValue:JV(r.It,t._byteString)};if(t instanceof ot){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${iy(t)}`)}(n,e)}function $H(n,e){const t={};return lV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(n,(r,i)=>{const s=cl(i,e.ia(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function zH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof oy||n instanceof is||n instanceof ot||n instanceof al)}function $T(n,e,t){if(!zH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iy(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function zT(n,e,t){if((e=pe(e))instanceof Hs)return e._internalPath;if("string"==typeof e)return cy(n,e);throw uy("Field path arguments must be of type string or ",n,!1,void 0,t)}const tce=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(tce)>=0)throw uy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hs(...e.split("."))._internalPath}catch(r){throw uy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uy(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new D(E.INVALID_ARGUMENT,a+n+l)}function WH(n,e){return n.some(t=>t.isEqual(e))}class Df{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nce extends Df{data(){return super.data()}}function dy(n,e){return"string"==typeof e?cy(n,e):e instanceof Hs?e._internalPath:e._delegate._internalPath}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends Df{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dy("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sf extends $s{data(e={}){return super.data(e)}}class $o{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ul(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sf(this._firestore,this._userDataWriter,r.key,r,new ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new D(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Sf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ul(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Sf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ul(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:rce(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rce(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function qH(n,e){return n instanceof $s&&e instanceof $s?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $o&&e instanceof $o&&n._firestore===e._firestore&&OH(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function GH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new D(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Af{}function zo(n,...e){for(const t of e)n=t._apply(n);return n}class ice extends Af{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=ll(e.firestore),r=function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new D(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){JH(u,c);const f=[];for(const p of u)f.push(ZH(a,i,p));d={arrayValue:{values:f}}}else d=ZH(a,i,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||JH(u,c),d=HH(o,"where",u,"in"===c||"not-in"===c);const h=En.create(l,c,d);return function(f,p){if(p.dt()){const _=sI(f);if(null!==_&&!_.isEqual(p.field))throw new D(E.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_.toString()}' and '${p.field.toString()}'`);const b=iI(f);null!==b&&e$(0,p.field,b)}const m=function(_,b){for(const y of _.filters)if(b.indexOf(y.op)>=0)return y.op;return null}(f,function(_){switch(_){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(null!==m)throw new D(E.INVALID_ARGUMENT,m===p.op?`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`:`Invalid query. You cannot use '${p.op.toString()}' filters with '${m.toString()}' filters.`)}(i,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Fn(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new Us(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class oce extends Af{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new D(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new D(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new hu(i,s);return function(a,l){if(null===iI(a)){const c=sI(a);null!==c&&e$(0,c,l.field)}}(r,o),o}(e._query,this.wa,this.ya);return new Fn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Us(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KH extends Af{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Fn(e.firestore,e.converter,P_(e._query,this.pa,this.Ia))}}class YH extends Af{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=XH(e,this.type,this.Ta,this.Ea);return new Fn(e.firestore,e.converter,(i=t,new Us((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QH extends Af{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=XH(e,this.type,this.Ta,this.Ea);return new Fn(e.firestore,e.converter,(i=t,new Us((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XH(n,e,t,r){if(t[0]=pe(t[0]),t[0]instanceof Df)return function(i,s,o,a,l){if(!a)throw new D(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of pu(i))if(u.field.isKeyField())c.push(Ya(s,a.key));else{const d=a.data.field(u.field);if(tI(d))throw new D(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new D(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new Fo(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ll(n.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new D(E.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new D(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!oI(s)&&-1!==p.indexOf("/"))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const m=s.path.child(Ne.fromString(p));if(!O.isDocumentKey(m))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const _=new O(m);h.push(Ya(o,_))}else{const m=HH(a,l,p);h.push(m)}}return new Fo(h,u)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZH(n,e,t){if("string"==typeof(t=pe(t))){if(""===t)throw new D(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oI(e)&&-1!==t.indexOf("/"))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ne.fromString(t));if(!O.isDocumentKey(r))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ya(n,new O(r))}if(t instanceof ot)return Ya(n,t._key);throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iy(t)}.`)}function JH(n,e){if(!Array.isArray(n)||0===n.length)throw new D(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new D(E.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function e$(n,e,t){if(!t.isEqual(e))throw new D(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const pce={maxAttempts:5};class WT{convertValue(e,t="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw j()}}convertObject(e,t){const r={};return qa(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new oy(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gh(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ne.fromString(e);X(cj(r));const i=new Po(r.get(1),r.get(3)),s=new O(r.popFirst(5));return i.isEqual(t)||Ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gce extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new is(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}class t${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ll(e)}set(e,t,r){this._verifyNotCommitted();const i=Wo(e,this._firestore),s=hy(i.converter,t,r),o=ly(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ht.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Wo(e,this._firestore);let o;return o="string"==typeof(t=pe(t))||t instanceof Hs?HT(this._dataReader,"WriteBatch.update",s._key,t,r,i):jT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wo(e,this._firestore);return this._mutations=this._mutations.concat(new yu(t._key,ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wo(n,e){if((n=pe(n)).firestore!==e)throw new D(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dl extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new is(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}function n$(n,e,t){n=Re(n,ot);const r=Re(n.firestore,ft),i=hy(n.converter,e,t);return Pu(r,[ly(ll(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ht.none())])}function r$(n,e,t,...r){n=Re(n,ot);const i=Re(n.firestore,ft),s=ll(i);let o;return o="string"==typeof(e=pe(e))||e instanceof Hs?HT(s,"updateDoc",n._key,e,t,r):jT(s,"updateDoc",n._key,e),Pu(i,[o.toMutation(n._key,ht.exists(!0))])}function i$(n,e){const t=Re(n.firestore,ft),r=sy(n),i=hy(n.converter,e);return Pu(t,[ly(ll(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}function s$(n,...e){var t,r,i;n=pe(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||UT(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(UT(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(n instanceof ot)c=Re(n.firestore,ft),u=fu(n._key.path),l={next:d=>{e[o]&&e[o](qT(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Re(n,Fn);c=Re(d.firestore,ft),u=d._query;const h=new dl(c);l={next:f=>{e[o]&&e[o](new $o(c,h,d,f))},error:e[o+1],complete:e[o+2]},GH(n._query)}return function(d,h,f,p){const m=new ty(p),_=new rT(h,m,f);return d.asyncQueue.enqueueAndForget(g(function*(){return ZI(yield Ru(d),_)})),()=>{m.Rc(),d.asyncQueue.enqueueAndForget(g(function*(){return eT(yield Ru(d),_)}))}}(zt(c),u,a,l)}function Pu(n,e){return function(t,r){const i=new an;return t.asyncQueue.enqueueAndForget(g(function*(){return function ale(n,e,t){return lT.apply(this,arguments)}(yield NT(t),r,i)})),i.promise}(zt(n),e)}function qT(n,e,t){const r=t.docs.get(e._key),i=new dl(n);return new $s(n,i,e._key,r,new ul(t.hasPendingWrites,t.fromCache),e.converter)}class Ice extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ll(e)}get(e){const t=Wo(e,this._firestore),r=new gce(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return j();const s=i[0];if(s.isFoundDocument())return new Df(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Df(this._firestore,r,t._key,null,t.converter);throw j()})}set(e,t,r){const i=Wo(e,this._firestore),s=hy(i.converter,t,r),o=ly(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=Wo(e,this._firestore);let o;return o="string"==typeof(t=pe(t))||t instanceof Hs?HT(this._dataReader,"Transaction.update",s._key,t,r,i):jT(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=Wo(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wo(e,this._firestore),r=new dl(this._firestore);return super.get(e).then(i=>new $s(this._firestore,r,t._key,i._document,new ul(!1,!1),t.converter))}}!function(n,e=!0){lu=Ki,jt(new Pt("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new ft(new Bse(t.getProvider("auth-internal")),new jse(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ke(XU,"3.5.0",n),ke(XU,"3.5.0","esm2017")}();class kce{constructor(e,t){this._delegate=e,this.firebase=t,qm(e,new Pt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),QB(this._delegate)))}_getService(e,t=La){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=La){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){qm(this._delegate,e)}_addOrOverwriteComponent(e){YB(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const a$=new Zr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Oce=function l$(){const n=function Pce(n){const e={},t={__esModule:!0,initializeApp:function s(c,u={}){const d=Yi(c,u);if(Ti(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h},app:i,registerVersion:ke,setLogLevel:ZB,onLog:XB,apps:null,SDK_VERSION:Ki,INTERNAL:{registerComponent:function a(c){const u=c.name,d=u.replace("-compat","");if(jt(c)&&"PUBLIC"===c.type){const h=(f=i())=>{if("function"!=typeof f[d])throw a$.create("invalid-app-argument",{appName:u});return f[d]()};void 0!==c.serviceProps&&ph(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return"PUBLIC"===c.type?t[d]:null},removeApp:function r(c){delete e[c]},useAsService:function l(c,u){return"serverAuth"===u?null:u},modularAPIs:vd}};function i(c){if(!Ti(e,c=c||La))throw a$.create("no-app",{appName:c});return e[c]}return t.default=t,Object.defineProperty(t,"apps",{get:function o(){return Object.keys(e).map(c=>e[c])}}),i.App=n,t}(kce);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:l$,extendNamespace:function e(t){ph(n,t)},createSubscribe:jB,ErrorFactory:Zr,deepExtend:ph}),n}(),c$=new Eo("@firebase/app-compat");if(function Nte(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){c$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&c$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Jr=Oce;function GT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new D("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function u$(){if("undefined"==typeof Uint8Array)throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function d$(){if(!function Qse(){return"undefined"!=typeof atob}())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function Lce(n){ke("@firebase/app-compat","0.1.34",n)}(),Jr.registerVersion("firebase","9.10.0","app-compat");class xf{constructor(e){this._delegate=e}static fromBase64String(e){return d$(),new xf(is.fromBase64String(e))}static fromUint8Array(e){return u$(),new xf(is.fromUint8Array(e))}toBase64(){return d$(),this._delegate.toBase64()}toUint8Array(){return u$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KT(n){return function Hce(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $ce{enableIndexedDbPersistence(e,t){return function jle(n,e){BH(n=Re(n,ft));const t=zt(n),r=n._freezeSettings(),i=new xT;return LH(t,i,new vH(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Hle(n){BH(n=Re(n,ft));const e=zt(n),t=n._freezeSettings(),r=new xT;return LH(e,r,new Cle(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $le(n){if(n._initialized&&!n._terminated)throw new D(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new an;return n._queue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{yield(t=g(function*(r){if(!xi.C())return Promise.resolve();const i=r+"main";yield xi.delete(i)}),function(r){return t.apply(this,arguments)})(CI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class h${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Po||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$a("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Fle(n,e,t,r={}){var i;const s=(n=Re(n,If))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&$a("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=on.MOCK_USER;else{o=function Pte(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vm(JSON.stringify({alg:"none",type:"JWT"})),Vm(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new D(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new on(l)}n._authCredentials=new Lse(new ZU(o,a))}}(this._delegate,e,t,r)}enableNetwork(){return function Wle(n){return function Ale(n){return n.asyncQueue.enqueue(g(function*(){const e=yield CH(n),t=yield IH(n);return e.setNetworkEnabled(!0),function(r){const i=N(r);return i._u.delete(0),Ef(i)}(t)}))}(zt(n=Re(n,ft)))}(this._delegate)}disableNetwork(){return function qle(n){return function xle(n){return n.asyncQueue.enqueue(g(function*(){const e=yield CH(n),t=yield IH(n);return e.setNetworkEnabled(!1),(r=g(function*(i){const s=N(i);s._u.add(0),yield Tu(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(zt(n=Re(n,ft)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zle(n){return function(e){const t=new an;return e.asyncQueue.enqueueAndForget(g(function*(){return function dle(n,e){return fT.apply(this,arguments)}(yield NT(e),t)})),t.promise}(zt(n=Re(n,ft)))}(this._delegate)}onSnapshotsInSync(e){return function Cce(n,e){return function Rle(n,e){const t=new ty(e);return n.asyncQueue.enqueueAndForget(g(function*(){return r=yield Ru(n),i=t,N(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget(g(function*(){return r=yield Ru(n),i=t,void N(r).Ru.delete(i);var r,i}))}}(zt(n=Re(n,ft)),UT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ou(this,BT(this._delegate,e))}catch(t){throw Qn(t,"collection()","Firestore.collection()")}}doc(e){try{return new ei(this,sy(this._delegate,e))}catch(t){throw Qn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xn(this,function Lle(n,e){if(n=Re(n,If),LT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fn(n,null,(t=e,new Us(Ne.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Tce(n,e,t){n=Re(n,ft);const r=Object.assign(Object.assign({},pce),t);return function(i){if(i.maxAttempts<1)throw new D(E.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Ple(n,e,t){const r=new an;return n.asyncQueue.enqueueAndForget(g(function*(){const i=yield(s=n,ny(s).then(o=>o.datastore));var s;new Dle(n.asyncQueue,i,t,e,r).run()})),r.promise}(zt(n),i=>e(new Ice(n,i)),r)}(this._delegate,t=>e(new f$(this,t)))}batch(){return zt(this._delegate),new p$(new t$(this._delegate,e=>Pu(this._delegate,e)))}loadBundle(e){return function Gle(n,e){const t=zt(n=Re(n,ft)),r=new Ule;return function Ole(n,e,t,r){const i=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,c){if(l instanceof Uint8Array)return bH(l,c);if(l instanceof ArrayBuffer)return bH(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new Ile(l,o);var l}(t,wf(e));n.asyncQueue.enqueueAndForget(g(function*(){!function Ele(n,e,t){const r=N(n);var i;(i=g(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(h,f){const p=N(h),m=ln(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.Ns.getBundleMetadata(_,f.id)).then(_=>!!_&&_.createTime.compareTo(m)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=l).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(cH(l));const c=new tle(l,s.localStore,o.It);let u=yield o.wc();for(;u;){const h=yield c.Ou(u);h&&a._updateProgress(h),u=yield o.wc()}const d=yield c.complete();return yield js(s,d.Bu,void 0),yield function(h,f){const p=N(h);return p.persistence.runTransaction("Save bundle","readwrite",m=>p.Ns.saveBundleMetadata(m,f))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.$u)}catch(l){return $a("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var h}),function(s,o,a){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield NT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Kle(n,e){return function Nle(n,e){return n.asyncQueue.enqueue(g(function*(){return function(t,r){const i=N(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield ry(n),e)}))}(zt(n=Re(n,ft)),e).then(t=>t?new Fn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xn(this,t):null)}}class fy extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new xf(new is(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ei.forKey(t,this.firestore,null)}}class f${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fy(e)}get(e){const t=fl(e);return this._delegate.get(t).then(r=>new Mf(this._firestore,new $s(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fl(e);return r?(GT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fl(e);return this._delegate.delete(t),this}}class p${constructor(e){this._delegate=e}set(e,t,r){const i=fl(e);return r?(GT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kf(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new hl(e,new fy(e),t),i.set(t,s)),s}}hl.INSTANCES=new WeakMap;class ei{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fy(e)}static forPath(e,t,r){if(e.length%2!=0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ei(t,new ot(t._delegate,r,new O(e)))}static forKey(e,t,r){return new ei(t,new ot(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ou(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ou(this.firestore,BT(this._delegate,e))}catch(t){throw Qn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=pe(e))instanceof ot&&PH(this._delegate,e)}set(e,t){t=GT("DocumentReference.set",t);try{return t?n$(this._delegate,e,t):n$(this._delegate,e)}catch(r){throw Qn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?r$(this._delegate,e):r$(this._delegate,e,t,...r)}catch(i){throw Qn(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ece(n){return Pu(Re(n.firestore,ft),[new yu(n._key,ht.none())])}(this._delegate)}onSnapshot(...e){const t=g$(e),r=m$(e,i=>new Mf(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return s$(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _ce(n){n=Re(n,ot);const e=Re(n.firestore,ft),t=zt(e),r=new dl(e);return function Mle(n,e){const t=new an;return n.asyncQueue.enqueueAndForget(g(function*(){return(r=g(function*(i,s,o){try{const a=yield function(l,c){const u=N(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new D(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Au(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(i,s,o){return r.apply(this,arguments)})(yield ry(n),e,t);var r})),t.promise}(t,n._key).then(i=>new $s(e,r,n._key,i,new ul(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function yce(n){n=Re(n,ot);const e=Re(n.firestore,ft);return TH(zt(e),n._key,{source:"server"}).then(t=>qT(e,n,t))}(this._delegate):function mce(n){n=Re(n,ot);const e=Re(n.firestore,ft);return TH(zt(e),n._key).then(t=>qT(e,n,t))}(this._delegate),t.then(r=>new Mf(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ei(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}function Qn(n,e,t){return n.message=n.message.replace(e,t),n}function g$(n){for(const e of n)if("object"==typeof e&&!KT(e))return e;return{}}function m$(n,e){var t,r;let i;return i=KT(n[0])?n[0]:KT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Mf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ei(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qH(this._delegate,e._delegate)}}class kf extends Mf{data(e){const t=this._delegate.data(e);return function Nse(n,e){n||j()}(void 0!==t),t}}class Xn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fy(e)}where(e,t,r){try{return new Xn(this.firestore,zo(this._delegate,function sce(n,e,t){const r=e,i=dy("where",n);return new ice(i,r,t)}(e,t,r)))}catch(i){throw Qn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xn(this.firestore,zo(this._delegate,function ace(n,e="asc"){const t=e,r=dy("orderBy",n);return new oce(r,t)}(e,t)))}catch(r){throw Qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xn(this.firestore,zo(this._delegate,function lce(n){return kH("limit",n),new KH("limit",n,"F")}(e)))}catch(t){throw Qn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xn(this.firestore,zo(this._delegate,function cce(n){return kH("limitToLast",n),new KH("limitToLast",n,"L")}(e)))}catch(t){throw Qn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xn(this.firestore,zo(this._delegate,function uce(...n){return new YH("startAt",n,!0)}(...e)))}catch(t){throw Qn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xn(this.firestore,zo(this._delegate,function dce(...n){return new YH("startAfter",n,!1)}(...e)))}catch(t){throw Qn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xn(this.firestore,zo(this._delegate,function hce(...n){return new QH("endBefore",n,!1)}(...e)))}catch(t){throw Qn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xn(this.firestore,zo(this._delegate,function fce(...n){return new QH("endAt",n,!0)}(...e)))}catch(t){throw Qn(t,"endAt()","Query.endAt()")}}isEqual(e){return OH(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function bce(n){n=Re(n,Fn);const e=Re(n.firestore,ft),t=zt(e),r=new dl(e);return function kle(n,e){const t=new an;return n.asyncQueue.enqueueAndForget(g(function*(){return(r=g(function*(i,s,o){try{const a=yield Y_(i,s,!0),l=new hH(s,a.Hi),c=l.ju(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=Au(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(i,s,o){return r.apply(this,arguments)})(yield ry(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $o(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function wce(n){n=Re(n,Fn);const e=Re(n.firestore,ft),t=zt(e),r=new dl(e);return DH(t,n._query,{source:"server"}).then(i=>new $o(e,r,n,i))}(this._delegate):function vce(n){n=Re(n,Fn);const e=Re(n.firestore,ft),t=zt(e),r=new dl(e);return GH(n._query),DH(t,n._query).then(i=>new $o(e,r,n,i))}(this._delegate),t.then(r=>new YT(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=g$(e),r=m$(e,i=>new YT(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return s$(this._delegate,t,r)}withConverter(e){return new Xn(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}class Wce{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wce(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new kf(this._firestore,r))})}isEqual(e){return qH(this._delegate,e._delegate)}}class Ou extends Xn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ei(this.firestore,e):null}doc(e){try{return new ei(this.firestore,void 0===e?sy(this._delegate):sy(this._delegate,e))}catch(t){throw Qn(t,"doc()","CollectionReference.doc()")}}add(e){return i$(this._delegate,e).then(t=>new ei(this.firestore,t))}isEqual(e){return PH(this._delegate,e._delegate)}withConverter(e){return new Ou(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}function fl(n){return Re(n,ot)}class QT{constructor(...e){this._delegate=new Hs(...e)}static documentId(){return new QT(Dt.keyField().canonicalString())}isEqual(e){return(e=pe(e))instanceof Hs&&this._delegate._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Sce(){return new VT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pl(e)}static delete(){const e=function Dce(){return new Tf("deleteField")}();return e._methodName="FieldValue.delete",new pl(e)}static arrayUnion(...e){const t=function Ace(...n){return new Zle("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pl(t)}static arrayRemove(...e){const t=function xce(...n){return new Jle("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pl(t)}static increment(e){const t=function Mce(n){return new ece("increment",n)}(e);return t._methodName="FieldValue.increment",new pl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qce={Firestore:h$,GeoPoint:oy,Timestamp:dt,Blob:xf,Transaction:f$,WriteBatch:p$,DocumentReference:ei,DocumentSnapshot:Mf,Query:Xn,QueryDocumentSnapshot:kf,QuerySnapshot:YT,CollectionReference:Ou,FieldPath:QT,FieldValue:pl,setLogLevel:function zce(n){!function Ose(n){xo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Kce(n){(function Gce(n,e){n.INTERNAL.registerComponent(new Pt("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},qce)))})(n,(e,t)=>new h$(e,t,new $ce)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(Jr);class Yce{}const _$="@firebase/database";let XT="";class Xce{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:mh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Zce{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ti(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const v$=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Xce(e)}}catch(e){}return new Zce},gl=v$("localStorage"),ZT=v$("sessionStorage"),Nu=new Eo("@firebase/database"),b$=function(){let n=1;return function(){return n++}}(),w$=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,k(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new $te;t.update(e);const r=t.digest();return Um.encodeByteArray(r)},Rf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Rf.apply(null,r):e+="object"==typeof r?Jt(r):r,e+=" "}return e};let ml=null,E$=!0;const dn=function(...n){if(!0===E$&&(E$=!1,null===ml&&!0===ZT.get("logging_enabled")&&function(n,e){k(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Nu.logLevel=Se.VERBOSE,ml=Nu.log.bind(Nu),e&&ZT.set("logging_enabled",!0)):"function"==typeof n?ml=n:(ml=null,ZT.remove("logging_enabled"))}(!0)),ml){const e=Rf.apply(null,n);ml(e)}},Pf=function(n){return function(...e){dn(n,...e)}},JT=function(...n){const e="FIREBASE INTERNAL ERROR: "+Rf(...n);Nu.error(e)},ss=function(...n){const e=`FIREBASE FATAL ERROR: ${Rf(...n)}`;throw Nu.error(e),new Error(e)},Ln=function(...n){const e="FIREBASE WARNING: "+Rf(...n);Nu.warn(e)},py=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zs="[MIN_NAME]",os="[MAX_NAME]",_l=function(n,e){if(n===e)return 0;if(n===zs||e===os)return-1;if(e===zs||n===os)return 1;{const t=gy(n),r=gy(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},tue=function(n,e){return n===e?0:n<e?-1:1},Of=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Jt(e))},eD=function(n){if("object"!=typeof n||null===n)return Jt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Jt(e[r]),t+=":",t+=eD(n[e[r]]);return t+="}",t},I$=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const T$=function(n){k(!py(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},sue=new RegExp("^-?(0*)\\d{1,10}$"),gy=function(n){if(sue.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Fu=function(n){try{n()}catch(e){setTimeout(()=>{throw Ln("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Nf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class aue{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lue{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ln(e)}}let Ff=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const k$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,O$="websocket",N$="long_polling";class rD{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function F$(n,e,t){let r;if(k("string"==typeof e,"typeof type must == string"),k("object"==typeof t,"typeof params must == object"),e===O$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==N$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function cue(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class uue{constructor(){this.counters_={}}incrementCounter(e,t=1){Ti(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function kte(n){return ph(void 0,n)}(this.counters_)}}const iD={},sD={};function oD(n){const e=n.toString();return iD[e]||(iD[e]=new uue),iD[e]}class hue{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Fu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qo{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pf(e),this.stats_=oD(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),F$(t,N$,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hue(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aD((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&k$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qo.forceAllow_=!0}static forceDisallow(){qo.forceDisallow_=!0}static isAvailable(){return!(!qo.forceAllow_&&(qo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=BB(t),i=I$(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class aD{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=b$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=aD.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let _y=null;"undefined"!=typeof MozWebSocket?_y=MozWebSocket:"undefined"!=typeof WebSocket&&(_y=WebSocket);let Lu=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pf(this.connId),this.stats_=oD(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&k$.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),F$(t,O$,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gl.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new _y(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==_y&&!n.forceDisallow_}static previouslyFailed(){return gl.isInMemoryStorage||!0===gl.get("previous_websocket_failure")}markConnectionHealthy(){gl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=mh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(k(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Jt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=I$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),$$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[qo,Lu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Lu&&Lu.isAvailable();let i=r&&!Lu.previouslyFailed();if(t.webSocketOnly&&(r||Ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Lu];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Q${constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pf("c:"+this.id+":"),this.transportManager_=new $$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Nf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Of("t",e),r=Of("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Of("t",e),r=Of("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Of("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?JT("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Nf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class X${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Z${constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){k(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class yy extends Z${constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!xC()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yy}getInitialEvent(e){return k("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class $e{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ve(){return new $e("")}function ye(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Go(n){return n.pieces_.length-n.pieceNum_}function Xe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $e(n.pieces_,e)}function cD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Lf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tz(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $e(e,0)}function pt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $e)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $e(t,0)}function ve(n){return n.pieceNum_>=n.pieces_.length}function Zn(n,e){const t=ye(n),r=ye(e);if(null===t)return e;if(t===r)return Zn(Xe(n),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function uD(n,e){if(Go(n)!==Go(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ti(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Go(n)>Go(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Nue{constructor(e,t){this.errorPrefix_=t,this.parts_=Lf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zm(this.parts_[r]);nz(this)}}function nz(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yl(n))}function yl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class dD extends Z${constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new dD}getInitialEvent(e){return k("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bf=1e3;let by,vl=(()=>{class n extends X${constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Pf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dD.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&yy.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Jt(o)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Oa,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Ti(t,"w")){const i=eu(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=jm(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=jm(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Jt(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):JT("Unrecognized action received from server: "+Jt(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return g(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){k(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new Q$(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,m=>{Ln(m+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&Ln(f),u())}}})()}interrupt(t){dn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){dn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],RC(this.interruptReasons_)&&(this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>eD(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new $e(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){dn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){dn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+XT.replace(/\./g,"-")]=1,xC()?t["framework.cordova"]=1:UB()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=yy.getInstance().currentlyOnline();return RC(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ee{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ee(e,t)}}class vy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ee(zs,e),i=new Ee(zs,t);return 0!==this.compare(r,i)}minPost(){return Ee.MIN}}class sz extends vy{static get __EMPTY_NODE(){return by}static set __EMPTY_NODE(e){by=e}compare(e,t){return _l(e.name,t.name)}isDefinedOn(e){throw Jc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(os,by)}makePost(e,t){return k("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ee(e,by)}toString(){return".key"}}const as=new sz;class wy{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let fD,Mi=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:gr.EMPTY_NODE,this.right=null!=o?o:gr.EMPTY_NODE}copy(t,r,i,s,o){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return gr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gr{constructor(e,t=gr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mi.BLACK,null,null))}remove(e){return new gr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wy(this.root_,null,this.comparator_,!0,e)}}function $ue(n,e){return _l(n.name,e.name)}function hD(n,e){return _l(n,e)}gr.EMPTY_NODE=new class Hue{copy(e,t,r,i,s){return this}insert(e,t,r){return new Mi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oz=function(n){return"number"==typeof n?"number:"+T$(n):"string:"+n},az=function(n){if(n.isLeafNode()){const e=n.val();k("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ti(e,".sv"),"Priority must be a string or number.")}else k(n===fD||n.isEmpty(),"priority of unexpected type.");k(n===fD||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let lz,cz,uz,Bu=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,k(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),az(this.priorityNode_)}static set __childrenNodeConstructor(t){lz=t}static get __childrenNodeConstructor(){return lz}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ve(t)?this:".priority"===ye(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ye(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(k(".priority"!==i||1===Go(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+oz(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?T$(this.value_):this.value_,this.lazyHash_=w$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(k(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return k(s>=0,"Unknown leaf type: "+r),k(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const rt=new class Gue extends vy{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?_l(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(os,new Bu("[PRIORITY-POST]",uz))}makePost(e,t){const r=cz(e);return new Ee(t,new Bu("[PRIORITY-POST]",r))}toString(){return".priority"}},Kue=Math.log(2);class Yue{constructor(e){this.count=parseInt(Math.log(e+1)/Kue,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ey=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new Mi(h,d.node,Mi.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return d=n[f],h=t?t(d):d,new Mi(h,d.node,Mi.BLACK,p,m)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,m){const _=d-p,b=d;d-=p;const y=i(_+1,b),C=n[_],T=t?t(C):C;f(new Mi(T,C.node,m,null,y))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));m?h(_,Mi.BLACK):(h(_,Mi.BLACK),h(_,Mi.RED))}return u}(new Yue(n.length));return new gr(r||e,a)};let pD;const Uu={};class Ws{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return k(Uu&&rt,"ChildrenNode.ts has not been loaded"),pD=pD||new Ws({".priority":Uu},{".priority":rt}),pD}get(e){const t=eu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof gr?t:null}hasIndex(e){return Ti(this.indexSet_,e.toString())}addIndex(e,t){k(e!==as,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Ee.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Ey(r,e.getCompare()):Uu;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ws(u,c)}addToIndexes(e,t){const r=Hm(this.indexes_,(i,s)=>{const o=eu(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===Uu){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Ee.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Ey(a,o.getCompare())}return Uu}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Ee(e.name,a))),l.insert(e,e.node)}});return new Ws(r,this.indexSet_)}removeFromIndexes(e,t){const r=Hm(this.indexes_,i=>{if(i===Uu)return i;{const s=t.get(e.name);return s?i.remove(new Ee(e.name,s)):i}});return new Ws(r,this.indexSet_)}}let Uf,ce=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&az(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uf||(Uf=new n(new gr(hD),null,Ws.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Uf:r}}getChild(t){const r=ye(t);return null===r?this:this.getImmediateChild(r).getChild(Xe(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(k(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ee(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Uf:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=ye(t);if(null===i)return r;{k(".priority"!==ye(t)||1===Go(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Xe(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(rt,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+oz(this.getPriority().val())+":"),this.forEachChild(rt,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":w$(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Ee(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ee(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ee(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ee.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ee.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vf?-1:0}withIndex(t){if(t===as||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===as||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(rt),s=r.getIterator(rt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===as?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Vf=new class Que extends ce{constructor(){super(new gr(hD),ce.EMPTY_NODE,Ws.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}};function _t(n,e=null){if(null===n)return ce.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),k(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Bu(n,_t(e));if(n instanceof Array){let t=ce.EMPTY_NODE;return hn(n,(r,i)=>{if(Ti(n,r)&&"."!==r.substring(0,1)){const s=_t(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(_t(e))}{const t=[];let r=!1;if(hn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=_t(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Ee(o,l)))}}),0===t.length)return ce.EMPTY_NODE;const s=Ey(t,$ue,o=>o.name,hD);if(r){const o=Ey(t,rt.getCompare());return new ce(s,_t(e),new Ws({".priority":o},{".priority":rt}))}return new ce(s,_t(e),Ws.Default)}}Object.defineProperties(Ee,{MIN:{value:new Ee(zs,ce.EMPTY_NODE)},MAX:{value:new Ee(os,Vf)}}),sz.__EMPTY_NODE=ce.EMPTY_NODE,Bu.__childrenNodeConstructor=ce,function zue(n){fD=n}(Vf),function que(n){uz=n}(Vf),function Wue(n){cz=n}(_t);class gD extends vy{constructor(e){super(),this.indexPath_=e,k(!ve(e)&&".priority"!==ye(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?_l(e.name,t.name):s}makePost(e,t){const r=_t(e),i=ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ee(t,i)}maxPost(){const e=ce.EMPTY_NODE.updateChild(this.indexPath_,Vf);return new Ee(os,e)}toString(){return Lf(this.indexPath_,0).join("/")}}const mD=new class Zue extends vy{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?_l(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(e,t){const r=_t(e);return new Ee(t,r)}toString(){return".value"}},Vu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Jue=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Vu.charAt(t%64),t=Math.floor(t/64);k(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=Vu.charAt(e[i]);return k(20===o.length,"nextPushId: Length should be 20."),o}}();function gz(n){return{type:"value",snapshotNode:n}}function ju(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function jf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Hf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class yD{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(jf(t,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ju(t,r)):o.trackChildChange(Hf(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(rt,(i,s)=>{t.hasChild(i)||r.trackChildChange(jf(i,s))}),t.isLeafNode()||t.forEachChild(rt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Hf(i,s,o))}else r.trackChildChange(ju(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ce.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $f{constructor(e){this.indexedFilter_=new yD(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$f.getStartPost_(e),this.endPost_=$f.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,o){return this.matches(new Ee(t,r))||(r=ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ce.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ce.EMPTY_NODE);const s=this;return t.forEachChild(rt,(o,a)=>{s.matches(new Ee(o,a))||(i=i.updateImmediateChild(o,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class tde{constructor(e){this.rangedFilter_=new $f(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Ee(t,r))||(r=ce.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ce.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=ce.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;i=i.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(i=t.withIndex(this.index_),i=i.updatePriority(ce.EMPTY_NODE),this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,o)<=0?c++:i=i.updateImmediateChild(d.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;k(a.numChildren()===this.limit_,"");const l=new Ee(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(Hf(t,r,d)),a.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(jf(t,d));const m=a.updateImmediateChild(t,ce.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(ju(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(jf(c.name,c.node)),s.trackChildChange(ju(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,ce.EMPTY_NODE)):e}}class vD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zs}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new vD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mz(n){const e={};if(n.isDefault())return e;let t;return n.index_===rt?t="$priority":n.index_===mD?t="$value":n.index_===as?t="$key":(k(n.index_ instanceof gD,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Jt(t),n.startSet_&&(e.startAt=Jt(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+Jt(n.indexStartName_))),n.endSet_&&(e.endAt=Jt(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+Jt(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function _z(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==rt&&(e.i=n.index_.toString()),e}class Iy extends X${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Iy.getListenId_(e,r),a={};this.listens_[o]=a;const l=mz(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),eu(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,t){const r=Iy.getListenId_(e,t);delete this.listens_[r]}get(e){const t=mz(e._queryParams),r=e._path.toString(),i=new Oa;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_h(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=mh(a.responseText)}catch(c){Ln("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Ln("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class ade{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ty(){return{value:null,children:new Map}}function Hu(n,e,t){if(ve(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ye(e);n.children.has(r)||n.children.set(r,Ty()),Hu(n.children.get(r),e=Xe(e),t)}}function CD(n,e,t){null!==n.value?t(e,n.value):function lde(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{CD(i,new $e(e.toString()+"/"+r),t)})}class cde{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class hde{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cde(e);const r=1e4+2e4*Math.random();Nf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hn(e,(i,s)=>{s>0&&Ti(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Nf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ni=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ni||(ni={})),ni))();function DD(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Dy{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ni.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ve(this.path)){if(null!=this.affectedTree.value)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $e(e));return new Dy(Ve(),t,this.revert)}}return k(ye(this.path)===e,"operationForChild called for unrelated child."),new Dy(Xe(this.path),this.affectedTree,this.revert)}}class zf{constructor(e,t){this.source=e,this.path=t,this.type=ni.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new zf(this.source,Ve()):new zf(this.source,Xe(this.path))}}class bl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ni.OVERWRITE}operationForChild(e){return ve(this.path)?new bl(this.source,Ve(),this.snap.getImmediateChild(e)):new bl(this.source,Xe(this.path),this.snap)}}class $u{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ni.MERGE}operationForChild(e){if(ve(this.path)){const t=this.children.subtree(new $e(e));return t.isEmpty()?null:t.value?new bl(this.source,Ve(),t.value):new $u(this.source,Ve(),t)}return k(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $u(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ko{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const t=ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class fde{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Wf(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function mde(n,e,t){if(null==e.childName||null==t.childName)throw Jc("Should only compare child_ events.");const r=new Ee(e.childName,e.snapshotNode),i=new Ee(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function gde(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Sy(n,e){return{eventCache:n,serverCache:e}}function qf(n,e,t,r){return Sy(new Ko(e,t,r),n.serverCache)}function vz(n,e,t,r){return Sy(n.eventCache,new Ko(e,t,r))}function Ay(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SD;class it{constructor(e,t=(()=>(SD||(SD=new gr(tue)),SD))()){this.value=e,this.children=t}static fromObject(e){let t=new it(null);return hn(e,(r,i)=>{t=t.set(new $e(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ve(),value:this.value};if(ve(e))return null;{const r=ye(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Xe(e),t);return null!=s?{path:pt(new $e(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const t=ye(e),r=this.children.get(t);return null!==r?r.subtree(Xe(e)):new it(null)}}set(e,t){if(ve(e))return new it(t,this.children);{const r=ye(e),s=(this.children.get(r)||new it(null)).set(Xe(e),t),o=this.children.insert(r,s);return new it(this.value,o)}}remove(e){if(ve(e))return this.children.isEmpty()?new it(null):new it(null,this.children);{const t=ye(e),r=this.children.get(t);if(r){const i=r.remove(Xe(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new it(null):new it(this.value,s)}return this}}get(e){if(ve(e))return this.value;{const t=ye(e),r=this.children.get(t);return r?r.get(Xe(e)):null}}setTree(e,t){if(ve(e))return t;{const r=ye(e),s=(this.children.get(r)||new it(null)).setTree(Xe(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new it(this.value,o)}}fold(e){return this.fold_(Ve(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(pt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ve(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ve(e))return null;{const s=ye(e),o=this.children.get(s);return o?o.findOnPath_(Xe(e),pt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ve(),t)}foreachOnPath_(e,t,r){if(ve(e))return this;{this.value&&r(t,this.value);const i=ye(e),s=this.children.get(i);return s?s.foreachOnPath_(Xe(e),pt(t,i),r):new it(null)}}foreach(e){this.foreach_(Ve(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(pt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ki{constructor(e){this.writeTree_=e}static empty(){return new ki(new it(null))}}function Gf(n,e,t){if(ve(e))return new ki(new it(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Zn(i,e);return s=s.updateChild(o,t),new ki(n.writeTree_.set(i,s))}{const i=new it(t),s=n.writeTree_.setTree(e,i);return new ki(s)}}}function AD(n,e,t){let r=n;return hn(t,(i,s)=>{r=Gf(r,pt(e,i),s)}),r}function bz(n,e){if(ve(e))return ki.empty();{const t=n.writeTree_.setTree(e,new it(null));return new ki(t)}}function xD(n,e){return null!=El(n,e)}function El(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Zn(t.path,e)):null}function wz(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(rt,(r,i)=>{e.push(new Ee(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ee(r,i.value))}),e}function Yo(n,e){if(ve(e))return n;{const t=El(n,e);return new ki(null!=t?new it(t):n.writeTree_.subtree(e))}}function MD(n){return n.writeTree_.isEmpty()}function zu(n,e){return Ez(Ve(),n.writeTree_,e)}function Ez(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(k(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=Ez(pt(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(pt(n,".priority"),r)),t}}function xy(n,e){return Sz(e,n)}function Ede(n,e){if(n.snap)return ti(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ti(pt(n.path,t),e))return!0;return!1}function Ide(n){return n.visible}function Cz(n,e,t){let r=ki.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)ti(t,o)?(a=Zn(t,o),r=Gf(r,a,s.snap)):ti(o,t)&&(a=Zn(o,t),r=Gf(r,Ve(),s.snap.getChild(a)));else{if(!s.children)throw Jc("WriteRecord should have .snap or .children");if(ti(t,o))a=Zn(t,o),r=AD(r,a,s.children);else if(ti(o,t))if(a=Zn(o,t),ve(a))r=AD(r,Ve(),s.children);else{const l=eu(s.children,ye(a));if(l){const c=l.getChild(Xe(a));r=Gf(r,Ve(),c)}}}}}return r}function Iz(n,e,t,r,i){if(r||i){const s=Yo(n.visibleWrites,e);return!i&&MD(s)?t:i||null!=t||xD(s,Ve())?zu(Cz(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ti(c.path,e)||ti(e,c.path))},e),t||ce.EMPTY_NODE):null}{const s=El(n.visibleWrites,e);if(null!=s)return s;{const o=Yo(n.visibleWrites,e);return MD(o)?t:null!=t||xD(o,Ve())?zu(o,t||ce.EMPTY_NODE):null}}}function My(n,e,t,r){return Iz(n.writeTree,n.treePath,e,t,r)}function kD(n,e){return function Tde(n,e,t){let r=ce.EMPTY_NODE;const i=El(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(rt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Yo(n.visibleWrites,e);return t.forEachChild(rt,(o,a)=>{const l=zu(Yo(s,new $e(o)),a);r=r.updateImmediateChild(o,l)}),wz(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return wz(Yo(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function Tz(n,e,t,r){return function Dde(n,e,t,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=pt(e,t);if(xD(n.visibleWrites,s))return null;{const o=Yo(n.visibleWrites,s);return MD(o)?i.getChild(t):zu(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ky(n,e){return function Ade(n,e){return El(n.visibleWrites,e)}(n.writeTree,pt(n.treePath,e))}function RD(n,e,t){return function Sde(n,e,t,r){const i=pt(e,t),s=El(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?zu(Yo(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Dz(n,e){return Sz(pt(n.treePath,e),n.writeTree)}function Sz(n,e){return{treePath:n,writeTree:e}}class Rde{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;k("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),k(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Hf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,jf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,ju(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Jc("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Hf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Az=new class Pde{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class PD{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ko(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RD(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wl(this.viewCache_),s=function kde(n,e,t,r,i,s){return function xde(n,e,t,r,i,s,o){let a;const l=Yo(n.visibleWrites,e),c=El(l,Ve());if(null!=c)a=c;else{if(null==t)return[];a=zu(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function xz(n,e,t,r,i,s){const o=e.eventCache;if(null!=ky(r,t))return e;{let a,l;if(ve(t))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=wl(e),d=kD(r,c instanceof ce?c:ce.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=My(r,wl(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ye(t);if(".priority"===c){k(1===Go(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=Tz(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=Xe(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=Tz(r,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=RD(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return qf(e,a,o.isFullyInitialized()||ve(t),n.filter.filtersNodes())}}function Ry(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(ve(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ye(t);if(!l.isCompleteForPath(t)&&Go(t)>1)return e;const p=Xe(t),_=l.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?u.updatePriority(l.getNode(),_):u.updateChild(l.getNode(),f,_,p,Az,null)}const d=vz(e,c,l.isFullyInitialized()||ve(t),u.filtersNodes());return xz(n,d,t,i,new PD(i,d,s),a)}function OD(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new PD(i,e,s);if(ve(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=qf(e,c,!0,n.filter.filtersNodes());else{const d=ye(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=qf(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Xe(t),f=a.getNode().getImmediateChild(d);let p;if(ve(h))p=r;else{const m=u.getCompleteChild(d);p=null!=m?".priority"===cD(h)&&m.getChild(tz(h)).isEmpty()?m:m.updateChild(h,r):ce.EMPTY_NODE}l=f.equals(p)?e:qf(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function Mz(n,e){return n.eventCache.isCompleteForChild(e)}function kz(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ND(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=ve(t)?r:new it(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=kz(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ry(n,l,new $e(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const m=kz(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ry(n,l,new $e(d),m,i,s,o,a)}}),l}class Hde{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yD(r.getIndex()),s=function nde(n){return n.loadsAllData()?new yD(n.getIndex()):n.hasLimit()?new tde(n):new $f(n)}(r);this.processor_=function Ode(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(ce.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),u=new Ko(l,o.isFullyInitialized(),i.filtersNodes()),d=new Ko(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Sy(d,u),this.eventGenerator_=new fde(this.query_)}get query(){return this.query_}}function Wde(n,e){const t=wl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ve(e)&&!t.getImmediateChild(ye(e)).isEmpty())?t.getChild(e):null}function Rz(n){return 0===n.eventRegistrations_.length}function Pz(n,e,t){const r=[];if(t){k(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Oz(n,e,t,r){e.type===ni.MERGE&&null!==e.source.queryId&&(k(wl(n.viewCache_),"We should always have a full cache before handling merges"),k(Ay(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Fde(n,e,t,r,i){const s=new Rde;let o,a;if(t.type===ni.OVERWRITE){const c=t;c.source.fromUser?o=OD(n,e,c.path,c.snap,r,i,s):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ve(c.path),o=Ry(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===ni.MERGE){const c=t;c.source.fromUser?o=function Bde(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=pt(t,l);Mz(e,ye(u))&&(a=OD(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=pt(t,l);Mz(e,ye(u))||(a=OD(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ND(n,e,c.path,c.children,r,i,a,s))}else if(t.type===ni.ACK_USER_WRITE){const c=t;o=c.revert?function jde(n,e,t,r,i,s){let o;if(null!=ky(r,t))return e;{const a=new PD(r,e,i),l=e.eventCache.getNode();let c;if(ve(t)||".priority"===ye(t)){let u;if(e.serverCache.isFullyInitialized())u=My(r,wl(e));else{const d=e.serverCache.getNode();k(d instanceof ce,"serverChildren would be complete if leaf node"),u=kD(r,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=ye(t);let d=RD(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,Xe(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,ce.EMPTY_NODE,Xe(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=My(r,wl(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=ky(r,Ve()),qf(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function Ude(n,e,t,r,i,s,o){if(null!=ky(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(ve(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Ry(n,e,t,l.getNode().getChild(t),i,s,a,o);if(ve(t)){let c=new it(null);return l.getNode().forEachChild(as,(u,d)=>{c=c.set(new $e(u),d)}),ND(n,e,t,c,i,s,a,o)}return e}{let c=new it(null);return r.foreach((u,d)=>{const h=pt(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),ND(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==ni.LISTEN_COMPLETE)throw Jc("Unknown operation type: "+t.type);o=function Vde(n,e,t,r,i){const s=e.serverCache;return xz(n,vz(e,s.getNode(),s.isFullyInitialized()||ve(t),s.isFiltered()),t,r,Az,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Lde(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ay(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(gz(Ay(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function Nde(n,e){k(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Nz(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Nz(n,e,t,r){return function pde(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function ede(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Wf(n,i,"child_removed",e,r,t),Wf(n,i,"child_added",e,r,t),Wf(n,i,"child_moved",s,r,t),Wf(n,i,"child_changed",e,r,t),Wf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Py,Ny;class Fz{constructor(){this.views=new Map}}function FD(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return k(null!=s,"SyncTree gave us an op for an invalid query."),Oz(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(Oz(o,e,t,r));return s}}function Lz(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=My(t,i?r:null),l=!1;a?l=!0:r instanceof ce?(a=kD(t,r),l=!1):(a=ce.EMPTY_NODE,l=!1);const c=Sy(new Ko(a,l,!1),new Ko(r,i,!1));return new Hde(e,c)}return o}function Bz(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Qo(n,e){let t=null;for(const r of n.views.values())t=t||Wde(r,e);return t}function Uz(n,e){return e._queryParams.loadsAllData()?Oy(n):n.views.get(e._queryIdentifier)}function Vz(n,e){return null!=Uz(n,e)}function Xo(n){return null!=Oy(n)}function Oy(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let the=1;class jz{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=function Mde(){return{visibleWrites:ki.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function LD(n,e,t,r,i){return function yde(n,e,t,r,i){k(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Gf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Wu(n,new bl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zo(n,e,t=!1){const r=function bde(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function wde(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);k(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Ede(a,r.path)?i=!1:ti(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Cde(n){n.visibleWrites=Cz(n.allWrites,Ide,Ve()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=bz(n.visibleWrites,r.path):hn(r.children,l=>{n.visibleWrites=bz(n.visibleWrites,pt(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new it(null);return null!=r.snap?s=s.set(Ve(),!0):hn(r.children,o=>{s=s.set(new $e(o),!0)}),Wu(n,new Dy(r.path,s,t))}return[]}function Kf(n,e,t){return Wu(n,new bl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Fy(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||Vz(o,e))){const l=function Zde(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Xo(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(Pz(c,t,r)),Rz(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(Pz(l,t,r)),Rz(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Xo(n)&&s.push(new(function Yde(){return k(Py,"Reference.ts has not been loaded"),Py}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function Qde(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>Xo(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function lhe(n){return n.fold((e,t,r)=>{if(t&&Xo(t))return[Oy(t)];{let i=[];return t&&(i=Bz(t)),hn(r,(s,o)=>{i=i.concat(o)}),i}})}(h);for(let p=0;p<f.length;++p){const m=f[p],_=m.query,b=Wz(n,m);n.listenProvider_.startListening(Qf(_),Yf(n,_),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(Qf(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(By(h));n.listenProvider_.stopListening(Qf(h),f)}))}!function che(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=By(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function Hz(n,e,t,r){const i=UD(n,r);if(null!=i){const s=VD(i),o=s.path,a=s.queryId,l=Zn(o,e);return jD(n,o,new bl(DD(a),l,t))}return[]}function BD(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=Zn(h,i);s=s||Qo(f,p),o=o||Xo(f)});let l,a=n.syncPointTree_.get(i);a?(o=o||Xo(a),s=s||Qo(a,Ve())):(a=new Fz,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=ce.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,p)=>{const m=Qo(p,Ve());m&&(s=s.updateImmediateChild(f,m))}));const c=Vz(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=By(e);k(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function uhe(){return the++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function Xde(n,e,t,r,i,s){const o=Lz(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function qde(n,e){n.eventRegistrations_.push(e)}(o,t),function Gde(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rt,(s,o)=>{r.push(ju(s,o))}),t.isFullyInitialized()&&r.push(gz(t.getNode())),Nz(n,r,t.getNode(),e)}(o,t)}(a,e,t,xy(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const h=Uz(a,e);d=d.concat(function dhe(n,e,t){const r=e._path,i=Yf(n,e),s=Wz(n,t),o=n.listenProvider_.startListening(Qf(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)k(!Xo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!ve(c)&&u&&Xo(u))return[Oy(u).query];{let h=[];return u&&(h=h.concat(Bz(u).map(f=>f.query))),hn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Qf(u),Yf(n,u))}}return o}(n,e,h))}return d}function Ly(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Qo(a,Zn(o,e));if(c)return c});return Iz(i,e,s,t,!0)}function Wu(n,e){return $z(e,n.syncPointTree_,null,xy(n.pendingWriteTree_,Ve()))}function $z(n,e,t,r){if(ve(n.path))return zz(n,e,t,r);{const i=e.get(Ve());null==t&&null!=i&&(t=Qo(i,Ve()));let s=[];const o=ye(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=Dz(r,o);s=s.concat($z(a,l,c,u))}return i&&(s=s.concat(FD(i,n,r,t))),s}}function zz(n,e,t,r){const i=e.get(Ve());null==t&&null!=i&&(t=Qo(i,Ve()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=Dz(r,o),u=n.operationForChild(o);u&&(s=s.concat(zz(u,a,l,c)))}),i&&(s=s.concat(FD(i,n,r,t))),s}function Wz(n,e){const t=e.query,r=Yf(n,t);return{hashFn:()=>(function $de(n){return n.viewCache_.serverCache.getNode()}(e)||ce.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function she(n,e,t){const r=UD(n,t);if(r){const i=VD(r),s=i.path,o=i.queryId,a=Zn(s,e);return jD(n,s,new zf(DD(o),a))}return[]}(n,t._path,r):function ihe(n,e){return Wu(n,new zf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function iue(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Fy(n,t,null,s)}}}}function Yf(n,e){const t=By(e);return n.queryToTagMap.get(t)}function By(n){return n._path.toString()+"$"+n._queryIdentifier}function UD(n,e){return n.tagToQueryMap.get(e)}function VD(n){const e=n.indexOf("$");return k(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $e(n.substr(0,e))}}function jD(n,e,t){const r=n.syncPointTree_.get(e);return k(r,"Missing sync point for query tag that we're tracking"),FD(r,t,xy(n.pendingWriteTree_,e),null)}function Qf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function ehe(){return k(Ny,"Reference.ts has not been loaded"),Ny}())(n._repo,n._path):n}class HD{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new HD(t)}node(){return this.node_}}class $D{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pt(this.path_,e);return new $D(this.syncTree_,t)}node(){return Ly(this.syncTree_,this.path_)}}const qz=function(n,e,t){return n&&"object"==typeof n?(k(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fhe(n[".sv"],e,t):"object"==typeof n[".sv"]?phe(n[".sv"],e):void k(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fhe=function(n,e,t){if("timestamp"===n)return t.timestamp;k(!1,"Unexpected server value: "+n)},phe=function(n,e,t){n.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&k(!1,"Unexpected increment value: "+r);const i=e.node();if(k(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},zD=function(n,e,t){return WD(n,new HD(e),t)};function WD(n,e,t){const r=n.getPriority().val(),i=qz(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=qz(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Bu(a,_t(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Bu(i))),o.forEachChild(rt,(a,l)=>{const c=WD(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class qD{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Uy(n,e){let t=e instanceof $e?e:new $e(e),r=n,i=ye(t);for(;null!==i;){const s=eu(r.node.children,i)||{children:{},childCount:0};r=new qD(i,r,s),t=Xe(t),i=ye(t)}return r}function Cl(n){return n.node.value}function GD(n,e){n.node.value=e,KD(n)}function Kz(n){return n.node.childCount>0}function Vy(n,e){hn(n.node.children,(t,r)=>{e(new qD(t,n,r))})}function Yz(n,e,t,r){t&&!r&&e(n),Vy(n,i=>{Yz(i,e,!0,r)}),t&&r&&e(n)}function Xf(n){return new $e(null===n.parent?n.name:Xf(n.parent)+"/"+n.name)}function KD(n){null!==n.parent&&function _he(n,e,t){const r=function ghe(n){return void 0===Cl(n)&&!Kz(n)}(t),i=Ti(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,KD(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,KD(n))}(n.parent,n.name,n)}const yhe=/[\[\].#$\/\u0000-\u001F\u007F]/,vhe=/[\[\].#$\u0000-\u001F\u007F]/,YD=10485760,jy=function(n){return"string"==typeof n&&0!==n.length&&!yhe.test(n)},Qz=function(n){return"string"==typeof n&&0!==n.length&&!vhe.test(n)},ls=function(n,e,t,r){r&&void 0===e||Jf(tu(n,"value"),e,t)},Jf=function(n,e,t){const r=t instanceof $e?new Nue(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yl(r));if("function"==typeof e)throw new Error(n+"contains a function "+yl(r)+" with contents = "+e.toString());if(py(e))throw new Error(n+"contains "+e.toString()+" "+yl(r));if("string"==typeof e&&e.length>YD/3&&zm(e)>YD)throw new Error(n+"contains a string greater than "+YD+" utf8 bytes "+yl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(hn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!jy(o)))throw new Error(n+" contains an invalid key ("+o+") "+yl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Fue(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=zm(e),nz(n)})(r,o),Jf(n,a,r),function Lue(n){const e=n.parts_.pop();n.byteLength_-=zm(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+yl(r)+" in addition to actual children.")}},XD=function(n,e,t,r){if(!(r&&void 0===t||Qz(t)))throw new Error(tu(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cs=function(n,e){if(".info"===ye(e))throw new Error(n+" failed = Can't modify data under /.info/")};class Che{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hy(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!uD(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Jz(n,e,t){Hy(n,t),eW(n,r=>uD(r,e))}function Nr(n,e,t){Hy(n,t),eW(n,r=>ti(r,e)||ti(e,r))}function eW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Ihe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Ihe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ml&&dn("event: "+t.toString()),Fu(r)}}}class Dhe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Che,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ty(),this.transactionQueueTree_=new qD,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nW(n){const t=n.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function tp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:nW(n)})}function rW(n,e,t,r,i){n.dataUpdateCount++;const s=new $e(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=Hm(t,c=>_t(c));o=function ohe(n,e,t,r){const i=UD(n,r);if(i){const s=VD(i),o=s.path,a=s.queryId,l=Zn(o,e),c=it.fromObject(t);return jD(n,o,new $u(DD(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=_t(t);o=Hz(n.serverSyncTree_,s,l,i)}else if(r){const l=Hm(t,c=>_t(c));o=function rhe(n,e,t){const r=it.fromObject(t);return Wu(n,new $u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=_t(t);o=Kf(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Gu(n,s)),Nr(n.eventQueue_,a,o)}function iW(n,e){ZD(n,"connected",e),!1===e&&function khe(n){qu(n,"onDisconnectEvents");const e=tp(n),t=Ty();CD(n.onDisconnect_,Ve(),(i,s)=>{const o=function(n,e,t,r){return WD(e,new $D(t,n),r)}(i,s,n.serverSyncTree_,e);Hu(t,i,o)});let r=[];CD(t,Ve(),(i,s)=>{r=r.concat(Kf(n.serverSyncTree_,i,s));const o=nS(n,i);Gu(n,o)}),n.onDisconnect_=Ty(),Nr(n.eventQueue_,Ve(),r)}(n)}function ZD(n,e,t){const r=new $e("/.info/"+e),i=_t(t);n.infoData_.updateSnapshot(r,i);const s=Kf(n.infoSyncTree_,r,i);Nr(n.eventQueue_,r,s)}function $y(n){return n.nextWriteId_++}function JD(n,e,t,r,i){qu(n,"set",{path:e.toString(),value:t,priority:r});const s=tp(n),o=_t(t,r),a=Ly(n.serverSyncTree_,e),l=zD(o,a,s),c=$y(n),u=LD(n.serverSyncTree_,e,l,c,!0);Hy(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||Ln("set at "+e+" failed: "+h);const m=Zo(n.serverSyncTree_,c,!p);Nr(n.eventQueue_,e,m),function Jo(n,e,t,r){e&&Fu(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}(0,i,h,f)});const d=nS(n,e);Gu(n,d),Nr(n.eventQueue_,d,[])}function eS(n,e,t){let r;r=".info"===ye(e._path)?Fy(n.infoSyncTree_,e,t):Fy(n.serverSyncTree_,e,t),Jz(n.eventQueue_,e._path,r)}function qu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function tS(n,e,t){return Ly(n.serverSyncTree_,e,t)||ce.EMPTY_NODE}function zy(n,e=n.transactionQueueTree_){if(e||Wy(n,e),Cl(e)){const t=lW(n,e);k(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Bhe(n,e,t){const r=t.map(c=>c.currentWriteId),i=tS(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];k(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Zn(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{qu(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Zo(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Wy(n,Uy(n.transactionQueueTree_,e)),zy(n,n.transactionQueueTree_),Nr(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Fu(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Ln("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Gu(n,e)}},o)}(n,Xf(e),t)}else Kz(e)&&Vy(e,t=>{zy(n,t)})}function Gu(n,e){const t=aW(n,e),r=Xf(t);return function Uhe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Zn(t,l.path);let d,u=!1;if(k(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(Zo(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",i=i.concat(Zo(n.serverSyncTree_,l.currentWriteId,!0));else{const h=tS(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Jf("transaction failed: Data returned ",f,l.path);let p=_t(f);"object"==typeof f&&null!=f&&Ti(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=l.currentWriteId,b=tp(n),y=zD(p,h,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=$y(n),o.splice(o.indexOf(_),1),i=i.concat(LD(n.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Zo(n.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(Zo(n.serverSyncTree_,l.currentWriteId,!0))}Nr(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Wy(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Fu(r[a]);zy(n,n.transactionQueueTree_)}(n,lW(n,t),r),r}function aW(n,e){let t,r=n.transactionQueueTree_;for(t=ye(e);null!==t&&void 0===Cl(r);)r=Uy(r,t),t=ye(e=Xe(e));return r}function lW(n,e){const t=[];return cW(n,e,t),t.sort((r,i)=>r.order-i.order),t}function cW(n,e,t){const r=Cl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Vy(e,i=>{cW(n,i,t)})}function Wy(n,e){const t=Cl(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,GD(e,t.length>0?t:void 0)}Vy(e,r=>{Wy(n,r)})}function nS(n,e){const t=Xf(aW(n,e)),r=Uy(n.transactionQueueTree_,e);return function mhe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{rS(n,i)}),rS(n,r),Yz(r,i=>{rS(n,i)}),t}function rS(n,e){const t=Cl(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(k(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Zo(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?GD(e,void 0):t.length=s+1,Nr(n.eventQueue_,Xf(e),i);for(let o=0;o<r.length;o++)Fu(r[o])}}const iS=function(n,e){const t=Hhe(n),r=t.namespace;return"firebase.com"===t.domain&&ss(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rD(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new $e(t.pathString)}},Hhe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function Vhe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(u,d)));const h=function jhe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ln(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class uW{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Jt(this.snapshot.exportVal())}}class dW{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class sS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Fr{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ve(this._path)?null:cD(this._path)}get ref(){return new Ri(this._repo,this._path)}get _queryIdentifier(){const e=_z(this._queryParams),t=eD(e);return"{}"===t?"default":t}get _queryObject(){return _z(this._queryParams)}isEqual(e){if(!((e=pe(e))instanceof Fr))return!1;const t=this._repo===e._repo,r=uD(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Pue(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ri extends Fr{constructor(e,t){super(e,t,new vD,!1)}get parent(){const e=tz(this._path);return null===e?null:new Ri(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Il{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $e(e),r=Ku(this.ref,e);return new Il(this._node.getChild(t),r,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Il(i,Ku(this.ref,r),rt)))}hasChild(e){const t=new $e(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pi(n,e){return(n=pe(n))._checkNotDeleted("ref"),void 0!==e?Ku(n._root,e):n._root}function Ku(n,e){return null===ye((n=pe(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XD("child","path",t,!1)):XD("child","path",e,!1),new Ri(n._repo,pt(n._path,e));var t}function Yu(n,e){n=pe(n),cs("set",n._path),ls("set",e,n._path,!1);const t=new Oa;return JD(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qhe(n){n=pe(n);const e=new sS(()=>{}),t=new np(e);return function xhe(n,e,t){const r=function ahe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Zn(c,t);r=r||Qo(u,d)});let i=n.syncPointTree_.get(t);i?r=r||Qo(i,Ve()):(i=new Fz,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Ko(r,!0,!1):null;return function zde(n){return Ay(n.viewCache_)}(Lz(i,e,xy(n.pendingWriteTree_,e._path),s?o.getNode():ce.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=_t(i).withIndex(e._queryParams.getIndex());let o;if(BD(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Kf(n.serverSyncTree_,e._path,s);else{const a=Yf(n.serverSyncTree_,e);o=Hz(n.serverSyncTree_,e._path,s,a)}return Nr(n.eventQueue_,e._path,o),Fy(n.serverSyncTree_,e,t,null,!0),s},i=>(qu(n,"get for query "+Jt(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Il(r,new Ri(n._repo,n._path),n._queryParams.getIndex()))}class np{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new uW("value",this,new Il(e.snapshotNode,new Ri(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dW(this,e,t):null}matches(e){return e instanceof np&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ky{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dW(this,e,t):null}createEvent(e,t){k(null!=e.childName,"Child events should have a childName.");const r=Ku(new Ri(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new uW(e.type,this,new Il(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ky&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ip(n,e,t,r){return function rp(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(u,d)=>{eS(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new sS(t,s||void 0),a="value"===e?new np(o):new Ky(e,o);return function Nhe(n,e,t){let r;r=".info"===ye(e._path)?BD(n.infoSyncTree_,e,t):BD(n.serverSyncTree_,e,t),Jz(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>eS(n._repo,n,a)}(n,"value",e,t,r)}(function Kde(n){k(!Py,"__referenceConstructor has already been defined"),Py=n})(Ri),function Jde(n){k(!Ny,"__referenceConstructor has already been defined"),Ny=n}(Ri);const oS={};function ife(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=iS(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=iS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Ff(Ff.OWNER):new lue(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!jy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qz(n)}(t))throw new Error(tu(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),ve(o.path)||ss("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function ofe(n,e,t,r){let i=oS[e.name];i||(i={},oS[e.name]=i);let s=i[n.toURLString()];return s&&ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Dhe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new aue(n.name,t));return new lfe(d,n)}class lfe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function She(n,e,t){if(n.stats_=oD(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Iy(n.repoInfo_,(r,i,s,o)=>{rW(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iW(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new vl(n.repoInfo_,e,(r,i,s,o)=>{rW(n,r,i,s,o)},r=>{iW(n,r)},r=>{!function Ahe(n,e){hn(e,(t,r)=>{ZD(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function due(n,e){const t=n.toString();return sD[t]||(sD[t]=e()),sD[t]}(n.repoInfo_,()=>new hde(n.stats_,n.server_)),n.infoData_=new ade,n.infoSyncTree_=new jz({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Kf(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ZD(n,"connected",!1),n.serverSyncTree_=new jz({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Nr(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,Ve())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function sfe(n,e){const t=oS[e];(!t||t[n.key]!==n)&&ss(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function oW(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ss("Cannot call "+e+" on a deleted database.")}}function ta(n=To(),e){return Di(n,"database").getImmediate({identifier:e})}vl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},vl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function cfe(n){(function Qce(n){XT=n})(Ki),jt(new Pt("database",(e,{instanceIdentifier:t})=>ife(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ke(_$,"0.13.6",n),ke(_$,"0.13.6","esm2017")}();let Tl=(()=>{class n{constructor(){this.email="",this.app=Yi(kr_firebase),this.fbapp=Jr.initializeApp(kr_firebase),this.fb_db=Jr.firestore()}fetch_userdata_with_keymail(t){let s;return qhe(Pi(ta(this.app),"/users/"+t)).then(o=>{o.exists()&&(s=o.val(),console.log("data:",s),this.email=s.email,this.name=s.name,this.username=s.username,"bio"in s||(s.bio=""),this.userdata=s)}),this.userdata}set_after_edit(t,r,i){let s=t.replace(".","");Yu(Pi(ta(this.app),"/users/"+s),i).then(()=>{console.log("Data updated in realtime database")}).catch(l=>{console.log("There was some error while adding user data in realtime database")}),r!=i.username?(this.modify_chats(r,i.username),this.modify_posts(r,i.username)):console.log("Username not changed")}modify_chats(t,r){let i=[],s=ta(this.app);ip(Pi(s,"Chats/"),a=>{a.forEach(l=>{l.val().username==t&&i.push({key:l.key,username:r,chat:l.val().chat})})}),i.forEach(a=>{Yu(Pi(s,"Chats/"+a.key),{username:a.username,chat:a.chat})})}modify_posts(t,r){var i=this;return g(function*(){(yield i.fb_db.collection("posts_metadata").where("username","==",t).get()).forEach(o=>{i.fb_db.collection("posts_metadata").doc(o.id).update({username:r})})})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G(...n){return Sn(n,Ed(n))}class ri extends me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:hfe}=Array,{getPrototypeOf:ffe,prototype:pfe,keys:gfe}=Object;function mW(n){if(1===n.length){const e=n[0];if(hfe(e))return{args:e,keys:null};if(function mfe(n){return n&&"object"==typeof n&&ffe(n)===pfe}(e)){const t=gfe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:_fe}=Array;function aS(n){return be(e=>function yfe(n,e){return _fe(e)?n(...e):n(e)}(n,e))}function _W(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function yW(n,e,t){n?ys(t,n,e):e()}function sp(n,e){const t=He(n)?n:()=>n,r=i=>i.error(t());return new Je(e?i=>e.schedule(r,0,i):r)}const Yy=Eb(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Qy(...n){return function wfe(){return wd(1)}()(Sn(n,Ed(n)))}function lS(n){return new Je(e=>{ir(n()).subscribe(e)})}function vW(){return wt((n,e)=>{let t=null;n._refCount++;const r=at(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Efe extends Je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,lP(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;const t=this.getSubject();e.add(this.source.subscribe(at(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return vW()(this)}}function qs(n,e){return wt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(at(r,l=>{null==i||i.unsubscribe();let c=0;const u=s++;ir(n(l,u)).subscribe(i=at(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bn(n){return n<=0?()=>vs:wt((e,t)=>{let r=0;e.subscribe(at(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Dl(...n){const e=Ed(n);return wt((t,r)=>{(e?Qy(n,t,e):Qy(n,t)).subscribe(r)})}function Cfe(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(at(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function bW(n,e){return wt(Cfe(n,e,arguments.length>=2,!0))}function gt(n,e){return wt((t,r)=>{let i=0;t.subscribe(at(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Gs(n){return wt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(at(t,void 0,void 0,o=>{s=ir(n(o,Gs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Qu(n,e){return He(e)?Ft(n,e,1):Ft(n,1)}function cS(n){return n<=0?()=>vs:wt((e,t)=>{let r=[];e.subscribe(at(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function wW(n=Ife){return wt((e,t)=>{let r=!1;e.subscribe(at(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ife(){return new Yy}function EW(n){return wt((e,t)=>{let r=!1;e.subscribe(at(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gt((i,s)=>n(i,s,r)):ao,Bn(1),t?EW(e):wW(()=>new Yy))}function fn(n,e,t){const r=He(n)||e||t?{next:n,error:e,complete:t}:n;return r?wt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(at(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):ao}function CW(n){return wt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Ks{constructor(e,t){this.id=e,this.url=t}}class uS extends Ks{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class op extends Ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class IW extends Ks{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dfe extends Ks{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sfe extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Afe extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xfe extends Ks{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mfe extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kfe extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TW{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class DW{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Rfe{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pfe{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ofe{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nfe{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SW{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ce="primary";class Ffe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zu(n){return new Ffe(n)}const AW="ngNavigationCancelingError";function dS(n){const e=Error("NavigationCancelingError: "+n);return e[AW]=!0,e}function Bfe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function us(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!xW(n[i],e[i]))return!1;return!0}function xW(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function MW(n){return Array.prototype.concat.apply([],n)}function kW(n){return n.length>0?n[n.length-1]:null}function Cn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ds(n){return PN(n)?n:em(n)?Sn(Promise.resolve(n)):G(n)}const jfe={exact:function OW(n,e,t){if(!Al(n.segments,e.segments)||!Xy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!OW(n.children[r],e.children[r],t))return!1;return!0},subset:NW},RW={exact:function Hfe(n,e){return us(n,e)},subset:function $fe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xW(n[t],e[t]))},ignored:()=>!0};function PW(n,e,t){return jfe[t.paths](n.root,e.root,t.matrixParams)&&RW[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function NW(n,e,t){return FW(n,e,e.segments,t)}function FW(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Al(i,t)||e.hasChildren()||!Xy(i,t,r))}if(n.segments.length===t.length){if(!Al(n.segments,t)||!Xy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!NW(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Al(n.segments,i)&&Xy(n.segments,i,r)&&n.children[Ce])&&FW(n.children[Ce],e,s,r)}}function Xy(n,e,t){return e.every((r,i)=>RW[t](n[i].parameters,r.parameters))}class Sl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zu(this.queryParams)),this._queryParamMap}toString(){return qfe.serialize(this)}}class Ae{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Cn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zy(this)}}class ap{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zu(this.parameters)),this._parameterMap}toString(){return jW(this)}}function Al(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class LW{}class BW{parse(e){const t=new tpe(e);return new Sl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lp(e.root,!0)}`,r=function Yfe(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Jy(t)}=${Jy(i)}`).join("&"):`${Jy(t)}=${Jy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Gfe(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const qfe=new BW;function Zy(n){return n.segments.map(e=>jW(e)).join("/")}function lp(n,e){if(!n.hasChildren())return Zy(n);if(e){const t=n.children[Ce]?lp(n.children[Ce],!1):"",r=[];return Cn(n.children,(i,s)=>{s!==Ce&&r.push(`${s}:${lp(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Wfe(n,e){let t=[];return Cn(n.children,(r,i)=>{i===Ce&&(t=t.concat(e(r,i)))}),Cn(n.children,(r,i)=>{i!==Ce&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ce?[lp(n.children[Ce],!1)]:[`${i}:${lp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ce]?`${Zy(n)}/${t[0]}`:`${Zy(n)}/(${t.join("//")})`}}function UW(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jy(n){return UW(n).replace(/%3B/gi,";")}function hS(n){return UW(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ev(n){return decodeURIComponent(n)}function VW(n){return ev(n.replace(/\+/g,"%20"))}function jW(n){return`${hS(n.path)}${function Kfe(n){return Object.keys(n).map(e=>`;${hS(e)}=${hS(n[e])}`).join("")}(n.parameters)}`}const Qfe=/^[^\/()?;=#]+/;function tv(n){const e=n.match(Qfe);return e?e[0]:""}const Xfe=/^[^=?&#]+/,Jfe=/^[^&#]+/;class tpe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ce]=new Ae(e,t)),r}parseSegment(){const e=tv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ap(ev(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tv(this.remaining);i&&(r=i,this.capture(r))}e[ev(t)]=ev(r)}parseQueryParam(e){const t=function Zfe(n){const e=n.match(Xfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function epe(n){const e=n.match(Jfe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=VW(t),s=VW(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tv(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ce);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ce]:new Ae([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class HW{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pS(e,this._root).map(t=>t.value)}}function fS(n,e){if(n===e.value)return e;for(const t of e.children){const r=fS(n,t);if(r)return r}return null}function pS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pS(n,t);if(r.length)return r.unshift(e),r}return[]}class Ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ju(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $W extends HW{constructor(e,t){super(e),this.snapshot=t,gS(this,e)}toString(){return this.snapshot.toString()}}function zW(n,e){const t=function npe(n,e){const o=new nv([],{},{},"",{},Ce,e,null,n.root,-1,{});return new qW("",new Ys(o,[]))}(n,e),r=new ri([new ap("",{})]),i=new ri({}),s=new ri({}),o=new ri({}),a=new ri(""),l=new na(r,i,o,a,s,Ce,e,t.root);return l.snapshot=t.root,new $W(new Ys(l,[]),t)}class na{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>Zu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>Zu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WW(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function rpe(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nv{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qW extends HW{constructor(e,t){super(t),this.url=e,gS(this,t)}toString(){return GW(this._root)}}function gS(n,e){e.value._routerState=n,e.children.forEach(t=>gS(n,t))}function GW(n){const e=n.children.length>0?` { ${n.children.map(GW).join(", ")} } `:"";return`${n.value}${e}`}function mS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,us(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),us(e.params,t.params)||n.params.next(t.params),function Ufe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!us(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),us(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _S(n,e){const t=us(n.params,e.params)&&function zfe(n,e){return Al(n,e)&&n.every((t,r)=>us(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_S(n.parent,e.parent))}function cp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function spe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cp(n,r,i);return cp(n,r)})}(n,e,t);return new Ys(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cp(n,a)),o}}const r=function ope(n){return new na(new ri(n.url),new ri(n.params),new ri(n.queryParams),new ri(n.fragment),new ri(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>cp(n,s));return new Ys(r,i)}}function rv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function up(n){return"object"==typeof n&&null!=n&&n.outlets}function yS(n,e,t,r,i){let s={};if(r&&Cn(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new Sl(t,s,i);const o=KW(n,e,t);return new Sl(o,s,i)}function KW(n,e,t){const r={};return Cn(n.children,(i,s)=>{r[s]=i===e?t:KW(i,e,t)}),new Ae(n.segments,r)}class YW{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rv(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(up);if(i&&i!==kW(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vS{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function QW(n,e,t){if(n||(n=new Ae([],{})),0===n.segments.length&&n.hasChildren())return iv(n,e,t);const r=function hpe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(up(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!ZW(l,c,o))return s;r+=2}else{if(!ZW(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ae(n.segments.slice(0,r.pathIndex),{});return s.children[Ce]=new Ae(n.segments.slice(r.pathIndex),n.children),iv(s,0,i)}return r.match&&0===i.length?new Ae(n.segments,{}):r.match&&!n.hasChildren()?bS(n,e,t):r.match?iv(n,0,i):bS(n,e,t)}function iv(n,e,t){if(0===t.length)return new Ae(n.segments,{});{const r=function dpe(n){return up(n[0])?n[0].outlets:{[Ce]:n}}(t),i={};return Cn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=QW(n.children[o],e,s))}),Cn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Ae(n.segments,i)}}function bS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(up(s)){const l=fpe(s.outlets);return new Ae(r,l)}if(0===i&&rv(t[0])){r.push(new ap(n.segments[e].path,XW(t[0]))),i++;continue}const o=up(s)?s.outlets[Ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&rv(a)?(r.push(new ap(o,XW(a))),i+=2):(r.push(new ap(o,{})),i++)}return new Ae(r,{})}function fpe(n){const e={};return Cn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bS(new Ae([],{}),0,t))}),e}function XW(n){const e={};return Cn(n,(t,r)=>e[r]=`${t}`),e}function ZW(n,e,t){return n==t.path&&us(e,t.parameters)}class gpe{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ju(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Cn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ju(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ju(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ju(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Nfe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pfe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(mS(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function mpe(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class wS{constructor(e,t){this.routes=e,this.module=t}}function ra(n){return"function"==typeof n}function xl(n){return n instanceof Sl}const dp=Symbol("INITIAL_VALUE");function hp(){return qs(n=>function vfe(...n){const e=Ed(n),t=CP(n),{args:r,keys:i}=mW(n);if(0===r.length)return Sn([],e);const s=new Je(function bfe(n,e,t=ao){return r=>{yW(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)yW(e,()=>{const c=Sn(n[l],e);let u=!1;c.subscribe(at(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>_W(i,o):ao));return t?s.pipe(aS(t)):s}(n.map(e=>e.pipe(Bn(1),Dl(dp)))).pipe(bW((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==dp?i:(s===dp&&(r=!0),r||!1!==s&&o!==t.length-1&&!xl(s)?i:s),e)},dp),gt(e=>e!==dp),be(e=>xl(e)?e:!0===e),Bn(1)))}class Epe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fp,this.attachRef=null}}class fp{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Epe,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ES=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.name=s||Ce,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Cpe(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v(fp),v(Mr),v(Da),_c("name"),v(As))},n.\u0275dir=Pe({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Cpe{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===na?this.route:e===fp?this.childContexts:this.parent.get(e,t)}}let JW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&te(0,"router-outlet")},directives:[ES],encapsulation:2}),n})();function eq(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ipe(r,Tpe(e,r))}}function Ipe(n,e){n.children&&eq(n.children,e)}function Tpe(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function CS(n){const e=n.children&&n.children.map(CS),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=JW),t}function ii(n){return n.outlet||Ce}function tq(n,e){const t=n.filter(r=>ii(r)===e);return t.push(...n.filter(r=>ii(r)!==e)),t}const nq={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sv(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},nq):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Bfe)(t,n,e);if(!s)return Object.assign({},nq);const o={};Cn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function ov(n,e,t,r,i="corrected"){if(t.length>0&&function Ape(n,e,t){return t.some(r=>av(n,e,r)&&ii(r)!==Ce)}(n,t,r)){const o=new Ae(e,function Spe(n,e,t,r){const i={};i[Ce]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ii(s)!==Ce){const o=new Ae([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[ii(s)]=o}return i}(n,e,r,new Ae(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function xpe(n,e,t){return t.some(r=>av(n,e,r))}(n,t,r)){const o=new Ae(n.segments,function Dpe(n,e,t,r,i,s){const o={};for(const a of r)if(av(n,t,a)&&!i[ii(a)]){const l=new Ae([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[ii(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Ae(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function av(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rq(n,e,t,r){return!!(ii(n)===r||r!==Ce&&av(e,t,n))&&("**"===n.path||sv(e,n,t).matched)}function iq(n,e,t){return 0===e.length&&!n.children[t]}class lv{constructor(e){this.segmentGroup=e||null}}class sq{constructor(e){this.urlTree=e}}function pp(n){return sp(new lv(n))}function oq(n){return sp(new sq(n))}function Mpe(n){return sp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Ppe{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Ds)}apply(){const e=ov(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ae(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ce).pipe(be(s=>this.createUrlTree(IS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gs(s=>{if(s instanceof sq)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof lv?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ce).pipe(be(i=>this.createUrlTree(IS(i),e.queryParams,e.fragment))).pipe(Gs(i=>{throw i instanceof lv?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Ae([],{[Ce]:e}):e;return new Sl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(be(s=>new Ae([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Sn(i).pipe(Qu(s=>{const o=r.children[s],a=tq(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(be(l=>({segment:l,outlet:s})))}),bW((s,o)=>(s[o.outlet]=o.segment,s),{}),function Tfe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gt((i,s)=>n(i,s,r)):ao,cS(1),t?EW(e):wW(()=>new Yy))}())}expandSegment(e,t,r,i,s,o){return Sn(r).pipe(Qu(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(Gs(c=>{if(c instanceof lv)return G(null);throw c}))),Xu(a=>!!a),Gs((a,l)=>{if(a instanceof Yy||"EmptyError"===a.name)return iq(t,i,s)?G(new Ae([],{})):pp(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return rq(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):pp(t):pp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oq(s):this.lineralizeSegments(r,s).pipe(Ft(o=>{const a=new Ae(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=sv(t,i,s);if(!a)return pp(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?oq(d):this.lineralizeSegments(i,d).pipe(Ft(h=>this.expandSegment(e,t,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?G(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(be(d=>(r._loadedConfig=d,new Ae(i,{})))):G(new Ae(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=sv(t,r,i);return o?this.getChildConfig(e,r,i).pipe(Ft(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=ov(t,a,l,h),m=new Ae(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(be(C=>new Ae(a,C)));if(0===h.length&&0===p.length)return G(new Ae(a,{}));const _=ii(r)===s;return this.expandSegment(d,m,h,p,_?Ce:s,!0).pipe(be(y=>new Ae(a.concat(y.segments),y.children)))})):pp(t)}getChildConfig(e,t,r){return t.children?G(new wS(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?G(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Ft(i=>i?this.configLoader.load(e.injector,t).pipe(be(s=>(t._loadedConfig=s,s))):function kpe(n){return sp(dS(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):G(new wS([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return G(!0);const s=i.map(o=>{const a=e.get(o);let l;if(function ype(n){return n&&ra(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!ra(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return ds(l)});return G(s).pipe(hp(),fn(o=>{if(!xl(o))return;const a=dS(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),be(o=>!0===o))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return G(r);if(i.numberOfChildren>1||!i.children[Ce])return Mpe(e.redirectTo);i=i.children[Ce]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Sl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Cn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Cn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new Ae(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function IS(n){const e={};for(const r of Object.keys(n.children)){const s=IS(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Ope(n){if(1===n.numberOfChildren&&n.children[Ce]){const e=n.children[Ce];return new Ae(n.segments.concat(e.segments),e.children)}return n}(new Ae(n.segments,e))}class aq{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cv{constructor(e,t){this.component=e,this.route=t}}function Fpe(n,e,t){const r=n._root;return gp(r,e?e._root:null,t,[r.value])}function uv(n,e,t){const r=function Bpe(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ju(e);return n.children.forEach(o=>{(function Upe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Vpe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Al(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Al(n.url,e.url)||!us(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_S(n,e)||!us(n.queryParams,e.queryParams);default:return!_S(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new aq(r)):(s.data=o.data,s._resolvedData=o._resolvedData),gp(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cv(a.outlet.component,o))}else o&&mp(e,a,i),i.canActivateChecks.push(new aq(r)),gp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Cn(s,(o,a)=>mp(o,t.getContext(a),i)),i}function mp(n,e,t){const r=Ju(n),i=n.value;Cn(r,(s,o)=>{mp(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new cv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ype{}function lq(n){return new Je(e=>e.error(n))}class Xpe{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=ov(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ce);if(null===t)return null;const r=new nv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ce,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ys(r,t),s=new qW(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=WW(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=tq(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=cq(r);return function Zpe(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return iq(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!rq(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?kW(r).parameters:{};s=new nv(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hq(e),ii(e),e.component,e,uq(t),dq(t)+r.length,fq(e))}else{const f=sv(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new nv(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hq(e),ii(e),e.component,e,uq(t),dq(t)+o.length,fq(e))}const l=function Jpe(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=ov(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Ys(s,f)]}if(0===l.length&&0===u.length)return[new Ys(s,[])];const d=ii(e)===i,h=this.processSegment(l,c,u,d?Ce:i);return null===h?null:[new Ys(s,h)]}}function ege(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cq(n){const e=[],t=new Set;for(const r of n){if(!ege(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=cq(r.children);e.push(new Ys(r.value,i))}return e.filter(r=>!t.has(r))}function uq(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dq(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function hq(n){return n.data||{}}function fq(n){return n.resolve||{}}function pq(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TS(n){return qs(e=>{const t=n(e);return t?Sn(t).pipe(be(()=>e)):G(e)})}class lge extends class age{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const DS=new B("ROUTES");class gq{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(be(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new wS(MW(o.injector.get(DS,void 0,ne.Self|ne.Optional)).map(CS),o)}),Gs(s=>{throw t._loader$=void 0,s}));return t._loader$=new Efe(i,()=>new me).pipe(vW()),t._loader$}loadModuleFactory(e){return ds(e()).pipe(Ft(t=>t instanceof ZF?G(t):Sn(this.compiler.compileModuleAsync(t))))}}class uge{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function dge(n){throw n}function hge(n,e,t){return e.parse("/")}function mq(n,e){return G(null)}const fge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yt=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new me,this.errorHandler=dge,this.malformedUriErrorHandler=hge,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mq,afterPreactivation:mq},this.urlHandlingStrategy=new uge,this.routeReuseStrategy=new lge,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ds),this.console=o.get(OL);const d=o.get(ie);this.isNgZoneEnabled=d instanceof ie&&ie.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Vfe(){return new Sl(new Ae([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gq(o,a,h=>this.triggerEvent(new TW(h)),h=>this.triggerEvent(new DW(h))),this.routerState=zW(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(gt(i=>0!==i.id),be(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),qs(i=>{let s=!1,o=!1;return G(i).pipe(fn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qs(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return _q(a.source)&&(this.browserUrlTree=a.extractedUrl),G(a).pipe(qs(d=>{const h=this.transitions.getValue();return r.next(new uS(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?vs:Promise.resolve(d)}),function Npe(n,e,t,r){return qs(i=>function Rpe(n,e,t,r,i){return new Ppe(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(be(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),fn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function tge(n,e,t,r,i){return Ft(s=>function Qpe(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new Xpe(n,e,t,r,i,s).recognize();return null===o?lq(new Ype):G(o)}catch(o){return lq(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(be(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),fn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Sfe(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:_}=a,b=new uS(h,this.serializeUrl(f),p,m);r.next(b);const y=zW(f,this.rootComponentType).snapshot;return G(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),vs}),TS(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),fn(a=>{const l=new Afe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),be(a=>Object.assign(Object.assign({},a),{guards:Fpe(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function jpe(n,e){return Ft(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?G(Object.assign(Object.assign({},t),{guardsResult:!0})):function Hpe(n,e,t,r){return Sn(n).pipe(Ft(i=>function Kpe(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?G(s.map(a=>{const l=uv(a,e,i);let c;if(function wpe(n){return n&&ra(n.canDeactivate)}(l))c=ds(l.canDeactivate(n,e,t,r));else{if(!ra(l))throw new Error("Invalid CanDeactivate guard");c=ds(l(n,e,t,r))}return c.pipe(Xu())})).pipe(hp()):G(!0)}(i.component,i.route,t,e,r)),Xu(i=>!0!==i,!0))}(o,r,i,n).pipe(Ft(a=>a&&function _pe(n){return"boolean"==typeof n}(a)?function $pe(n,e,t,r){return Sn(e).pipe(Qu(i=>Qy(function Wpe(n,e){return null!==n&&e&&e(new Rfe(n)),G(!0)}(i.route.parent,r),function zpe(n,e){return null!==n&&e&&e(new Ofe(n)),G(!0)}(i.route,r),function Gpe(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Lpe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>lS(()=>G(o.guards.map(l=>{const c=uv(l,o.node,t);let u;if(function bpe(n){return n&&ra(n.canActivateChild)}(c))u=ds(c.canActivateChild(r,n));else{if(!ra(c))throw new Error("Invalid CanActivateChild guard");u=ds(c(r,n))}return u.pipe(Xu())})).pipe(hp())));return G(s).pipe(hp())}(n,i.path,t),function qpe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return G(!0);const i=r.map(s=>lS(()=>{const o=uv(s,e,t);let a;if(function vpe(n){return n&&ra(n.canActivate)}(o))a=ds(o.canActivate(e,n));else{if(!ra(o))throw new Error("Invalid CanActivate guard");a=ds(o(e,n))}return a.pipe(Xu())}));return G(i).pipe(hp())}(n,i.route,t))),Xu(i=>!0!==i,!0))}(r,s,n,e):G(a)),be(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),fn(a=>{if(xl(a.guardsResult)){const c=dS(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new xfe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),gt(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),TS(a=>{if(a.guards.canActivateChecks.length)return G(a).pipe(fn(l=>{const c=new Mfe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),qs(l=>{let c=!1;return G(l).pipe(function nge(n,e){return Ft(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let s=0;return Sn(i).pipe(Qu(o=>function rge(n,e,t,r){return function ige(n,e,t,r){const i=pq(n);if(0===i.length)return G({});const s={};return Sn(i).pipe(Ft(o=>function sge(n,e,t,r){const i=uv(n,e,r);return ds(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(fn(a=>{s[o]=a}))),cS(1),Ft(()=>pq(s).length===i.length?G(s):vs))}(n._resolve,n,e,r).pipe(be(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),WW(n,t).resolve),null)))}(o.route,r,n,e)),fn(()=>s++),cS(1),Ft(o=>s===i.length?G(t):vs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),fn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),fn(l=>{const c=new kfe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),TS(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),be(a=>{const l=function ipe(n,e,t){const r=cp(n,e._root,t?t._root:void 0);return new $W(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),fn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>be(r=>(new gpe(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),fn({next(){s=!0},complete(){s=!0}}),CW(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),Gs(a=>{if(o=!0,function Lfe(n){return n&&n[AW]}(a)){const l=xl(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new IW(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_q(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new Dfe(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return vs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){eq(t),this.config=t.map(CS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function ape(n,e,t,r,i){if(0===t.length)return yS(e.root,e.root,e.root,r,i);const s=function lpe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new YW(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Cn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new YW(t,e,r)}(t);if(s.toRoot())return yS(e.root,e.root,new Ae([],{}),r,i);const o=function cpe(n,e,t){if(n.isAbsolute)return new vS(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new vS(s,s===e.root,0)}const r=rv(n.commands[0])?0:1;return function upe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new vS(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?iv(o.segmentGroup,o.index,s.commands):QW(o.segmentGroup,o.index,s.commands);return yS(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function gge(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},fge):!1===r?Object.assign({},pge):r,xl(t))return PW(this.currentUrlTree,t,i);const s=this.parseUrl(t);return PW(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new op(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,m)=>{c=p,u=m});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),f=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new IW(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Jg()},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function _q(n){return"imperative"!==n}let _p=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new me,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ed(this.skipLocationChange),replaceUrl:ed(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ed(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(v(yt),v(na),_c("tabindex"),v(um),v(qe))},n.\u0275dir=Pe({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&Le("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Li]}),n})();function ed(n){return""===n||!!n}class yq{}class vq{preload(e,t){return G(null)}}let bq=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new gq(i,r,l=>t.triggerEvent(new TW(l)),l=>t.triggerEvent(new DW(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(gt(t=>t instanceof op),Qu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ds);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return Sn(i).pipe(wd(),be(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?G(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Ft(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(I(yt),I(NL),I(Qe),I(yq))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),AS=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof op&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof SW&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new SW(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Jg()},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Ml=new B("ROUTER_CONFIGURATION"),wq=new B("ROUTER_FORROOT_GUARD"),vge=[Ra,{provide:LW,useClass:BW},{provide:yt,useFactory:function Ige(n,e,t,r,i,s,o={},a,l){const c=new yt(null,n,e,t,r,i,MW(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Tge(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[LW,fp,Ra,Qe,NL,DS,Ml,[class cge{},new De],[class oge{},new De]]},fp,{provide:na,useFactory:function Dge(n){return n.routerState.root},deps:[yt]},bq,vq,class yge{preload(e,t){return t().pipe(Gs(()=>G(null)))}},{provide:Ml,useValue:{enableTracing:!1}}];function bge(){return new VL("Router",yt)}let xS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[vge,Eq(t),{provide:wq,useFactory:Cge,deps:[[yt,new De,new Cc]]},{provide:Ml,useValue:r||{}},{provide:Zc,useFactory:Ege,deps:[ka,[new Fg(oC),new De],Ml]},{provide:AS,useFactory:wge,deps:[yt,qee,Ml]},{provide:yq,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:vq},{provide:VL,multi:!0,useFactory:bge},[MS,{provide:_m,multi:!0,useFactory:Sge,deps:[MS]},{provide:Cq,useFactory:Age,deps:[MS]},{provide:PL,multi:!0,useExisting:Cq}]]}}static forChild(t){return{ngModule:n,providers:[Eq(t)]}}}return n.\u0275fac=function(t){return new(t||n)(I(wq,8),I(yt,8))},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})();function wge(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new AS(n,e,t)}function Ege(n,e,t={}){return t.useHash?new SJ(n,e):new oB(n,e)}function Cge(n){return"guarded"}function Eq(n){return[{provide:d6,multi:!0,useValue:n},{provide:DS,multi:!0,useValue:n}]}let MS=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new me}appInitializer(){return this.injector.get(IJ,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(yt),o=this.injector.get(Ml);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?G(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ml),i=this.injector.get(bq),s=this.injector.get(AS),o=this.injector.get(yt),a=this.injector.get(ym);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(I(Qe))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();function Sge(n){return n.appInitializer.bind(n)}function Age(n){return n.bootstrapListener.bind(n)}const Cq=new B("Router Initializer");let kS=(()=>{class n{constructor(t,r){this.userdata=t,this.router=r,this.emitChangeSource=new me,this.changeEmitted$=this.emitChangeSource.asObservable(),this.app=Yi(kr_firebase),this.firebase_storage=l0(this.app),this.firebase_firestore_db=NH(this.app),this.fbapp=Jr.initializeApp(kr_firebase),this.fb_db=Jr.firestore(),this.post_url_list=[],this.current_post_url="",this.fetched_post_data=new Yce,this.fetched_posts_list=[],this.progress=0}emitChange(t){this.emitChangeSource.next(t)}ngOnInit(){}save_metadata_of_post(t,r){var i=this;return g(function*(){const s=i.userdata.email.replace(".","");try{yield i$(BT(i.firebase_firestore_db,"posts_metadata"),{caption:t.caption,name:t.name,keymail:s,fileType:t.fileType,username:t.username,url:r}),alert("Data uploaded in firestore successfully"),i.router.navigateByUrl("/")}catch(o){console.error("Error adding document: ",o)}})()}Upload_post(t){var r=this;const i=this.userdata.email.replace(".","");console.log(i);const s="posts/"+i+"/"+t.name;console.log(s);const a=function Iie(n,e,t){return function fie(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new uie(n,new Ns(e),t)}(n=pe(n),e,t)}(N2(this.firebase_storage,s),t.post);a.on("state_changed",l=>{switch(this.progress=l.bytesTransferred/l.totalBytes*100,this.emitChange(this.progress),console.log("Upload is "+this.progress+"% done"),l.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},l=>{switch(l.code){case"storage/unauthorized":alert("You are not an authorized user");break;case"storage/canceled":alert("The upload was cancled");break;case"storage/unknown":alert("Storage Unknown")}},()=>{(function Tie(n){return yie(n=pe(n))})(a.snapshot.ref).then(function(){var l=g(function*(c){r.current_post_url=c,console.log(r.current_post_url),t.post_url=c,console.log("File available at",c),r.save_metadata_of_post(t,c)});return function(c){return l.apply(this,arguments)}}())})}delete_post(t,r){var i=this;return g(function*(){(function Die(n){return function vie(n){n._throwIfRoot("deleteObject");const e=function Zre(n,e){const r=Os(e.fullServerUrl(),n.host,n._protocol),a=new Qi(r,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Th(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ai)}(n=pe(n))})(N2(l0(),"posts/"+t+"/"+r)).then(()=>{alert("post deleted successfully")}).catch(u=>{}),Jr.firestore(),(yield i.fb_db.collection("posts_metadata").get()).forEach(function(){var u=g(function*(d){d.data().keymail==t&&d.data().name==r&&(d.ref.delete(),alert("Metadata deleted successfully"),i.router.navigateByUrl("/profile"))});return function(d){return u.apply(this,arguments)}}())})()}get_user_post(){}get_all_posts(){return g(function*(){})()}}return n.\u0275fac=function(t){return new(t||n)(I(Tl),I(yt))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Iq=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tq{}const Qs="*";function dv(n,e){return{type:7,name:n,definitions:e,options:{}}}function kl(n,e=null){return{type:4,styles:e,timings:n}}function Dq(n,e=null){return{type:3,steps:n,options:e}}function Sq(n,e=null){return{type:2,steps:n,options:e}}function Lr(n){return{type:6,styles:n,offset:null}}function td(n,e,t){return{type:0,name:n,styles:e,options:t}}function Rl(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Aq(n=null){return{type:9,options:n}}function xq(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function Mq(n){Promise.resolve(null).then(n)}class yp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Mq(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class kq{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?Mq(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const xe=!1;function Rq(n){return new H(3e3,xe)}function ume(){return"undefined"!=typeof window&&void 0!==window.document}function PS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ia(n){switch(n.length){case 0:return new yp;case 1:return n[0];default:return new kq(n)}}function Pq(n,e,t,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,_=u[p];if("offset"!==p)switch(m=e.normalizePropertyName(m,o),_){case"!":_=i[p];break;case Qs:_=s[p];break;default:_=e.normalizeStyleValue(p,m,_,o)}f[m]=_}),h||a.push(f),c=f,l=d}),o.length)throw function Jge(n){return new H(3502,xe)}();return a}function OS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&NS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&NS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&NS(t,"destroy",n)))}}function NS(n,e,t){const r=t.totalTime,s=FS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function FS(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Br(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Oq(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let LS=(n,e)=>!1,Nq=(n,e,t)=>[],Fq=null;function BS(n){const e=n.parentNode||n.host;return e===Fq?null:e}(PS()||"undefined"!=typeof Element)&&(ume()?(Fq=(()=>document.documentElement)(),LS=(n,e)=>{for(;e;){if(e===n)return!0;e=BS(e)}return!1}):LS=(n,e)=>n.contains(e),Nq=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Pl=null,Lq=!1;function Bq(n){Pl||(Pl=function hme(){return"undefined"!=typeof document?document.body:null}()||{},Lq=!!Pl.style&&"WebkitAppearance"in Pl.style);let e=!0;return Pl.style&&!function dme(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Pl.style,!e&&Lq&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pl.style)),e}const Uq=LS,Vq=Nq;let jq=(()=>{class n{validateStyleProperty(t){return Bq(t)}matchesElement(t,r){return!1}containsElement(t,r){return Uq(t,r)}getParentElement(t){return BS(t)}query(t,r,i){return Vq(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new yp(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),US=(()=>{class n{}return n.NOOP=new jq,n})();const VS="ng-enter",fv="ng-leave",pv="ng-trigger",gv=".ng-trigger",$q="ng-animating",jS=".ng-animating";function Ol(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:HS(parseFloat(e[1]),e[2])}function HS(n,e){return"s"===e?1e3*n:n}function mv(n,e,t){return n.hasOwnProperty("duration")?n:function gme(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Rq()),{duration:0,delay:0,easing:""};i=HS(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=HS(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function kge(){return new H(3100,xe)}()),a=!0),s<0&&(e.push(function Rge(){return new H(3101,xe)}()),a=!0),a&&e.splice(l,0,Rq())}return{duration:i,delay:s,easing:o}}(n,e,t)}function nd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function sa(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else nd(n,t);return t}function Wq(n,e,t){return t?e+":"+t+";":""}function qq(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Wq(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Wq(0,yme(t),n.style[t]));n.setAttribute("style",e)}function hs(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=zS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),PS()&&qq(n))}function Nl(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=zS(t);n.style[r]=""}),PS()&&qq(n))}function vp(n){return Array.isArray(n)?1==n.length?n[0]:Sq(n):n}const $S=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gq(n){let e=[];if("string"==typeof n){let t;for(;t=$S.exec(n);)e.push(t[1]);$S.lastIndex=0}return e}function _v(n,e,t){const r=n.toString(),i=r.replace($S,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function Oge(n){return new H(3003,xe)}()),a=""),a.toString()});return i==r?n:i}function yv(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const _me=/-+([a-z0-9])/g;function zS(n){return n.replace(_me,(...e)=>e[1].toUpperCase())}function yme(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ur(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Nge(n){return new H(3004,xe)}()}}function Kq(n,e){return window.getComputedStyle(n)[e]}function Ime(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Tme(n,e,t){if(":"==n[0]){const l=function Dme(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Yge(n){return new H(3016,xe)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Kge(n){return new H(3015,xe)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Yq(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(Yq(o,i))}(r,t,e)):t.push(n),t}const Ev=new Set(["true","1"]),Cv=new Set(["false","0"]);function Yq(n,e){const t=Ev.has(n)||Cv.has(n),r=Ev.has(e)||Cv.has(e);return(i,s)=>{let o="*"==n||n==i,a="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Ev.has(n):Cv.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Ev.has(e):Cv.has(e)),o&&a}}const Sme=new RegExp("s*:selfs*,?","g");function WS(n,e,t,r){return new Ame(n).build(e,t,r)}class Ame{constructor(e){this._driver=e}build(e,t,r){const i=new kme(t);this._resetContextStyleTimingState(i);const s=Ur(this,vp(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Lge(){return new H(3006,xe)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function Bge(){return new H(3007,xe)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{if(Iv(a)){const l=a;Object.keys(l).forEach(c=>{Gq(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(yv(s.values()),t.errors.push(function Uge(n,e){return new H(3008,xe)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ur(this,vp(e.animation),t);return{type:1,matchers:Ime(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Fl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ur(this,r,t)),options:Fl(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ur(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Fl(e.options)}}visitAnimate(e,t){const r=function Pme(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return qS(mv(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=qS(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||mv(r,e),qS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Lr({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Lr(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Qs?r.push(o):t.errors.push(function Vge(n){return new H(3002,xe)}()):r.push(o)}):r.push(e.styles);let i=!1,s=null;return r.forEach(o=>{if(Iv(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!i)for(let c in a)if(a[c].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(t.errors.push(function jge(n,e,t,r,i){return new H(3010,xe)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:i}),t.options&&function mme(n,e,t){const r=e.params||{},i=Gq(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Pge(n){return new H(3001,xe)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Hge(){return new H(3011,xe)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(b=>{const y=this._makeStyleAst(b,t);let C=null!=y.offset?y.offset:function Rme(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Iv(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Iv(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(y.styles),T=0;return null!=C&&(s++,T=y.offset=C),l=l||T<0||T>1,a=a||T<c,c=T,o.push(T),y});l&&t.errors.push(function $ge(){return new H(3012,xe)}()),a&&t.errors.push(function zge(){return new H(3200,xe)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Wge(){return new H(3202,xe)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,_=m.duration;return u.forEach((b,y)=>{const C=h>0?y==f?1:h*y:o[y],T=C*_;t.currentTime=p+m.delay+T,m.duration=T,this._validateStyleAst(b,t),b.offset=C,r.styles.push(b)}),r}visitReference(e,t){return{type:8,animation:Ur(this,vp(e.animation),t),options:Fl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Fl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Fl(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function xme(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Sme,"")),n=n.replace(/@\*/g,gv).replace(/@\w+/g,t=>gv+"-"+t.substr(1)).replace(/:animating/g,jS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Br(t.collectedStyles,t.currentQuerySelector,{});const a=Ur(this,vp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Fl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function qge(){return new H(3013,xe)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:mv(e.timings,t.errors,!0);return{type:12,animation:Ur(this,vp(e.animation),t),timings:r,options:null}}}class kme{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Iv(n){return!Array.isArray(n)&&"object"==typeof n}function Fl(n){return n?(n=nd(n)).params&&(n.params=function Mme(n){return n?nd(n):null}(n.params)):n={},n}function qS(n,e,t){return{duration:n,delay:e,easing:t}}function GS(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Tv{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Fme=new RegExp(":enter","g"),Bme=new RegExp(":leave","g");function KS(n,e,t,r,i,s={},o={},a,l,c=[]){return(new Ume).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class Ume{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new Tv;const d=new YS(e,t,c,i,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Ur(this,r,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===t){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[GS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Ol(r.duration):null,a=null!=r.delay?Ol(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ur(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Dv);const o=Ol(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ur(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ol(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ur(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return mv(t.params?_v(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ol(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Dv);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Ur(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Ur(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Dv={};class YS{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Dv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Sv(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ol(r.duration)),null!=r.delay&&(i.delay=Ol(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=_v(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new YS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Dv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new Vme(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Fme,"."+this._enterClassName)).replace(Bme,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function Gge(n){return new H(3014,xe)}()),a}}class Sv{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Sv(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Qs,this._currentKeyframe[t]=Qs}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},o=function jme(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Qs})):sa(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=_v(o[a],s,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Qs),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=sa(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==Qs&&t.add(u)}),r||(c.offset=l/this.duration),i.push(c)});const s=e.size?yv(e.values()):[],o=t.size?yv(t.values()):[];if(r){const a=i[0],l=nd(a);a.offset=0,l.offset=1,i=[a,l]}return GS(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Vme extends Sv{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=sa(e[0],!1);l.offset=0,s.push(l);const c=sa(e[0],!1);c.offset=Zq(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=sa(e[d],!1);h.offset=Zq((t+h.offset*r)/o),s.push(h)}r=o,t=0,i="",e=s}return GS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Zq(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class QS{}class Hme extends QS{normalizePropertyName(e,t){return zS(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if($me[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Fge(n,e){return new H(3005,xe)}())}return o+s}}const $me=(()=>function zme(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Jq(n,e,t,r,i,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const XS={};class eG{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Wme(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],o=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):o}build(e,t,r,i,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||XS,p=this.buildStyles(r,a&&a.params||XS,d),m=l&&l.params||XS,_=this.buildStyles(i,m,d),b=new Set,y=new Map,C=new Map,T="void"===i,R={params:Object.assign(Object.assign({},h),m)},U=u?[]:KS(e,t,this.ast.animation,s,o,p,_,R,c,d);let Z=0;if(U.forEach(Nt=>{Z=Math.max(Nt.duration+Nt.delay,Z)}),d.length)return Jq(t,this._triggerName,r,i,T,p,_,[],[],y,C,Z,d);U.forEach(Nt=>{const tr=Nt.element,md=Br(y,tr,{});Nt.preStyleProps.forEach(Ni=>md[Ni]=!0);const oo=Br(C,tr,{});Nt.postStyleProps.forEach(Ni=>oo[Ni]=!0),tr!==t&&b.add(tr)});const Ze=yv(b.values());return Jq(t,this._triggerName,r,i,T,p,_,U,Ze,y,C,Z)}}class qme{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=nd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=_v(l,i,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),r[c]=l})}}),r}}class Kme{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new qme(i.style,i.options&&i.options.params||{},r)}),tG(this.states,"true","1"),tG(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new eG(e,i,this.states))}),this.fallbackTransition=function Yme(n,e,t){return new eG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function tG(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Qme=new Tv;class Xme{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=WS(this._driver,t,r,[]);if(r.length)throw function eme(n){return new H(3503,xe)}();this._animations[e]=s}_buildPlayer(e,t,r){const i=e.element,s=Pq(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let o;const a=new Map;if(s?(o=KS(this._driver,t,s,VS,fv,{},{},r,Qme,i),o.forEach(u=>{const d=Br(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(i.push(function tme(){return new H(3300,xe)}()),o=[]),i.length)throw function nme(n){return new H(3504,xe)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Qs)})});const c=ia(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function rme(n){return new H(3301,xe)}();return t}listen(e,t,r,i){const s=FS(t,"","","");return OS(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const nG="ng-animate-queued",ZS="ng-animate-disabled",n_e=[],rG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},r_e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},si="__ng_removed";class JS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function a_e(n){return null!=n?n:null}(r?e.value:e),r){const s=nd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const bp="void",eA=new JS(bp);class i_e{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,oi(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function ime(n,e){return new H(3302,xe)}();if(null==r||0==r.length)throw function sme(n){return new H(3303,xe)}();if(!function l_e(n){return"start"==n||"done"==n}(r))throw function ome(n,e){return new H(3400,xe)}();const s=Br(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Br(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(oi(e,pv),oi(e,pv+"-"+t),a[t]=eA),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function ame(n){return new H(3401,xe)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new tA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(oi(e,pv),oi(e,pv+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new JS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=eA),c.value!==bp&&l.value===c.value){if(!function d_e(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],_=s.matchStyles(l.value,l.params,m),b=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Nl(e,_),hs(e,b)})}return}const h=Br(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(oi(e,nG),o.onStart(()=>{rd(e,nG)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const _=this._engine.playersByElement.get(e);if(_){let b=_.indexOf(o);b>=0&&_.splice(b,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,gv,!0);r.forEach(i=>{if(i[si])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,bp,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&ia(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers[o].fallbackTransition,c=r[o]||eA,u=new JS(bp),d=new tA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[si];(!s||s===rG)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){oi(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=FS(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,OS(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class s_e{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new i_e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,t)){r.splice(a+1,0,e),o=!0;break}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,i){if(Av(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Av(t))return;const s=t[si];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),oi(e,ZS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),rd(e,ZS))}removeNode(e,t,r,i){if(Av(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[si]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Av(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,gv,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,jS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ia(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[si];if(r&&r.setForRemoval){if(e[si]=rG,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(ZS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)oi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ia(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function lme(n){return new H(3402,xe)}()}_flushAnimations(e,t){const r=new Tv,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(V=>{u.add(V);const q=this.driver.query(V,".ng-animate-queued",!0);for(let J=0;J<q.length;J++)u.add(q[J])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=oG(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((V,q)=>{const J=VS+m++;p.set(q,J),V.forEach(Be=>oi(Be,J))});const _=[],b=new Set,y=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){const q=this.collectedLeaveElements[V],J=q[si];J&&J.setForRemoval&&(_.push(q),b.add(q),J.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(Be=>b.add(Be)):y.add(q))}const C=new Map,T=oG(h,Array.from(b));T.forEach((V,q)=>{const J=fv+m++;C.set(q,J),V.forEach(Be=>oi(Be,J))}),e.push(()=>{f.forEach((V,q)=>{const J=p.get(q);V.forEach(Be=>rd(Be,J))}),T.forEach((V,q)=>{const J=C.get(q);V.forEach(Be=>rd(Be,J))}),_.forEach(V=>{this.processLeaveNode(V)})});const R=[],U=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(t).forEach(J=>{const Be=J.player,mn=J.element;if(R.push(Be),this.collectedEnterElements.length){const nr=mn[si];if(nr&&nr.setForMove){if(nr.previousTriggersValues&&nr.previousTriggersValues.has(J.triggerName)){const ic=nr.previousTriggersValues.get(J.triggerName),fa=this.statesByElement.get(J.element);fa&&fa[J.triggerName]&&(fa[J.triggerName].value=ic)}return void Be.destroy()}}const _s=!d||!this.driver.containsElement(d,mn),jr=C.get(mn),ha=p.get(mn),vt=this._buildInstruction(J,r,ha,jr,_s);if(vt.errors&&vt.errors.length)return void U.push(vt);if(_s)return Be.onStart(()=>Nl(mn,vt.fromStyles)),Be.onDestroy(()=>hs(mn,vt.toStyles)),void i.push(Be);if(J.isFallbackTransition)return Be.onStart(()=>Nl(mn,vt.fromStyles)),Be.onDestroy(()=>hs(mn,vt.toStyles)),void i.push(Be);const mK=[];vt.timelines.forEach(nr=>{nr.stretchStartingKeyframe=!0,this.disabledNodes.has(nr.element)||mK.push(nr)}),vt.timelines=mK,r.append(mn,vt.timelines),o.push({instruction:vt,player:Be,element:mn}),vt.queriedElements.forEach(nr=>Br(a,nr,[]).push(Be)),vt.preStyleProps.forEach((nr,ic)=>{const fa=Object.keys(nr);if(fa.length){let sc=l.get(ic);sc||l.set(ic,sc=new Set),fa.forEach(eP=>sc.add(eP))}}),vt.postStyleProps.forEach((nr,ic)=>{const fa=Object.keys(nr);let sc=c.get(ic);sc||c.set(ic,sc=new Set),fa.forEach(eP=>sc.add(eP))})});if(U.length){const V=[];U.forEach(q=>{V.push(function cme(n,e){return new H(3505,xe)}())}),R.forEach(q=>q.destroy()),this.reportError(V)}const Z=new Map,Ze=new Map;o.forEach(V=>{const q=V.element;r.has(q)&&(Ze.set(q,q),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,Z))}),i.forEach(V=>{const q=V.element;this._getPreviousPlayers(q,!1,V.namespaceId,V.triggerName,null).forEach(Be=>{Br(Z,q,[]).push(Be),Be.destroy()})});const Nt=_.filter(V=>lG(V,l,c)),tr=new Map;sG(tr,this.driver,y,c,Qs).forEach(V=>{lG(V,l,c)&&Nt.push(V)});const oo=new Map;f.forEach((V,q)=>{sG(oo,this.driver,new Set(V),l,"!")}),Nt.forEach(V=>{const q=tr.get(V),J=oo.get(V);tr.set(V,Object.assign(Object.assign({},q),J))});const Ni=[],_d=[],yd={};o.forEach(V=>{const{element:q,player:J,instruction:Be}=V;if(r.has(q)){if(u.has(q))return J.onDestroy(()=>hs(q,Be.toStyles)),J.disabled=!0,J.overrideTotalTime(Be.totalTime),void i.push(J);let mn=yd;if(Ze.size>1){let jr=q;const ha=[];for(;jr=jr.parentNode;){const vt=Ze.get(jr);if(vt){mn=vt;break}ha.push(jr)}ha.forEach(vt=>Ze.set(vt,mn))}const _s=this._buildAnimation(J.namespaceId,Be,Z,s,oo,tr);if(J.setRealPlayer(_s),mn===yd)Ni.push(J);else{const jr=this.playersByElement.get(mn);jr&&jr.length&&(J.parentPlayer=ia(jr)),i.push(J)}}else Nl(q,Be.fromStyles),J.onDestroy(()=>hs(q,Be.toStyles)),_d.push(J),u.has(q)&&i.push(J)}),_d.forEach(V=>{const q=s.get(V.element);if(q&&q.length){const J=ia(q);V.setRealPlayer(J)}}),i.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<_.length;V++){const q=_[V],J=q[si];if(rd(q,fv),J&&J.hasAnimation)continue;let Be=[];if(a.size){let _s=a.get(q);_s&&_s.length&&Be.push(..._s);let jr=this.driver.query(q,jS,!0);for(let ha=0;ha<jr.length;ha++){let vt=a.get(jr[ha]);vt&&vt.length&&Be.push(...vt)}}const mn=Be.filter(_s=>!_s.destroyed);mn.length?c_e(this,q,mn):this.processLeaveNode(q)}return _.length=0,Ni.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();const q=this.players.indexOf(V);this.players.splice(q,1)}),V.play()}),Ni}elementContainsData(e,t){let r=!1;const i=t[si];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==bp;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Br(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Nl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const _=m[si];if(_&&_.removedBeforeQueried)return new yp(p.duration,p.delay);const b=m!==l,y=function u_e(n){const e=[];return aG(n,e),e}((r.get(m)||n_e).map(Z=>Z.getRealPlayer())).filter(Z=>!!Z.element&&Z.element===m),C=s.get(m),T=o.get(m),R=Pq(0,this._normalizer,0,p.keyframes,C,T),U=this._buildPlayer(p,R,y);if(p.subTimeline&&i&&d.add(m),b){const Z=new tA(e,a,m);Z.setRealPlayer(U),c.push(Z)}return U});c.forEach(p=>{Br(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function o_e(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>oi(p,$q));const f=ia(h);return f.onDestroy(()=>{u.forEach(p=>rd(p,$q)),hs(l,t.toStyles)}),d.forEach(p=>{Br(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new yp(e.duration,e.delay)}}class tA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new yp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>OS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Br(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Av(n){return n&&1===n.nodeType}function iG(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function sG(n,e,t,r,i){const s=[];t.forEach(l=>s.push(iG(l)));const o=[];r.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,i);(!h||0==h.length)&&(c[si]=r_e,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>iG(l,s[a++])),o}function oG(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function oi(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function rd(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function c_e(n,e,t){ia(t).onDone(()=>n.processLeaveNode(e))}function aG(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof kq?aG(r.players,e):e.push(r)}}function lG(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class xv{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new s_e(e,t,r),this._timelineEngine=new Xme(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=WS(this._driver,s,l,[]);if(l.length)throw function Zge(n,e){return new H(3404,xe)}();a=function Gme(n,e,t){return new Kme(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Oq(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=Oq(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let f_e=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&hs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hs(this._element,this._initialStyles),this._endStyles&&(hs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nl(this._element,this._endStyles),this._endStyles=null),hs(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function nA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];p_e(i)&&(e=e||{},e[i]=n[i])}return e}function p_e(n){return"display"===n||"position"===n}class cG{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Kq(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class g_e{validateStyleProperty(e){return Bq(e)}matchesElement(e,t){return!1}containsElement(e,t){return Uq(e,t)}getParentElement(e){return BS(e)}query(e,t,r){return Vq(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof cG);(function vme(n,e){return 0===n||0===e})(r,i)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function bme(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var i=1;i<e.length;i++){let a=e[i];o.forEach(function(l){a[l]=Kq(n,l)})}}return e}(e,t=t.map(h=>sa(h,!1)),c);const d=function h_e(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=nA(e[0]),e.length>1&&(r=nA(e[e.length-1]))):e&&(t=nA(e)),t||r?new f_e(n,t,r):null}(e,t);return new cG(e,t,l,d)}}let m_e=(()=>{class n extends Tq{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:ui.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Sq(t):t;return uG(this._renderer,null,r,"register",[i]),new __e(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(I(rh),I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class __e extends class Mge{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new y_e(this._id,e,t||{},this._renderer)}}class y_e{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return uG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function uG(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const dG="@.disabled";let v_e=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new hG("",s,this.engine),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(l),new b_e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(I(rh),I(xv),I(ie))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();class hG{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==dG?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class b_e extends hG{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dG?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function w_e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function E_e(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let C_e=(()=>{class n extends xv{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(I(_e),I(US),I(QS))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Ll=new B("AnimationModuleType"),fG=[{provide:Tq,useClass:m_e},{provide:QS,useFactory:function I_e(){return new Hme}},{provide:xv,useClass:C_e},{provide:rh,useFactory:function T_e(n,e,t){return new v_e(n,e,t)},deps:[Bm,xv,ie]}],pG=[{provide:US,useFactory:()=>new g_e},{provide:Ll,useValue:"BrowserAnimations"},...fG],D_e=[{provide:US,useClass:jq},{provide:Ll,useValue:"NoopAnimations"},...fG];let S_e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?D_e:pG}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:pG,imports:[RB]}),n})();const A_e=new B("cdk-dir-doc",{providedIn:"root",factory:function x_e(){return Ng(_e)}}),M_e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let rA,Bl=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ct,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function k_e(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?M_e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(I(A_e,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})();try{rA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){rA=!1}let Ep,Rv,Ul,iA,ai=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Wee(n){return n===bB}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!rA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(I(Xc))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kv(n){return function R_e(){if(null==Ep&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ep=!0}))}finally{Ep=Ep||!1}return Ep}()?n:!!n.capture}function _G(){if(null==Ul){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ul=!1,Ul;if("scrollBehavior"in document.documentElement.style)Ul=!0;else{const n=Element.prototype.scrollTo;Ul=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ul}function Cp(){if("object"!=typeof document||!document)return 0;if(null==Rv){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),Rv=0,0===n.scrollLeft&&(n.scrollLeft=1,Rv=0===n.scrollLeft?1:2),n.remove()}return Rv}function sA(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Vl(n){return n.composedPath?n.composedPath()[0]:n.target}function oA(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Pv(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class Y_e extends bt{constructor(e,t){super()}schedule(e,t=0){return this}}const Ov={setInterval(n,e,...t){const{delegate:r}=Ov;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ov;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class Nv extends Y_e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return Ov.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;Ov.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ng(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const bG={now:()=>(bG.delegate||Date).now(),delegate:void 0};class Ip{constructor(e,t=Ip.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ip.now=bG.now;class Fv extends Ip{constructor(e,t=Ip.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Tp=new Fv(Nv),Q_e=Tp;function wG(n,e=Tp){return wt((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(at(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function EG(n,e=ao){return n=null!=n?n:Z_e,wt((t,r)=>{let i,s=!0;t.subscribe(at(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Z_e(n,e){return n===e}function Jn(n){return wt((e,t)=>{ir(n).subscribe(at(t,()=>t.complete(),ig)),!t.closed&&e.subscribe(t)})}function fs(n){return null!=n&&"false"!=`${n}`}function uA(n,e=0){return function J_e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function CG(n){return Array.isArray(n)?n:[n]}function Wt(n){return null==n?"":"string"==typeof n?n:`${n}px`}function sd(n){return n instanceof qe?n.nativeElement:n}class rye extends class nye{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new me,this._typeaheadSubscription=bt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new me,this.change=new me,e instanceof Aa&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(fn(t=>this._pressedLetters.push(t)),wG(e),gt(()=>this._pressedLetters.length>0),be(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,o=r[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Pv(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Aa?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let dA=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function sye(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function iye(n){try{return n.frameElement}catch(e){return null}}(function fye(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===SG(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=SG(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function dye(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function hye(n){return!function aye(n){return function cye(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function oye(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function lye(n){return function uye(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||DG(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(I(ai))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DG(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function SG(n){if(!DG(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class pye{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Bn(1)).subscribe(e)}}let AG=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new pye(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(I(dA),I(ie),I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hA(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function fA(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const gye=new B("cdk-input-modality-detector-options"),mye={ignoreKeys:[18,17,224,91,16]},od=kv({passive:!0,capture:!0});let _ye=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ri(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Vl(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(hA(o)?"keyboard":"mouse"),this._mostRecentTarget=Vl(o))},this._onTouchstart=o=>{fA(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vl(o))},this._options=Object.assign(Object.assign({},mye),s),this.modalityDetected=this._modality.pipe(function X_e(n){return gt((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(EG()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,od),i.addEventListener("mousedown",this._onMousedown,od),i.addEventListener("touchstart",this._onTouchstart,od)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,od),document.removeEventListener("mousedown",this._onMousedown,od),document.removeEventListener("touchstart",this._onTouchstart,od))}}return n.\u0275fac=function(t){return new(t||n)(I(ai),I(ie),I(_e),I(gye,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vye=new B("cdk-focus-monitor-default-options"),Lv=kv({passive:!0,capture:!0});let Dp=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new me,this._rootNodeFocusAndBlurListener=a=>{const l=Vl(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,r=!1){const i=sd(t);if(!this._platform.isBrowser||1!==i.nodeType)return G(null);const s=function O_e(n){if(function P_e(){if(null==iA){const n="undefined"!=typeof document?document.head:null;iA=!(!n||!n.createShadowRoot&&!n.attachShadow)}return iA}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new me,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=sd(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=sd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Vl(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Lv),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Lv)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Jn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Lv),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Lv),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(I(ie),I(ai),I(_ye),I(_e,8),I(vye,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MG="cdk-high-contrast-black-on-white",kG="cdk-high-contrast-white-on-black",pA="cdk-high-contrast-active";let bye=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(pA),t.remove(MG),t.remove(kG),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(pA),t.add(MG)):2===r&&(t.add(pA),t.add(kG))}}}return n.\u0275fac=function(t){return new(t||n)(I(ai),I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eye=new B("mat-sanity-checks",{providedIn:"root",factory:function wye(){return!0}});let qt=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!oA()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(I(bye),I(Eye,8),I(_e))},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[wp],wp]}),n})();function PG(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=fs(e)}}}function gA(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function OG(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fs(e)}}}let NG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[qt],qt]}),n})();class Iye{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const FG={enterDuration:225,exitDuration:150},mA=kv({passive:!0}),LG=["mousedown","touchstart"],BG=["mouseup","mouseleave","touchend","touchcancel"];class Dye{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=sd(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},FG),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function Aye(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function Sye(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new Iye(this,u,r);return d.state=0,this._activeRipples.add(d),r.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!r.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},FG),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=sd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(LG))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(BG),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=hA(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!fA(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,mA)})})}_removeTriggerEvents(){this._triggerElement&&(LG.forEach(e=>{this._triggerElement.removeEventListener(e,this,mA)}),this._pointerUpEventsRegistered&&BG.forEach(e=>{this._triggerElement.removeEventListener(e,this,mA)}))}}const xye=new B("mat-ripple-global-options");let _A=(()=>{class n{constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Dye(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(ie),v(ai),v(xye,8),v(Ll,8))},n.\u0275dir=Pe({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&xr("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),UG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[qt],qt]}),n})();const Mye=["*",[["mat-card-footer"]]],kye=["*","mat-card-footer"],Rye=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Pye=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let VG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),jG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),HG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),$G=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&xr("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),yA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),vA=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(v(Ll,8))},n.\u0275cmp=Ue({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&xr("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:kye,decls:2,vars:0,template:function(t,r){1&t&&(Ar(Mye),Qt(0),Qt(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),zG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:Pye,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(Ar(Rye),Qt(0),M(1,"div",0),Qt(2,1),x(),Qt(3,2))},encapsulation:2,changeDetection:0}),n})(),Bv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[qt],qt]}),n})();class Nye{}class oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Fye{encodeKey(e){return WG(e)}encodeValue(e){return WG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Bye=/%(\d[a-f0-9])/gi,Uye={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function WG(n){return encodeURIComponent(n).replace(Bye,(e,t)=>{var r;return null!==(r=Uye[t])&&void 0!==r?r:e})}function qG(n){return`${n}`}class aa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fye,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Lye(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new aa({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qG(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(qG(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Vye{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function GG(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function KG(n){return"undefined"!=typeof Blob&&n instanceof Blob}function YG(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ap{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function jye(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new oa),this.context||(this.context=new Vye),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new aa,this.urlWithParams=t}serializeBody(){return null===this.body?null:GG(this.body)||KG(this.body)||YG(this.body)||function Hye(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof aa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YG(this.body)?null:KG(this.body)?this.body.type||null:GG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof aa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Ap(r,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var In=(()=>((In=In||{})[In.Sent=0]="Sent",In[In.UploadProgress=1]="UploadProgress",In[In.ResponseHeader=2]="ResponseHeader",In[In.DownloadProgress=3]="DownloadProgress",In[In.Response=4]="Response",In[In.User=5]="User",In))();class bA extends class $ye{constructor(e,t=200,r="OK"){this.headers=e.headers||new oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=In.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bA({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function wA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let XG=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ap)s=t;else{let l,c;l=i.headers instanceof oa?i.headers:new oa(i.headers),i.params&&(c=i.params instanceof aa?i.params:new aa({fromObject:i.params})),s=new Ap(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=G(s).pipe(Qu(l=>this.handler.handle(l)));if(t instanceof Ap||"events"===i.observe)return o;const a=o.pipe(gt(l=>l instanceof bA));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new aa).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wA(i,r))}post(t,r,i={}){return this.request("POST",t,wA(i,r))}put(t,r,i={}){return this.request("PUT",t,wA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(I(Nye))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Wye=["*"];let Uv;function xp(n){var e;return(null===(e=function qye(){if(void 0===Uv&&(Uv=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Uv=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Uv}())||void 0===e?void 0:e.createHTML(n))||n}function ZG(n){return Error(`Unable to find icon with the name "${n}"`)}function JG(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function e3(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jl{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Vv=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new jl(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(je.HTML,i);if(!o)throw e3(i);const a=xp(o);return this._addSvgIconConfig(t,r,new jl("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new jl(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(je.HTML,r);if(!s)throw e3(r);const o=xp(s);return this._addSvgIconSetConfig(t,new jl("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(je.RESOURCE_URL,t);if(!r)throw JG(t);const i=this._cachedIconsByUrl.get(r);return i?G(jv(i)):this._loadSvgIconFromConfig(new jl(t,null)).pipe(fn(s=>this._cachedIconsByUrl.set(r,s)),be(s=>jv(s)))}getNamedSvgIcon(t,r=""){const i=t3(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):sp(ZG(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?G(jv(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(be(r=>jv(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?G(i):function Oye(...n){const e=CP(n),{args:t,keys:r}=mW(n),i=new Je(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;ir(t[u]).subscribe(at(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?_W(r,a):a),s.complete())}))}});return e?i.pipe(aS(e)):i}(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Gs(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(je.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),G(null)})))).pipe(be(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw ZG(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(fn(r=>t.svgText=r),be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?G(null):this._fetchIcon(t).pipe(fn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(xp("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(xp("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function Gye(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(je.RESOURCE_URL,i);if(!a)throw JG(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(be(u=>xp(u)),CW(()=>this._inProgressUrlFetches.delete(a)),TP());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(t3(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return Yye(s)?new jl(s.url,null,s.options):new jl(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(I(XG,8),I(DC),I(_e,8),I(go))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jv(n){return n.cloneNode(!0)}function t3(n,e){return n+":"+e}function Yye(n){return!(!n.url||!n.options)}const Qye=gA(class{constructor(n){this._elementRef=n}}),Xye=new B("mat-icon-location",{providedIn:"root",factory:function Zye(){const n=Ng(_e),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),n3=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Jye=n3.map(n=>`[${n}]`).join(", "),eve=/^url\(['"]?#(.*?)['"]?\)$/;let EA,Mp=(()=>{class n extends Qye{constructor(t,r,i,s,o){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=bt.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=fs(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Jye),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)n3.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(eve):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Bn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(Vv),_c("aria-hidden"),v(Xye),v(go))},n.\u0275cmp=Ue({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(ar("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),xr("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Gr],ngContentSelectors:Wye,decls:1,vars:0,template:function(t,r){1&t&&(Ar(),Qt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),kp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[qt],qt]}),n})(),tve=1;const Hv={};function r3(n){return n in Hv&&(delete Hv[n],!0)}const nve={setImmediate(n){const e=tve++;return Hv[e]=!0,EA||(EA=Promise.resolve()),EA.then(()=>r3(e)&&n()),e},clearImmediate(n){r3(n)}},{setImmediate:rve,clearImmediate:ive}=nve,$v={setImmediate(...n){const{delegate:e}=$v;return((null==e?void 0:e.setImmediate)||rve)(...n)},clearImmediate(n){const{delegate:e}=$v;return((null==e?void 0:e.clearImmediate)||ive)(n)},delegate:void 0},CA=new class ove extends Fv{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class sve extends Nv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=$v.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||($v.clearImmediate(t),e._scheduled=void 0)}});function IA(n){return be(()=>n)}function s3(n,e){return e?t=>Qy(e.pipe(Bn(1),function ave(){return wt((n,e)=>{n.subscribe(at(e,ig))})}()),t.pipe(s3(n))):Ft((t,r)=>n(t,r).pipe(Bn(1),IA(t)))}function o3(n=0,e,t=Q_e){let r=-1;return null!=e&&(EP(e)?t=e:r=e),new Je(i=>{let s=function lve(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function a3(n,e=Tp){const t=o3(n,e);return s3(()=>t)}class TA{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class DA extends TA{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class SA extends TA{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class cve extends TA{constructor(e){super(),this.element=e instanceof qe?e.nativeElement:e}}class AA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof DA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof SA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof cve?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class uve extends AA{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Qe.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let l3=(()=>{class n extends AA{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ct,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(v(Da),v(Mr),v(_e))},n.\u0275dir=Pe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Gr]}),n})(),c3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})();const dve=["addListener","removeListener"],hve=["addEventListener","removeEventListener"],fve=["on","off"];function Rp(n,e,t,r){if(He(t)&&(r=t,t=void 0),r)return Rp(n,e,t).pipe(aS(r));const[i,s]=function mve(n){return He(n.addEventListener)&&He(n.removeEventListener)}(n)?hve.map(o=>a=>n[o](e,a,t)):function pve(n){return He(n.addListener)&&He(n.removeListener)}(n)?dve.map(u3(n,e)):function gve(n){return He(n.on)&&He(n.off)}(n)?fve.map(u3(n,e)):[];if(!i&&Mb(n))return Ft(o=>Rp(o,e,t))(ir(n));if(!i)throw new TypeError("Invalid event target");return new Je(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function u3(n,e){return t=>r=>n[t](e,r)}const Pp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Pp;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new bt(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Pp;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Pp;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class yve extends Fv{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class _ve extends Nv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Pp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Pp.cancelAnimationFrame(t),e._scheduled=void 0)}});function d3(n,e=Tp){return function bve(n){return wt((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(at(t,c=>{r=!0,i=c,s||ir(n(c)).subscribe(s=at(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>o3(n,e))}let xA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new me,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Je(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(d3(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):G()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(gt(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=sd(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Rp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(I(ie),I(ai),I(_e,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MA=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new me,this._elementScrolled=new Je(o=>this.ngZone.runOutsideAngular(()=>Rp(this.elementRef.nativeElement,"scroll").pipe(Jn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Cp()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Cp()?t.left=t.right:1==Cp()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;_G()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?i:r:"end"==t&&(t=o?r:i),o&&2==Cp()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Cp()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(xA),v(ie),v(Bl,8))},n.\u0275dir=Pe({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),kA=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new me,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(d3(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(I(ai),I(ie),I(_e,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Op=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({}),n})(),h3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[wp,Op],wp,Op]}),n})();const f3=_G();class Cve{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Wt(-this._previousScrollPosition.left),e.style.top=Wt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),f3&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),f3&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Ive{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class p3{enable(){}disable(){}attach(){}}function RA(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function g3(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Tve{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();RA(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Dve=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new p3,this.close=o=>new Ive(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Cve(this._viewportRuler,this._document),this.reposition=o=>new Tve(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(I(xA),I(kA),I(ie),I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PA{constructor(e){if(this.scrollStrategy=new p3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Sve{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class Ave{constructor(e,t,r,i,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new me,this._attachments=new me,this._detachments=new me,this._locationChanges=bt.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new me,this._outsidePointerEvents=new me,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Bn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Wt(this._config.width),e.height=Wt(this._config.height),e.minWidth=Wt(this._config.minWidth),e.minHeight=Wt(this._config.minHeight),e.maxWidth=Wt(this._config.maxWidth),e.maxHeight=Wt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=CG(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Jn(oc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let OA=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||oA()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),oA()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(I(_e),I(ai))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const m3="cdk-overlay-connected-position-bounding-box",xve=/([A-Za-z%]+)$/;class Mve{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new me,this._resizeSubscription=bt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(m3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(m3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=y3(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-r.height,p=this._subtractOverflows(s.width,0-o,o+s.width-r.width),m=this._subtractOverflows(s.height,h,f),_=p*m;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=_3(this._overlayRef.getConfig().minHeight),a=_3(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=i)&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=y3(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Sve(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const f=Math.min(r.bottom-e.y+r.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const f=Math.min(r.right-e.x+r.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Wt(r.height),i.top=Wt(r.top),i.bottom=Wt(r.bottom),i.width=Wt(r.width),i.left=Wt(r.left),i.right=Wt(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Wt(s)),o&&(i.maxWidth=Wt(o))}this._lastBoundingBoxSize=r,Hl(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Hl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();Hl(r,this._getExactOverlayY(t,e,u)),Hl(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Wt(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Wt(o.maxWidth):s&&(r.maxWidth="")),Hl(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Wt(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Wt(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:g3(e,r),isOriginOutsideView:RA(e,r),isOverlayClipped:g3(t,r),isOverlayOutsideView:RA(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&CG(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof qe)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Hl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function _3(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(xve);return t&&"px"!==t?null:parseFloat(e)}return n||null}function y3(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const v3="cdk-global-overlay-wrapper";class kve{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(v3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(v3),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Rve=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new kve}flexibleConnectedTo(t){return new Mve(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(I(kA),I(_e),I(ai),I(OA))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b3=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(I(_e))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pve=(()=>{class n extends b3{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(I(_e),I(ie,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ove=(()=>{class n extends b3{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Vl(s)},this._clickListener=s=>{const o=Vl(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(I(_e),I(ai),I(ie,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nve=0,ad=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new PA(t);return o.direction=o.direction||this._directionality.value,new Ave(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Nve++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ym)),new uve(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(I(Dve),I(OA),I(Da),I(Rve),I(Pve),I(Qe),I(ie),I(_e),I(Bl),I(Ra),I(Ove))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})();const Bve={provide:new B("cdk-connected-overlay-scroll-strategy"),deps:[ad],useFactory:function Lve(n){return()=>n.scrollStrategies.reposition()}};let w3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[ad,Bve],imports:[[wp,c3,h3],h3]}),n})();const Uve=["mat-menu-item",""];function Vve(n,e){1&n&&(function JP(){re.lFrame.currentNamespace="svg"}(),M(0,"svg",2),te(1,"polygon",3),x())}const E3=["*"];function jve(n,e){if(1&n){const t=yi();M(0,"div",0),Le("keydown",function(i){return _n(t),Mt()._handleKeydown(i)})("click",function(){return _n(t),Mt().closed.emit("click")})("@transformMenu.start",function(i){return _n(t),Mt()._onAnimationStart(i)})("@transformMenu.done",function(i){return _n(t),Mt()._onAnimationDone(i)}),M(1,"div",1),Qt(2),x()()}if(2&n){const t=Mt();ge("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),ar("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const zv={transformMenu:dv("transformMenu",[td("void",Lr({opacity:0,transform:"scale(0.8)"})),Rl("void => enter",kl("120ms cubic-bezier(0, 0, 0.2, 1)",Lr({opacity:1,transform:"scale(1)"}))),Rl("* => void",kl("100ms 25ms linear",Lr({opacity:0})))]),fadeInItems:dv("fadeInItems",[td("showing",Lr({opacity:1})),Rl("void => *",[Lr({opacity:0}),kl("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Hve=new B("MatMenuContent"),NA=new B("MAT_MENU_PANEL"),$ve=OG(PG(class{}));let Np=(()=>{class n extends $ve{constructor(t,r,i,s,o){var a;super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new me,this._focused=new me,this._highlighted=!1,this._triggersSubmenu=!1,null===(a=null==s?void 0:s.addItem)||void 0===a||a.call(s,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),i=r.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(_e),v(Dp),v(NA,8),v(As))},n.\u0275cmp=Ue({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&Le("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(ar("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),xr("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Gr],attrs:Uve,ngContentSelectors:E3,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(Ar(),Qt(0),te(1,"div",0),Bt(2,Vve,2,0,"svg",1)),2&t&&(ee(1),ge("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),ee(1),ge("ngIf",r._triggersSubmenu))},directives:[_A,ks],encapsulation:2,changeDetection:0}),n})();const C3=new B("mat-menu-default-options",{providedIn:"root",factory:function zve(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Wve=0,Fp=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Aa,this._tabSubscription=bt.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new me,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new ct,this.close=this.closed,this.panelId="mat-menu-panel-"+Wve++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=fs(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=fs(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new rye(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Dl(this._directDescendantItems),qs(t=>oc(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const i=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=i.activeItem)||void 0===r?void 0:r._hasFocus())){const s=t.toArray(),o=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[o]&&!s[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Dl(this._directDescendantItems),qs(r=>oc(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:Pv(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Bn(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){var i;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===r,s["mat-menu-below"]="below"===r,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Dl(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(ie),v(C3),v(As))},n.\u0275dir=Pe({type:n,contentQueries:function(t,r,i){if(1&t&&(Gi(i,Hve,5),Gi(i,Np,5),Gi(i,Np,4)),2&t){let s;Rn(s=Pn())&&(r.lazyContent=s.first),Rn(s=Pn())&&(r._allItems=s),Rn(s=Pn())&&(r.items=s)}},viewQuery:function(t,r){if(1&t&&xa(wi,5),2&t){let i;Rn(i=Pn())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),I3=(()=>{class n extends Fp{constructor(t,r,i,s){super(t,r,i,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(ie),v(C3),v(As))},n.\u0275cmp=Ue({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&ar("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[nh([{provide:NA,useExisting:n}]),Gr],ngContentSelectors:E3,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(Ar(),Bt(0,jve,3,6,"ng-template"))},directives:[Rm],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[zv.transformMenu,zv.fadeInItems]},changeDetection:0}),n})();const T3=new B("mat-menu-scroll-strategy"),Gve={provide:T3,deps:[ad],useFactory:function qve(n){return()=>n.scrollStrategies.reposition()}},S3=kv({passive:!0});let Kve=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=bt.EMPTY,this._hoverSubscription=bt.EMPTY,this._menuCloseSubscription=bt.EMPTY,this._handleTouchStart=d=>{fA(d)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new ct,this.onMenuOpen=this.menuOpened,this.menuClosed=new ct,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Fp?o:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,S3),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,S3),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),i=r.positionStrategy;this._setPosition(i),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Fp&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Jn(this.menu.close)).subscribe(()=>{i.withLockedPosition(!1).reapplyLastPosition(),i.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof Fp?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(gt(i=>"void"===i.toState),Bn(1),Jn(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new PA({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const i="start"===r.connectionPair.overlayX?"after":"before",s="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(i,s)):this.menu.setPositionClasses(i,s)})}_setPosition(t){let[r,i]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,o]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[a,l]=[s,o],[c,u]=[r,i],d=0;this.triggersSubmenu()?(u=r="before"===this.menu.xPosition?"start":"end",i=c="end"===r?"start":"end",d="bottom"===s?8:-8):this.menu.overlapTrigger||(a="top"===s?"bottom":"top",l="top"===o?"bottom":"top"),t.withPositions([{originX:r,originY:a,overlayX:c,overlayY:s,offsetY:d},{originX:i,originY:a,overlayX:u,overlayY:s,offsetY:d},{originX:r,originY:l,overlayX:c,overlayY:o,offsetY:-d},{originX:i,originY:l,overlayX:u,overlayY:o,offsetY:-d}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return oc(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:G(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(gt(o=>o!==this._menuItemInstance),gt(()=>this._menuOpen)):G(),r)}_handleMousedown(t){hA(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(gt(t=>t===this._menuItemInstance&&!t.disabled),a3(0,CA)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Fp&&this.menu._isAnimating?this.menu._animationDone.pipe(Bn(1),a3(0,CA),Jn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new SA(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(v(ad),v(qe),v(Mr),v(T3),v(NA,8),v(Np,10),v(Bl,8),v(Dp),v(ie))},n.\u0275dir=Pe({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&Le("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),2&t&&ar("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),A3=(()=>{class n extends Kve{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=uw(n)))(r||n)}}(),n.\u0275dir=Pe({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Gr]}),n})(),Wv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[Gve],imports:[[Pa,qt,UG,w3],Op,qt]}),n})();const Yve=["mat-button",""],Qve=["*"],Zve=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Jve=gA(PG(OG(class{constructor(n){this._elementRef=n}})));let Xs=(()=>{class n extends Jve{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Zve)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(Dp),v(Ll,8))},n.\u0275cmp=Ue({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&xa(_A,5),2&t){let i;Rn(i=Pn())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(ar("disabled",r.disabled||null),xr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Gr],attrs:Yve,ngContentSelectors:Qve,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(Ar(),M(0,"span",0),Qt(1),x(),te(2,"span",1)(3,"span",2)),2&t&&(ee(2),xr("mat-button-ripple-round",r.isRoundButton||r.isIconButton),ge("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[_A],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[UG,qt],qt]}),n})();function ebe(n,e){if(1&n&&te(0,"img",11),2&n){const t=Mt();yo("src",t.post_details.url,pi),zc("alt","post_details by ",t.post_details.username,"")}}function tbe(n,e){1&n&&te(0,"video",12),2&n&&yo("src",Mt().post_details.url,pi)}let nbe=(()=>{class n{constructor(t,r,i){this.postserv=t,this.postprofserv=r,this.router=i}ngOnInit(){this.post_details=this.postprofserv.post_details}ondel(t,r){confirm("You Sure ? ").valueOf()&&this.postserv.delete_post(t,r)}}return n.\u0275fac=function(t){return new(t||n)(v(kS),v(Iq),v(yt))},n.\u0275cmp=Ue({type:n,selectors:[["app-post-view"]],decls:28,vars:6,consts:[[1,"maindiv"],[1,"example-card"],[1,"example-spacer"],[2,"float","right"],[3,"matMenuTriggerFor"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-button",""],["yPosition","above","xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,r){if(1&t&&(M(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),z(4),x(),te(5,"span",2),M(6,"div",3)(7,"mat-icon",4),z(8,"menu"),x()(),te(9,"mat-card-subtitle"),x(),Bt(10,ebe,1,2,"img",5),Bt(11,tbe,1,1,"video",6),M(12,"mat-card-content")(13,"b"),z(14),x(),z(15),x(),M(16,"mat-card-actions")(17,"button",7),z(18,"LIKE"),x(),M(19,"button",7),z(20,"SHARE"),x()()()(),M(21,"mat-menu",8,9)(23,"button",10),Le("click",function(){return r.ondel(r.post_details.keymail,r.post_details.name)}),M(24,"mat-icon"),z(25,"delete"),x(),M(26,"span"),z(27,"Delete"),x()()()),2&t){const i=Yt(22);ee(4),Yr("",r.post_details.username," "),ee(3),ge("matMenuTriggerFor",i),ee(3),ge("ngIf","image"===r.post_details.fileType),ee(1),ge("ngIf","video"===r.post_details.fileType),ee(3),Xd(r.post_details.username),ee(1),Yr(" \xa0 \xa0 ",r.post_details.caption," ")}},directives:[vA,zG,jG,Mp,A3,HG,ks,yA,VG,$G,Xs,I3,Np],styles:["mat-card-title[_ngcontent-%COMP%]{display:flex;float:right}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-card[_ngcontent-%COMP%]{width:30%;height:60%;background:linear-gradient(184deg,rgba(255,179,246,1) 7%,rgba(247,71,71,1) 100%);box-shadow:5px 10px 12px #a815a8}.example-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #a81541}.maindiv[_ngcontent-%COMP%]{padding:20px;float:none;justify-content:center;display:flex;height:100%;background-color:#e6d3d3}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border:5px groove rgb(65,0,0);border-radius:5px}video[_ngcontent-%COMP%]{width:500px;height:300px}"]}),n})();function rbe(n,e){}class FA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const ibe={dialogContainer:dv("dialogContainer",[td("void, exit",Lr({opacity:0,transform:"scale(0.7)"})),td("enter",Lr({transform:"none"})),Rl("* => enter",Dq([kl("150ms cubic-bezier(0, 0, 0.2, 1)",Lr({transform:"none",opacity:1})),xq("@*",Aq(),{optional:!0})])),Rl("* => void, * => exit",Dq([kl("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Lr({opacity:0})),xq("@*",Aq(),{optional:!0})]))])};let sbe=(()=>{class n extends AA{constructor(t,r,i,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new ct,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=sA())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=sA(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=sA();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(AG),v(As),v(_e,8),v(FA),v(dA),v(ie),v(Dp))},n.\u0275dir=Pe({type:n,viewQuery:function(t,r){if(1&t&&xa(l3,7),2&t){let i;Rn(i=Pn())&&(r._portalOutlet=i.first)}},features:[Gr]}),n})(),obe=(()=>{class n extends sbe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=uw(n)))(r||n)}}(),n.\u0275cmp=Ue({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&tm("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(rm("id",r._id),ar("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),im("@dialogContainer",r._state))},features:[Gr],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&Bt(0,rbe,0,0,"ng-template",0)},directives:[l3],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[ibe.dialogContainer]}}),n})(),abe=0;class Lp{constructor(e,t,r="mat-dialog-"+abe++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new me,this._afterClosed=new me,this._beforeClosed=new me,this._state=0,t._id=r,t._animationStateChanged.pipe(gt(i=>"opened"===i.state),Bn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(gt(i=>"closed"===i.state),Bn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(gt(i=>27===i.keyCode&&!this.disableClose&&!Pv(i))).subscribe(i=>{i.preventDefault(),LA(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():LA(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(gt(t=>"closing"===t.state),Bn(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function LA(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const x3=new B("MatDialogData"),lbe=new B("mat-dialog-default-options"),M3=new B("mat-dialog-scroll-strategy"),ube={provide:M3,deps:[ad],useFactory:function cbe(n){return()=>n.scrollStrategies.block()}};let dbe=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new me,this._afterOpenedAtThisLevel=new me,this._ariaHiddenElements=new Map,this.afterAllClosed=lS(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Dl(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function hbe(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new FA),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),o=this._attachDialogContent(t,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new PA({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const s=Qe.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:FA,useValue:r}]}),o=new DA(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,r,i,s){const o=new this._dialogRefConstructor(i,r,s.id);if(t instanceof wi)r.attachTemplatePortal(new SA(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,r),l=r.attachComponentPortal(new DA(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,r,i){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!s||!s.get(Bl,null,ne.Optional))&&o.push({provide:Bl,useValue:{value:t.direction,change:G()}}),Qe.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){Jg()},n.\u0275dir=Pe({type:n}),n})(),Bp=(()=>{class n extends dbe{constructor(t,r,i,s,o,a,l,c){super(t,r,s,a,l,o,Lp,obe,x3,c)}}return n.\u0275fac=function(t){return new(t||n)(I(ad),I(Qe),I(Ra,8),I(lbe,8),I(M3),I(n,12),I(OA),I(Ll,8))},n.\u0275prov=$({token:n,factory:n.\u0275fac}),n})(),fbe=0,pbe=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=k3(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){LA(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(v(Lp,8),v(qe),v(Bp))},n.\u0275dir=Pe({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&Le("click",function(s){return r._onButtonClick(s)}),2&t&&ar("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Li]}),n})(),gbe=(()=>{class n{constructor(t,r,i){this._dialogRef=t,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+fbe++}ngOnInit(){this._dialogRef||(this._dialogRef=k3(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(v(Lp,8),v(qe),v(Bp))},n.\u0275dir=Pe({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&rm("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),mbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),_be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function k3(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let BA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[Bp,ube],imports:[[w3,c3,qt],qt]}),n})(),ybe=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this.data=r,this.udserv=i,this.app=Yi(kr_firebase)}ngOnInit(){this.userdata=this.data}edit_user_details(t,r,i){this.userdata.name=t,this.userdata.username=r,this.userdata.bio=i,this.udserv.set_after_edit(this.userdata.email,this.udserv.username,this.userdata)}}return n.\u0275fac=function(t){return new(t||n)(v(Lp),v(x3),v(Tl))},n.\u0275cmp=Ue({type:n,selectors:[["app-EditProfileDialog"]],decls:18,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"value"],["fullName",""],["username",""],["bio",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(t,r){if(1&t){const i=yi();M(0,"h1",0),z(1,"User Details"),x(),M(2,"div",1),z(3," Full Name: "),te(4,"input",2,3),z(6," Username: "),te(7,"input",2,4)(9,"br"),z(10," User Bio: "),te(11,"textarea",2,5),x(),M(13,"div",6)(14,"button",7),z(15,"Cancel"),x(),M(16,"button",8),Le("click",function(){_n(i);const o=Yt(5),a=Yt(8),l=Yt(12);return r.edit_user_details(o.value,a.value,l.value)}),z(17,"Save"),x()()}2&t&&(ee(4),ge("value",r.userdata.name),ee(3),ge("value",r.userdata.username),ee(4),ge("value",r.userdata.bio))},directives:[gbe,mbe,_be,Xs,pbe],styles:[""]}),n})();const R3=["*"],vbe=["content"];function bbe(n,e){if(1&n){const t=yi();M(0,"div",2),Le("click",function(){return _n(t),Mt()._onBackdropClicked()}),x()}2&n&&xr("mat-drawer-shown",Mt()._isShowingBackdrop())}function wbe(n,e){1&n&&(M(0,"mat-drawer-content"),Qt(1,2),x())}const Ebe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Cbe=["mat-drawer","mat-drawer-content","*"],Ibe={transformDrawer:dv("transform",[td("open, open-instant",Lr({transform:"none",visibility:"visible"})),td("void",Lr({"box-shadow":"none",visibility:"hidden"})),Rl("void => open-instant",kl("0ms")),Rl("void <=> open, open-instant => void",kl("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Tbe=new B("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Dbe(){return!1}}),P3=new B("MAT_DRAWER_CONTAINER");let UA=(()=>{class n extends MA{constructor(t,r,i,s,o){super(i,s,o),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(v(As),v(cg(()=>jA)),v(qe),v(xA),v(ie))},n.\u0275cmp=Ue({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&IE("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[nh([{provide:MA,useExisting:n}]),Gr],ngContentSelectors:R3,decls:1,vars:0,template:function(t,r){1&t&&(Ar(),Qt(0))},encapsulation:2,changeDetection:0}),n})(),VA=(()=>{class n{constructor(t,r,i,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new me,this._animationEnd=new me,this._animationState="void",this.openedChange=new ct(!0),this._openedStream=this.openedChange.pipe(gt(u=>u),be(()=>{})),this.openedStart=this._animationStarted.pipe(gt(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),IA(void 0)),this._closedStream=this.openedChange.pipe(gt(u=>!u),be(()=>{})),this.closedStart=this._animationStarted.pipe(gt(u=>u.fromState!==u.toState&&"void"===u.toState),IA(void 0)),this._destroyed=new me,this.onPositionChanged=new ct,this._modeChanged=new me,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Rp(this._elementRef.nativeElement,"keydown").pipe(gt(u=>27===u.keyCode&&!this.disableClose&&!Pv(u)),Jn(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(EG((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=fs(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=fs(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(fs(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Bn(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(AG),v(Dp),v(ai),v(ie),v(dA),v(_e,8),v(P3,8))},n.\u0275cmp=Ue({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&xa(vbe,5),2&t){let i;Rn(i=Pn())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&tm("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(ar("align",null),im("@transform",r._animationState),xr("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:R3,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(Ar(),M(0,"div",0,1),Qt(2),x())},directives:[MA],encapsulation:2,data:{animation:[Ibe.transformDrawer]},changeDetection:0}),n})(),jA=(()=>{class n{constructor(t,r,i,s,o,a=!1,l){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Aa,this.backdropClick=new ct,this._destroyed=new me,this._doCheckSubject=new me,this._contentMargins={left:null,right:null},this._contentMarginChanges=new me,t&&t.change.pipe(Jn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Jn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=fs(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:fs(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Dl(this._allDrawers),Jn(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Dl(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(wG(10),Jn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(gt(r=>r.fromState!==r.toState),Jn(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Jn(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Jn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Bn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Jn(oc(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(v(Bl,8),v(qe),v(ie),v(As),v(kA),v(Tbe),v(Ll,8))},n.\u0275cmp=Ue({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(Gi(i,UA,5),Gi(i,VA,5)),2&t){let s;Rn(s=Pn())&&(r._content=s.first),Rn(s=Pn())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&xa(UA,5),2&t){let i;Rn(i=Pn())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&xr("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[nh([{provide:P3,useExisting:n}])],ngContentSelectors:Cbe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(Ar(Ebe),Bt(0,bbe,1,2,"div",0),Qt(1),Qt(2,1),Bt(3,wbe,2,0,"mat-drawer-content",1)),2&t&&(ge("ngIf",r.hasBackdrop),ee(3),ge("ngIf",!r._content))},directives:[UA,ks],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),Gv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[Pa,qt,Op],Op,qt]}),n})();const O3=["*"];class Abe{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(r=>this._trackTile(r))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new xbe(this.rowIndex,t)}_findMatchingGap(e){let t=-1,r=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(r=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(t)))}while(r-t<e||0==r);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let r=0;r<t.colspan;r++)this.tracker[e+r]=t.rowspan}}class xbe{constructor(e,t){this.row=e,this.col=t}}const N3=new B("MAT_GRID_LIST");let F3=(()=>{class n{constructor(t,r){this._element=t,this._gridList=r,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(uA(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(uA(t))}_setStyle(t,r){this._element.nativeElement.style[t]=r}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(N3,8))},n.\u0275cmp=Ue({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,r){2&t&&ar("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:O3,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,r){1&t&&(Ar(),M(0,"div",0),Qt(1),x())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})();const Mbe=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class HA{constructor(){this._rows=0,this._rowspan=0}init(e,t,r,i){this._gutterSize=L3(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=r,this._direction=i}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":$l(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,r){let i=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,r,i,s),this.setRowStyles(e,t,i,s)}setColStyles(e,t,r,i){let s=this.getBaseTileSize(r,i);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",$l(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class kbe extends HA{constructor(e){super(),this.fixedRowHeight=e}init(e,t,r,i){super.init(e,t,r,i),this.fixedRowHeight=L3(this.fixedRowHeight),Mbe.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",$l(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",$l(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class Rbe extends HA{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,r,i){this.baseTileHeight=this.getBaseTileSize(r/this.rowHeightRatio,i),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",$l(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",$l(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class Pbe extends HA{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",$l(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function $l(n){return`calc(${n})`}function L3(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let Nbe=(()=>{class n{constructor(t,r){this._element=t,this._dir=r,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(uA(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const r=`${null==t?"":t}`;r!==this._rowHeight&&(this._rowHeight=r,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new Pbe:t&&t.indexOf(":")>-1?new Rbe(t):new kbe(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new Abe);const t=this._tileCoordinator,r=this._tiles.filter(s=>!s._gridList||s._gridList===this),i=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,r),this._tileStyler.init(this.gutterSize,t,this.cols,i),r.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(Bl,8))},n.\u0275cmp=Ue({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,r,i){if(1&t&&Gi(i,F3,5),2&t){let s;Rn(s=Pn())&&(r._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,r){2&t&&ar("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[nh([{provide:N3,useExisting:n}])],ngContentSelectors:O3,decls:2,vars:0,template:function(t,r){1&t&&(Ar(),M(0,"div"),Qt(1),x())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),Fbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[NG,qt],NG,qt]}),n})();function Lbe(n,e){if(1&n&&te(0,"img",3),2&n){const t=Mt();yo("src",t.post_details.url,pi),zc("alt","post_details by ",t.post_details.username,"")}}function Bbe(n,e){1&n&&te(0,"video",4),2&n&&yo("src",Mt().post_details.url,pi)}let Ube=(()=>{class n{constructor(t,r){this.router=t,this.profserv=r}ngOnInit(){}sendtoview(){this.profserv.post_details=this.post_details,this.router.navigate(["ViewPost"])}}return n.\u0275fac=function(t){return new(t||n)(v(yt),v(Iq))},n.\u0275cmp=Ue({type:n,selectors:[["app-post-thumbnail"]],inputs:{post_details:"post_details"},decls:3,vars:2,consts:[[3,"click"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,r){1&t&&(M(0,"div",0),Le("click",function(){return r.sendtoview()}),Bt(1,Lbe,1,2,"img",1),Bt(2,Bbe,1,1,"video",2),x()),2&t&&(ee(1),ge("ngIf","image"===r.post_details.fileType),ee(1),ge("ngIf","video"===r.post_details.fileType))},directives:[ks,yA],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px}video[_ngcontent-%COMP%]{width:500px;height:300px}div[_ngcontent-%COMP%]:hover{box-shadow:5px 15px 10px #888}"]}),n})();function Vbe(n,e){if(1&n&&(M(0,"mat-grid-tile"),te(1,"app-post-thumbnail",2),x()),2&n){const t=e.$implicit;ee(1),ge("post_details",t)}}let jbe=(()=>{class n{constructor(){this.fb_db=Jr.firestore()}ngOnInit(){this.user_posts()}user_posts(){var t=this;return g(function*(){t.post_list=[],(yield t.fb_db.collection("posts_metadata").get()).forEach(s=>{s.data().keymail==t.keymail&&t.post_list.push(s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["app-post_grid"]],inputs:{keymail:"keymail"},decls:2,vars:1,consts:[["cols","3","rowHeight","2:1"],[4,"ngFor","ngForOf"],[3,"post_details"]],template:function(t,r){1&t&&(M(0,"mat-grid-list",0),Bt(1,Vbe,2,1,"mat-grid-tile",1),x()),2&t&&(ee(1),ge("ngForOf",r.post_list))},directives:[Nbe,Pm,F3,Ube],styles:[""]}),n})(),Hbe=(()=>{class n{constructor(t,r,i,s){this.dialog=t,this.router=r,this.user_data_service=i,this.location=s,this.showFiller=!1,this.fbapp=Jr.initializeApp(kr_firebase),this.fb_db=Jr.firestore(),this.keymail=this.user_data_service.email.replace(".","")}ngOnInit(){this.fullName=this.user_data_service.name,this.userName=this.user_data_service.username,this.bio=this.user_data_service.fetch_userdata_with_keymail(this.keymail).bio}openDialog(){this.dialog.open(ybe,{width:"250px",data:this.user_data_service.fetch_userdata_with_keymail(this.keymail)})}go_to_Add_Post(){this.router.navigate(["/add-post"])}go_back(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(v(Bp),v(yt),v(Tl),v(Ra))},n.\u0275cmp=Ue({type:n,selectors:[["app-profile"]],decls:45,vars:4,consts:[[1,"example-container"],["mode","side",1,"example-sidenav",2,"background-color","bisque"],["drawer",""],["src","/assets/images/prj_logo_colour.png","alt","Profile Picture","height","100px","width","100px"],["mat-raised-button","",1,"profile-button",3,"click"],["mat-raised-button","",1,"profile-button"],[2,"text-align","center"],[1,"mat_icon_left-arrow",3,"click"],[1,"mat_icon_button",3,"click"],[1,"col-1"],[1,"matcard_col1"],[1,"imgdiv"],["src","/assets/images/prj_logo_black.png","alt","Profile Picture","height","200px","width","200px"],["align","center",1,"col-2"],[1,"matcard_col2"],["align","center"],[1,"main_scroll"],[3,"keymail"]],template:function(t,r){if(1&t){const i=yi();M(0,"mat-drawer-container",0)(1,"mat-drawer",1,2),te(3,"img",3)(4,"br")(5,"br"),M(6,"button",4),Le("click",function(){return r.openDialog()}),z(7,"Edit Profile"),x(),te(8,"br")(9,"br"),M(10,"button",4),Le("click",function(){return r.go_to_Add_Post()}),z(11,"Add Post"),x(),te(12,"br")(13,"br"),M(14,"button",5),z(15,"Settings"),x(),te(16,"br")(17,"br"),x(),M(18,"div")(19,"div",6)(20,"mat-icon",7),Le("click",function(){return r.go_back()}),z(21,"keyboard_arrow_left"),x(),M(22,"mat-icon",8),Le("click",function(){return _n(i),Yt(2).toggle()}),z(23,"more_vert"),x(),z(24),te(25,"hr"),x(),M(26,"div")(27,"div")(28,"div",9)(29,"mat-card",10)(30,"div",11),te(31,"img",12),x()()(),M(32,"div",13)(33,"mat-card",14)(34,"div"),z(35),x(),te(36,"br")(37,"br"),M(38,"div"),z(39),x()()()()(),M(40,"div",15)(41,"h3"),z(42," Posts "),x(),M(43,"div",16),te(44,"app-post_grid",17),x()()()()}2&t&&(ee(24),Yr(" ",r.fullName," "),ee(11),Yr(" ",r.userName," "),ee(4),Yr(" User Bio : ",r.bio," "),ee(5),ge("keymail",r.keymail))},directives:[jA,VA,Xs,Mp,vA,jbe],styles:[".col-1[_ngcontent-%COMP%]{max-width:28%;float:left;height:250px;margin:10px}.col-2[_ngcontent-%COMP%]{float:left;max-width:68%;height:250px;margin:10px}img[_ngcontent-%COMP%]{border-radius:100%}.imgdiv[_ngcontent-%COMP%]{margin:calc(24% - 20px)}.matcard_col1[_ngcontent-%COMP%], .matcard_col2[_ngcontent-%COMP%]{height:250px;background-color:bisque}.example-container[_ngcontent-%COMP%]{width:100%;height:100%}.example-sidenav-content[_ngcontent-%COMP%]{height:100%}.example-sidenav[_ngcontent-%COMP%]{padding:30px}.mat-icon-left-arrow[_ngcontent-%COMP%]{background-color:#fff0;left:.1px;position:absolute;cursor:pointer;border:none}.mat_icon_button[_ngcontent-%COMP%]{background-color:#fff0;left:3px;position:absolute;cursor:pointer;border:none}.profile-button[_ngcontent-%COMP%]{width:100px;height:40px}"]}),n})();function $be(n,e){if(1&n&&te(0,"img",4),2&n){const t=Mt();yo("src",t.post_details.url,pi),zc("alt","post_details by ",t.post_details.username,"")}}function zbe(n,e){1&n&&te(0,"video",5),2&n&&yo("src",Mt().post_details.url,pi)}let Wbe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["app-post-card"]],inputs:{post_details:"post_details"},decls:16,vars:5,consts:[[1,"example-card"],["mat-card-image","",3,"src","alt",4,"ngIf"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src",4,"ngIf"],["mat-button",""],["mat-card-image","",3,"src","alt"],["onmouseover","this.play()","onmouseout","this.pause();this.currentTime=0;","loop","",3,"src"]],template:function(t,r){1&t&&(M(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),z(3),x(),te(4,"mat-card-subtitle"),x(),Bt(5,$be,1,2,"img",1),Bt(6,zbe,1,1,"video",2),M(7,"mat-card-content")(8,"b"),z(9),x(),z(10),x(),M(11,"mat-card-actions")(12,"button",3),z(13,"LIKE"),x(),M(14,"button",3),z(15,"SHARE"),x()()()),2&t&&(ee(3),Xd(r.post_details.username),ee(2),ge("ngIf","image"===r.post_details.fileType),ee(1),ge("ngIf","video"===r.post_details.fileType),ee(3),Xd(r.post_details.username),ee(1),Yr(" \xa0 \xa0 ",r.post_details.caption," "))},directives:[vA,zG,jG,HG,ks,yA,VG,$G,Xs],styles:["img[_ngcontent-%COMP%]{width:500px;height:300px;margin:5px;border:5px groove rgb(65,0,0);border-radius:5px}video[_ngcontent-%COMP%]{width:500px;height:300px}mat-card-content[_ngcontent-%COMP%]{font-size:large}mat-card[_ngcontent-%COMP%]{border:1px solid black;width:-moz-fit-content;width:fit-content;padding:auto;background:linear-gradient(184deg,rgb(252,126,237) 7%,rgb(252,104,104) 100%)}mat-card[_ngcontent-%COMP%]:hover{box-shadow:5px 10px 12px #8f4a78}mat-card-content[_ngcontent-%COMP%]{color:navy}b[_ngcontent-%COMP%]{color:#520055}"]}),n})();function qbe(n,e){if(1&n&&(M(0,"div",2),te(1,"app-post-card",3),x()),2&n){const t=e.$implicit;ee(1),ge("post_details",t)}}let Gbe=(()=>{class n{constructor(t,r){this.post_service=t,this.router=r,this.metadata=[]}ngOnInit(){this.all_posts()}all_posts(){var t=this;return g(function*(){Jr.initializeApp(kr_firebase);const i=Jr.firestore();t.metadata=[],(yield i.collection("posts_metadata").get()).forEach(a=>{t.metadata.push(a.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(v(kS),v(yt))},n.\u0275cmp=Ue({type:n,selectors:[["app-post_list"]],decls:2,vars:1,consts:[[1,"main_scroll"],["class","innerdiv",4,"ngFor","ngForOf"],[1,"innerdiv"],[3,"post_details"]],template:function(t,r){1&t&&(M(0,"div",0),Bt(1,qbe,2,1,"div",1),x()),2&t&&(ee(1),ge("ngForOf",r.metadata))},directives:[Pm,Wbe],styles:[".main_scroll[_ngcontent-%COMP%]{max-height:90%;overflow-y:scroll;padding:10px;background-color:#e6d3d3}.innerdiv[_ngcontent-%COMP%]{padding:20px;float:none;justify-content:center;display:flex}.main_scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),n})(),Kbe=(()=>{class n{constructor(t){this.dialogRef=t}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(v(Lp))},n.\u0275cmp=Ue({type:n,selectors:[["app-ConfirmDialog"]],decls:9,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,r){1&t&&(M(0,"h1",0),z(1,"Sure ?"),x(),M(2,"div",1),z(3," You really wanna delete the chat ?\n"),x(),M(4,"div",2)(5,"button",3),Le("click",function(){return r.onDismiss()}),z(6,"No"),x(),M(7,"button",4),Le("click",function(){return r.onConfirm()}),z(8,"Yes"),x()())},directives:[Xs],styles:[""]}),n})();const Ybe=["chat"],Qbe=function(n,e){return{righty:n,lefty:e}},Xbe=function(n,e){return{s1:n,s2:e}};function Zbe(n,e){if(1&n){const t=yi();M(0,"div")(1,"div",14)(2,"div",14)(3,"b"),z(4),M(5,"mat-icon",15),Le("click",function(){const s=_n(t).$implicit;return Mt().delete_chat(s.key)}),z(6,"delete"),x()(),te(7,"br"),z(8),x(),te(9,"br"),x()()}if(2&n){const t=e.$implicit,r=Mt();ee(1),ge("ngClass",hm(4,Qbe,r.username==t.username,r.username!=t.username)),ee(1),ge("ngClass",hm(7,Xbe,r.username==t.username,r.username!=t.username)),ee(2),Yr("",t.username," "),ee(4),Yr(" ",t.chat," ")}}let Jbe=(()=>{class n{constructor(t){this.dialog=t,this.username="",this.x=[],this.all_chats=[],this.app=Yi(kr_firebase),this.database=ta(this.app)}ngOnInit(){ip(Pi(this.database,"/Chats"),r=>{this.x=[],r.forEach(i=>{const s=i.val();s.key=i.key,this.x.push(s)})})}add_to_chat(t){this.all_chats.push(t);let i=function zhe(n,e){n=pe(n),cs("push",n._path),ls("push",e,n._path,!0);const t=nW(n._repo),r=Jue(t),i=Ku(n,r),s=Ku(n,r);let o;return o=null!=e?Yu(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(Pi(this.database,"Chats/"));""==t?alert("Trying to send empty text!"):(Yu(i,{username:this.username,chat:t}),this.chat_line.nativeElement.value="",ip(Pi(this.database,"/Chats"),o=>{this.x=[],o.forEach(a=>{const l=a.val();this.x.push(l),l.key=a.key})}))}delete_chat(t){this.dialog.open(Kbe,{width:"250px"}).afterClosed().subscribe(i=>{i&&function Whe(n){cs("remove",n._path),Yu(n,null)}(Pi(this.database,"/Chats/"+t+"/"))})}ngOnChanges(){ip(Pi(this.database,"/Chats"),r=>{this.x=[],r.forEach(i=>{const s=i.val();this.x.push(s),s.key=i.key})})}}return n.\u0275fac=function(t){return new(t||n)(v(Bp))},n.\u0275cmp=Ue({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(1&t&&xa(Ybe,5),2&t){let i;Rn(i=Pn())&&(r.chat_line=i.first)}},inputs:{username:"username"},features:[Li],decls:19,vars:2,consts:[[1,"example-container"],["mode","push","hasBackdrop","true","position","end",1,"chat_sidenav"],["drawer",""],[1,"chat_title"],["mat-fab","",1,"back-but",3,"click"],[2,"cursor","pointer"],[1,"msgbox"],[4,"ngFor","ngForOf"],[1,"sendmsg"],["placeholder","Enter your text.....","id","chat_line",2,"width","max",3,"keyup.enter"],["chat",""],[3,"click"],[1,"example-sidenav-content"],["type","button","mat-button","",1,"chat-button",3,"disabled","click"],[3,"ngClass"],[2,"cursor","pointer",3,"click"]],template:function(t,r){if(1&t){const i=yi();M(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"button",4),Le("click",function(){return _n(i),Yt(2).toggle()}),M(5,"mat-icon",5),z(6,"navigate_next"),x()()(),M(7,"div",6),Bt(8,Zbe,10,10,"div",7),te(9,"br"),x(),M(10,"div",8)(11,"input",9,10),Le("keyup.enter",function(){_n(i);const o=Yt(12);return r.add_to_chat(o.value)}),x(),M(13,"button",11),Le("click",function(){_n(i);const o=Yt(12);return r.add_to_chat(o.value)}),M(14,"mat-icon",5),z(15,"send"),x()()()(),M(16,"div",12)(17,"button",13),Le("click",function(){return _n(i),Yt(2).toggle()}),z(18," Open Chats "),x()()()}2&t&&(ee(8),ge("ngForOf",r.x.slice().reverse()),ee(9),ge("disabled",""==r.username))},directives:[jA,VA,Mp,Pm,Rm],styles:[".s1[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#f7e8a2;border-radius:20px}.s2[_ngcontent-%COMP%]{color:#000;width:-moz-fit-content;width:fit-content;border:1px solid black;padding:10px;background-color:#e9a2f7;border-radius:20px}.s1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#c0f}.s2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#8f032d}.s1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:auto;width:50%}.s1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;color:red;float:right;font-size:120%}.s2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.sendmsg[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff}.sendmsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;width:75%;background-color:#fff;border:1px solid #fff}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1e8fff00;border:1px solid rgba(221,221,221,0);border-radius:50px;color:#c0f}.sendmsg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#869ca8}.hed[_ngcontent-%COMP%]{color:#000;text-align:center;size:large;position:fixed;background-color:#edc1ff;border-bottom:1px solid black}.msgbox[_ngcontent-%COMP%]{overflow-y:scroll;height:80vh;display:flex;flex-direction:column-reverse;background-color:#e25ab5}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.example-container[_ngcontent-%COMP%]{height:calc(100% - 47px);background-color:#e889f5;border-radius:20px}.chat_sidenav[_ngcontent-%COMP%]{width:100%}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.chat-button[_ngcontent-%COMP%]{border-radius:30px;cursor:pointer}.chat_title[_ngcontent-%COMP%]{display:flex;justify-content:right}.back-but[_ngcontent-%COMP%]{border-radius:30px}.lefty[_ngcontent-%COMP%]{float:left}.righty[_ngcontent-%COMP%]{float:right}"]}),n})();function ewe(n,e){if(1&n){const t=yi();M(0,"div",5,6)(2,"button",7),Le("click",function(){return _n(t),Mt().go_to_profile()}),z(3,"Profile"),x(),te(4,"br"),M(5,"button",8),z(6,"Add a Post"),x()()}if(2&n){const t=Mt();ee(2),ge("disabled",""==t.logged_in_user.username),ee(3),ge("disabled",""==t.logged_in_user.username)}}function twe(n,e){if(1&n&&(M(0,"div",9,10)(2,"h1"),z(3),x(),te(4,"app-chat",11),x()),2&n){const t=Mt();ee(3),Yr("Welcome ",t.logged_in_user.username,""),ee(1),ge("username",t.logged_in_user.username)}}const nwe=function(n,e){return{posts_col2:n,posts_col1:e}};let B3=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.ud=i,this.username=this.ud.username,this.email="",this.logged_in_user={username:""},this.app=Yi(kr_firebase),this.db=ta(this.app)}ngOnInit(){this.route.queryParamMap.subscribe(t=>this.email=t.get("email")),console.log("user_email:",this.ud.email),""==this.ud.email?console.log("Not Logged In"):this.fetch_user_details(this.ud.email)}fetch_user_details(t){let r=t.replace(".","");this.ud.fetch_userdata_with_keymail(r),this.logged_in_user=this.ud}ngOnChanges(){console.log("Changed")}go_to_profile(){this.router.navigate(["/profile"])}}return n.\u0275fac=function(t){return new(t||n)(v(na),v(yt),v(Tl))},n.\u0275cmp=Ue({type:n,selectors:[["app-home"]],features:[Li],decls:6,vars:6,consts:[[1,"main-row"],["class","prof_col",4,"ngIf"],[3,"ngClass"],["posts",""],["class","chat_col",4,"ngIf"],[1,"prof_col"],["settings",""],["mat-raised-button","",2,"cursor","pointer",3,"disabled","click"],["mat-raised-button","","routerLink","/add-post",2,"cursor","pointer",3,"disabled"],[1,"chat_col"],["chats",""],[3,"username"]],template:function(t,r){1&t&&(M(0,"div",0),Bt(1,ewe,7,2,"div",1),M(2,"div",2,3),te(4,"app-post_list"),x(),Bt(5,twe,5,2,"div",4),x()),2&t&&(ee(1),ge("ngIf",""!=r.logged_in_user.username),ee(1),ge("ngClass",hm(3,nwe,""==r.logged_in_user.username,""!=r.logged_in_user.username)),ee(3),ge("ngIf",""!=r.logged_in_user.username))},directives:[ks,Xs,_p,Rm,Gbe,Jbe],styles:['.main-row[_ngcontent-%COMP%]{width:100%}.prof_col[_ngcontent-%COMP%]{float:left;height:100vh;width:10%;background-color:#f58484}.posts_col1[_ngcontent-%COMP%]{float:left;height:100vh;width:60%}.posts_col2[_ngcontent-%COMP%]{float:left;height:100vh;width:100%}.chat_col[_ngcontent-%COMP%]{float:left;height:100vh;width:30%;background-color:#ffa0e7}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.chat_button[_ngcontent-%COMP%]{float:right}.prof_button[_ngcontent-%COMP%]{float:left}']}),n})();const rwe=function U3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},V3=new Zr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),j3=new Eo("@firebase/auth");function Kv(n,...e){j3.logLevel<=Se.ERROR&&j3.error(`Auth (${Ki}): ${n}`,...e)}function mr(n,...e){throw $A(n,...e)}function ps(n,...e){return $A(n,...e)}function H3(n,e,t){const r=Object.assign(Object.assign({},rwe()),{[e]:t});return new Zr("auth","Firebase",r).create(e,{appName:n.name})}function $A(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return V3.create(n,...e)}function P(n,e,...t){if(!n)throw $A(e,...t)}function gs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kv(e),new Error(e)}function la(n,e){n||gs(e)}const $3=new Map;function Zs(n){la(n instanceof Function,"Expected a class definition");let e=$3.get(n);return e?(la(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$3.set(n,e),e)}function Up(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function z3(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Vp{constructor(e,t){this.shortDelay=e,this.longDelay=t,la(t>e,"Short delay should be less than long delay!"),this.isMobile=xC()||UB()}get(){return function owe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function zA(){return"http:"===z3()||"https:"===z3()}()||MC()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function WA(n,e){la(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class W3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cwe=new Vp(3e4,6e4);function tn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function pn(n,e,t,r){return qA.apply(this,arguments)}function qA(){return qA=g(function*(n,e,t,r,i={}){return q3(n,i,g(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=_h(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),W3.fetch()(G3(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),qA.apply(this,arguments)}function q3(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=g(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lwe),e);try{const i=new uwe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw jp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw jp(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw jp(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw jp(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw H3(n,u,c);mr(n,u)}}catch(i){if(i instanceof cr)throw i;mr(n,"network-request-failed")}}),GA.apply(this,arguments)}function Js(n,e,t,r){return KA.apply(this,arguments)}function KA(){return KA=g(function*(n,e,t,r,i={}){const s=yield pn(n,e,t,r,i);return"mfaPendingCredential"in s&&mr(n,"multi-factor-auth-required",{_serverResponse:s}),s}),KA.apply(this,arguments)}function G3(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?WA(n.config,i):`${n.config.apiScheme}://${i}`}class uwe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ps(this.auth,"network-request-failed")),cwe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ps(n,e,r);return i.customData._tokenResponse=t,i}function YA(){return YA=g(function*(n,e){return pn(n,"POST","/v1/accounts:delete",e)}),YA.apply(this,arguments)}function fwe(n,e){return XA.apply(this,arguments)}function XA(){return XA=g(function*(n,e){return pn(n,"POST","/v1/accounts:lookup",e)}),XA.apply(this,arguments)}function Hp(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function ZA(){return ZA=g(function*(n,e=!1){const t=pe(n),r=yield t.getIdToken(e),i=Yv(r);P(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hp(JA(i.auth_time)),issuedAtTime:Hp(JA(i.iat)),expirationTime:Hp(JA(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),ZA.apply(this,arguments)}function JA(n){return 1e3*Number(n)}function Yv(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return Kv("JWT malformed, contained fewer than 3 sections"),null;try{const s=AC(r);return s?JSON.parse(s):(Kv("Failed to decode base64 JWT payload"),null)}catch(s){return Kv("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function eo(n,e){return ex.apply(this,arguments)}function ex(){return ex=g(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof cr&&mwe(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),ex.apply(this,arguments)}function mwe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class _we{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(g(function*(){yield t.iteration()}),r)}iteration(){var e=this;return g(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class K3{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hp(this.lastLoginAt),this.creationTime=Hp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $p(n){return tx.apply(this,arguments)}function tx(){return tx=g(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield eo(n,fwe(t,{idToken:r}));P(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?bwe(s.providerUserInfo):[],a=vwe(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K3(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),tx.apply(this,arguments)}function nx(){return nx=g(function*(n){const e=pe(n);yield $p(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),nx.apply(this,arguments)}function vwe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bwe(n){return n.map(e=>{var{providerId:t}=e,r=uP(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function rx(){return rx=g(function*(n,e){const t=yield q3(n,{},g(function*(){const r=_h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=G3(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",W3.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),rx.apply(this,arguments)}class zp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(void 0!==e.idToken,"internal-error"),P(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function gwe(n){const e=Yv(n);return P(e,"internal-error"),P(void 0!==e.exp,"internal-error"),P(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return g(function*(){return P(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return g(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function wwe(n,e){return rx.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new zp;return r&&(P("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(P("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(P("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zp,this.toJSON())}_performRefresh(){return gs("not implemented")}}function ca(n,e){P("string"==typeof n||void 0===n,"internal-error",{appName:e})}class zl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=uP(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _we(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new K3(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return g(function*(){const r=yield eo(t,t.stsTokenManager.getToken(t.auth,e));return P(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function pwe(n){return ZA.apply(this,arguments)}(this,e)}reload(){return function ywe(n){return nx.apply(this,arguments)}(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new zl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return g(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield $p(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return g(function*(){const t=yield e.getIdToken();return yield eo(e,function dwe(n,e){return YA.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,b=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:C,emailVerified:T,isAnonymous:R,providerData:U,stsTokenManager:Z}=t;P(C&&Z,e,"internal-error");const Ze=zp.fromJSON(this.name,Z);P("string"==typeof C,e,"internal-error"),ca(d,e.name),ca(h,e.name),P("boolean"==typeof T,e,"internal-error"),P("boolean"==typeof R,e,"internal-error"),ca(f,e.name),ca(p,e.name),ca(m,e.name),ca(_,e.name),ca(b,e.name),ca(y,e.name);const Nt=new zl({uid:C,auth:e,email:h,emailVerified:T,displayName:d,isAnonymous:R,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:Ze,createdAt:b,lastLoginAt:y});return U&&Array.isArray(U)&&(Nt.providerData=U.map(tr=>Object.assign({},tr))),_&&(Nt._redirectEventId=_),Nt}static _fromIdTokenResponse(e,t,r=!1){return g(function*(){const i=new zp;i.updateFromServerResponse(t);const s=new zl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $p(s),s})()}}const Y3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(t,r){var i=this;return g(function*(){i.storage[t]=r})()}_get(t){var r=this;return g(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return g(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Qv(n,e,t){return`firebase:${n}:${e}:${t}`}class cd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Qv(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return g(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?zl._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return g(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(function*(){if(!t.length)return new cd(Zs(Y3),e,r);const i=(yield Promise.all(t.map(function(){var c=g(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Zs(Y3);const o=Qv(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=zl._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=g(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new cd(s,e,r)):new cd(s,e,r)})()}}function Q3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t4(e))return"Blackberry";if(n4(e))return"Webos";if(ix(e))return"Safari";if((e.includes("chrome/")||Z3(e))&&!e.includes("edge/"))return"Chrome";if(e4(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function X3(n=Rt()){return/firefox\//i.test(n)}function ix(n=Rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z3(n=Rt()){return/crios\//i.test(n)}function J3(n=Rt()){return/iemobile/i.test(n)}function e4(n=Rt()){return/android/i.test(n)}function t4(n=Rt()){return/blackberry/i.test(n)}function n4(n=Rt()){return/webos/i.test(n)}function Xv(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r4(n=Rt()){return Xv(n)||e4(n)||n4(n)||t4(n)||/windows phone/i.test(n)||J3(n)}function i4(n,e=[]){let t;switch(n){case"Browser":t=Q3(Rt());break;case"Worker":t=`${Q3(Rt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ki}/${r}`}class Twe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return g(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const s of t.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class Dwe{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s4(this),this.idTokenSubscription=new s4(this),this.beforeStateQueue=new Twe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V3,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Zs(t)),this._initializationPromise=this.queue(g(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield cd.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return g(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return g(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return P(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return g(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return g(function*(){var r;try{yield $p(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function awe(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return g(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return g(function*(){const r=e?pe(e):null;return r&&P(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return g(function*(){if(!r._deleted)return e&&P(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(g(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return g(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(g(function*(){yield t.assertedPersistence.setPersistence(Zs(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return g(function*(){if(!t.redirectPersistenceManager){const r=e&&Zs(e)||t._popupRedirectResolver;P(r,t,"argument-error"),t.redirectPersistenceManager=yield cd.create(t,[Zs(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return g(function*(){var r,i;return t._isInitialized&&(yield t.queue(g(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return g(function*(){if(e===t.currentUser)return t.queue(g(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return g(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return g(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function _r(n){return pe(n)}class s4{constructor(e){this.auth=e,this.observer=null,this.addObserver=jB(t=>this.observer=t)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class l4{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}function ox(){return ox=g(function*(n,e){return pn(n,"POST","/v1/accounts:update",e)}),ox.apply(this,arguments)}function lx(){return lx=g(function*(n,e){return Js(n,"POST","/v1/accounts:signInWithPassword",tn(n,e))}),lx.apply(this,arguments)}function Zv(n,e){return cx.apply(this,arguments)}function cx(){return cx=g(function*(n,e){return pn(n,"POST","/v1/accounts:sendOobCode",tn(n,e))}),cx.apply(this,arguments)}function Rwe(n,e){return dx.apply(this,arguments)}function dx(){return dx=g(function*(n,e){return Zv(n,e)}),dx.apply(this,arguments)}function px(){return px=g(function*(n,e){return Js(n,"POST","/v1/accounts:signInWithEmailLink",tn(n,e))}),px.apply(this,arguments)}function gx(){return gx=g(function*(n,e){return Js(n,"POST","/v1/accounts:signInWithEmailLink",tn(n,e))}),gx.apply(this,arguments)}class Wp extends l4{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Wp(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Wp(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return g(function*(){switch(t.signInMethod){case"password":return function Mwe(n,e){return lx.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function Nwe(n,e){return px.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:mr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return g(function*(){switch(r.signInMethod){case"password":return function u4(n,e){return ox.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function Fwe(n,e){return gx.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:mr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function to(n,e){return mx.apply(this,arguments)}function mx(){return mx=g(function*(n,e){return Js(n,"POST","/v1/accounts:signInWithIdp",tn(n,e))}),mx.apply(this,arguments)}class Kp{constructor(e){var t,r,i,s,o,a;const l=yh(vh(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(r=l.oobCode)&&void 0!==r?r:null,d=function $we(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);P(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function zwe(n){const e=yh(vh(n)).link,t=e?yh(vh(e)).deep_link_id:null,r=yh(vh(n)).deep_link_id;return(r?yh(vh(r)).link:null)||r||t||e||n}(e);try{return new Kp(t)}catch(r){return null}}}let d4=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Wp._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=Kp.parseLink(r);return P(i,"argument-error"),Wp._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class ua{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wwe extends ua{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function h4(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=g(function*(n,e){return Js(n,"POST","/v1/accounts:signUp",tn(n,e))}),Ex.apply(this,arguments)}class li{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(function*(){const s=yield zl._fromIdTokenResponse(e,r,i),o=f4(r);return new li({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return g(function*(){yield e._updateTokensIfNecessary(r,!0);const i=f4(r);return new li({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function f4(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class eb extends cr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,eb.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new eb(e,t,r,i)}}function p4(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?eb._fromErrorAndOperation(n,s,e,r):s})}function Tx(n,e){return Dx.apply(this,arguments)}function Dx(){return Dx=g(function*(n,e,t=!1){const r=yield eo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return li._forOperation(n,"link",r)}),Dx.apply(this,arguments)}function Ax(){return Ax=g(function*(n,e,t=!1){var r;const{auth:i}=n,s="reauthenticate";try{const o=yield eo(n,p4(i,s,e,n),t);P(o.idToken,i,"internal-error");const a=Yv(o.idToken);P(a,i,"internal-error");const{sub:l}=a;return P(n.uid===l,i,"user-mismatch"),li._forOperation(n,s,o)}catch(o){throw"auth/user-not-found"===(null===(r=o)||void 0===r?void 0:r.code)&&mr(i,"user-mismatch"),o}}),Ax.apply(this,arguments)}function _4(n,e){return xx.apply(this,arguments)}function xx(){return xx=g(function*(n,e,t=!1){const r="signIn",i=yield p4(n,r,e),s=yield li._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),xx.apply(this,arguments)}function kx(){return kx=g(function*(n,e){return _4(_r(n),e)}),kx.apply(this,arguments)}function nb(n,e,t){var r;P((null===(r=t.url)||void 0===r?void 0:r.length)>0,n,"invalid-continue-uri"),P(void 0===t.dynamicLinkDomain||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(P(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(P(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function Bx(){return Bx=g(function*(n,e,t){const r=pe(n),i={requestType:"PASSWORD_RESET",email:e};t&&nb(r,i,t),yield Rwe(r,i)}),Bx.apply(this,arguments)}function $x(){return $x=g(function*(n,e,t){const r=_r(n),i=yield h4(r,{returnSecureToken:!0,email:e,password:t}),s=yield li._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s}),$x.apply(this,arguments)}const rb="__sak";class v4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rb,"1"),this.storage.removeItem(rb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const pEe=(()=>{class n extends v4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function dEe(){const n=Rt();return ix(n)||Xv(n)}()&&function Iwe(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=r4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Cwe(){return function Fte(){const n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return g(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return g(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),b4=(()=>{class n extends v4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let mEe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return g(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!(null==l?void 0:l.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=g(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function gEe(n){return Promise.all(n.map(function(){var e=g(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function iM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class _Ee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return g(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=iM("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function nn(){return window}function sM(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}function oM(){return(oM=g(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const w4="firebaseLocalStorageDb",ib="firebaseLocalStorage",E4="fbase_key";class Qp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sb(n,e){return n.transaction([ib],e?"readwrite":"readonly").objectStore(ib)}function aM(){const n=indexedDB.open(w4,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ib,{keyPath:E4})}catch(i){t(i)}}),n.addEventListener("success",g(function*(){const r=n.result;r.objectStoreNames.contains(ib)?e(r):(r.close(),yield function CEe(){const n=indexedDB.deleteDatabase(w4);return new Qp(n).toPromise()}(),e(yield aM()))}))})}function C4(n,e,t){return lM.apply(this,arguments)}function lM(){return lM=g(function*(n,e,t){const r=sb(n,!0).put({[E4]:e,value:t});return new Qp(r).toPromise()}),lM.apply(this,arguments)}function cM(){return cM=g(function*(n,e){const t=sb(n,!1).get(e),r=yield new Qp(t).toPromise();return void 0===r?null:r.value}),cM.apply(this,arguments)}function I4(n,e){const t=sb(n,!0).delete(e);return new Qp(t).toPromise()}const SEe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return g(function*(){return t.db||(t.db=yield aM()),t.db})()}_withRetries(t){var r=this;return g(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return g(function*(){return sM()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return g(function*(){t.receiver=mEe._getInstance(function wEe(){return sM()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=g(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=g(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return g(function*(){var r,i;if(t.activeServiceWorker=yield function vEe(){return oM.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new _Ee(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function bEe(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const t=yield aM();return yield C4(t,rb,"1"),yield I4(t,rb),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return g(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(s=>C4(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return g(function*(){const i=yield r._withRetries(s=>function IEe(n,e){return cM.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>I4(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return g(function*(){const r=yield t._withRetries(o=>{const a=sb(o,!1).getAll();return new Qp(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function D4(n){return`__${n}${Math.floor(1e6*Math.random())}`}function ql(n,e){return e?Zs(e):(P(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}D4("rcb"),new Vp(3e4,6e4);class vM extends l4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,t){return to(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zEe(n){return _4(n.auth,new vM(n),n.bypassAuthState)}function WEe(n){const{auth:e,user:t}=n;return P(t,e,"internal-error"),function m4(n,e){return Ax.apply(this,arguments)}(t,new vM(n),n.bypassAuthState)}function qEe(n){return bM.apply(this,arguments)}function bM(){return bM=g(function*(n){const{auth:e,user:t}=n;return P(t,e,"internal-error"),Tx(t,new vM(n),n.bypassAuthState)}),bM.apply(this,arguments)}new Vp(2e3,1e4);const Xp=new Map;class YEe extends class GEe{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=g(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zEe;case"linkViaPopup":case"linkViaRedirect":return qEe;case"reauthViaPopup":case"reauthViaRedirect":return WEe;default:mr(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return g(function*(){let r=Xp.get(t.auth._key());if(!r){try{const s=(yield function QEe(n,e){return TM.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Xp.set(t.auth._key(),r)}return t.bypassAuthState||Xp.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function TM(){return TM=g(function*(n,e){const t=x4(e),r=A4(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),TM.apply(this,arguments)}function XEe(n,e){Xp.set(n._key(),e)}function A4(n){return Zs(n._redirectPersistence)}function x4(n){return Qv("pendingRedirect",n.config.apiKey,n.name)}function M4(n,e){return RM.apply(this,arguments)}function RM(){return RM=g(function*(n,e,t=!1){const r=_r(n),i=ql(r,e),o=yield new YEe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),RM.apply(this,arguments)}class nCe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function rCe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P4(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!P4(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ps(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(R4(e))}saveEventToCache(e){this.cachedEventUids.add(R4(e)),this.lastProcessedEventTime=Date.now()}}function R4(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function P4({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function iCe(n){return OM.apply(this,arguments)}function OM(){return OM=g(function*(n,e={}){return pn(n,"GET","/v1/projects",e)}),OM.apply(this,arguments)}const sCe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oCe=/^https?/;function NM(){return NM=g(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield iCe(n);for(const t of e)try{if(lCe(t))return}catch(r){}mr(n,"unauthorized-domain")}),NM.apply(this,arguments)}function lCe(n){const e=Up(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!oCe.test(t))return!1;if(sCe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const cCe=new Vp(3e4,6e4);function O4(){const n=nn().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let ab=null;function dCe(n){return ab=ab||function uCe(n){return new Promise((e,t)=>{var r,i,s;function o(){O4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O4(),t(ps(n,"network-request-failed"))},timeout:cCe.get()})}if(null===(i=null===(r=nn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=nn().gapi)||void 0===s?void 0:s.load)){const a=D4("iframefcb");return nn()[a]=()=>{gapi.load?o():t(ps(n,"network-request-failed"))},function T4(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ps("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function kEe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw ab=null,e})}(n),ab}const hCe=new Vp(5e3,15e3),gCe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mCe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _Ce(n){const e=n.config;P(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?WA(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Ki},i=mCe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_h(r).slice(1)}`}function FM(){return FM=g(function*(n){const e=yield dCe(n),t=nn().gapi;return P(t,n,"internal-error"),e.open({where:document.body,url:_Ce(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gCe,dontclear:!0},r=>new Promise(function(){var i=g(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=ps(n,"network-request-failed"),l=nn().setTimeout(()=>{o(a)},hCe.get());function c(){nn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),FM.apply(this,arguments)}const vCe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class N4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function F4(n,e,t,r,i,s){P(n.config.authDomain,n,"auth-domain-config-required"),P(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ki,eventId:i};if(e instanceof ua){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",RC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Wwe){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(o.scopes=l.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function ACe({config:n}){return n.emulator?WA(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${_h(a).slice(1)}`}const LM="webStorageSupport",MCe=class xCe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b4,this._completeRedirectFn=M4,this._overrideRedirectResult=XEe}_openPopup(e,t,r,i){var s=this;return g(function*(){var o;la(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=F4(e,t,r,Up(),i);return function ICe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vCe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Rt().toLowerCase();t&&(a=Z3(c)?"_blank":t),X3(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function Ewe(n=Rt()){var e;return Xv(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function TCe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new N4(null);const d=window.open(e||"",a,u);P(d,n,"popup-blocked");try{d.focus()}catch(h){}return new N4(d)}(e,a,iM())})()}_openRedirect(e,t,r,i){var s=this;return g(function*(){return yield s._originValidation(e),function yEe(n){nn().location.href=n}(F4(e,t,r,Up(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(la(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return g(function*(){const r=yield function yCe(n){return FM.apply(this,arguments)}(e),i=new nCe(e);return r.register("authEvent",s=>(P(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(LM,{type:LM},i=>{var s;const o=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[LM];void 0!==o&&t(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function aCe(n){return NM.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r4()||ix()||Xv()}};var B4="@firebase/auth";class kCe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return g(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BM(n=To()){const e=Di(n,"auth");return e.isInitialized()?e.getImmediate():function iwe(n,e){const t=Di(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if($m(t.getOptions(),null!=e?e:{}))return i;mr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:MCe,persistence:[SEe,pEe,b4]})}!function PCe(n){jt(new Pt("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{P(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),P(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i4(n)},u=new Dwe(a,l,c);return function swe(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Zs);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(u,t),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jt(new Pt("auth-internal",e=>{const t=_r(e.getProvider("auth").getImmediate());return new kCe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(B4,"0.20.7",function RCe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),ke(B4,"0.20.7","esm2017")}("Browser");let OCe=(()=>{class n{constructor(t,r){this.router=t,this.user_data_service=r,this.uname="",this.app=Yi(kr_firebase),this.realdb=ta(this.app),this.auth=BM(this.app)}ngOnInit(){}signIn(t,r){var i=this;return g(function*(){yield function eEe(n,e,t){return function Mx(n,e){return kx.apply(this,arguments)}(pe(n),d4.credential(e,t))}(i.auth,t,r).then(o=>{console.log(o.user),console.log("LogedIn"),i.user_data_service.email=t,i.router.navigate(["/home"],{queryParams:{email:t}})}).catch(o=>{alert("Username or Password incorrect"),console.log("There was some error logging in!")})})()}forgotPass(){var t=this;return g(function*(){let r;console.log("forgot password method called"),r=prompt("Enter your email:"),console.log("password reset email:",r),function Xwe(n,e,t){return Bx.apply(this,arguments)}(t.auth,r).then(()=>{console.log("password reset email2:",r),alert("Check your email for a reset password link.")}).catch(i=>{})})()}go_to_register(){this.router.navigate(["/register"]),console.log("Entered Registration Page")}}return n.\u0275fac=function(t){return new(t||n)(v(yt),v(Tl))},n.\u0275cmp=Ue({type:n,selectors:[["app-login"]],decls:22,vars:0,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Email","autofocus",""],["email",""],["type","password","placeholder","Password"],["password",""],["type","button","value","Login",3,"click"],["mat-button","",1,"t-color",2,"border","0px","background-color","rgba(255, 255, 255, 0)",3,"click"],["type","button","value","Register",1,"t-color",3,"click"]],template:function(t,r){if(1&t){const i=yi();M(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),z(5,"LOGIN"),x(),te(6,"input",4,5)(8,"input",6,7)(10,"br"),M(11,"input",8),Le("click",function(){_n(i);const o=Yt(7),a=Yt(9);return r.signIn(o.value,a.value)}),x(),M(12,"button",9),Le("click",function(){return r.forgotPass()}),z(13,"Forgot Password ?"),x(),te(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),M(19,"div",3),z(20," Don't have an account? "),x(),M(21,"input",10),Le("click",function(){return r.go_to_register()}),x()()()()()}},directives:[Xs],styles:[".back[_ngcontent-%COMP%]{background:url(/wynyard/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();function NCe(n,e){1&n&&(M(0,"div"),z(1," Passwords don't match "),x())}let FCe=(()=>{class n{constructor(t,r){this.router=t,this.route=r,this.pass_dont_match=!1,this.app=Yi(kr_firebase),this.auth=BM(this.app)}ngOnInit(){console.log("omkarelectric892@gmail.com".replace(".",""))}register(t,r,i,s,o){if(s==o){this.pass_dont_match=!1;let a=i.replace(".","");Yu(Pi(ta(),"users/"+a),{name:t,username:r,email:i}).then(()=>{console.log("Data updated in realtime database")}).catch(u=>{console.log("There was some error while adding user data in realtime database")}),function Jwe(n,e,t){return $x.apply(this,arguments)}(this.auth,i,s).then(u=>{alert("User Registered successfully"),this.router.navigate(["/login"])}).catch(u=>{})}else this.pass_dont_match=!0}go_to_login(){this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(v(yt),v(na))},n.\u0275cmp=Ue({type:n,selectors:[["app-register"]],decls:26,vars:1,consts:[[1,"login-reg-panel"],[1,"white-panel"],[1,"login-show"],[1,"t-color"],["type","text","placeholder","Name"],["name",""],["type","text","placeholder","Username"],["uname",""],["type","text","placeholder","Email"],["email",""],["type","password","placeholder","Password"],["password",""],["type","password","placeholder","Confirm Password"],["con_password",""],[4,"ngIf"],["type","button","value","Register",3,"click"],[1,"t-color",2,"margin-left","23%"],["type","button","value","Login",1,"t-color",3,"click"]],template:function(t,r){if(1&t){const i=yi();M(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),z(5,"Register"),x(),te(6,"input",4,5)(8,"input",6,7)(10,"input",8,9)(12,"input",10,11)(14,"input",12,13),Bt(16,NCe,2,0,"div",14),M(17,"input",15),Le("click",function(){_n(i);const o=Yt(7),a=Yt(9),l=Yt(11),c=Yt(13),u=Yt(15);return r.register(o.value,a.value,l.value,c.value,u.value)}),x(),te(18,"br")(19,"br")(20,"br"),M(21,"div",16),z(22," Already have an account? "),te(23,"br")(24,"br"),x(),M(25,"input",17),Le("click",function(){return r.go_to_login()}),x()()()()()}2&t&&(ee(16),ge("ngIf",r.pass_dont_match))},directives:[ks],styles:[".back[_ngcontent-%COMP%]{background:url(/wynyard/assets/login_background.jpg);background-size:100% 100%}body[_ngcontent-%COMP%]{font-family:Mukta,sans-serif;height:100vh;min-height:550px;background-image:url(/assets/login_background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;overflow-y:hidden}a[_ngcontent-%COMP%]{text-decoration:none;color:#444}.t-color[_ngcontent-%COMP%]{color:#fff}.login-reg-panel[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);text-align:center;width:70%;right:0;left:0;margin:auto;height:400px}.white-panel[_ngcontent-%COMP%]{background-color:#960808df;height:-moz-fit-content;height:fit-content;position:absolute;top:-45px;width:50%;right:calc(50% - 50px);transition:.3s ease-in-out;z-index:0;box-shadow:0 0 15px 9px #00000096}.login-reg-panel[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:relative;display:none}.login-reg-panel[_ngcontent-%COMP%]{color:#b8b8b8}.login-reg-panel[_ngcontent-%COMP%]   #label-login[_ngcontent-%COMP%], .login-reg-panel[_ngcontent-%COMP%]   #label-register[_ngcontent-%COMP%]{border:1px solid #9E9E9E;padding:5px;width:150px;display:block;text-align:center;border-radius:10px;cursor:pointer;font-weight:600;font-size:18px}.login-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;left:0;position:absolute;text-align:left}.register-info-box[_ngcontent-%COMP%]{width:30%;padding:0 50px;top:20%;right:0;position:absolute;text-align:left}.right-log[_ngcontent-%COMP%]{right:50px!important}.login-show[_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]{z-index:1;transition:.3s ease-in-out;color:#242424;text-align:left;padding:50px}.show-log-panel[_ngcontent-%COMP%]{display:block;opacity:.9}.login-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;height:22px;margin:20px 0;padding:12px;border:1px solid #b5b5b5;outline:none}.login-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;margin-left:28%;float:center;cursor:pointer}.login-show[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 0}.register-show[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-show[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;display:block;margin:20px 0;padding:15px;border:1px solid #b5b5b5;outline:none}.register-show[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{max-width:150px;width:100%;background:#444444;color:#f9f9f9;border:none;padding:10px;text-transform:uppercase;border-radius:2px;float:right;cursor:pointer}.credit[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;color:#3b3b25;margin:0;padding:0;font-family:Arial,sans-serif;text-transform:uppercase;font-size:12px;font-weight:700;letter-spacing:1px;z-index:99}a[_ngcontent-%COMP%]{text-decoration:none;color:#2c7715}"]}),n})();class LCe{constructor(e){this.post=e}}function BCe(n,e){1&n&&te(0,"img",17),2&n&&ge("src",Mt().url,pi)}function UCe(n,e){1&n&&te(0,"video",18),2&n&&ge("src",Mt().url,pi)}const VCe=[{path:"",component:B3},{path:"home",component:B3},{path:"login",component:OCe},{path:"register",component:FCe},{path:"profile",component:Hbe},{path:"add-post",component:(()=>{class n{constructor(t,r,i,s){this.router=t,this.location=r,this.post_service=i,this.user_data=s,this.url="assets/images/prj_logo_colour.png",this.progress=0}ngOnInit(){}go_to_profile(){this.location.back()}onSelectFile(t){const r=t.target.files&&t.target.files[0];if(r){this.current_post_data=new LCe(t.target.files[0]),this.current_post_data.name=t.target.files[0].name,console.log(this.current_post_data.name),console.log(r);var i=new FileReader;i.readAsDataURL(r),r.type.indexOf("image")>-1?this.format="image":r.type.indexOf("video")>-1&&(this.format="video"),this.current_post_data.fileType=this.format,i.onload=s=>{this.url=s.target.result}}}upload_post(t){this.current_post_data.caption=t,this.current_post_data.username=this.user_data.username,this.post_service.Upload_post(this.current_post_data),this.post_service.changeEmitted$.subscribe(r=>this.progress=r)}}return n.\u0275fac=function(t){return new(t||n)(v(yt),v(Ra),v(kS),v(Tl))},n.\u0275cmp=Ue({type:n,selectors:[["app-add-post"]],decls:26,vars:3,consts:[[1,"col"],[1,"row-1"],[1,"back-icon",3,"click"],["align","center",1,"new-post-text"],[1,"row-2"],[1,"preview"],["style","height: 100%; width:100%",3,"src",4,"ngIf"],["style","height: 100%; width:100%","controls","",3,"src",4,"ngIf"],["mat-raised-button","",1,"select-file-button"],["for","new-post","required","",1,"input-file-label"],["type","file","id","new-post","required","",1,"input-file-button",3,"change"],["type","range",3,"value"],[1,"text-caption"],["id","caption",1,"textarea-position"],["caption",""],["mat-raised-button","",1,"upload-button",3,"click"],["mat-raised-button","",1,"cancle-button"],[2,"height","100%","width","100%",3,"src"],["controls","",2,"height","100%","width","100%",3,"src"]],template:function(t,r){if(1&t){const i=yi();M(0,"div")(1,"div",0)(2,"div",1)(3,"mat-icon",2),Le("click",function(){return r.go_to_profile()}),z(4,"keyboard_arrow_left"),x(),M(5,"h2",3),z(6," New Post "),x()(),M(7,"div",4)(8,"div",5),Bt(9,BCe,1,1,"img",6),Bt(10,UCe,1,1,"video",7),x(),M(11,"div")(12,"button",8)(13,"label",9),z(14," Select File "),M(15,"input",10),Le("change",function(o){return r.onSelectFile(o)}),x()()(),te(16,"input",11),M(17,"h3",12),z(18," Caption "),x(),M(19,"textarea",13,14),z(21,"\n                "),x()(),M(22,"button",15),Le("click",function(){_n(i);const o=Yt(20);return r.upload_post(o.value)}),z(23," Upload "),x(),M(24,"button",16),z(25," Cancle "),x()()()()}2&t&&(ee(9),ge("ngIf","image"===r.format&&r.url),ee(1),ge("ngIf","video"===r.format&&r.url),ee(6),ge("value",r.progress))},directives:[Mp,ks,Xs],styles:[".row-1[_ngcontent-%COMP%]{width:100%;float:left;height:5vh;background-color:#7fffd4}.row-2[_ngcontent-%COMP%]{width:98%;float:left;height:90vh;background-color:#fff8dc;margin:2vh}.preview[_ngcontent-%COMP%]{width:46%;height:60%;float:left;margin:2%;background-color:#fff;border:3px solid brown}.select-file-button[_ngcontent-%COMP%]{width:20%;height:8%;margin:4% 2% 2%;float:left;color:azure;background-color:navy;border:2px solid brown;cursor:pointer;text-align:center}.text-caption[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:15%;font-size:x-large}.textarea-position[_ngcontent-%COMP%]{float:left;margin-left:-21.5%;margin-top:20%;width:40%;height:12em}.upload-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-87%;width:38%;background-color:#05b905;font-size:medium}.cancle-button[_ngcontent-%COMP%]{float:left;margin-top:38%;margin-left:-37%;width:38%;background-color:red;font-size:medium}.back-icon[_ngcontent-%COMP%]{margin:.2%;cursor:pointer}.new-post-text[_ngcontent-%COMP%]{margin-top:-2%}.input-file-button[_ngcontent-%COMP%]{display:none}.input-file-label[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;cursor:pointer}"]}),n})()},{path:"ViewPost",component:nbe}];let jCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[xS.forRoot(VCe)],xS]}),n})();const HCe=["*",[["mat-toolbar-row"]]],$Ce=["*","mat-toolbar-row"],zCe=gA(class{constructor(n){this._elementRef=n}});let WCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pe({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),qCe=(()=>{class n extends zCe{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(v(qe),v(ai),v(_e))},n.\u0275cmp=Ue({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&Gi(i,WCe,5),2&t){let s;Rn(s=Pn())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&xr("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Gr],ngContentSelectors:$Ce,decls:2,vars:0,template:function(t,r){1&t&&(Ar(HCe),Qt(0),Qt(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),GCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[qt],qt]}),n})(),KCe=(()=>{class n{constructor(t,r){this.ud=t,this.router=r}ngOnInit(){}logout(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(v(Tl),v(yt))},n.\u0275cmp=Ue({type:n,selectors:[["app-header"]],decls:17,vars:1,consts:[["routerLink","home"],["src","/wynyard/assets/images/wynyard.png","height","70px",1,"icon"],[1,"example-spacer"],["mat-icon-button","",1,"example-icon",3,"matMenuTriggerFor"],["menu","matMenu"],["routerLink","/login","mat-menu-item","",1,"menubutton"],["aria-hidden","false"],["mat-menu-item","",1,"menubutton",3,"click"]],template:function(t,r){if(1&t&&(M(0,"mat-toolbar")(1,"span",0),te(2,"img",1),x(),te(3,"span",2),M(4,"button",3)(5,"mat-icon"),z(6,"menu"),x()()(),M(7,"mat-menu",null,4)(9,"button",5)(10,"mat-icon",6),z(11,"login"),x(),z(12," Login"),x(),M(13,"button",7),Le("click",function(){return r.logout()}),M(14,"mat-icon"),z(15,"exit_to_app"),x(),z(16,"Logout"),x()()),2&t){const i=Yt(8);ee(4),ge("matMenuTriggerFor",i)}},directives:[qCe,_p,Xs,A3,Mp,I3,Np],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(138,3,3,1) 51%,rgba(150,0,133,1) 87%)}.example-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}.menubutton[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(150,0,133,1) 7%,rgba(138,3,3,1) 99%);color:#fff}mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),n})(),YCe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(t,r){1&t&&(M(0,"p"),z(1,"footer works!"),x())},styles:["p[_ngcontent-%COMP%]{background-color:#0ff;height:100px}"]}),n})(),QCe=(()=>{class n{constructor(){this.title="wynyard"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ue({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"maindiv"],[1,"header"],[1,"footer"]],template:function(t,r){1&t&&(M(0,"div",0)(1,"div",1),te(2,"app-header"),x(),te(3,"router-outlet"),M(4,"div",2),te(5,"app-footer"),x()())},directives:[KCe,ES,YCe],styles:[".maindiv[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.maindiv[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),n})();const V4="@firebase/installations",UM="0.5.12",H4=`w:${UM}`,$4="FIS_v2",no=new Zr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function z4(n){return n instanceof cr&&n.code.includes("request-failed")}function VM({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function W4(n){return{token:n.token,requestStatus:2,expiresIn:n0e(n.expiresIn),creationTime:Date.now()}}function jM(n,e){return HM.apply(this,arguments)}function HM(){return HM=g(function*(n,e){const r=(yield e.json()).error;return no.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),HM.apply(this,arguments)}function q4({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function G4(n,{refreshToken:e}){const t=q4(n);return t.append("Authorization",function r0e(n){return`${$4} ${n}`}(e)),t}function $M(n){return zM.apply(this,arguments)}function zM(){return zM=g(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),zM.apply(this,arguments)}function n0e(n){return Number(n.replace("s","000"))}function i0e(n,e){return WM.apply(this,arguments)}function WM(){return WM=g(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=VM(n),i=q4(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:$4,appId:n.appId,sdkVersion:H4})},l=yield $M(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:W4(c.authToken)}}throw yield jM("Create Installation",l)}),WM.apply(this,arguments)}function K4(n){return new Promise(e=>{setTimeout(e,n)})}const o0e=/^[cdef][\w-]{21}$/;function a0e(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function l0e(n){return function s0e(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return o0e.test(t)?t:""}catch(n){return""}}function ud(n){return`${n.appName}!${n.appId}`}const dd=new Map;function Y4(n,e){const t=ud(n);Q4(t,e),function d0e(n,e){const t=function X4(){return!Gl&&"BroadcastChannel"in self&&(Gl=new BroadcastChannel("[Firebase] FID Change"),Gl.onmessage=n=>{Q4(n.data.key,n.data.fid)}),Gl}();t&&t.postMessage({key:n,fid:e}),function Z4(){0===dd.size&&Gl&&(Gl.close(),Gl=null)}()}(t,e)}function Q4(n,e){const t=dd.get(n);if(t)for(const r of t)r(e)}let Gl=null;const Kl="firebase-installations-store";let GM=null;function KM(){return GM||(GM=Wm("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Kl)}})),GM}function lb(n,e){return YM.apply(this,arguments)}function YM(){return YM=g(function*(n,e){const t=ud(n),i=(yield KM()).transaction(Kl,"readwrite"),s=i.objectStore(Kl),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&Y4(n,e.fid),e}),YM.apply(this,arguments)}function QM(n){return XM.apply(this,arguments)}function XM(){return XM=g(function*(n){const e=ud(n),r=(yield KM()).transaction(Kl,"readwrite");yield r.objectStore(Kl).delete(e),yield r.done}),XM.apply(this,arguments)}function Zp(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=g(function*(n,e){const t=ud(n),i=(yield KM()).transaction(Kl,"readwrite"),s=i.objectStore(Kl),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&Y4(n,a.fid),a}),ZM.apply(this,arguments)}function JM(n){return ek.apply(this,arguments)}function ek(){return ek=g(function*(n){let e;const t=yield Zp(n.appConfig,r=>{const i=p0e(r),s=g0e(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),ek.apply(this,arguments)}function p0e(n){return e8(n||{fid:a0e(),registrationStatus:0})}function g0e(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(no.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function m0e(n,e){return tk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:_0e(n)}:{installationEntry:e}}function tk(){return tk=g(function*(n,e){try{const t=yield i0e(n,e);return lb(n.appConfig,t)}catch(t){throw z4(t)&&409===t.customData.serverCode?yield QM(n.appConfig):yield lb(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),tk.apply(this,arguments)}function _0e(n){return nk.apply(this,arguments)}function nk(){return nk=g(function*(n){let e=yield J4(n.appConfig);for(;1===e.registrationStatus;)yield K4(100),e=yield J4(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield JM(n);return r||t}return e}),nk.apply(this,arguments)}function J4(n){return Zp(n,e=>{if(!e)throw no.create("installation-not-found");return e8(e)})}function e8(n){return function y0e(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function v0e(n,e){return rk.apply(this,arguments)}function rk(){return rk=g(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=b0e(n,t),i=G4(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:H4,appId:n.appId}})},l=yield $M(()=>fetch(r,a));if(l.ok)return W4(yield l.json());throw yield jM("Generate Auth Token",l)}),rk.apply(this,arguments)}function b0e(n,{fid:e}){return`${VM(n)}/${e}/authTokens:generate`}function ik(n){return sk.apply(this,arguments)}function sk(){return sk=g(function*(n,e=!1){let t;const r=yield Zp(n.appConfig,s=>{if(!n8(s))throw no.create("not-registered");const o=s.authToken;if(!e&&C0e(o))return s;if(1===o.requestStatus)return t=w0e(n,e),s;{if(!navigator.onLine)throw no.create("app-offline");const a=T0e(s);return t=E0e(n,a),a}});return t?yield t:r.authToken}),sk.apply(this,arguments)}function w0e(n,e){return ok.apply(this,arguments)}function ok(){return ok=g(function*(n,e){let t=yield t8(n.appConfig);for(;1===t.authToken.requestStatus;)yield K4(100),t=yield t8(n.appConfig);const r=t.authToken;return 0===r.requestStatus?ik(n,e):r}),ok.apply(this,arguments)}function t8(n){return Zp(n,e=>{if(!n8(e))throw no.create("not-registered");return function D0e(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function E0e(n,e){return ak.apply(this,arguments)}function ak(){return ak=g(function*(n,e){try{const t=yield v0e(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield lb(n.appConfig,r),t}catch(t){if(!z4(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield lb(n.appConfig,r)}else yield QM(n.appConfig);throw t}}),ak.apply(this,arguments)}function n8(n){return void 0!==n&&2===n.registrationStatus}function C0e(n){return 2===n.requestStatus&&!function I0e(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function T0e(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function lk(){return lk=g(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield JM(e);return r?r.catch(console.error):ik(e).catch(console.error),t.fid}),lk.apply(this,arguments)}function ck(){return ck=g(function*(n,e=!1){const t=n;return yield x0e(t),(yield ik(t,e)).token}),ck.apply(this,arguments)}function x0e(n){return uk.apply(this,arguments)}function uk(){return uk=g(function*(n){const{registrationPromise:e}=yield JM(n);e&&(yield e)}),uk.apply(this,arguments)}function fk(n){return no.create("missing-app-config-values",{valueName:n})}const r8="installations",O0e=n=>{const e=n.getProvider("app").getImmediate(),t=function R0e(n){if(!n||!n.options)throw fk("App Configuration");if(!n.name)throw fk("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw fk(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Di(e,"heartbeat"),_delete:()=>Promise.resolve()}},N0e=n=>{const t=Di(n.getProvider("app").getImmediate(),r8).getImmediate();return{getId:()=>function S0e(n){return lk.apply(this,arguments)}(t),getToken:i=>function A0e(n){return ck.apply(this,arguments)}(t,i)}};(function F0e(){jt(new Pt(r8,O0e,"PUBLIC")),jt(new Pt("installations-internal",N0e,"PRIVATE"))})(),ke(V4,UM),ke(V4,UM,"esm2017");const pk="@firebase/remote-config",yr=new Zr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class G0e{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return g(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function K0e(n=navigator){return n.languages&&n.languages[0]||n.language}class Y0e{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return g(function*(){var r,i,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:K0e()},h={method:"POST",headers:u,body:JSON.stringify(d)},f=fetch(c,h),p=new Promise((T,R)=>{e.signal.addEventListener(()=>{const U=new Error("The operation was aborted.");U.name="AbortError",R(U)})});let m;try{yield Promise.race([f,p]),m=yield f}catch(T){let R="fetch-client-network";throw"AbortError"===(null===(r=T)||void 0===r?void 0:r.name)&&(R="fetch-timeout"),yr.create(R,{originalErrorMessage:null===(i=T)||void 0===i?void 0:i.message})}let _=m.status;const b=m.headers.get("ETag")||void 0;let y,C;if(200===m.status){let T;try{T=yield m.json()}catch(R){throw yr.create("fetch-client-parse",{originalErrorMessage:null===(s=R)||void 0===s?void 0:s.message})}y=T.entries,C=T.state}if("INSTANCE_STATE_UNSPECIFIED"===C?_=500:"NO_CHANGE"===C?_=304:("NO_TEMPLATE"===C||"EMPTY_CONFIG"===C)&&(y={}),304!==_&&200!==_)throw yr.create("fetch-status",{httpStatus:_});return{status:_,eTag:b,config:y}})()}}class Z0e{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return g(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return g(function*(){yield function Q0e(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function X0e(n){if(!(n instanceof cr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+OC(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class tIe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ub(n,e){var t;const r=n.target.error||void 0;return yr.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const Yl="app_namespace_store";class sIe{constructor(e,t,r,i=function iIe(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(ub(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Yl,{keyPath:"compositeKey"})}}catch(r){e(yr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return g(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([Yl],"readonly").objectStore(Yl),c=t.createCompositeKey(e);try{const u=l.get(c);u.onerror=d=>{s(ub(d,"storage-get"))},u.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(u){s(yr.create("storage-get",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}set(e,t){var r=this;return g(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const c=i.transaction([Yl],"readwrite").objectStore(Yl),u=r.createCompositeKey(e);try{const d=c.put({compositeKey:u,value:t});d.onerror=h=>{o(ub(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(yr.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return g(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([Yl],"readwrite").objectStore(Yl),c=t.createCompositeKey(e);try{const u=l.delete(c);u.onerror=d=>{s(ub(d,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){s(yr.create("storage-delete",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class oIe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return g(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function lIe(){return vk.apply(this,arguments)}function vk(){return(vk=g(function*(){if(!wo())return!1;try{return yield gh()}catch(n){return!1}})).apply(this,arguments)}!function aIe(){jt(new Pt("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw yr.create("registration-window");if(!wo())throw yr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw yr.create("registration-project-id");if(!o)throw yr.create("registration-api-key");if(!a)throw yr.create("registration-app-id");const l=new sIe(a,r.name,t=t||"firebase"),c=new oIe(l),u=new Eo(pk);u.logLevel=Se.ERROR;const d=new Y0e(i,Ki,t,s,o,a),h=new Z0e(d,l),f=new G0e(h,l,c,u),p=new tIe(r,f,c,l,u);return function z0e(n){const e=pe(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),ke(pk,"0.3.11"),ke(pk,"0.3.11","esm2017")}();const cIe="/firebase-messaging-sw.js",uIe="/firebase-cloud-messaging-push-scope",a8="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",l8="google.c.a.c_id",hIe="google.c.a.c_l",fIe="google.c.a.ts",pIe="google.c.a.e";var hd=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(hd||(hd={})),hd))();function ro(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gIe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const bk="fcm_token_details_db",c8="fcm_token_object_Store";function _Ie(n){return wk.apply(this,arguments)}function wk(){return wk=g(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(bk))return null;let e=null;return(yield Wm(bk,5,{upgrade:(r=g(function*(i,s,o,a){var l;if(s<2||!i.objectStoreNames.contains(c8))return;const c=a.objectStore(c8),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:ro(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ro(d.auth),p256dh:ro(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ro(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ro(d.auth),p256dh:ro(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ro(d.vapidKey)}}}}),function(s,o,a,l){return r.apply(this,arguments)})})).close(),yield jC(bk),yield jC("fcm_vapid_details_db"),yield jC("undefined"),yIe(e)?e:null;var r}),wk.apply(this,arguments)}function yIe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Ql="firebase-messaging-store";let Ek=null;function Ck(){return Ek||(Ek=Wm("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ql)}})),Ek}function u8(n){return Ik.apply(this,arguments)}function Ik(){return Ik=g(function*(n){const e=Ak(n),r=yield(yield Ck()).transaction(Ql).objectStore(Ql).get(e);if(r)return r;{const i=yield _Ie(n.appConfig.senderId);if(i)return yield Tk(n,i),i}}),Ik.apply(this,arguments)}function Tk(n,e){return Dk.apply(this,arguments)}function Dk(){return Dk=g(function*(n,e){const t=Ak(n),i=(yield Ck()).transaction(Ql,"readwrite");return yield i.objectStore(Ql).put(e,t),yield i.done,e}),Dk.apply(this,arguments)}function wIe(n){return Sk.apply(this,arguments)}function Sk(){return Sk=g(function*(n){const e=Ak(n),r=(yield Ck()).transaction(Ql,"readwrite");yield r.objectStore(Ql).delete(e),yield r.done}),Sk.apply(this,arguments)}function Ak({appConfig:n}){return n.appId}const Tn=new Zr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function CIe(n,e){return xk.apply(this,arguments)}function xk(){return xk=g(function*(n,e){var t;const r=yield Pk(n),i=h8(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(Rk(n.appConfig),s)).json()}catch(a){throw Tn.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw Tn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Tn.create("token-subscribe-no-token");return o.token}),xk.apply(this,arguments)}function IIe(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=g(function*(n,e){var t;const r=yield Pk(n),i=h8(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${Rk(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw Tn.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw Tn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Tn.create("token-update-no-token");return o.token}),Mk.apply(this,arguments)}function d8(n,e){return kk.apply(this,arguments)}function kk(){return kk=g(function*(n,e){var t;const i={method:"DELETE",headers:yield Pk(n)};try{const o=yield(yield fetch(`${Rk(n.appConfig)}/${e}`,i)).json();if(o.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}}),kk.apply(this,arguments)}function Rk({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function Pk(n){return Ok.apply(this,arguments)}function Ok(){return Ok=g(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),Ok.apply(this,arguments)}function h8({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==a8&&(i.web.applicationPubKey=r),i}function DIe(n){return Nk.apply(this,arguments)}function Nk(){return Nk=g(function*(n){const e=yield AIe(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ro(e.getKey("auth")),p256dh:ro(e.getKey("p256dh"))},r=yield u8(n.firebaseDependencies);if(r){if(xIe(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?SIe(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield d8(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return p8(n.firebaseDependencies,t)}return p8(n.firebaseDependencies,t)}),Nk.apply(this,arguments)}function f8(n){return Fk.apply(this,arguments)}function Fk(){return Fk=g(function*(n){const e=yield u8(n.firebaseDependencies);e&&(yield d8(n.firebaseDependencies,e.token),yield wIe(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Fk.apply(this,arguments)}function SIe(n,e){return Lk.apply(this,arguments)}function Lk(){return Lk=g(function*(n,e){try{const t=yield IIe(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Tk(n.firebaseDependencies,r),t}catch(t){throw yield f8(n),t}}),Lk.apply(this,arguments)}function p8(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=g(function*(n,e){const r={token:yield CIe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Tk(n,r),r.token}),Bk.apply(this,arguments)}function AIe(n,e){return Uk.apply(this,arguments)}function Uk(){return Uk=g(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gIe(e)})}),Uk.apply(this,arguments)}function xIe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function g8(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function MIe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function kIe(n,e){!e.data||(n.data=e.data)}(e,n),function RIe(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function PIe(n){return"object"==typeof n&&!!n&&l8 in n}function m8(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Vk(n){return Tn.create("missing-app-config-values",{valueName:n})}m8("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),m8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class NIe{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function OIe(n){if(!n||!n.options)throw Vk("App Configuration Object");if(!n.name)throw Vk("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Vk(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function _8(n){return jk.apply(this,arguments)}function jk(){return jk=g(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(cIe,{scope:uIe}),n.swRegistration.update().catch(()=>{})}catch(t){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}),jk.apply(this,arguments)}function FIe(n,e){return Hk.apply(this,arguments)}function Hk(){return Hk=g(function*(n,e){if(!e&&!n.swRegistration&&(yield _8(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");n.swRegistration=e}}),Hk.apply(this,arguments)}function LIe(n,e){return $k.apply(this,arguments)}function $k(){return $k=g(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=a8)}),$k.apply(this,arguments)}function zk(){return zk=g(function*(n,e){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield LIe(n,null==e?void 0:e.vapidKey),yield FIe(n,null==e?void 0:e.serviceWorkerRegistration),DIe(n)}),zk.apply(this,arguments)}function BIe(n,e,t){return Wk.apply(this,arguments)}function Wk(){return Wk=g(function*(n,e,t){const r=UIe(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[l8],message_name:t[hIe],message_time:t[fIe],message_device_time:Math.floor(Date.now()/1e3)})}),Wk.apply(this,arguments)}function UIe(n){switch(n){case hd.NOTIFICATION_CLICKED:return"notification_open";case hd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qk(){return qk=g(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===hd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(g8(t)):n.onMessageHandler.next(g8(t)));const r=t.data;PIe(r)&&"1"===r[pIe]&&(yield BIe(n,t.messageType,r))}),qk.apply(this,arguments)}const v8="@firebase/messaging",jIe=n=>{const e=new NIe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function VIe(n,e){return qk.apply(this,arguments)}(e,t)),e},HIe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function y8(n,e){return zk.apply(this,arguments)}(e,r)}};function w8(){return Gk.apply(this,arguments)}function Gk(){return(Gk=g(function*(){try{yield gh()}catch(n){return!1}return"undefined"!=typeof window&&wo()&&kC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function qIe(n=To()){return w8().then(e=>{if(!e)throw Tn.create("unsupported-browser")},e=>{throw Tn.create("indexed-db-unsupported")}),Di(pe(n),"messaging").getImmediate()}!function $Ie(){jt(new Pt("messaging",jIe,"PUBLIC")),jt(new Pt("messaging-internal",HIe,"PRIVATE")),ke(v8,"0.9.16"),ke(v8,"0.9.16","esm2017")}();const db="analytics",GIe="firebase_id",QIe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",E8="https://www.googletagmanager.com/gtag/js",Dn=new Eo("@firebase/analytics");function C8(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function XIe(n,e){const t=document.createElement("script");t.src=`${E8}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function JIe(n,e,t,r,i,s){return Qk.apply(this,arguments)}function Qk(){return Qk=g(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield C8(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){Dn.error(a)}n("config",i,s)}),Qk.apply(this,arguments)}function eTe(n,e,t,r,i){return Xk.apply(this,arguments)}function Xk(){return Xk=g(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield C8(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Dn.error(s)}}),Xk.apply(this,arguments)}function rTe(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(E8))return e;return null}const Vr=new Zr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),I8=new class aTe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function lTe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function cTe(n){return Zk.apply(this,arguments)}function Zk(){return Zk=g(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:lTe(r)},s=QIe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw Vr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),Zk.apply(this,arguments)}function uTe(n){return Jk.apply(this,arguments)}function Jk(){return Jk=g(function*(n,e=I8,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Vr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Vr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new fTe;return setTimeout(g(function*(){a.abort()}),void 0!==t?t:6e4),T8({appId:r,apiKey:i,measurementId:s},o,a,e)}),Jk.apply(this,arguments)}function T8(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=g(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=I8){var s,o;const{appId:a,measurementId:l}=n;try{yield dTe(r,e)}catch(c){if(l)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield cTe(n);return i.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!hTe(u)){if(i.deleteThrottleMetadata(a),l)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?OC(t,i.intervalMillis,30):OC(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(a,h),Dn.debug(`Calling attemptFetch again in ${d} millis`),T8(n,h,r,i)}}),eR.apply(this,arguments)}function dTe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Vr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hTe(n){if(!(n instanceof cr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class fTe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let tR,aR;function nR(){return nR=g(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),nR.apply(this,arguments)}function D8(n){aR=n}function S8(n){tR=n}function vTe(){return lR.apply(this,arguments)}function lR(){return lR=g(function*(){var n;if(!wo())return Dn.warn(Vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield gh()}catch(e){return Dn.warn(Vr.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0}),lR.apply(this,arguments)}function cR(){return cR=g(function*(n,e,t,r,i,s,o){var a;const l=uTe(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Dn.error(f)),e.push(l);const c=vTe().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([l,c]);rTe()||XIe(s,u.measurementId),aR&&(i("consent","default",aR),D8(void 0)),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[GIe]=d),i("config",u.measurementId,h),tR&&(i("set",tR),S8(void 0)),u.measurementId}),cR.apply(this,arguments)}class wTe{constructor(e){this.app=e}_delete(){return delete io[this.app.options.appId],Promise.resolve()}}let io={},A8=[];const x8={};let k8,so,hb="dataLayer",uR=!1;function CTe(n,e,t){!function ETe(){const n=[];if(MC()&&n.push("This is a browser extension environment."),kC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Vr.create("invalid-analytics-context",{errorInfo:e});Dn.warn(t.message)}}();const r=n.options.appId;if(!r)throw Vr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Vr.create("no-api-key");Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=io[r])throw Vr.create("already-exists",{id:r});if(!uR){!function ZIe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(hb);const{wrappedGtag:s,gtagCore:o}=function nTe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function tTe(n,e,t,r){function s(){return(s=g(function*(o,a,l){try{"event"===o?yield eTe(n,e,t,a,l):"config"===o?yield JIe(n,e,t,r,a,l):"consent"===o?n("consent","update",l):n("set",a)}catch(c){Dn.error(c)}})).apply(this,arguments)}return function i(o,a,l){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(io,A8,x8,hb,"gtag");so=s,k8=o,uR=!0}return io[r]=function bTe(n,e,t,r,i,s,o){return cR.apply(this,arguments)}(n,A8,x8,e,k8,hb,t),new wTe(n)}function TTe(){return dR.apply(this,arguments)}function dR(){return(dR=g(function*(){if(MC()||!kC()||!wo())return!1;try{return yield gh()}catch(n){return!1}})).apply(this,arguments)}const R8="@firebase/analytics";!function STe(){jt(new Pt(db,(e,{options:t})=>CTe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),jt(new Pt("analytics-internal",function n(e){try{const t=e.getProvider(db).getImmediate();return{logEvent:(r,i,s)=>function DTe(n,e,t,r){n=pe(n),function pTe(n,e,t,r,i){return nR.apply(this,arguments)}(so,io[n.app.options.appId],e,t,r).catch(i=>Dn.error(i))}(t,r,i,s)}}catch(t){throw Vr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ke(R8,"0.8.0"),ke(R8,"0.8.0","esm2017")}();const MTe=new class xTe extends Fv{}(class ATe extends Nv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),da=new Sa("7.4.1"),hR="__angularfire_symbol__analyticsIsSupportedValue",fR="__angularfire_symbol__analyticsIsSupported",pR="__angularfire_symbol__remoteConfigIsSupportedValue",gR="__angularfire_symbol__remoteConfigIsSupported",mR="__angularfire_symbol__messagingIsSupportedValue",_R="__angularfire_symbol__messagingIsSupported";globalThis[fR]||(globalThis[fR]=TTe().then(n=>globalThis[hR]=n).catch(()=>globalThis[hR]=!1)),globalThis[_R]||(globalThis[_R]=w8().then(n=>globalThis[mR]=n).catch(()=>globalThis[mR]=!1)),globalThis[gR]||(globalThis[gR]=lIe().then(n=>globalThis[pR]=n).catch(()=>globalThis[pR]=!1));const fb={async:()=>globalThis[_R],sync:()=>{const n=globalThis[mR];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Xl(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Zl=(n,e)=>{const t=e?[e]:zC(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function fd(){}class O8{constructor(e,t=MTe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class kTe{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fd,{},fd,fd)),t.pipe(fn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new O8(Zone.current)),this.insideAngular=t.run(()=>new O8(Zone.current,Tp)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(I(ie))},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ec(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function RTe(n){return ec().ngZone.runOutsideAngular(()=>n())}function tc(n){return ec().ngZone.run(()=>n())}function PTe(n){return ec(),function OTe(n){return function(t){return(t=t.lift(new kTe(n.ngZone))).pipe(lg(n.outsideAngular),ag(n.insideAngular))}}(ec())(n)}const NTe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),tc(()=>n.apply(void 0,r))},nc=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=tc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fd,{},fd,fd)))),r[s]=NTe(r[s],t));const i=RTe(()=>n.apply(this,r));if(!e){if(i instanceof Je){const s=ec();return i.pipe(lg(s.outsideAngular),ag(s.insideAngular))}return tc(()=>i)}return i instanceof Je?i.pipe(PTe):i instanceof Promise?tc(()=>new Promise((s,o)=>i.then(a=>tc(()=>s(a)),a=>tc(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:tc(()=>i)};class ms{constructor(e){return e}}class rc{constructor(){return zC()}}const vR=new B("angularfire2._apps"),LTe={provide:ms,useFactory:function FTe(n){return n&&1===n.length?n[0]:new ms(To())},deps:[[new De,vR]]},BTe={provide:rc,deps:[[new De,vR]]};function UTe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ms(r)}}let VTe=(()=>{class n{constructor(t){ke("angularfire",da.full,"core"),ke("angularfire",da.full,"app"),ke("angular",YF.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(I(Xc))},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[LTe,BTe]}),n})();function jTe(n,...e){return{ngModule:VTe,providers:[{provide:vR,useFactory:UTe(n),multi:!0,deps:[ie,Qe,Jl,...e]}]}}const HTe=nc(Yi,!0),N8=new Map,$Te={activated:!1,tokenObservers:[]},zTe={initialized:!1,enabled:!1};function gn(n){return N8.get(n)||$Te}function Oi(n,e){N8.set(n,e)}function pb(){return zTe}class YTe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return g(function*(){t.stop();try{t.pending=new Oa,yield function QTe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Oa,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const er=new Zr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function L8(n){if(!gn(n).activated)throw er.create("use-before-activation",{appName:n.name})}function ER(n,e){return CR.apply(this,arguments)}function CR(){return CR=g(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l,c;try{l=yield fetch(n,a)}catch(f){throw er.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==l.status)throw er.create("fetch-status-error",{httpStatus:l.status});try{c=yield l.json()}catch(f){throw er.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw er.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=1e3*Number(u[1]),h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}),CR.apply(this,arguments)}function eDe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Jp="firebase-app-check-store";let _b=null;function U8(){return _b||(_b=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(er.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Jp,{keyPath:"compositeKey"})}}catch(r){e(er.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),_b)}function IR(){return IR=g(function*(n,e){const r=(yield U8()).transaction(Jp,"readwrite"),s=r.objectStore(Jp).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(er.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),IR.apply(this,arguments)}const eg=new Eo("@firebase/app-check");function $8(n,e){return wo()?function iDe(n,e){return function V8(n,e){return IR.apply(this,arguments)}(function H8(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{eg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function z8(){return pb().enabled}function W8(){return AR.apply(this,arguments)}function AR(){return AR=g(function*(){const n=pb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AR.apply(this,arguments)}const uDe={error:"UNKNOWN_ERROR"};function dDe(n){return Um.encodeString(JSON.stringify(n),!1)}function yb(n){return xR.apply(this,arguments)}function xR(){return xR=g(function*(n,e=!1){const t=n.app;L8(t);const r=gn(t);let s,i=r.token;if(!i){const l=yield r.cachedTokenPromise;l&&vb(l)&&(i=l)}if(!e&&i&&vb(i))return{token:i.token};let a,o=!1;if(z8()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ER(eDe(t,yield W8()),n.heartbeatServiceProvider).then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0);const l=yield r.exchangeTokenPromise;return yield $8(t,l),Oi(t,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=yield r.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?eg.warn(l.message):eg.error(l),s=l}return i?(a={token:i.token},Oi(t,Object.assign(Object.assign({},r),{token:i})),yield $8(t,i)):a=fDe(s),o&&G8(t,a),a}),xR.apply(this,arguments)}function kR(n,e){const t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Oi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function q8(n){const{app:e}=n,t=gn(e);let r=t.tokenRefresher;r||(r=function hDe(n){const{app:e}=n;return new YTe(g(function*(){let r;if(r=gn(e).token?yield yb(n,!0):yield yb(n),r.error)throw r.error}),()=>!0,()=>{const t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Oi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function G8(n,e){const t=gn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function vb(n){return n.expireTimeMillis-Date.now()>0}function fDe(n){return{token:dDe(uDe),error:n}}class pDe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gn(this.app);for(const t of e)kR(this.app,t.next);return Promise.resolve()}}const tK="app-check-internal";!function ADe(){jt(new Pt("app-check",n=>function gDe(n,e){return new pDe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tK).initialize()})),jt(new Pt(tK,n=>function mDe(n){return{getToken:e=>yb(n,e),addTokenListener:e=>function MR(n,e,t,r){const{app:i}=n,s=gn(i),o={next:t,error:r,type:e};if(Oi(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&vb(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),q8(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>q8(n))}(n,"INTERNAL",e),removeTokenListener:e=>kR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),ke("@firebase/app-check","0.5.12")}();class pd{constructor(){return Zl("app-check")}}"undefined"!=typeof window&&window;class FR{constructor(e){return e}}class tg{constructor(){return Zl("auth")}}const LR=new B("angularfire2.auth-instances");function ODe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new FR(r)}}const NDe={provide:tg,deps:[[new De,LR]]},FDe={provide:FR,useFactory:function PDe(n,e){const t=Xl("auth",n,e);return t&&new FR(t)},deps:[[new De,LR],ms]};let LDe=(()=>{class n{constructor(){ke("angularfire",da.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[FDe,NDe]}),n})();function BDe(n,...e){return{ngModule:LDe,providers:[{provide:LR,useFactory:ODe(n),multi:!0,deps:[ie,Qe,Jl,rc,[new De,pd],...e]}]}}const UDe=nc(BM,!0);class BR{constructor(e){return e}}const iK="database",UR=new B("angularfire2.database-instances");function HDe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new BR(r)}}const $De={provide:class VDe{constructor(){return Zl(iK)}},deps:[[new De,UR]]},zDe={provide:BR,useFactory:function jDe(n,e){const t=Xl(iK,n,e);return t&&new BR(t)},deps:[[new De,UR],ms]};let WDe=(()=>{class n{constructor(){ke("angularfire",da.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[zDe,$De]}),n})();function qDe(n,...e){return{ngModule:WDe,providers:[{provide:UR,useFactory:HDe(n),multi:!0,deps:[ie,Qe,Jl,rc,[new De,tg],[new De,pd],...e]}]}}const GDe=nc(ta,!0);class VR{constructor(e){return e}}const sK="firestore",jR=new B("angularfire2.firestore-instances");function QDe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new VR(r)}}const XDe={provide:class KDe{constructor(){return Zl(sK)}},deps:[[new De,jR]]},ZDe={provide:VR,useFactory:function YDe(n,e){const t=Xl(sK,n,e);return t&&new VR(t)},deps:[[new De,jR],ms]};let JDe=(()=>{class n{constructor(){ke("angularfire",da.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[ZDe,XDe]}),n})();function eSe(n,...e){return{ngModule:JDe,providers:[{provide:jR,useFactory:QDe(n),multi:!0,deps:[ie,Qe,Jl,rc,[new De,tg],[new De,pd],...e]}]}}const tSe=nc(NH,!0),$R="functions";class oSe{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return g(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return g(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return g(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return g(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const zR="us-central1";class lSe{constructor(e,t,r,i,s=zR,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new oSe(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=zR}catch(a){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const cK="@firebase/functions";function ySe(n=To(),e=zR){return Di(pe(n),$R).getImmediate({identifier:e})}!function _Se(n,e){jt(new Pt($R,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),l=r.getProvider("app-check-internal");return new lSe(s,o,a,l,i,n)},"PUBLIC").setMultipleInstances(!0)),ke(cK,"0.8.4",e),ke(cK,"0.8.4","esm2017")}(fetch.bind(self));class GR{constructor(e){return e}}const dK="functions",KR=new B("angularfire2.functions-instances");function wSe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new GR(r)}}const ESe={provide:class vSe{constructor(){return Zl(dK)}},deps:[[new De,KR]]},CSe={provide:GR,useFactory:function bSe(n,e){const t=Xl(dK,n,e);return t&&new GR(t)},deps:[[new De,KR],ms]};let ISe=(()=>{class n{constructor(){ke("angularfire",da.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[CSe,ESe]}),n})();function TSe(n,...e){return{ngModule:ISe,providers:[{provide:KR,useFactory:wSe(n),multi:!0,deps:[ie,Qe,Jl,rc,[new De,tg],[new De,pd],...e]}]}}const DSe=nc(ySe,!0);class YR{constructor(e){return e}}const hK="messaging",QR=new B("angularfire2.messaging-instances");function xSe(n){return(e,t)=>{if(!fb.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new YR(r)}}const MSe={provide:class SSe{constructor(){return Zl(hK)}},deps:[[new De,QR]]},kSe={provide:YR,useFactory:function ASe(n,e){if(!fb.sync())return null;const t=Xl(hK,n,e);return t&&new YR(t)},deps:[[new De,QR],ms]};let RSe=(()=>{class n{constructor(){ke("angularfire",da.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[kSe,MSe,{provide:_m,useValue:fb.async,multi:!0}]}),n})();function PSe(n,...e){return{ngModule:RSe,providers:[{provide:QR,useFactory:xSe(n),multi:!0,deps:[ie,Qe,Jl,rc,...e]}]}}const OSe=nc(qIe,!0);class XR{constructor(e){return e}}const fK="storage",ZR=new B("angularfire2.storage-instances");function LSe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new XR(r)}}const BSe={provide:class NSe{constructor(){return Zl(fK)}},deps:[[new De,ZR]]},USe={provide:XR,useFactory:function FSe(n,e){const t=Xl(fK,n,e);return t&&new XR(t)},deps:[[new De,ZR],ms]};let VSe=(()=>{class n{constructor(){ke("angularfire",da.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({providers:[USe,BSe]}),n})();function jSe(n,...e){return{ngModule:VSe,providers:[{provide:ZR,useFactory:LSe(n),multi:!0,deps:[ie,Qe,Jl,rc,[new De,tg],[new De,pd],...e]}]}}const HSe=nc(l0,!0);let pK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[Pa,kp,qv,Bv,Gv,Wv]]}),n})(),JR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[Pa,Gv,kp,BA]]}),n})(),gK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[Pa,xS,JR,kp,JR,Bv,pK,Fbe,GCe,qv,Wv]]}),n})(),$Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n}),n.\u0275inj=Te({imports:[[Pa,kp,Gv,gK,Wv,qv,Bv,BA]]}),n})(),zSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Me({type:n,bootstrap:[QCe]}),n.\u0275inj=Te({providers:[],imports:[[RB,jCe,S_e,$Se,gK,JR,pK,jTe(()=>HTe(kr_firebase)),BDe(()=>UDe()),qDe(()=>GDe()),eSe(()=>tSe()),TSe(()=>DSe()),PSe(()=>OSe()),jSe(()=>HSe()),kp,Gv,qv,Bv,Wv,BA]]}),n})();(function rJ(){qL=!1})(),yte().bootstrapModule(zSe).catch(n=>console.error(n))}},vr=>{vr(vr.s=171)}]);